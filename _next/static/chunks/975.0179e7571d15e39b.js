(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[975],{4470:function(h){"use strict";var v=Object.prototype.hasOwnProperty,_=Object.prototype.toString,b=Object.defineProperty,A=Object.getOwnPropertyDescriptor,isArray=function(h){return"function"==typeof Array.isArray?Array.isArray(h):"[object Array]"===_.call(h)},isPlainObject=function(h){if(!h||"[object Object]"!==_.call(h))return!1;var b,A=v.call(h,"constructor"),S=h.constructor&&h.constructor.prototype&&v.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!A&&!S)return!1;for(b in h);return void 0===b||v.call(h,b)},setProperty=function(h,v){b&&"__proto__"===v.name?b(h,v.name,{enumerable:!0,configurable:!0,value:v.newValue,writable:!0}):h[v.name]=v.newValue},getProperty=function(h,_){if("__proto__"===_){if(!v.call(h,_))return;if(A)return A(h,_).value}return h[_]};h.exports=function extend(){var h,v,_,b,A,S,C=arguments[0],w=1,O=arguments.length,L=!1;for("boolean"==typeof C&&(L=C,C=arguments[1]||{},w=2),(null==C||"object"!=typeof C&&"function"!=typeof C)&&(C={});w<O;++w)if(h=arguments[w],null!=h)for(v in h)_=getProperty(C,v),C!==(b=getProperty(h,v))&&(L&&b&&(isPlainObject(b)||(A=isArray(b)))?(A?(A=!1,S=_&&isArray(_)?_:[]):S=_&&isPlainObject(_)?_:{},setProperty(C,{name:v,newValue:extend(L,S,b)})):void 0!==b&&setProperty(C,{name:v,newValue:b}));return C}},9821:function(h,v,_){"use strict";let b=_(4579).parse,A=_(7799).compile,S=_(7094).segment,C=_(1105);h.exports={parse:b,compile:A,segment:S,hls:C}},7799:function(h){"use strict";function CompilerError(h,v){this.message=h,this.error=v}function convertTimestamp(h){let v=pad(Math.floor(h/60/60),2),_=pad(Math.floor(h/60)%60,2),b=pad(Math.floor(h%60),2),A=pad(Math.floor(1e3*(h%1).toFixed(4)),3);return`${v}:${_}:${b}.${A}`}function pad(h,v){let _=`${h}`;for(;_.length<v;)_=`0${_}`;return _}CompilerError.prototype=Object.create(Error.prototype),h.exports={CompilerError,compile:function(h){if(!h)throw new CompilerError("Input must be non-null");if("object"!=typeof h)throw new CompilerError("Input must be an object");if(Array.isArray(h))throw new CompilerError("Input cannot be array");if(!h.valid)throw new CompilerError("Input must be valid");let v="WEBVTT\n";if(h.meta){if("object"!=typeof h.meta||Array.isArray(h.meta))throw new CompilerError("Metadata must be an object");Object.entries(h.meta).forEach(h=>{if("string"!=typeof h[1])throw new CompilerError(`Metadata value for "${h[0]}" must be string`);v+=`${h[0]}: ${h[1]}
`})}let _=null;return h.cues.forEach((h,b)=>{if(_&&_>h.start)throw new CompilerError(`Cue number ${b} is not in chronological order`);_=h.start,v+="\n"+function(h){if("object"!=typeof h)throw new CompilerError("Cue malformed: not of type object");if("string"!=typeof h.identifier&&"number"!=typeof h.identifier&&null!==h.identifier)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(h)}`);if(isNaN(h.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(h)}`);if(isNaN(h.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(h)}`);if(h.start>=h.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(h)}`);if("string"!=typeof h.text)throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(h)}`);if("string"!=typeof h.styles)throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(h)}`);let v="";h.identifier.length>0&&(v+=`${h.identifier}
`);let _=convertTimestamp(h.start),b=convertTimestamp(h.end);return v+(`${_} --> ${b}`+(h.styles?` ${h.styles}`:""))+`
${h.text}`}(h)+"\n"}),v}}},1105:function(h,v,_){"use strict";let b=_(7094).segment;function pad(h,v){let _="0".repeat(Math.max(0,v-h.toString().length));return`${_}${h}`}function printableTimestamp(h){let v=(h%1).toFixed(3);h=Math.round(h-v);let _=Math.floor(h/3600),b=Math.floor((h-3600*_)/60),A=h-3600*_-60*b,S=`${pad(_,2)}:`;return`${S}${pad(b,2)}:${pad(A,2)}.${pad(1e3*v,3)}`}h.exports={hlsSegment:function(h,v,_){void 0===_&&(_="900000");let A=b(h,v),S=[];return A.forEach((h,v)=>{let b=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${_},LOCAL:00:00:00.000

${function(h){let v=[];return h.forEach(h=>{v.push(function(h){let v=[];h.identifier&&v.push(h.identifier);let _=printableTimestamp(h.start),b=printableTimestamp(h.end),A=h.styles?`${h.styles}`:"";return v.push(`${_} --> ${b} ${A}`),v.push(h.text),v.join("\n")}(h))}),v.join("\n\n")}(h.cues)}
`,A=`${v}.vtt`;S.push({filename:A,content:b})}),S},hlsSegmentPlaylist:function(h,v){let _;let A=b(h,v),S=function(h){let v=[];return h.forEach((h,_)=>{v.push(`#EXTINF:${h.duration.toFixed(5)},
${_}.vtt`)}),v.join("\n")}(A),C=Math.round((_=0,A.forEach(h=>{h.duration>_&&(_=h.duration)}),_)),w=`#EXTM3U
#EXT-X-TARGETDURATION:${C}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${S}
#EXT-X-ENDLIST
`;return w}}},4579:function(h){"use strict";function ParserError(h,v){this.message=h,this.error=v}ParserError.prototype=Object.create(Error.prototype);let v=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parseTimestamp(h){let _=h.match(v);return 3600*parseFloat(_[1]||0)+(60*parseFloat(_[2])+parseFloat(_[3]))}h.exports={ParserError,parse:function(h,_){_||(_={});let{meta:b=!1,strict:A=!0}=_;if("string"!=typeof h)throw new ParserError("Input must be a string");h=(h=(h=h.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n");let S=h.split("\n\n"),C=S.shift();if(!C.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');let w=C.split("\n"),O=w[0].replace("WEBVTT","");if(O.length>0&&" "!==O[0]&&"	"!==O[0])throw new ParserError("Header comment must start with space or tab");if(0===S.length&&1===w.length)return{valid:!0,strict:A,cues:[],errors:[]};if(!b&&w.length>1&&""!==w[1])throw new ParserError("Missing blank line after signature");let{cues:L,errors:M}=function(h,_){let b=[],A=h.map((h,A)=>{try{return function(h,_,b){var A,S;let C="",w=0,O=.01,L="",M="",F=h.split("\n").filter(Boolean);if(F.length>0&&F[0].trim().startsWith("NOTE"))return null;if(1===F.length&&!F[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${_})`);if(F.length>1&&!(F[0].includes("-->")||F[1].includes("-->"))){let h=`Cue identifier needs to be followed by timestamp (cue #${_})`;throw new ParserError(h)}F.length>1&&F[1].includes("-->")&&(C=F.shift());let U="string"==typeof F[0]&&F[0].split(" --> ");if(2!==U.length||(A=U[0],!v.test(A))||(S=U[1],!v.test(S)))throw new ParserError(`Invalid cue timestamp (cue #${_})`);if(w=parseTimestamp(U[0]),O=parseTimestamp(U[1]),b){if(w>O)throw new ParserError(`Start timestamp greater than end (cue #${_})`);if(O<=w)throw new ParserError(`End must be greater than start (cue #${_})`)}if(!b&&O<w)throw new ParserError(`End must be greater or equal to start when not strict (cue #${_})`);return M=U[1].replace(v,"").trim(),F.shift(),!!(L=F.join("\n"))&&{identifier:C,start:w,end:O,text:L,styles:M}}(h,A,_)}catch(h){return b.push(h),null}}).filter(Boolean);return{cues:A,errors:b}}(S,A);if(A&&M.length>0)throw M[0];let F=b?function(h){let v={};return h.slice(1).forEach(h=>{let _=h.indexOf(":"),b=h.slice(0,_).trim(),A=h.slice(_+1).trim();v[b]=A}),Object.keys(v).length>0?v:null}(w):null,U={valid:0===M.length,strict:A,cues:L,errors:M};return b&&(U.meta=F),U}}},7094:function(h,v,_){"use strict";let b=_(4579).parse;h.exports={segment:function(h,v){v=v||10;let _=b(h),A=[],S=[],C=null,w=0,O=0;return _.cues.forEach((h,b)=>{let L=0===b,M=b===_.cues.length-1,F=h.start,U=h.end,$=M?1/0:_.cues[b+1].start,G=L?U:U-F,j=L?0:F-_.cues[b-1].end;w=w+G+j,A.length,C&&(S.push(C),w+=C.end-O,C=null),S.push(h);let Q=$-U<v&&j<v&&w>v;if(function(h,v,_,b){return(b<=v||b+(v-b%v)+h<_)&&_-h>=v}(O,v,$,j)){var X,K,Z,J;let h;let _=(X=v,K=w,Z=O,h=X,K>X&&(h=(J=K-X)+(X-J%X)),h=M?parseFloat((U-Z).toFixed(2)):Math.round(h));A.push({duration:_,cues:S}),O+=_,w=0,S=[]}else Q=!1;Q&&(C=h)}),A}}},4887:function(h,v){!function(h){"use strict";function t(h){return null==h}function r(h){throw Error("Argument "+h+" is empty.")}function e(h){return"function"==typeof h&&"getType"in h}function i(h){throw Error("Argument "+h+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(h,v){if(null==h)throw Error("Argument contains array with empty element at index "+v);if(null==h.getType)throw Error("Argument contains array with invalid element at index "+v+', it should be an action-creator instance from "typesafe-actions"')}function u(h){return"string"==typeof h||"symbol"==typeof h}function c(h){throw Error("Argument "+h+" is invalid, it should be an action type of type: string | symbol")}function f(h,v){if(null==h)throw Error("Argument contains array with empty element at index "+v);if("string"!=typeof h&&"symbol"!=typeof h)throw Error("Argument contains array with invalid element at index "+v+", it should be of type: string | symbol")}function s(h,v,_,b){return t(h)&&r(1),u(h)||i(1),{type:h,payload:v,meta:_,error:b}}function y(h,v){return t(h)&&r(1),u(h)||c(1),Object.assign(function(){var _=null!=v?v.apply(void 0,arguments):void 0;return Object.assign({type:h},_)},{getType:function(){return h},toString:function(){return h}})}function l(h,v,_){return t(h)&&r(1),u(h)||c(1),function(){return y(h,function(){var h=arguments.length<=0?void 0:arguments[0],b=arguments.length<=1?void 0:arguments[1];return null==v&&null==_||(h=null!=v?v.apply(void 0,arguments):void 0,b=null!=_?_.apply(void 0,arguments):void 0),Object.assign({},void 0!==h&&{payload:h},{},void 0!==b&&{meta:b})})}}function p(h){return t(h)&&r(1),e(h)||i(1),h.getType()}function d(h,v){return t(h)&&r(1),u(h)||c(1),Object.assign(null!=v?v(h):function(){return{type:h}},{getType:function(){return h},toString:function(){return h}})}h.action=s,h.createAction=l,h.createAsyncAction=function(h,v,_,b){return function(){var A=[h,v,_,b].map(function(h,v){return Array.isArray(h)?l(h[0],h[1],h[2])():"string"==typeof h||"symbol"==typeof h?l(h)():void(v<3&&function(h){throw Error("Argument "+h+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(v))});return{request:A[0],success:A[1],failure:A[2],cancel:A[3]}}},h.createCustomAction=y,h.createReducer=function n(h,v){void 0===v&&(v={});var _=Object.assign({},v),o=function(v,b){var A=Array.isArray(v)?v:[v],S={};return A.map(function(h,v){return e(h)?p(h):u(h)?h:function(h){throw Error("Argument "+h+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(v+1)}).forEach(function(h){return S[h]=b}),n(h,Object.assign({},_,{},S))};return Object.assign(function(v,b){if(void 0===v&&(v=h),_.hasOwnProperty(b.type)){var A=_[b.type];if("function"!=typeof A)throw Error('Reducer under "'+b.type+'" key is not a valid reducer');return A(v,b)}return v},{handlers:Object.assign({},_),handleAction:o,handleType:o})},h.deprecated={createAction:function(h,v){return Object.assign(null==v?function(){return s(h)}:v(s.bind(null,h)),{getType:function(){return h},toString:function(){return h}})},createCustomAction:d,createStandardAction:function(h){return t(h)&&r(1),u(h)||c(1),Object.assign(function(){return d(h,function(h){return function(v,_){return{type:h,payload:v,meta:_}}})},{map:function(v){return d(h,function(h){return function(_,b){return Object.assign(v(_,b),{type:h})}})}})}},h.getType=p,h.isActionOf=function(h,v){t(h)&&r(1);var _=Array.isArray(h)?h:[h];_.forEach(o);var u=function(h){return _.some(function(v){return h.type===v.getType()})};return void 0===v?u:u(v)},h.isOfType=function(h,v){t(h)&&r(1);var _=Array.isArray(h)?h:[h];_.forEach(f);var o=function(h){return _.includes(h.type)};return void 0===v?o:o(v)}}(v)},5975:function(h,v,_){"use strict";let b,A,S,C,w,O,L;_.r(v),_.d(v,{Helpers:function(){return uY},Image:function(){return Ce},Primitives:function(){return nM.default},Scroll:function(){return Xt},Slider:function(){return br},Viewer:function(){return Ba},default:function(){return uQ}});var M,F,U,$,G,j,Q,X,K,Z,J,en,ei,ea,eo,es,el,ec,eu,ed,ep,eh,em,ef,eg,eE,ev,eT,ey,e_,eb,eA,ex,eS,eC,ek,ew,eI,eN,eO,eR,eL,eD,eP,eM,eF,eB,eH,eU,ez,e$={};_.r(e$),_.d(e$,{boolean:function(){return nj},booleanish:function(){return nV},commaOrSpaceSeparated:function(){return nX},commaSeparated:function(){return nQ},number:function(){return nq},overloadedBoolean:function(){return nW},spaceSeparated:function(){return nY}});var eG={};_.r(eG),_.d(eG,{attentionMarkers:function(){return aL},contentInitial:function(){return ak},disable:function(){return aD},document:function(){return aC},flow:function(){return aI},flowInitial:function(){return aw},insideSpan:function(){return aR},string:function(){return aN},text:function(){return aO}});var ej=_(8422),eV=_(7294);let eW=(0,eV.createContext)(null),eq={didCatch:!1,error:null};let ErrorBoundary=class ErrorBoundary extends eV.Component{constructor(h){super(h),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=eq}static getDerivedStateFromError(h){return{didCatch:!0,error:h}}resetErrorBoundary(){let{error:h}=this.state;if(null!==h){for(var v,_,b=arguments.length,A=Array(b),S=0;S<b;S++)A[S]=arguments[S];null===(v=(_=this.props).onReset)||void 0===v||v.call(_,{args:A,reason:"imperative-api"}),this.setState(eq)}}componentDidCatch(h,v){var _,b;null===(_=(b=this.props).onError)||void 0===_||_.call(b,h,v)}componentDidUpdate(h,v){let{didCatch:_}=this.state,{resetKeys:b}=this.props;if(_&&null!==v.error&&function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return h.length!==v.length||h.some((h,_)=>!Object.is(h,v[_]))}(h.resetKeys,b)){var A,S;null===(A=(S=this.props).onReset)||void 0===A||A.call(S,{next:b,prev:h.resetKeys,reason:"keys"}),this.setState(eq)}}render(){let{children:h,fallbackRender:v,FallbackComponent:_,fallback:b}=this.props,{didCatch:A,error:S}=this.state,C=h;if(A){let h={error:S,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof v)C=v(h);else if(_)C=(0,eV.createElement)(_,h);else if(null===b||(0,eV.isValidElement)(b))C=b;else throw S}return(0,eV.createElement)(eW.Provider,{value:{didCatch:A,error:S,resetErrorBoundary:this.resetErrorBoundary}},C)}};var eY=_(6744),eQ=Object.defineProperty,__defNormalProp=(h,v,_)=>v in h?eQ(h,v,{enumerable:!0,configurable:!0,writable:!0,value:_}):h[v]=_,__publicField=(h,v,_)=>(__defNormalProp(h,"symbol"!=typeof v?v+"":v,_),_);let eX=[];Object.freeze(eX);let eK={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:eX,motivation:null,label:null,thumbnail:eX,summary:null,requiredStatement:null,metadata:eX,rights:null,provider:eX,items:eX,seeAlso:eX,homepage:eX,logo:eX,rendering:eX,service:eX},eZ={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:eX,motivation:null,thumbnail:eX,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eX,rights:null,navDate:null,provider:eX,items:eX,annotations:eX,seeAlso:eX,homepage:eX,logo:eX,partOf:eX,rendering:eX,service:eX,duration:0,height:0,width:0},eJ={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:eX,motivation:null,thumbnail:eX,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eX,rights:null,navDate:null,provider:eX,items:eX,annotations:eX,seeAlso:eX,homepage:eX,logo:eX,partOf:eX,rendering:eX,service:eX,services:eX},e0={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:eX,behavior:eX,homepage:eX,items:eX,label:null,logo:eX,metadata:eX,motivation:null,navDate:null,provider:eX,partOf:eX,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:eX,requiredStatement:null,rights:null,seeAlso:eX,service:eX,services:eX,start:null,structures:eX,summary:null,thumbnail:eX,viewingDirection:"left-to-right"},e1={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:eX,motivation:null,thumbnail:eX,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eX,rights:null,navDate:null,provider:eX,items:eX,annotations:eX,seeAlso:eX,homepage:eX,logo:eX,partOf:eX,rendering:eX,service:eX,start:null,supplementary:null,viewingDirection:"left-to-right"},e2={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:eX,seeAlso:eX,homepage:eX};function ensureArray$1(h){return Array.isArray(h)?h:[h]}let e3=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];let Traverse$1=class Traverse$1{constructor(h,v={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...h},this.options={allowUndefinedReturn:!1,...v}}static all(h){return new Traverse$1({collection:[h],manifest:[h],canvas:[h],annotationCollection:[h],annotationPage:[h],annotation:[h],contentResource:[h],choice:[h],range:[h],service:[h]})}traverseDescriptive(h){return h.thumbnail&&(h.thumbnail=h.thumbnail.map(h=>this.traverseType(h,this.traversals.contentResource))),h.provider&&(h.provider=h.provider.map(h=>this.traverseAgent(h))),h}traverseLinking(h){return h.seeAlso&&(h.seeAlso=h.seeAlso.map(h=>this.traverseType(h,this.traversals.contentResource))),h.service&&(h.service=ensureArray$1(h.service).map(h=>this.traverseType(h,this.traversals.service))),h.services&&(h.services=h.services.map(h=>this.traverseType(h,this.traversals.service))),h.logo&&(h.logo=h.logo.map(h=>this.traverseType(h,this.traversals.contentResource))),h.homepage&&(h.homepage=h.homepage.map(h=>this.traverseType(h,this.traversals.contentResource))),h.partOf&&(h.partOf=h.partOf.map(h=>"string"!=typeof h&&h.type?"Canvas"===h.type?this.traverseType(h,this.traversals.canvas):"AnnotationCollection"===h.type?this.traverseType(h,this.traversals.annotationCollection):"Collection"===h.type?this.traverseType(h,this.traversals.collection):this.traverseType(h,this.traversals.contentResource):this.traverseType(h,this.traversals.contentResource))),h.start&&(h.start=h.start?this.traverseType(h.start,this.traversals.canvas):null),h.rendering&&(h.rendering=h.rendering.map(h=>this.traverseType(h,this.traversals.contentResource))),h.supplementary&&(h.supplementary=h.supplementary.map(h=>this.traverseType(h,this.traversals.contentResource))),h}traverseCollectionItems(h){return h.items&&h.items.map(h=>"Collection"===h.type?this.traverseCollection(h):this.traverseManifest(h)),h}traverseCollection(h){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(h))))),this.traversals.collection)}traverseManifestItems(h){return h.items&&(h.items=h.items.map(h=>this.traverseCanvas(h))),h}traverseManifestStructures(h){return h.structures&&(h.structures=h.structures.map(h=>this.traverseRange(h))),h}traverseManifest(h){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(h)))))),this.traversals.manifest)}traverseCanvasItems(h){return h.items=(h.items||[]).map(h=>this.traverseAnnotationPage(h)),h}traverseInlineAnnotationPages(h){return"string"!=typeof h&&h&&h.annotations&&(h.annotations=h.annotations.map(h=>this.traverseAnnotationPage(h))),h}traverseCanvas(h){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(h))))),this.traversals.canvas)}traverseAnnotationPageItems(h){return h.items&&(h.items=h.items.map(h=>this.traverseAnnotation(h))),h}traverseAnnotationPage(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(h))),this.traversals.annotationPage)}traverseAnnotationBody(h){return Array.isArray(h.body)?h.body=h.body.map(h=>this.traverseContentResource(h)):h.body&&(h.body=this.traverseContentResource(h.body)),h}traversePosterCanvas(h){return h.posterCanvas&&(h.posterCanvas=this.traverseCanvas(h.posterCanvas)),h.placeholderCanvas&&(h.placeholderCanvas=this.traverseCanvas(h.placeholderCanvas)),h.accompanyingCanvas&&(h.accompanyingCanvas=this.traverseCanvas(h.accompanyingCanvas)),h}traverseAnnotation(h){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(h)),this.traversals.annotation)}traverseContentResourceLinking(h){return"string"!=typeof h&&h&&h&&h.service&&(h.service=ensureArray$1(h.service||[]).map(h=>this.traverseType(h,this.traversals.service))),h}traverseContentResource(h){return"Choice"===h.type&&(h.items=h.items.map(h=>this.traverseContentResource(h))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(h)),this.traversals.contentResource)}traverseRangeRanges(h){return h.items&&(h.items=h.items.map(h=>"string"==typeof h?this.traverseCanvas({id:h,type:"Canvas"}):"Manifest"===h.type?this.traverseManifest(h):this.traverseRange(h))),h}traverseRange(h){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(h)))),this.traversals.range)}traverseAgent(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(h)),this.traversals.agent)}traverseType(h,v){return v.reduce((h,v)=>{let _=v(h);return void 0!==_||this.options.allowUndefinedReturn?_:h},h)}traverseService(h){return this.traverseType(h,this.traversals.service)}traverseUnknown(h){let v=function(h){if(null==h)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(h))throw Error("Array is not a valid entity");if("object"!=typeof h)throw Error(`${typeof h} is not a valid entity`);if("string"==typeof h.type){let v=e3.indexOf(h.type);if(-1!==v)return e3[v]}if(h.profile)return"Service";throw Error("Resource type is not known")}(h);switch(v){case"Collection":return this.traverseCollection(h);case"Manifest":return this.traverseManifest(h);case"Canvas":return this.traverseCanvas(h);case"AnnotationPage":return this.traverseAnnotationPage(h);case"Annotation":return this.traverseAnnotation(h);case"ContentResource":return this.traverseContentResource(h);case"Range":return this.traverseRange(h);case"Service":return this.traverseService(h);case"Agent":return this.traverseAgent(h);default:throw Error(`Unknown or unsupported resource type of ${v}`)}}};let e4=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];let Traverse=class Traverse{constructor(h,v={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...h},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...v}}static all(h){return new Traverse({collection:[h],manifest:[h],canvas:[h],annotationList:[h],sequence:[h],annotation:[h],contentResource:[h],choice:[h],range:[h],service:[h],layer:[h]})}traverseCollection(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(h))),this.traversals.collection)}traverseCollectionItems(h){if(this.options.mergeMemberProperties){let v=[...(h.manifests||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h),...(h.collections||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h),...h.members||[]];delete h.collections,delete h.manifests,h.members=v}return h.manifests&&(h.manifests=h.manifests.map(h=>this.traverseManifest("string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h))),h.collections&&(h.collections=h.collections.map(h=>this.traverseCollection("string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h))),h.members&&(h.members=h.members.map(h=>"string"==typeof h?h:this.traverseUnknown(h))),h}traverseManifest(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(h))),this.traversals.manifest)}traverseManifestItems(h){return h.sequences&&(h.sequences=h.sequences.map(h=>this.traverseSequence(h))),h.structures&&(h.structures=h.structures.map(h=>this.traverseRange(h))),h}traverseSequence(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(h))),this.traversals.sequence)}traverseSequenceItems(h){return h.canvases&&(h.canvases=h.canvases.map(h=>this.traverseCanvas(h))),h}traverseCanvas(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(h))),this.traversals.canvas)}traverseCanvasItems(h){return h.images&&(h.images=h.images.map(h=>this.traverseAnnotation(h))),h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseRange(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(h))),this.traversals.range)}traverseRangeItems(h){if(this.options.mergeMemberProperties){let v=[...(h.ranges||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Range"}:h),...(h.canvases||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Canvas"}:h),...h.members||[]];delete h.ranges,delete h.canvases,h.members=v.length?v.map(h=>this.traverseUnknown(h)):void 0}return h}traverseAnnotationList(h){let v="string"==typeof h?{"@id":h,"@type":"sc:AnnotationList"}:h;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(v)),this.traversals.annotationList)}traverseAnnotationListItems(h){return h.resources&&(h.resources=h.resources.map(h=>this.traverseAnnotation(h))),h}traverseAnnotation(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(h))),this.traversals.annotation)}traverseAnnotationItems(h){return h.resource&&(Array.isArray(h.resource)?h.resource=h.resource.map(h=>this.traverseContentResource(h)):h.resource=this.traverseContentResource(h.resource)),h.on,h}traverseLayer(h){return this.traverseType(this.traverseLinking(this.traverseLayerItems(h)),this.traversals.layer)}traverseLayerItems(h){return h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseChoice(h){return this.traverseType(this.traverseChoiceItems(h),this.traversals.choice)}traverseChoiceItems(h){return h.default&&"rdf:nil"!==h.default&&(h.default=this.traverseContentResource(h.default)),h.item&&"rdf:nil"!==h.item&&(h.item=h.item.map(h=>this.traverseContentResource(h))),h}traverseService(h){return this.traverseType(this.traverseLinking(h),this.traversals.service)}traverseContentResource(h){return"oa:Choice"===h["@type"]?this.traverseChoice(h):this.traverseType(this.traverseDescriptive(this.traverseLinking(h)),this.traversals.contentResource)}traverseUnknown(h){if(!h["@type"]||"string"==typeof h)return h;switch(function(h){if(null==h)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(h))throw Error("Array is not a valid entity");if("object"!=typeof h)throw Error(`${typeof h} is not a valid entity`);if("string"==typeof h["@type"]){let v=e4.indexOf(h["@type"]);if(-1!==v)return e4[v]}if(h.profile)return"Service";if(h.format||h["@type"])return"ContentResource";throw Error("Resource type is not known")}(h)){case"sc:Collection":return this.traverseCollection(h);case"sc:Manifest":return this.traverseManifest(h);case"sc:Canvas":return this.traverseCanvas(h);case"sc:Sequence":return this.traverseSequence(h);case"sc:Range":return this.traverseRange(h);case"oa:Annotation":return this.traverseAnnotation(h);case"sc:AnnotationList":return this.traverseAnnotationList(h);case"sc:Layer":return this.traverseLayer(h);case"Service":return this.traverseService(h);case"oa:Choice":return this.traverseChoice(h);case"ContentResource":return this.traverseContentResource(h)}return h.profile?this.traverseService(h):h}traverseImageResource(h){let v=Array.isArray(h),_=Array.isArray(h)?h:[h],b=[];for(let h of _)"string"==typeof h?b.push(this.traverseContentResource({"@id":h,"@type":"dctypes:Image"})):b.push(this.traverseContentResource(h));return v||this.options.convertPropsToArray?b:b[0]}traverseDescriptive(h){return h.thumbnail&&(h.thumbnail=this.traverseImageResource(h.thumbnail)),h.logo&&(h.logo=this.traverseImageResource(h.logo)),h}traverseOneOrMoreServices(h){let v=Array.isArray(h),_=Array.isArray(h)?h:[h],b=[];for(let h of _)b.push(this.traverseService(h));return v||this.options.convertPropsToArray?b:b[0]}traverseLinking(h){return h.related&&(h.related=this.traverseOneOrManyType(h.related,this.traversals.contentResource)),h.rendering&&(h.rendering=this.traverseOneOrManyType(h.rendering,this.traversals.contentResource)),h.service&&(h.service=this.traverseOneOrMoreServices(h.service)),h.seeAlso&&(h.seeAlso=this.traverseOneOrManyType(h.seeAlso,this.traversals.contentResource)),h.within&&("string"==typeof h.within||(h.within=this.traverseOneOrManyType(h.within,this.traversals.contentResource))),h.startCanvas&&("string"==typeof h.startCanvas?h.startCanvas=this.traverseType({"@id":h.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):h.startCanvas&&this.traverseType(h.startCanvas,this.traversals.canvas)),h.contentLayer&&("string"==typeof h.contentLayer?h.contentLayer=this.traverseLayer({"@id":h.contentLayer,"@type":"sc:Layer"}):h.contentLayer=this.traverseLayer(h.contentLayer)),h}traverseOneOrManyType(h,v){if(!Array.isArray(h)){if(!this.options.convertPropsToArray)return this.traverseType(h,v);h=[h]}return h.map(h=>this.traverseType(h,v))}traverseType(h,v){return v.reduce((h,v)=>{let _=v(h);return void 0!==_||this.options.allowUndefinedReturn?_:h},h)}};let e5="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e6="http://library.stanford.edu/iiif/image-api/compliance.html#level2",e8="http://library.stanford.edu/iiif/image-api/conformance.html#level1",e9="http://library.stanford.edu/iiif/image-api/conformance.html#level2",e7="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",tr="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",ti="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",ta="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",to="http://iiif.io/api/image/1/level1.json",ts="http://iiif.io/api/image/1/profiles/level1.json",tl="http://iiif.io/api/image/1/level2.json",tc="http://iiif.io/api/image/1/profiles/level2.json",tu="http://iiif.io/api/image/2/level1.json",td="http://iiif.io/api/image/2/profiles/level1.json",tp="http://iiif.io/api/image/2/level2.json",th="http://iiif.io/api/image/2/profiles/level2.json",tm="level1",tf="level2",tg="http://iiif.io/api/image/2/level1",tE="http://iiif.io/api/image/2/level2",tv=[tg,tE,e5,e6,e8,e9,e7,tr,ti,ta,to,ts,tl,tc,tu,td,tp,th,tm,tf],tT=["http://iiif.io/api/image/2/level0",tg,tE,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",e5,e6,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",e8,e9,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",e7,tr,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",ti,ta,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",to,ts,tl,tc,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",tu,td,tp,th,"level0",tm,tf],ty={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(h,v="none"){if(!h)return{};let _=Array.isArray(h)?h:[h],b={};for(let h of _){if("string"==typeof h){b[v]=b[v]?b[v]:[],b[v].push(h||"");continue}if(!h["@language"]){b[v]=b[v]?b[v]:[],b[v].push(h["@value"]||"");continue}let _=h["@language"];b[_]=b[_]?b[_]:[],b[_].push(h["@value"]||"")}return b}function removePrefix(h){for(let v of["sc","oa","dcterms","dctypes","iiif"])if(h.startsWith(`${v}:`))return h.slice(v.length+1);return h}let t_=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(h){let v=h["@id"]||h.id,_=h["@type"]||h.type,b=h.profile||void 0,A=h["@context"]||void 0;if(b){let h=function(h){switch(h){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(b);if(h)return h}if(A){let h=function(h){let v=Array.isArray(h)?h:[h];for(let h of v)switch(h){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(A);if(h)return h}if(_){if(Array.isArray(_)){if(-1!==_.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==_.indexOf("cnt:ContentAsText"))return"TextualBody";_=_[0]}for(let h of["sc","oa","dcterms","dctypes","iiif"])if(_.startsWith(`${h}:`)){_=_.slice(h.length+1);break}switch(_){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(_&&-1!==t_.indexOf(_))return _;if(h.format){if(h.format.startsWith("image/"))return"Image";if(h.format.startsWith("text/")||"application/pdf"===h.format)return"Text";if(h.format.startsWith("application/"))return"Dataset"}return v&&(v.endsWith(".jpg")||v.endsWith(".png")||v.endsWith(".jpeg"))?"Image":_||"unknown"}let tb=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,tA=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function removeUndefinedProperties(h){for(let v in h)(void 0===h[v]||null===h[v])&&delete h[v];return h}let tx=0;function mintNewIdFromResource(h,v){let _=encodeURI(h.id||h["@id"]||"").trim();return _&&v?`${_}/${v}`:_||(tx++,`http://example.org/${h["@type"]}${v?`/${v}`:""}/${tx}`)}function technicalProperties$2(h){let v;let _=[...h.behavior||[]];return h.viewingHint&&_.push(h.viewingHint),Array.isArray(h.motivation)?v=h.motivation.map(removePrefix):h.motivation&&(v=removePrefix(h.motivation)),{"@context":h["@context"]?function(h){if(h){let v=Array.isArray(h)?h:[h],_=[];for(let h of v)"http://iiif.io/api/presentation/2/context.json"===h&&_.push("http://iiif.io/api/presentation/3/context.json"),-1===tA.indexOf(h)&&_.push(h);if(v.length)return 1===_.length?_[0]:_}}(h["@context"]):void 0,id:(h["@id"]||mintNewIdFromResource(h)).trim(),type:getNewType(h),behavior:_.length?_:void 0,height:h.height?h.height:void 0,width:h.width?h.width:void 0,motivation:v,viewingDirection:h.viewingDirection,profile:h.profile,format:h.format?h.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(h){var v;let[_,b]=function(h,v="Rights/License",_="none"){let b=null,A=[],S=Array.isArray(h)?h:[h];for(let h of S){let S=h?function(h){let v=h.match(tb);return v?v[0]:h}(h):void 0;if(S&&(-1!==S.indexOf("creativecommons.org")||-1!==S.indexOf("rightsstatements.org"))){b=S.startsWith("https://")?`http://${S.slice(8)}`:S;continue}S&&A.push({label:{[_]:[v]},value:{[_]:[S]}})}return[b,A]}(h.license),A=[...h.metadata&&(v=h.metadata)?v.map(h=>({label:convertLanguageMapping(h.label),value:convertLanguageMapping(h.value)})):[],...b];return{rights:_,metadata:A.length?A:void 0,label:h.label?convertLanguageMapping(h.label):void 0,requiredStatement:h.attribution?{label:convertLanguageMapping(ty.attributionLabel),value:convertLanguageMapping(h.attribution)}:void 0,navDate:h.navDate,summary:h.description?convertLanguageMapping(h.description):void 0,thumbnail:h.thumbnail}}function linkingProperties$2(h){let v=h.related?Array.isArray(h.related)?h.related:[h.related]:[],_=h.contentLayer;return{provider:h.logo||v.length?[{id:ty.providerId,type:"Agent",homepage:v.length?[v[0]]:void 0,logo:h.logo?Array.isArray(h.logo)?h.logo:[h.logo]:void 0,label:convertLanguageMapping(ty.providerName)}]:void 0,partOf:function(h){if(!h.within)return;let v=Array.isArray(h.within)?h.within:[h.within],_=[];for(let b of v)"string"==typeof b?b&&"sc:Manifest"===h["@type"]&&_.push({id:b,type:"Collection"}):b["@id"]&&_.push({id:b["@id"],type:getNewType(b)});return _.length?_:void 0}(h),rendering:h.rendering,seeAlso:h.seeAlso,start:h.startCanvas,service:h.service?ensureArray$1(h.service):void 0,supplementary:_?[_]:void 0}}function upgradeContentResource(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),chars:h.chars,format:h.format?h.format:void 0,language:h.language})}let tS=new Traverse({collection:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.members})}],manifest:[function(h){let v=[],_=[];for(let b of h.sequences||[])b.canvases.length&&v.push(...b.canvases),b.behavior&&_.push(...b.behavior);let b=technicalProperties$2(h);return _.length&&(b.behavior?b.behavior.push(..._):b.behavior=_),removeUndefinedProperties({...b,...descriptiveProperties$2(h),...linkingProperties$2(h),items:v,structures:h.structures})}],canvas:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),annotations:h.otherContent&&h.otherContent.length?h.otherContent:void 0,items:h.images&&h.images.length?[{id:mintNewIdFromResource(h,"annotation-page"),type:"AnnotationPage",items:h.images}]:void 0})}],annotationList:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.resources&&h.resources.length?h.resources:void 0})}],sequence:[function(h){return h.canvases&&0!==h.canvases.length?{canvases:h.canvases,behavior:h.viewingHint?[h.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),target:function upgradeTarget(h){if(Array.isArray(h)){if(h.length>1)return{type:"List",items:h.map(upgradeTarget)};h=h[0]}if("string"==typeof h)return encodeURI(h).trim();if(!("@type"in h))return encodeURI(h["@id"]).trim();{let v;if("string"==typeof h.full)v=h.full;else if("dctypes:Image"===h.full["@type"])v={id:h.full["@id"],type:"Image"};else if("sc:Canvas"===h.full["@type"])v={id:h.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${h.full["@type"]}`);return{type:"SpecificResource",source:v,selector:function upgradeSelector(h){let v=(Array.isArray(h["@type"])&&h["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==h["@type"])&&("chars"in h||"value"in h);if(v)return{type:"SvgSelector",value:"chars"in h?h.chars:h.value};if("oa:FragmentSelector"===h["@type"])return{type:"FragmentSelector",value:h.value};if("oa:Choice"===h["@type"])return[upgradeSelector(h.default),...(Array.isArray(h.item)?h.item:[h.item]).map(upgradeSelector)];if("iiif:ImageApiSelector"==h["@type"])return{type:"ImageApiSelector",region:"region"in h?h.region:void 0,rotation:"rotation"in h?h.rotation:void 0};throw Error(`Unsupported selector type: ${h["@type"]}`)}(h.selector)}}}(h.on),body:Array.isArray(h.resource)?h.resource.map(upgradeContentResource):upgradeContentResource(h.resource)})}],contentResource:[upgradeContentResource],choice:[function(h){let v=[];return h.default&&"rdf:nil"!==h.default&&v.push(h.default),h.item&&"rdf:nil"!==h.item&&v.push(...h.item),{...technicalProperties$2(h),...descriptiveProperties$2(h),items:v}}],range:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.members})}],service:[function(h){let{"@id":v,"@type":_,"@context":b,profile:A,...S}=h,C={};return v&&(C["@id"]=v),C["@type"]=getNewType(h),"unknown"===C["@type"]&&(b&&b.length&&(C["@context"]=b),C["@type"]="Service"),A&&(C.profile=function getProfile(h){return Array.isArray(h)?getProfile(h.find(h=>"string"==typeof h)):-1!==tT.indexOf(h)?"level2":-1!==tv.indexOf(h)?"level1":"string"==typeof h?h:void 0}(A)),removeUndefinedProperties({...C,...S})}],layer:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h)})}]});function getResource(h,v){if("string"==typeof h)return{id:h,type:v};if(!h.id)throw Error(`Invalid resource does not have an ID (${v})`);return h}function addMissingIdToContentResource(h){return v=>"string"==typeof v?{id:v,type:h}:v.id?v.type?v:{type:h,...v}:{id:`vault://${function(h){let v=JSON.stringify(h),_=5381,b=v.length;for(;b;)_=33*_^v.charCodeAt(--b);let A=_>>>0,S=A.toString(16);return S.length%2?"0"+S:S}(v)}`,type:h,...v}}function ensureDefaultFields(h){return v=>({...h,...v})}function ensureArray(h){return Array.isArray(h)?h:[h]}function ensureArrayOnAnnotation(h){return h.body&&(h.body=ensureArray(h.body)),h.seeAlso&&(h.seeAlso=ensureArray(h.seeAlso)),h.body&&(h.body=ensureArray(h.body)),h.audience&&(h.audience=ensureArray(h.audience)),h.accessibility&&(h.accessibility=ensureArray(h.accessibility)),h.motivation&&(h.motivation=ensureArray(h.motivation)),h}let tC="__$UNSET$__",tk="__$UNWRAP$__";function languageString2to3(h){if(!h)return;let v=Object.keys(h);if(0!==v.length){if(1===v.length){let _=v[0];if(!_)return"";let b=(h[_]||[]).join("");return"@none"===_||"none"===_||"en"===_?b:{"@language":_,"@value":b}}return v.map(v=>({"@language":v,"@value":(h[v]||[]).join("")}))}}function unNestArray(h,v=!1){return h?h.length>1&&!v?h:h[0]||void 0:void 0}function convertService(h){if(h){if("string"==typeof h)return{"@id":h};if("@id"in h){let v={...h};return delete v["@type"],v}return{"@context":"http://iiif.io/api/image/2/context.json","@id":h.id,profile:`http://iiif.io/api/image/2/profiles/${h.profile}.json`}}}function technicalProperties$1(h,v){return[["@id",h.id],["@type",v],["format",h.format],["height",h.height],["width",h.width],["viewingDirection","left-to-right"!==h.viewingDirection?h.viewingDirection:void 0]]}function*descriptiveProperties$1(h){let v=h.provider?yield h.provider[0]:void 0;return[["label",languageString2to3(h.label)],["metadata",h.metadata&&h.metadata.length?h.metadata.map(h=>({label:languageString2to3(h.label)||"",value:languageString2to3(h.value)||""})):void 0],["description",languageString2to3(h.summary)],["thumbnail",unNestArray((yield h.thumbnail))],["navDate",h.navDate],["logo",v?unNestArray(v.logo):void 0],["homepage",v?v.homepage:void 0],["attribution",h.requiredStatement?languageString2to3(h.requiredStatement.value):void 0]]}function*linkingProperties$1(h){return[["seeAlso",unNestArray((yield h.seeAlso))],["service",unNestArray((h.service||[]).map(convertService))],["rendering",unNestArray((yield h.rendering))],["startCanvas",h.start?h.start.id:void 0]]}let tw={Manifest:function*(h){return[...technicalProperties$1(h,"sc:Manifest"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["sequences",[{"@id":`${h.id}/sequence0`,"@type":"sc:Sequence",canvases:yield h.items}]],["structures",(yield h.structures)]]},Canvas:function*(h){let v=yield h.items,_=v[0];return[...technicalProperties$1(h,"sc:Canvas"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["images",_?[_.resources]:void 0],["annotations",h.annotations&&h.annotations.length?unNestArray((yield h.annotations)):void 0]]},AnnotationPage:function*(h){return[...technicalProperties$1(h,"sc:AnnotationList"),...yield*descriptiveProperties$1(h),["resources",h.items&&h.items.length?unNestArray((yield h.items)):void 0]]},Annotation:function*(h){return[["@id",h.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",function parseCanvasTarget(h){return Array.isArray(h)?h.map(h=>parseCanvasTarget(h)):"string"==typeof h?h:h.type&&"Canvas"===h.type?h.id:h}(h.target)],["resource",unNestArray((yield h.body),!0)]]},ContentResource:function*(h){return"Image"===h.type?[...technicalProperties$1(h,"dctypes:Image"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h)]:[...technicalProperties$1(h,void 0),...yield*descriptiveProperties$1(h)]},AnnotationCollection:function*(h){return[["@id",h.id],["@type","sc:Layer"],["label",languageString2to3(h.label)]]},Collection:function*(h){return[...technicalProperties$1(h,"sc:Collection"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["members",(yield*h.items)]]},Range:function*(h){let v=[],_=[];if(h.items)for(let b of h.items){let A=yield b;v.push({"@id":b.id,"@type":b.type,label:A?A.label:void 0,within:h.id}),"Canvas"===b.type&&_.push(b.id)}return[...technicalProperties$1(h,"sc:Range"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["canvases",_.length===v.length?_:void 0],["members",_.length!==v.length?v:void 0]]}};function technicalProperties(h){var v;return[["id",(null==(v=h.id)?void 0:v.startsWith("vault://"))?void 0:h.id],["type",h.type],["format",h.format],["profile",h.profile],["height",h.height],["width",h.width],["duration",h.duration||void 0],["viewingDirection","left-to-right"!==h.viewingDirection?h.viewingDirection:void 0],["behavior",h.behavior&&h.behavior.length?h.behavior:void 0],["timeMode",h.timeMode],["motivation",Array.isArray(h.motivation)?h.motivation[0]:h.motivation]]}function filterEmpty(h){if(h&&0!==h.length)return h}function service2compat(h){if(h&&h.type&&"ImageService2"===h.type){let{id:v,type:_,profile:b,...A}=h,S="string"==typeof b?b:Array.isArray(b)?b.find(h=>"string"==typeof h):"";return{"@id":v,"@type":_,profile:S?S.startsWith("http")?S:`http://iiif.io/api/image/2/${S}.json`:"http://iiif.io/api/image/2/level0.json",...A}}return h}function filterService2Compat(h){if(h&&0!==h.length)return h.map(service2compat)}function*descriptiveProperties(h){return[["label",h.label],["metadata",filterEmpty(h.metadata)],["summary",h.summary],["requiredStatement",h.requiredStatement],["rights",h.rights],["navDate",h.navDate],["language",h.language],["thumbnail",filterEmpty((yield h.thumbnail))],["placeholderCanvas",(yield h.placeholderCanvas)],["accompanyingCanvas",(yield h.accompanyingCanvas)],["provider",filterEmpty((yield h.provider))]]}function*linkingProperties(h){return[["seeAlso",filterEmpty((yield h.seeAlso))],["service",filterService2Compat(h.service)],["services",filterService2Compat(h.services)],["rendering",filterEmpty((yield h.rendering))],["supplementary",filterEmpty((yield h.supplementary))],["homepage",filterEmpty((yield h.homepage))],["logo",filterEmpty((yield h.logo))],["partOf",filterEmpty((yield h.partOf))],["start",h.start]]}let tI={Manifest:function*(h,v,{isTopLevel:_}){return _?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",(yield h.items)],["structures",filterEmpty((yield h.structures))],["annotations",filterEmpty((yield h.annotations))]]:[...technicalProperties(h),...yield*descriptiveProperties(h)]},Canvas:function*(h){return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",(yield h.items)],["annotations",filterEmpty((yield h.annotations))]]},Agent:function*(h){return[["id",h.id],["type","Agent"],["label",h.label],...yield*linkingProperties(h)]},AnnotationPage:function*(h){let v=Object.entries(h).map(([h,v])=>[h,Array.isArray(v)?filterEmpty(v):v]).filter(([h,v])=>"items"!==h);return[...v,...yield*linkingProperties(h),["items",(yield h.items)]]},Service:function*(h){return[[tk,service2compat(h)]]},Annotation:function*(h){let v=Object.entries(h).map(([h,v])=>"motivation"===h?[h,Array.isArray(v)?v[0]:v]:[h,Array.isArray(v)?filterEmpty(v):v]).filter(([h])=>"body"!==h),_=yield h.body;return[...v,["body",1===_.length?_[0]:_]]},ContentResource:function*(h){return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["annotations",filterEmpty((yield h.annotations))],["items",filterEmpty((yield h.items))]]},AnnotationCollection:function*(h){return[["id",h.id],["type","AnnotationCollection"],["label",h.label]]},Collection:function*(h,v,{isTopLevel:_}){return _?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",filterEmpty((yield h.items))]]:[...technicalProperties(h),...yield*descriptiveProperties(h)]},Range:function*(h){let v=[];for(let _ of h.items)"Range"===_.type?v.push((yield _)):v.push(_);return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",v],["annotations",filterEmpty((yield h.annotations))]]}};var tN=_(4887);function _typeof(h){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(h)}function ownKeys(h,v){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(h);v&&(b=b.filter(function(v){return Object.getOwnPropertyDescriptor(h,v).enumerable})),_.push.apply(_,b)}return _}function _objectSpread2(h){for(var v=1;v<arguments.length;v++){var _=null!=arguments[v]?arguments[v]:{};v%2?ownKeys(Object(_),!0).forEach(function(v){!function(h,v,_){var b;b=function(h,v){if("object"!==_typeof(h)||null===h)return h;var _=h[Symbol.toPrimitive];if(void 0!==_){var b=_.call(h,v||"default");if("object"!==_typeof(b))return b;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(h)}(v,"string"),(v="symbol"===_typeof(b)?b:String(b))in h?Object.defineProperty(h,v,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[v]=_}(h,v,_[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(v){Object.defineProperty(h,v,Object.getOwnPropertyDescriptor(_,v))})}return h}function formatProdErrorMessage(h){return"Minified Redux error #"+h+"; visit https://redux.js.org/Errors?code="+h+" for the full message or use the non-minified dev environment for full errors. "}var tO="function"==typeof Symbol&&Symbol.observable||"@@observable",randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},tR={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function combineReducers(h){for(var v,_=Object.keys(h),b={},A=0;A<_.length;A++){var S=_[A];"function"==typeof h[S]&&(b[S]=h[S])}var C=Object.keys(b);try{!function(h){Object.keys(h).forEach(function(v){var _=h[v];if(void 0===_(void 0,{type:tR.INIT}))throw Error(formatProdErrorMessage(12));if(void 0===_(void 0,{type:tR.PROBE_UNKNOWN_ACTION()}))throw Error(formatProdErrorMessage(13))})}(b)}catch(h){v=h}return function(h,_){if(void 0===h&&(h={}),v)throw v;for(var A=!1,S={},w=0;w<C.length;w++){var O=C[w],L=b[O],M=h[O],F=L(M,_);if(void 0===F)throw _&&_.type,Error(formatProdErrorMessage(14));S[O]=F,A=A||F!==M}return(A=A||C.length!==Object.keys(h).length)?S:h}}function compose(){for(var h=arguments.length,v=Array(h),_=0;_<h;_++)v[_]=arguments[_];return 0===v.length?function(h){return h}:1===v.length?v[0]:v.reduce(function(h,v){return function(){return h(v.apply(void 0,arguments))}})}function applyMiddleware(){for(var h=arguments.length,v=Array(h),_=0;_<h;_++)v[_]=arguments[_];return function(h){return function(){var _=h.apply(void 0,arguments),_dispatch=function(){throw Error(formatProdErrorMessage(15))},b={getState:_.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},A=v.map(function(h){return h(b)});return _dispatch=compose.apply(void 0,A)(_.dispatch),_objectSpread2(_objectSpread2({},_),{},{dispatch:_dispatch})}}}let tL="@iiif/IMPORT_ENTITIES",tD="@iiif/MODIFY_ENTITY_FIELD",tP="@iiif/REORDER_ENTITY_FIELD",tM="@iiif/ADD_REFERENCE",tF="@iiif/REMOVE_REFERENCE",tB=(0,tN.createAction)(tL)(),tH=(0,tN.createAction)(tD)(),tU=(0,tN.createAction)(tP)(),tz=(0,tN.createAction)(tM)(),t$=(0,tN.createAction)(tF)(),tG={importEntities:tB,modifyEntityField:tH,reorderEntityField:tU,addReference:tz,removeReference:t$},tj="@iiif/ADD_MAPPING",tV="@iiif/ADD_MAPPINGS",tW=(0,tN.createAction)(tj)(),tq=(0,tN.createAction)(tV)(),tY="@iiif/SET_META_VALUE",tQ="@iiif/SET_META_VALUE_DYNAMIC",tX="@iiif/UNSET_META_VALUE",tK=(0,tN.createAction)(tY)(),tZ=(0,tN.createAction)(tQ)(),tJ=(0,tN.createAction)(tX)(),t0={setMetaValue:tK,setMetaValueDynamic:tZ,unsetMetaValue:tJ},t1="RESOURCE_ERROR",t2="RESOURCE_LOADING",t3="RESOURCE_READY",t4="@iiif/REQUEST_RESOURCE",t5="@iiif/REQUEST_ERROR",t6="@iiif/REQUEST_MISMATCH",t8="@iiif/REQUEST_COMPLETE",t9="@iiif/REQUEST_OFFLINE_RESOURCE",t7=(0,tN.createAction)(t4)(),ne=(0,tN.createAction)(t5)(),ni=(0,tN.createAction)(t6)(),na=(0,tN.createAction)(t8)();(0,tN.createAction)(t9)();let no="@iiif/BATCH",ns="@iiif/BATCH_IMPORT",nl=(0,tN.createAction)(no)();(0,tN.createAction)(ns)();let actionListFromResource=(h,v)=>{let{entities:_,resource:b,mapping:A}=function(h){let v=h&&h["@context"]&&("http://iiif.io/api/presentation/2/context.json"===h["@context"]||-1!==h["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===h["@context"])||"http://iiif.io/api/image/2/context.json"===h["@context"]?tS.traverseUnknown(h):h,_={Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}},b={},addToEntities=(h,v)=>{let b=_[h]?_[h]:{};return _=>{let A=getResource(_,v||h);return A&&A.id&&h?(b[A.id]=b[A.id]?function(h,v){if("string"==typeof h)return h;if(v.id!==h.id||v.type!==h.type)throw Error("Can only merge entities with identical identifiers and type!");return function merge(h,v){if(!v)return h;if(Array.isArray(h)){if(!Array.isArray(v))throw Error("Cannot merge array with non-array");let _=[...h];for(let b of v)if(null!=b){if(Array.isArray(b))_.push(b);else if("object"==typeof b&&b.id&&b.type){let h=_.findIndex(h=>h.id===b.id&&h.type===b.type);h>=0&&(_[h]=merge(_[h],b))}else -1===h.indexOf(b)&&_.push(b)}return _}if("object"==typeof h){if(Array.isArray(v)||"object"!=typeof v)throw Error("Cannot merge object with non-object");let _={...h};for(let[h,b]of Object.entries(v)){let v=_[h];v!==eX&&v?_[h]=merge(v,b):_[h]=b}return _}return h||v}({...h},v)}(b[A.id],A):Object.assign({},A),{id:A.id,type:"ContentResource"===h?h:A.type}):A}},addToMapping=(h,v)=>_=>{let{id:A,type:S}=getResource(_,v||h);if(void 0===A)throw Error("Found invalid entity without an ID.");return"ContentResource"===h?b[A]=h:b[A]=S,_},A=new Traverse$1({collection:[ensureDefaultFields(eJ),addToMapping("Collection"),addToEntities("Collection")],manifest:[ensureDefaultFields(e0),addToMapping("Manifest"),addToEntities("Manifest")],canvas:[ensureDefaultFields(eZ),addToMapping("Canvas"),addToEntities("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(eK),addToMapping("AnnotationPage"),addToEntities("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,addToMapping("Annotation"),addToEntities("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),addToMapping("ContentResource"),addToEntities("ContentResource")],range:[ensureDefaultFields(e1),addToMapping("Range","Canvas"),addToEntities("Range","Canvas")],agent:[ensureDefaultFields(e2),addToMapping("Agent"),addToEntities("Agent")]}),S=A.traverseUnknown(v);return{entities:_,resource:S,mapping:b}}(v);if(void 0===b.id)return[ne({id:h,message:"ID is not defined in resource."})];let S=[tB({entities:_}),tq({mapping:A})];return b.id!==h&&(S.push(tW({id:h,type:b.type})),S.push(ni({requestId:h,actualId:b.id}))),S.push(na({id:h})),S},nc=Number.isNaN||function(h){return"number"==typeof h&&h!=h};function areInputsEqual(h,v){if(!Array.isArray(h)||!Array.isArray(v))return h===v;if(h.length!==v.length)return!1;for(let A=0;A<h.length;A++){var _,b;if(!((_=h[A])===(b=v[A])||nc(_)&&nc(b)))return!1}return!0}function esm_resolveIfExists(h,v){let _=h.iiif.requests[v],b=h.iiif.mapping[v];if(b&&h.iiif.entities[b][_.resourceUri])return h.iiif.entities[b][_.resourceUri]}function createFetchHelper(h,v,{waitTimeout:_=30}={}){return async(b,A)=>{let S=h.getState(),C=S.iiif.requests[b];if(C)switch(C.loadingState){case t1:break;case t2:{let v;let A=!1;try{let S=await Promise.race([new Promise((_,S)=>{A||(v=h.subscribe(()=>{let v=h.getState();if(v.iiif.requests[b].loadingState===t1){S();return}if(v.iiif.requests[b].loadingState===t3){let h=esm_resolveIfExists(v,b);h?_(h):S()}}))}),new Promise((h,v)=>setTimeout(()=>{A=!0,v()},60*_))]);if(v&&v(),S)return S}catch(h){v&&v()}break}case t3:{let h=esm_resolveIfExists(S,b);if(h)return h}}h.dispatch(t7({id:b}));try{let _=await v(b,A);_.id||_["@id"]||(_["@type"]&&(_["@id"]=b),_.id=b);let S=actionListFromResource(b,_);return h.dispatch(nl({actions:S})),esm_resolveIfExists(h.getState(),b)}catch(v){throw h.dispatch(ne({id:b,message:v.toString()})),v}}}function esm_getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function isReferenceList(h,v,_,b){return!(!h[_]||!h[_][v]||!h[_][v][b]||!Array.isArray(h[_][v][b]))}let nu=combineReducers({mapping:(h={},v)=>{switch(v.type){case tj:return{...h,[v.payload.id]:v.payload.type};case tV:return{...h,...v.payload.mapping};default:return h}},entities:(h=esm_getDefaultEntities(),v)=>{switch(v.type){case tD:{if(!h[v.payload.type]||!h[v.payload.type][v.payload.id])return h;let _=h[v.payload.type][v.payload.id];if("string"==typeof _)return h;return{...h,[v.payload.type]:{...h[v.payload.type],[v.payload.id]:{..._,[v.payload.key]:v.payload.value}}}}case tP:{if(!isReferenceList(h,v.payload.id,v.payload.type,v.payload.key))return h;let _=h[v.payload.type][v.payload.id];if("string"==typeof _)return h;let b=Array.from(_[v.payload.key]),[A]=b.splice(v.payload.startIndex,1);return b.splice(v.payload.endIndex,0,A),{...h,[v.payload.type]:{...h[v.payload.type],[v.payload.id]:{..._,[v.payload.key]:b}}}}case tL:{let _=Object.keys(v.payload.entities),b={...h};for(let A of _){let _=v.payload.entities[A],S={...h[A]||{}},C=!1,w=Object.keys(_||{})||[];if(_&&w){for(let v of w)C=!0,S[v]=h[A][v]?function(h,v){let _={},b=[];for(let[A,S]of Object.entries(h||{})){b.push(A);let h=(v||{})[A];if(!h||0===h.length){_[A]=S;continue}_[A]=h}for(let[h,A]of Object.entries(v||{}))-1===b.indexOf(h)&&(_[h]=A);return _}(h[A][v],_[v]):_[v];C&&(b[A]=S)}}return b}case tM:{if(!isReferenceList(h,v.payload.id,v.payload.type,v.payload.key))return h;let _=h[v.payload.type][v.payload.id],b=Array.from(_[v.payload.key]);return b.splice(v.payload.index||b.length+1,0,v.payload.reference),{...h,[v.payload.type]:{...h[v.payload.type],[v.payload.id]:{..._,[v.payload.key]:b}}}}case tF:{if(!isReferenceList(h,v.payload.id,v.payload.type,v.payload.key))return h;let _=h[v.payload.type][v.payload.id],b=Array.from(_[v.payload.key]),A=v.payload.index||b.findIndex(h=>h&&h.id===v.payload.reference.id);if(-1===A||b[A]?.id!==v.payload.reference.id)return h;return b.splice(A,1),{...h,[v.payload.type]:{...h[v.payload.type],[v.payload.id]:{..._,[v.payload.key]:b}}}}default:return h}},requests:(h={},v)=>{switch(v.type){case t4:case t9:return{...h,[v.payload.id]:{requestUri:v.payload.id,loadingState:t2,uriMismatch:!1,resourceUri:v.payload.id}};case t6:return{...h,[v.payload.requestId]:{...h[v.payload.requestId]||{},uriMismatch:!0,resourceUri:v.payload.actualId},[v.payload.actualId]:{requestUri:v.payload.requestId,loadingState:h[v.payload.requestId].loadingState,uriMismatch:!0,resourceUri:v.payload.actualId}};case t5:return{...h,[v.payload.id]:{...h[v.payload.id]||{},loadingState:t1,error:v.payload.message}};case t8:return{...h,[v.payload.id]:{...h[v.payload.id]||{},loadingState:t3,error:void 0}}}return h},meta:(h={},v)=>{let{id:_,updateValue:b,value:A,meta:S,key:C}=v&&v.payload||{};switch(v.type){case tY:return{...h,[_]:{...h[_]||{},[S]:{...h[_]&&h[_][S]||{},[C]:A}}};case tQ:return{...h,[_]:{...h[_]||{},[S]:{...h[_]&&h[_][S]||{},[C]:b(h[_]&&h[_][S]?h[_][S][C]:void 0)}}};case tX:if(h[_]&&h[_][S]&&h[_][S][C])return{...h,[_]:{...h[_]||{},[S]:{...h[_]&&h[_][S]||{},[C]:void 0}}};return h;default:return h}}}),nd="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;let Vault=class Vault{options;store;emitter;isBatching=!1;batchQueue=[];remoteFetcher;staticFetcher;constructor(h,v){var _;this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},h||{}),this.store=v||function(h={}){let{enableDevtools:v=!0,iiifStoreName:_="iiif",defaultState:b={},extraMiddleware:A=[],customReducers:S={}}=h,C=combineReducers({[_]:nu,...S}),w=function createStore(h,v,_){if("function"==typeof v&&"function"==typeof _||"function"==typeof _&&"function"==typeof arguments[3])throw Error(formatProdErrorMessage(0));if("function"==typeof v&&void 0===_&&(_=v,v=void 0),void 0!==_){if("function"!=typeof _)throw Error(formatProdErrorMessage(1));return _(createStore)(h,v)}if("function"!=typeof h)throw Error(formatProdErrorMessage(2));var b,A=h,S=v,C=[],w=C,O=!1;function ensureCanMutateNextListeners(){w===C&&(w=C.slice())}function getState(){if(O)throw Error(formatProdErrorMessage(3));return S}function subscribe(h){if("function"!=typeof h)throw Error(formatProdErrorMessage(4));if(O)throw Error(formatProdErrorMessage(5));var v=!0;return ensureCanMutateNextListeners(),w.push(h),function(){if(v){if(O)throw Error(formatProdErrorMessage(6));v=!1,ensureCanMutateNextListeners();var _=w.indexOf(h);w.splice(_,1),C=null}}}function dispatch(h){if(!function(h){if("object"!=typeof h||null===h)return!1;for(var v=h;null!==Object.getPrototypeOf(v);)v=Object.getPrototypeOf(v);return Object.getPrototypeOf(h)===v}(h))throw Error(formatProdErrorMessage(7));if(void 0===h.type)throw Error(formatProdErrorMessage(8));if(O)throw Error(formatProdErrorMessage(9));try{O=!0,S=A(S,h)}finally{O=!1}for(var v=C=w,_=0;_<v.length;_++)(0,v[_])();return h}return dispatch({type:tR.INIT}),(b={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(h){if("function"!=typeof h)throw Error(formatProdErrorMessage(10));A=h,dispatch({type:tR.REPLACE})}})[tO]=function(){var h;return(h={subscribe:function(h){if("object"!=typeof h||null===h)throw Error(formatProdErrorMessage(11));function observeState(){h.next&&h.next(getState())}return observeState(),{unsubscribe:subscribe(observeState)}}})[tO]=function(){return this},h},b}((h,v)=>v&&v.type===no?v.payload.actions.reduce(C,h):v&&v.type===ns?v.payload.state:C(h,v),b,v?nd(applyMiddleware(...A)):compose(applyMiddleware(...A)));return w}({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter={all:_=_||new Map,on:function(h,v){var b=_.get(h);b?b.push(v):_.set(h,[v])},off:function(h,v){var b=_.get(h);b&&(v?b.splice(b.indexOf(v)>>>0,1):_.set(h,[]))},emit:function(h,v){var b=_.get(h);b&&b.slice().map(function(h){h(v)}),(b=_.get("*"))&&b.slice().map(function(_){_(h,v)})}},this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(h,v)=>v)}defaultFetcher=h=>fetch(h).then(h=>h.json());batch(h){this.isBatching=!0;try{h(this),this.store.dispatch(nl({actions:this.batchQueue}))}catch(h){throw this.batchQueue=[],this.isBatching=!1,h}this.batchQueue=[],this.isBatching=!1}async asyncBatch(h){this.isBatching=!0;try{await h(this),this.store.dispatch(nl({actions:this.batchQueue}))}catch(h){throw this.batchQueue=[],this.isBatching=!1,h}this.batchQueue=[],this.isBatching=!1}modifyEntityField(h,v,_){this.dispatch(tG.modifyEntityField({id:h.id,type:h.type,key:v,value:_}))}dispatch(h){this.isBatching?this.batchQueue.push(h):this.store.dispatch(h)}middleware=h=>v=>_=>{if(_.type===no){for(let v of _.payload.actions)this.emitter.emit(v.type,{realAction:v,state:h.getState()});let b=v(_);for(let h of _.payload.actions)this.emitter.emit(`after:${_.type}`,{action:_,state:b});return b}this.emitter.emit(_.type,{action:_,state:h.getState()});let b=v(_);return this.emitter.emit(`after:${_.type}`,{action:_,state:b}),b};serialize(h,v){return function(h,v,_){if(!v.type||!v.id)throw Error("Unknown entity");if(!_[v.type])throw Error(`Serializer not found for ${v.type}`);return function flatten(b){let A=_[b.type];if(!A)return tC;let S=function(h,v){let _=h.requests[v],b=h.mapping[v];if(b&&(!_||!_.resourceUri||h.entities[b][_.resourceUri]))return h.entities[b][_?_.resourceUri:v]}(h,b.id)||(b.id&&b.type?b:null);if(!S)return tC;let C=A(S,h,{isTopLevel:v.id===b.id}),w=C.next();for(;!w.done;){let h=w.value,v=tC;if(h){if(Array.isArray(h)){let _=[];for(let v of h)_.push(flatten(v));v=_}else v=flatten(h)}w=C.next(v)}return w.value===tC?tC:function(h){let v={};for(let[_,b]of h){if(_===tk&&b!==tC)return b;b!==tC&&null!=b&&(v[_]=b)}return v}(w.value)}(v)}(this.getState().iiif,h,v)}toPresentation2(h){return this.serialize(h,tw)}toPresentation3(h){return this.serialize(h,tI)}hydrate(h,v){return this.get(h,v,{skipSelfReturn:!1})}get(h,v,_={}){"string"!=typeof v&&(_=v||{},v=void 0);let{skipSelfReturn:b=!0}=_||{};if(Array.isArray(h))return h.map(h=>this.get(h,_));let A=this.getState();if("string"==typeof h){let _=v||A.iiif.mapping[h];if(!_)return b?null:{id:h,type:"unknown"};h={id:h,type:_}}let S=v||h.type,C=h.id,w=A.iiif.entities[S];if(!w){let v=A.iiif.requests[C];return v&&v.resourceUri!==C?this.get(v.resourceUri,_):b?null:h}return w[h.id]||(b?null:h)}select(h){return h(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(h,v){let _="string"==typeof h?h:h.id;return this.load(_,v)}loadCollection(h,v){let _="string"==typeof h?h:h.id;return this.load(_,v)}load(h,v){let _="string"==typeof h?h:h.id;return v?this.staticFetcher(_,v):this.remoteFetcher(_)}areInputsEqual(h,v){return areInputsEqual(h,v)}subscribe(h,v,_){void 0===_&&(void 0===v||!1===v||!0===v)&&(_=v,v=h,h=h=>h);let b=_?null:h(this.store.getState());return _||v(b,this),this.store.subscribe(()=>{let _=this.store.getState(),A=h(_);b===A||areInputsEqual(b,A)||v(A,this),b=A})}async ensureLoaded(h){let v="string"==typeof h?h:h.id;this.requestStatus(v)||await this.load(v)}requestStatus(h){return this.select(v=>v.iiif.requests[h])}getResourceMeta(h,v){let _=this.getState().iiif.meta[h];return _?v?_[v]:_:void 0}setMetaValue([h,v,_],b){this.dispatch("function"==typeof b?t0.setMetaValueDynamic({id:h,meta:v,key:_,updateValue:b}):t0.setMetaValue({id:h,meta:v,key:_,value:b}))}};let np="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var nh={randomUUID:np};let nm=new Uint8Array(16),nf=[];for(let h=0;h<256;++h)nf.push((h+256).toString(16).slice(1));var esm_browser_v4=function(h,v,_){if(nh.randomUUID&&!v&&!h)return nh.randomUUID();h=h||{};let A=h.random||(h.rng||function(){if(!b&&!(b="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(nm)})();if(A[6]=15&A[6]|64,A[8]=63&A[8]|128,v){_=_||0;for(let h=0;h<16;++h)v[_+h]=A[h];return v}return function(h,v=0){return nf[h[v+0]]+nf[h[v+1]]+nf[h[v+2]]+nf[h[v+3]]+"-"+nf[h[v+4]]+nf[h[v+5]]+"-"+nf[h[v+6]]+nf[h[v+7]]+"-"+nf[h[v+8]]+nf[h[v+9]]+"-"+nf[h[v+10]]+nf[h[v+11]]+nf[h[v+12]]+nf[h[v+13]]+nf[h[v+14]]+nf[h[v+15]]}(A)};let ng=window.OpenSeadragon;if(!ng&&!(ng=ej))throw Error("OpenSeadragon is missing.");let nE="http://www.w3.org/2000/svg";ng.Viewer&&(ng.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new H(this)),this._svgOverlayInfo});let H=function(h){let v=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(nE,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(nE,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){v.resize()}),this._viewer.addHandler("open",function(){v.resize()}),this._viewer.addHandler("rotate",function(){v.resize()}),this._viewer.addHandler("flip",function(){v.resize()}),this._viewer.addHandler("resize",function(){v.resize()}),this.resize()};H.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new ng.Point(0,0),!0),v=this._viewer.viewport.getZoom(!0),_=this._viewer.viewport.getRotation(),b=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,S=A*v,C=S;b&&(S=-S,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+S+","+C+") rotate("+_+")")},onClick:function(h,v){new ng.MouseTracker({element:h,clickHandler:v}).setTracking(!0)}};let R=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(v=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${v}`)}),W=h=>{let v,_;return Array.isArray(h)&&(v=h[0])&&(_="@id"in v?v["@id"]:v.id),_};var nv=((M=nv||{}).TiledImage="tiledImage",M.SimpleImage="simpleImage",M);let D=h=>{let v=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,_=v?W(null==h?void 0:h.service):null==h?void 0:h.id,b=v?nv.TiledImage:nv.SimpleImage;return{uri:_,imageType:b}},N=(h,v)=>{let _=v?nv.TiledImage:nv.SimpleImage;return{uri:h,imageType:_}},{styled:nT,css:ny,keyframes:n_,createTheme:nb}=(0,eY.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),nA=nT("div",{display:"flex",flexDirection:"column",alignItems:"center"}),nx=nT("p",{fontWeight:"bold",fontSize:"x-large"}),nS=nT("span",{fontSize:"medium"}),Y=({error:h})=>{let{message:v}=h;return eV.createElement(nA,{role:"alert"},eV.createElement(nx,{"data-testid":"headline"},"Something went wrong"),v&&eV.createElement(nS,null,`Error message: ${v}`," "))},nC=nT("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),nk=nT("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),nw=nT("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${nC}`]:{display:"block"}},false:{[`${nC}`]:{display:"none"}}}}}),nI=nT("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),f=({className:h,id:v,label:_,children:b})=>{let A=_.toLowerCase().replace(/\s/g,"-");return eV.createElement(nI,{id:v,className:h,"data-testid":"openseadragon-button","data-button":A},eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${v}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eV.createElement("title",{id:`${v}-svg-title`},_),b))},nN=nT("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),nO={annotationOverlays:{backgroundColor:"#6666ff",borderColor:"#000099",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",contentSearch:{searchResultsLimit:20,overlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:4}},ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:{behavior:"smooth",block:"center"}}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0,renderContentSearch:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1,localeText:{contentSearch:{tabLabel:"Search Results",formPlaceholder:"Enter search words",noSearchResults:"No search results",loading:"Loading...",moreResults:"more results"}}},nR=(F=null==(eE=null==(eg=null==nO?void 0:nO.informationPanel)?void 0:eg.vtt)?void 0:eE.autoScroll,O={...nO.informationPanel.vtt.autoScroll},"object"==typeof F&&(O="enabled"in F?F:{enabled:!0,settings:F}),!1===F&&(O.enabled=!1),function({behavior:h,block:v}){let _=["auto","instant","smooth"],b=["center","end","nearest","start"];if(!_.includes(h))throw TypeError(`'${h}' not in ${_.join(" | ")}`);if(!b.includes(v))throw TypeError(`'${v}' not in ${b.join(" | ")}`)}(O.settings),O),nL={activeCanvas:"",activeManifest:"",OSDImageLoaded:!1,collection:{},configOptions:nO,customDisplays:[],plugins:[],isAutoScrollEnabled:nR.enabled,isAutoScrolling:!1,isInformationOpen:null==(ev=null==nO?void 0:nO.informationPanel)?void 0:ev.open,isLoaded:!1,isUserScrolling:void 0,vault:new Vault,contentSearchVault:new Vault,openSeadragonViewer:null,viewerId:esm_browser_v4()},nD=eV.createContext(nL),nP=eV.createContext(nL);function k(){let h=eV.useContext(nD);if(void 0===h)throw Error("useViewerState must be used within a ViewerProvider");return h}function P(){let h=eV.useContext(nP);if(void 0===h)throw Error("useViewerDispatch must be used within a ViewerProvider");return h}let ae=()=>eV.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),se=()=>eV.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),le=()=>eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),ce=()=>eV.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),z=()=>eV.createElement(eV.Fragment,null,eV.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eV.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),de=({_cloverViewerHasPlaceholder:h,config:v})=>{let _=k(),{activeCanvas:b,plugins:A,vault:S}=_,C=S.get({id:b,type:"Canvas"});return eV.createElement(nN,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},v.showZoomControl&&eV.createElement(eV.Fragment,null,eV.createElement(f,{id:v.zoomInButton,label:"zoom in"},eV.createElement(ae,null)),eV.createElement(f,{id:v.zoomOutButton,label:"zoom out"},eV.createElement(se,null))),v.showFullPageControl&&eV.createElement(f,{id:v.fullPageButton,label:"full page"},eV.createElement(le,null)),v.showRotationControl&&eV.createElement(eV.Fragment,null,eV.createElement(f,{id:v.rotateRightButton,label:"rotate right"},eV.createElement(z,null)),eV.createElement(f,{id:v.rotateLeftButton,label:"rotate left"},eV.createElement(z,null))),v.showHomeControl&&eV.createElement(f,{id:v.homeButton,label:"reset"},eV.createElement(ce,null)),A.filter(h=>{var v;return null==(v=h.imageViewer)?void 0:v.controls}).map((h,v)=>{var _,b,A,S;let w=null==(b=null==(_=h.imageViewer)?void 0:_.controls)?void 0:b.component;return eV.createElement(w,{key:v,...null==(S=null==(A=null==h?void 0:h.imageViewer)?void 0:A.controls)?void 0:S.componentProps,canvas:C,useViewerDispatch:P,useViewerState:k})}))},ue=({ariaLabel:h,config:v,uri:_,_cloverViewerHasPlaceholder:b,imageType:A,openSeadragonCallback:S})=>{let[C,w]=(0,eV.useState)(),[O,L]=(0,eV.useState)(),M=P(),F=(0,eV.useRef)(!1);return(0,eV.useEffect)(()=>(F.current||(F.current=!0,O||L(ej(v))),()=>null==O?void 0:O.destroy()),[]),(0,eV.useEffect)(()=>{O&&S&&S(O)},[O,S]),(0,eV.useEffect)(()=>{O&&_!==C&&(null==O||O.forceRedraw(),w(_))},[O,C,_]),(0,eV.useEffect)(()=>{if(C&&O)switch(A){case"simpleImage":null==O||O.addSimpleImage({url:C});break;case"tiledImage":R(C).then(h=>{try{if(!h)throw Error(`No tile source found for ${C}`);null==O||O.addTiledImage({tileSource:h,success:()=>{"function"==typeof M&&M({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}})}catch(h){console.error(h)}});break;default:null==O||O.close(),console.warn(`Unable to render ${C} in OpenSeadragon as type: "${A}"`)}},[A,C]),eV.createElement(nw,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":v.id,hasNavigator:v.showNavigator},eV.createElement(de,{_cloverViewerHasPlaceholder:b,config:v}),v.showNavigator&&eV.createElement(nC,{id:v.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eV.createElement(nk,{id:v.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},me=(h,v="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[v]){let v=Object.getOwnPropertyNames(h);if(v.length>0)return h[v[0]]}return h[v]&&Array.isArray(h[v])?h[v]:null},pe=(h,v="none",_=", ")=>{let b=me(h,v);return Array.isArray(b)?b.join(`${_}`):b},Ce=({_cloverViewerHasPlaceholder:h=!1,body:v,instanceId:_,isTiledImage:b=!1,label:A,src:S="",openSeadragonCallback:C,openSeadragonConfig:w={}})=>{let O=_||esm_browser_v4(),L="string"==typeof A?A:pe(A),M={id:`openseadragon-${O}`,navigatorId:`openseadragon-navigator-${O}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${O}`,homeButton:`reset-${O}`,rotateLeftButton:`rotateLeft-${O}`,rotateRightButton:`rotateRight-${O}`,zoomInButton:`zoomIn-${O}`,zoomOutButton:`zoomOut-${O}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...w},{imageType:F,uri:U}=v?D(v):N(S,b);return U?eV.createElement(ErrorBoundary,{FallbackComponent:Y},eV.createElement(ue,{_cloverViewerHasPlaceholder:h,ariaLabel:L,config:M,imageType:F,key:O,uri:U,openSeadragonCallback:C})):null};var nM=_(1830),nF=_(1036),nB=_(8268);let nH="object"==typeof self?self:globalThis,deserializer=(h,v)=>{let as=(v,_)=>(h.set(_,v),v),unpair=_=>{if(h.has(_))return h.get(_);let[b,A]=v[_];switch(b){case 0:case -1:return as(A,_);case 1:{let h=as([],_);for(let v of A)h.push(unpair(v));return h}case 2:{let h=as({},_);for(let[v,_]of A)h[unpair(v)]=unpair(_);return h}case 3:return as(new Date(A),_);case 4:{let{source:h,flags:v}=A;return as(new RegExp(h,v),_)}case 5:{let h=as(new Map,_);for(let[v,_]of A)h.set(unpair(v),unpair(_));return h}case 6:{let h=as(new Set,_);for(let v of A)h.add(unpair(v));return h}case 7:{let{name:h,message:v}=A;return as(new nH[h](v),_)}case 8:return as(BigInt(A),_);case"BigInt":return as(Object(BigInt(A)),_)}return as(new nH[b](A),_)};return unpair},deserialize=h=>deserializer(new Map,h)(0),{toString:nU}={},{keys:nz}=Object,typeOf=h=>{let v=typeof h;if("object"!==v||!h)return[0,v];let _=nU.call(h).slice(8,-1);switch(_){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""]}return _.includes("Array")?[1,_]:_.includes("Error")?[7,_]:[2,_]},shouldSkip=([h,v])=>0===h&&("function"===v||"symbol"===v),serializer=(h,v,_,b)=>{let as=(h,v)=>{let A=b.push(h)-1;return _.set(v,A),A},pair=b=>{if(_.has(b))return _.get(b);let[A,S]=typeOf(b);switch(A){case 0:{let v=b;switch(S){case"bigint":A=8,v=b.toString();break;case"function":case"symbol":if(h)throw TypeError("unable to serialize "+S);v=null;break;case"undefined":return as([-1],b)}return as([A,v],b)}case 1:{if(S)return as([S,[...b]],b);let h=[],v=as([A,h],b);for(let v of b)h.push(pair(v));return v}case 2:{if(S)switch(S){case"BigInt":return as([S,b.toString()],b);case"Boolean":case"Number":case"String":return as([S,b.valueOf()],b)}if(v&&"toJSON"in b)return pair(b.toJSON());let _=[],C=as([A,_],b);for(let v of nz(b))(h||!shouldSkip(typeOf(b[v])))&&_.push([pair(v),pair(b[v])]);return C}case 3:return as([A,b.toISOString()],b);case 4:{let{source:h,flags:v}=b;return as([A,{source:h,flags:v}],b)}case 5:{let v=[],_=as([A,v],b);for(let[_,A]of b)(h||!(shouldSkip(typeOf(_))||shouldSkip(typeOf(A))))&&v.push([pair(_),pair(A)]);return _}case 6:{let v=[],_=as([A,v],b);for(let _ of b)(h||!shouldSkip(typeOf(_)))&&v.push(pair(_));return _}}let{message:C}=b;return as([A,{name:S,message:C}],b)};return pair},serialize_serialize=(h,{json:v,lossy:_}={})=>{let b=[];return serializer(!(v||_),!!v,new Map,b)(h),b};var n$="function"==typeof structuredClone?(h,v)=>v&&("json"in v||"lossy"in v)?deserialize(serialize_serialize(h,v)):structuredClone(h):(h,v)=>deserialize(serialize_serialize(h,v));let Schema=class Schema{constructor(h,v,_){this.property=h,this.normal=v,_&&(this.space=_)}};function merge_merge(h,v){let _={},b={},A=-1;for(;++A<h.length;)Object.assign(_,h[A].property),Object.assign(b,h[A].normal);return new Schema(_,b,v)}function normalize_normalize(h){return h.toLowerCase()}Schema.prototype.property={},Schema.prototype.normal={},Schema.prototype.space=null;let Info=class Info{constructor(h,v){this.property=h,this.attribute=v}};Info.prototype.space=null,Info.prototype.boolean=!1,Info.prototype.booleanish=!1,Info.prototype.overloadedBoolean=!1,Info.prototype.number=!1,Info.prototype.commaSeparated=!1,Info.prototype.spaceSeparated=!1,Info.prototype.commaOrSpaceSeparated=!1,Info.prototype.mustUseProperty=!1,Info.prototype.defined=!1;let nG=0,nj=increment(),nV=increment(),nW=increment(),nq=increment(),nY=increment(),nQ=increment(),nX=increment();function increment(){return 2**++nG}let nK=Object.keys(e$);let DefinedInfo=class DefinedInfo extends Info{constructor(h,v,_,b){var A,S;let C=-1;if(super(h,v),b&&(this.space=b),"number"==typeof _)for(;++C<nK.length;){let h=nK[C];A=nK[C],(S=(_&e$[h])===e$[h])&&(this[A]=S)}}};DefinedInfo.prototype.defined=!0;let nZ={}.hasOwnProperty;function create(h){let v;let _={},b={};for(v in h.properties)if(nZ.call(h.properties,v)){let A=h.properties[v],S=new DefinedInfo(v,h.transform(h.attributes||{},v),A,h.space);h.mustUseProperty&&h.mustUseProperty.includes(v)&&(S.mustUseProperty=!0),_[v]=S,b[normalize_normalize(v)]=v,b[normalize_normalize(S.attribute)]=v}return new Schema(_,b,h.space)}let nJ=create({space:"xlink",transform:(h,v)=>"xlink:"+v.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),n0=create({space:"xml",transform:(h,v)=>"xml:"+v.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function caseSensitiveTransform(h,v){return v in h?h[v]:v}function caseInsensitiveTransform(h,v){return caseSensitiveTransform(h,v.toLowerCase())}let n1=create({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}}),n2=create({transform:(h,v)=>"role"===v?v:"aria-"+v.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:nV,ariaAutoComplete:null,ariaBusy:nV,ariaChecked:nV,ariaColCount:nq,ariaColIndex:nq,ariaColSpan:nq,ariaControls:nY,ariaCurrent:null,ariaDescribedBy:nY,ariaDetails:null,ariaDisabled:nV,ariaDropEffect:nY,ariaErrorMessage:null,ariaExpanded:nV,ariaFlowTo:nY,ariaGrabbed:nV,ariaHasPopup:null,ariaHidden:nV,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nY,ariaLevel:nq,ariaLive:null,ariaModal:nV,ariaMultiLine:nV,ariaMultiSelectable:nV,ariaOrientation:null,ariaOwns:nY,ariaPlaceholder:null,ariaPosInSet:nq,ariaPressed:nV,ariaReadOnly:nV,ariaRelevant:null,ariaRequired:nV,ariaRoleDescription:nY,ariaRowCount:nq,ariaRowIndex:nq,ariaRowSpan:nq,ariaSelected:nV,ariaSetSize:nq,ariaSort:null,ariaValueMax:nq,ariaValueMin:nq,ariaValueNow:nq,ariaValueText:null,role:null}}),n3=create({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:nQ,acceptCharset:nY,accessKey:nY,action:null,allow:null,allowFullScreen:nj,allowPaymentRequest:nj,allowUserMedia:nj,alt:null,as:null,async:nj,autoCapitalize:null,autoComplete:nY,autoFocus:nj,autoPlay:nj,blocking:nY,capture:nj,charSet:null,checked:nj,cite:null,className:nY,cols:nq,colSpan:null,content:null,contentEditable:nV,controls:nj,controlsList:nY,coords:nq|nQ,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nj,defer:nj,dir:null,dirName:null,disabled:nj,download:nW,draggable:nV,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nj,formTarget:null,headers:nY,height:nq,hidden:nj,high:nq,href:null,hrefLang:null,htmlFor:nY,httpEquiv:nY,id:null,imageSizes:null,imageSrcSet:null,inert:nj,inputMode:null,integrity:null,is:null,isMap:nj,itemId:null,itemProp:nY,itemRef:nY,itemScope:nj,itemType:nY,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nj,low:nq,manifest:null,max:null,maxLength:nq,media:null,method:null,min:null,minLength:nq,multiple:nj,muted:nj,name:null,nonce:null,noModule:nj,noValidate:nj,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nj,optimum:nq,pattern:null,ping:nY,placeholder:null,playsInline:nj,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:nj,referrerPolicy:null,rel:nY,required:nj,reversed:nj,rows:nq,rowSpan:nq,sandbox:nY,scope:null,scoped:nj,seamless:nj,selected:nj,shape:null,size:nq,sizes:null,slot:null,span:nq,spellCheck:nV,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nq,step:null,style:null,tabIndex:nq,target:null,title:null,translate:null,type:null,typeMustMatch:nj,useMap:null,value:nV,width:nq,wrap:null,align:null,aLink:null,archive:nY,axis:null,background:null,bgColor:null,border:nq,borderColor:null,bottomMargin:nq,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nj,declare:nj,event:null,face:null,frame:null,frameBorder:null,hSpace:nq,leftMargin:nq,link:null,longDesc:null,lowSrc:null,marginHeight:nq,marginWidth:nq,noResize:nj,noHref:nj,noShade:nj,noWrap:nj,object:null,profile:null,prompt:null,rev:null,rightMargin:nq,rules:null,scheme:null,scrolling:nV,standby:null,summary:null,text:null,topMargin:nq,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nq,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nj,disableRemotePlayback:nj,prefix:null,property:null,results:nq,security:null,unselectable:null}}),n4=create({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:caseSensitiveTransform,properties:{about:nX,accentHeight:nq,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nq,amplitude:nq,arabicForm:null,ascent:nq,attributeName:null,attributeType:null,azimuth:nq,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nq,by:null,calcMode:null,capHeight:nq,className:nY,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nq,diffuseConstant:nq,direction:null,display:null,dur:null,divisor:nq,dominantBaseline:null,download:nj,dx:null,dy:null,edgeMode:null,editable:null,elevation:nq,enableBackground:null,end:null,event:null,exponent:nq,externalResourcesRequired:null,fill:null,fillOpacity:nq,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:nQ,g2:nQ,glyphName:nQ,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nq,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nq,horizOriginX:nq,horizOriginY:nq,id:null,ideographic:nq,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nq,k:nq,k1:nq,k2:nq,k3:nq,k4:nq,kernelMatrix:nX,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nq,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nq,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nq,overlineThickness:nq,paintOrder:null,panose1:null,path:null,pathLength:nq,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nY,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nq,pointsAtY:nq,pointsAtZ:nq,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nX,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nX,rev:nX,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nX,requiredFeatures:nX,requiredFonts:nX,requiredFormats:nX,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nq,specularExponent:nq,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nq,strikethroughThickness:nq,string:null,stroke:null,strokeDashArray:nX,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nq,strokeOpacity:nq,strokeWidth:null,style:null,surfaceScale:nq,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nX,tabIndex:nq,tableValues:null,target:null,targetX:nq,targetY:nq,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nX,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nq,underlineThickness:nq,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nq,values:null,vAlphabetic:nq,vMathematical:nq,vectorEffect:null,vHanging:nq,vIdeographic:nq,version:null,vertAdvY:nq,vertOriginX:nq,vertOriginY:nq,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nq,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),n5=merge_merge([n0,nJ,n1,n2,n3],"html"),n6=merge_merge([n0,nJ,n1,n2,n4],"svg");function parse(h){let v=[],_=String(h||""),b=_.indexOf(","),A=0,S=!1;for(;!S;){-1===b&&(b=_.length,S=!0);let h=_.slice(A,b).trim();(h||!S)&&v.push(h),A=b+1,b=_.indexOf(",",A)}return v}function comma_separated_tokens_stringify(h,v){let _=v||{},b=""===h[h.length-1]?[...h,""]:h;return b.join((_.padRight?" ":"")+","+(!1===_.padLeft?"":" ")).trim()}let n8=/[#.]/g,n9=/^data[-\w.:]+$/i,n7=/-[a-z]/g,rt=/[A-Z]/g;function find(h,v){let _=normalize_normalize(v),b=v,A=Info;if(_ in h.normal)return h.property[h.normal[_]];if(_.length>4&&"data"===_.slice(0,4)&&n9.test(v)){if("-"===v.charAt(4)){let h=v.slice(5).replace(n7,camelcase);b="data"+h.charAt(0).toUpperCase()+h.slice(1)}else{let h=v.slice(4);if(!n7.test(h)){let _=h.replace(rt,kebab);"-"!==_.charAt(0)&&(_="-"+_),v="data"+_}}A=DefinedInfo}return new A(b,v)}function kebab(h){return"-"+h.toLowerCase()}function camelcase(h){return h.charAt(1).toUpperCase()}function space_separated_tokens_parse(h){let v=String(h||"").trim();return v?v.split(/[ \t\n\r\f]+/g):[]}function space_separated_tokens_stringify(h){return h.join(" ").trim()}let rr=new Set(["button","menu","reset","submit"]),ro={}.hasOwnProperty;function createH(h,v,_){let b=_&&function(h){let v={},_=-1;for(;++_<h.length;)v[h[_].toLowerCase()]=h[_];return v}(_);return function(_,A,...S){let C,w=-1;if(null==_)C={type:"root",children:[]},S.unshift(A);else{var O;if((C=function(h,v){let _,b;let A=h||"",S={},C=0;for(;C<A.length;){n8.lastIndex=C;let h=n8.exec(A),v=A.slice(C,h?h.index:A.length);v&&(_?"#"===_?S.id=v:Array.isArray(S.className)?S.className.push(v):S.className=[v]:b=v,C+=v.length),h&&(_=h[0],C++)}return{type:"element",tagName:b||v||"div",properties:S,children:[]}}(_,v)).tagName=C.tagName.toLowerCase(),b&&ro.call(b,C.tagName)&&(C.tagName=b[C.tagName]),O=C.tagName,!(null==A||"object"!=typeof A||Array.isArray(A))&&("input"===O||!A.type||"string"!=typeof A.type||!("children"in A&&Array.isArray(A.children))&&("button"===O?rr.has(A.type.toLowerCase()):!("value"in A)))){let v;for(v in A)ro.call(A,v)&&function(h,v,_,b){let A;let S=find(h,_),C=-1;if(null!=b){if("number"==typeof b){if(Number.isNaN(b))return;A=b}else A="boolean"==typeof b?b:"string"==typeof b?S.spaceSeparated?space_separated_tokens_parse(b):S.commaSeparated?parse(b):S.commaOrSpaceSeparated?space_separated_tokens_parse(parse(b).join(" ")):parsePrimitive(S,S.property,b):Array.isArray(b)?b.concat():"style"===S.property?function(h){let v;let _=[];for(v in h)ro.call(h,v)&&_.push([v,h[v]].join(": "));return _.join("; ")}(b):String(b);if(Array.isArray(A)){let h=[];for(;++C<A.length;){let v=parsePrimitive(S,S.property,A[C]);h[C]=v}A=h}if("className"===S.property&&Array.isArray(v.className)){let h=A;A=v.className.concat(h)}v[S.property]=A}}(h,C.properties,v,A[v])}else S.unshift(A)}for(;++w<S.length;)!function addChild(h,v){let _=-1;if(null==v);else if("string"==typeof v||"number"==typeof v)h.push({type:"text",value:String(v)});else if(Array.isArray(v))for(;++_<v.length;)addChild(h,v[_]);else if("object"==typeof v&&"type"in v)"root"===v.type?addChild(h,v.children):h.push(v);else throw Error("Expected node, nodes, or string, got `"+v+"`")}(C.children,S[w]);return"element"===C.type&&"template"===C.tagName&&(C.content={type:"root",children:C.children},C.children=[]),C}}function parsePrimitive(h,v,_){if("string"==typeof _){if(h.number&&_&&!Number.isNaN(Number(_)))return Number(_);if((h.boolean||h.overloadedBoolean)&&(""===_||normalize_normalize(_)===normalize_normalize(v)))return!0}return _}let rs=createH(n5,"div"),rl=createH(n6,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]),rc=/\r?\n|\r/g,ru={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rd={}.hasOwnProperty,rp=Object.prototype;function one(h,v){let _;switch(v.nodeName){case"#comment":return _={type:"comment",value:v.data},patch(h,v,_),_;case"#document":case"#document-fragment":{let b="mode"in v&&("quirks"===v.mode||"limited-quirks"===v.mode);if(_={type:"root",children:lib_all(h,v.childNodes),data:{quirksMode:b}},h.file&&h.location){let v=String(h.file),b=function(h){let v=String(h),_=[];for(rc.lastIndex=0;rc.test(v);)_.push(rc.lastIndex);return _.push(v.length+1),{toPoint:function(h){let v=-1;if("number"==typeof h&&h>-1&&h<_[_.length-1]){for(;++v<_.length;)if(_[v]>h)return{line:v+1,column:h-(v>0?_[v-1]:0)+1,offset:h}}},toOffset:function(h){let v=h&&h.line,b=h&&h.column;if("number"==typeof v&&"number"==typeof b&&!Number.isNaN(v)&&!Number.isNaN(b)&&v-1 in _){let h=(_[v-2]||0)+b-1||0;if(h>-1&&h<_[_.length-1])return h}}}}(v),A=b.toPoint(0),S=b.toPoint(v.length);_.position={start:A,end:S}}return _}case"#documentType":return patch(h,v,_={type:"doctype"}),_;case"#text":return _={type:"text",value:v.value},patch(h,v,_),_;default:return function(h,v){let _=h.schema;h.schema=v.namespaceURI===ru.svg?n6:n5;let b=-1,A={};for(;++b<v.attrs.length;){let h=v.attrs[b],_=(h.prefix?h.prefix+":":"")+h.name;rd.call(rp,_)||(A[_]=h.value)}let S="svg"===h.schema.space?rl:rs,C=S(v.tagName,A,lib_all(h,v.childNodes));if(patch(h,v,C),"template"===C.tagName){let _=v.sourceCodeLocation,b=_&&_.startTag&&position(_.startTag),A=_&&_.endTag&&position(_.endTag),S=one(h,v.content);b&&A&&h.file&&(S.position={start:b.end,end:A.start}),C.content=S}return h.schema=_,C}(h,v)}}function lib_all(h,v){let _=-1,b=[];for(;++_<v.length;){let A=one(h,v[_]);b.push(A)}return b}function patch(h,v,_){if("sourceCodeLocation"in v&&v.sourceCodeLocation&&h.file){let b=function(h,v,_){let b=position(_);if("element"===v.type){let A=v.children[v.children.length-1];if(b&&!_.endTag&&A&&A.position&&A.position.end&&(b.end=Object.assign({},A.position.end)),h.verbose){let b;let A={};if(_.attrs)for(b in _.attrs)rd.call(_.attrs,b)&&(A[find(h.schema,b).property]=position(_.attrs[b]));_.startTag;let S=position(_.startTag),C=_.endTag?position(_.endTag):void 0,w={opening:S};C&&(w.closing=C),w.properties=A,v.data={position:w}}}return b}(h,_,v.sourceCodeLocation);b&&(h.location=!0,_.position=b)}}function position(h){let v=point({line:h.startLine,column:h.startCol,offset:h.startOffset}),_=point({line:h.endLine,column:h.endCol,offset:h.endOffset});return v||_?{start:v,end:_}:void 0}function point(h){return h.line&&h.column?h:void 0}let rh={}.hasOwnProperty;function zwitch(h,v){let _=v||{};function one(v,..._){let b=one.invalid,A=one.handlers;if(v&&rh.call(v,h)){let _=String(v[h]);b=rh.call(A,_)?A[_]:one.unknown}if(b)return b.call(this,v,..._)}return one.handlers=_.handlers||{},one.invalid=_.invalid,one.unknown=_.unknown,one}let rm={},rf={}.hasOwnProperty,rg=zwitch("type",{handlers:{root:function(h,v){let _={nodeName:"#document",mode:(h.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return _.childNodes=hast_util_to_parse5_lib_all(h.children,_,v),lib_patch(h,_),_},element:function(h,v){let _;let b=v;"element"===h.type&&"svg"===h.tagName.toLowerCase()&&"html"===v.space&&(b=n6);let A=[];if(h.properties){for(_ in h.properties)if("children"!==_&&rf.call(h.properties,_)){let v=function(h,v,_){let b=find(h,v);if(!1===_||null==_||"number"==typeof _&&Number.isNaN(_)||!_&&b.boolean)return;Array.isArray(_)&&(_=b.commaSeparated?comma_separated_tokens_stringify(_):space_separated_tokens_stringify(_));let A={name:b.attribute,value:!0===_?"":String(_)};if(b.space&&"html"!==b.space&&"svg"!==b.space){let h=A.name.indexOf(":");h<0?A.prefix="":(A.name=A.name.slice(h+1),A.prefix=b.attribute.slice(0,h)),A.namespace=ru[b.space]}return A}(b,_,h.properties[_]);v&&A.push(v)}}let S=b.space,C={nodeName:h.tagName,tagName:h.tagName,attrs:A,namespaceURI:ru[S],childNodes:[],parentNode:null};return C.childNodes=hast_util_to_parse5_lib_all(h.children,C,b),lib_patch(h,C),"template"===h.tagName&&h.content&&(C.content=function(h,v){let _={nodeName:"#document-fragment",childNodes:[]};return _.childNodes=hast_util_to_parse5_lib_all(h.children,_,v),lib_patch(h,_),_}(h.content,b)),C},text:function(h){let v={nodeName:"#text",value:h.value,parentNode:null};return lib_patch(h,v),v},comment:function(h){let v={nodeName:"#comment",data:h.value,parentNode:null};return lib_patch(h,v),v},doctype:function(h){let v={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return lib_patch(h,v),v}}});function hast_util_to_parse5_lib_all(h,v,_){let b=-1,A=[];if(h)for(;++b<h.length;){let S=rg(h[b],_);S.parentNode=v,A.push(S)}return A}function lib_patch(h,v){let _=h.position;_&&_.start&&_.end&&(_.start.offset,_.end.offset,v.sourceCodeLocation={startLine:_.start.line,startCol:_.start.column,startOffset:_.start.offset,endLine:_.end.line,endCol:_.end.column,endOffset:_.end.offset})}let rE=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],rv=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);(U=eT=eT||(eT={}))[U.EOF=-1]="EOF",U[U.NULL=0]="NULL",U[U.TABULATION=9]="TABULATION",U[U.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",U[U.LINE_FEED=10]="LINE_FEED",U[U.FORM_FEED=12]="FORM_FEED",U[U.SPACE=32]="SPACE",U[U.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",U[U.QUOTATION_MARK=34]="QUOTATION_MARK",U[U.NUMBER_SIGN=35]="NUMBER_SIGN",U[U.AMPERSAND=38]="AMPERSAND",U[U.APOSTROPHE=39]="APOSTROPHE",U[U.HYPHEN_MINUS=45]="HYPHEN_MINUS",U[U.SOLIDUS=47]="SOLIDUS",U[U.DIGIT_0=48]="DIGIT_0",U[U.DIGIT_9=57]="DIGIT_9",U[U.SEMICOLON=59]="SEMICOLON",U[U.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",U[U.EQUALS_SIGN=61]="EQUALS_SIGN",U[U.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",U[U.QUESTION_MARK=63]="QUESTION_MARK",U[U.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",U[U.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",U[U.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",U[U.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",U[U.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",U[U.GRAVE_ACCENT=96]="GRAVE_ACCENT",U[U.LATIN_SMALL_A=97]="LATIN_SMALL_A",U[U.LATIN_SMALL_F=102]="LATIN_SMALL_F",U[U.LATIN_SMALL_X=120]="LATIN_SMALL_X",U[U.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",U[U.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER";let rT={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(h){return h>=55296&&h<=57343}function isControlCodePoint(h){return 32!==h&&10!==h&&13!==h&&9!==h&&12!==h&&h>=1&&h<=31||h>=127&&h<=159}function isUndefinedCodePoint(h){return h>=64976&&h<=65007||rv.has(h)}($=ey=ey||(ey={})).controlCharacterInInputStream="control-character-in-input-stream",$.noncharacterInInputStream="noncharacter-in-input-stream",$.surrogateInInputStream="surrogate-in-input-stream",$.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",$.endTagWithAttributes="end-tag-with-attributes",$.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",$.unexpectedSolidusInTag="unexpected-solidus-in-tag",$.unexpectedNullCharacter="unexpected-null-character",$.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",$.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",$.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",$.missingEndTagName="missing-end-tag-name",$.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",$.unknownNamedCharacterReference="unknown-named-character-reference",$.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",$.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",$.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",$.eofBeforeTagName="eof-before-tag-name",$.eofInTag="eof-in-tag",$.missingAttributeValue="missing-attribute-value",$.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",$.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",$.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",$.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",$.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",$.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",$.missingDoctypePublicIdentifier="missing-doctype-public-identifier",$.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",$.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",$.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",$.cdataInHtmlContent="cdata-in-html-content",$.incorrectlyOpenedComment="incorrectly-opened-comment",$.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",$.eofInDoctype="eof-in-doctype",$.nestedComment="nested-comment",$.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",$.eofInComment="eof-in-comment",$.incorrectlyClosedComment="incorrectly-closed-comment",$.eofInCdata="eof-in-cdata",$.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",$.nullCharacterReference="null-character-reference",$.surrogateCharacterReference="surrogate-character-reference",$.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",$.controlCharacterReference="control-character-reference",$.noncharacterCharacterReference="noncharacter-character-reference",$.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",$.missingDoctypeName="missing-doctype-name",$.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",$.duplicateAttribute="duplicate-attribute",$.nonConformingDoctype="non-conforming-doctype",$.missingDoctype="missing-doctype",$.misplacedDoctype="misplaced-doctype",$.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",$.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",$.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",$.openElementsLeftAfterEof="open-elements-left-after-eof",$.abandonedHeadElementChild="abandoned-head-element-child",$.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",$.nestedNoscriptInHead="nested-noscript-in-head",$.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text";let Preprocessor=class Preprocessor{constructor(h){this.handler=h,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(h){let{line:v,col:_,offset:b}=this;return{code:h,startLine:v,endLine:v,startCol:_,endCol:_,startOffset:b,endOffset:b}}_err(h){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(h)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(h){if(this.pos!==this.html.length-1){let v=this.html.charCodeAt(this.pos+1);if(v>=56320&&v<=57343)return this.pos++,this._addGap(),(h-55296)*1024+9216+v}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,eT.EOF;return this._err(ey.surrogateInInputStream),h}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(h,v){this.html.length>0?this.html+=h:this.html=h,this.endOfChunkHit=!1,this.lastChunkWritten=v}insertHtmlAtCurrentPos(h){this.html=this.html.substring(0,this.pos+1)+h+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(h,v){if(this.pos+h.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(v)return this.html.startsWith(h,this.pos);for(let v=0;v<h.length;v++){let _=32|this.html.charCodeAt(this.pos+v);if(_!==h.charCodeAt(v))return!1}return!0}peek(h){let v=this.pos+h;if(v>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,eT.EOF;let _=this.html.charCodeAt(v);return _===eT.CARRIAGE_RETURN?eT.LINE_FEED:_}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,eT.EOF;let h=this.html.charCodeAt(this.pos);if(h===eT.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,eT.LINE_FEED;if(h===eT.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,isSurrogate(h)&&(h=this._processSurrogate(h));let v=null===this.handler.onParseError||h>31&&h<127||h===eT.LINE_FEED||h===eT.CARRIAGE_RETURN||h>159&&h<64976;return v||this._checkForProblematicCharacters(h),h}_checkForProblematicCharacters(h){isControlCodePoint(h)?this._err(ey.controlCharacterInInputStream):isUndefinedCodePoint(h)&&this._err(ey.noncharacterInInputStream)}retreat(h){for(this.pos-=h;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}};function getTokenAttr(h,v){for(let _=h.attrs.length-1;_>=0;_--)if(h.attrs[_].name===v)return h.attrs[_].value;return null}(G=e_=e_||(e_={}))[G.CHARACTER=0]="CHARACTER",G[G.NULL_CHARACTER=1]="NULL_CHARACTER",G[G.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",G[G.START_TAG=3]="START_TAG",G[G.END_TAG=4]="END_TAG",G[G.COMMENT=5]="COMMENT",G[G.DOCTYPE=6]="DOCTYPE",G[G.EOF=7]="EOF",G[G.HIBERNATION=8]="HIBERNATION";var ry=new Uint16Array('<\xd5\x00\x00\x00\x00\x00\x00EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\ud835\udd04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\ud835\udd38plyFunction;ing\xc5cs\xbe\xc3r;\ud835\udc9cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\ud835\udd05pf;\ud835\udd39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\ud835\udc9ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\ud835\udd07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\x00\x00\x00\x00f;\ud835\udd3b;DEot;qual;bleCDLRUVontourIntegra\xeco\x00\x00\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\x00\x00rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\x00\x00ightVector;eeVector;ector;Bar;ight\x00eeVector;ector;Bar;ee;Arrow;ctr;\ud835\udc9frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\ud835\udd08rave\xc8ement;apcr;ty\x00\x00mallSquare;erySmallSquare;gpon;f;\ud835\udd3csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\ud835\udd09lled\x00\x00mallSquare;erySmallSquare;\x00\x00\x00f;\ud835\udd3dAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\ud835\udd0a;pf;\ud835\udd3eeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\ud835\udca2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\x00f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\x00;egrral;section;isibleCTomma;imes;gpton;f;\ud835\udd40a;cr;ilde;\x00cy;l\xcfcfosuiyrc;;r;\ud835\udd0dpf;\ud835\udd41\x00r;\ud835\udca5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\ud835\udd0epf;\ud835\udd42cr;\ud835\udca6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\ud835\udd0f;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\ud835\udd43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\ud835\udd10nusPlus;pf;\ud835\udd44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\ud835\udd11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\ud835\udca9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\ud835\udd12rave\xd2aeicr;ga;cron;pf;\ud835\udd46enCurlyDQoubleQuote;uote;;clr;\ud835\udcaaash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\ud835\udd13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\ud835\udcab;UfosOT"r;\ud835\udd14pf;cr;\ud835\udcacBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\ud835\udd16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\ud835\udd4a\x00\x00t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\ud835\udcaear;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\ud835\udd17ei\x00efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\ud835\udd4bipleDot;ctr;\ud835\udcafrok;\x00\x00\x00\x00\x00\x00\x00crute\xdar;ocir;r\x00y;ve;iyrc\xdb;blac;r;\ud835\udd18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\ud835\udd4cADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\ud835\udcb0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\ud835\udd19pf;\ud835\udd4dcr;\ud835\udcb1dash;cefosirc;dge;r;\ud835\udd1apf;\ud835\udd4ecr;\ud835\udcb2fiosr;\ud835\udd1b;pf;\ud835\udd4fcr;\ud835\udcb3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\ud835\udd1cpf;\ud835\udd50cr;\ud835\udcb4ml;Hacdefoscy;cute;ayron;;ot;\x00oWidt\xe8a;r;pf;cr;\ud835\udcb5\x00\x00\x00\x00\x00\x00\x00cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\ud835\udd1erave\xe0epfpsym;\xe8ha;apcclr;g;\x00\x00;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\ud835\udd52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\ud835\udcb6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\ud835\udd1fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\x00\x00cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\x00\x00;;4;ck;eo;q=uiv;t;ptwxf;\ud835\udd53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\ud835\udcb7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\x00s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\ud835\udd20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\x00\x00rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\x00on;e;q\xc7\xc6\x00\x00a;t;;fl\xeeemxent\xbbe\xf3\x00;dot;n\xf4fry;\ud835\udd54o\xe4\xa9;sr;aorr;ss;cur;\ud835\udcb8bp;e;;e;dot;delprvwarrlr;;\x00\x00r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\x00\x00re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\ud835\udd21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\x00\x00rn;op;lptuwlar;f;\ud835\udd55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\x00\x00rn;op;cotry;\ud835\udcb9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\ud835\udd22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\ud835\udd56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\x00\x00\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\x00\x00\x00\x00\x00\x00\x00llingdotse\xf1y;male;ilrlig;\x00\x00g;ig;;\ud835\udd23lig;lig;fjaltt;ig;ns;of;\x00f;\ud835\udd57ak;v;artint;aocs\x00\x00\xbd;\xbc;;;\x00;;\x00\x00\xbe;;5;\x00;;8;l;wn;cr;\ud835\udcbbEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\ud835\udd24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\ud835\udd58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\x00pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\ud835\udd25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\ud835\udd59bar;cltr;\ud835\udcbdas\xe8rok;bpull;hen\xbb\x00\x00\x00\x00\x00\x00cute\xed;iyrc\xee;cxy;cl\xa1fr;\ud835\udd26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\ud835\udd5aa;uest\xbfcir;\ud835\udcben;Edsv;ot;;v;;ilde;\x00cy;l\xefcfmosuiyrc;;r;\ud835\udd27ath;pf;\ud835\udd5b\x00r;\ud835\udcbfrcy;kcy;acfghjosppa;v;eydil;;r;\ud835\udd28reen;cy;cy;pf;\ud835\udd5ccr;\ud835\udcc0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\x00\x00\x00\x00\x00\x00\x00\x00\x00ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\ud835\udd29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\ud835\udd5dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\ud835\udcc1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\ud835\udd2ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\ud835\udd5ectr;\ud835\udcc2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\x00p\xa0mp;eaeouy\x00;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\ud835\udd2bEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\ud835\udd5f\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\ud835\udcc3ort\x00\x00ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\ud835\udd2c\x00\x00\x00n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\ud835\udd60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\x00\x00\x00\x00\x00\x00\x00\x00\x00r;ast\xb6;lle\xec\x00\x00m;;y;rcimptnt;od;il;enk;r;\ud835\udd2dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\ud835\udd61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\ud835\udcc5;ncsp;fiopsur;\ud835\udd2epf;\ud835\udd62rime;cr;\ud835\udcc6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\ud835\udd2faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\ud835\udd63us;imes;apr;gt;olint;ar\xf2achqquo;r;\ud835\udcc7buo;rhirre\xe5mes;i;efltri;luhar;;\x00\x00\x00\x00\x00\x00\x00cute;qu\xef;Eaceinpsy;\x00;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\ud835\udd30acoyrp;hycy;;rt\x00\x00i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\ud835\udd64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\ud835\udcc8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00get;;r\xebaeyron;dil;;lrec;r;\ud835\udd31eiko\x00e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\ud835\udd65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\ud835\udcc9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\x00y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\ud835\udd32rave\xf9rlr\xbb\xbblk;ct\x00\x00rn;er\xbbop;ri;alcr;\xa8gpon;f;\ud835\udd66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\x00\x00rn;er\xbbop;ng;ri;cr;\ud835\udccadirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\ud835\udd33tr\xe9subp\xbb\xbbpf;\ud835\udd67ro\xf0tr\xe9cur;\ud835\udccbbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\ud835\udd34pf;\ud835\udd68;eat\xe8cr;\ud835\udccc\x00\x00\x00\x00\x00\x00\x00tr\xe9r;\ud835\udd35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\ud835\udd69im\xe5Aar\xf2r\xf2cqr;\ud835\udccdptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\ud835\udd36cy;pf;\ud835\udd6acr;\ud835\udccecmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\ud835\udd37cy;grarr;pf;\ud835\udd6bcr;\ud835\udccfjn;j;'.split("").map(h=>h.charCodeAt(0))),r_=new Uint16Array("aglq	\x15\x18\x1b\x0f\x00\x00\x12p;os;t;t;uot;".split("").map(h=>h.charCodeAt(0)));let rb=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),rA=null!==(eb=String.fromCodePoint)&&void 0!==eb?eb:function(h){let v="";return h>65535&&(h-=65536,v+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),v+=String.fromCharCode(h)};function isNumber(h){return h>=eA.ZERO&&h<=eA.NINE}(j=eA||(eA={}))[j.NUM=35]="NUM",j[j.SEMI=59]="SEMI",j[j.EQUALS=61]="EQUALS",j[j.ZERO=48]="ZERO",j[j.NINE=57]="NINE",j[j.LOWER_A=97]="LOWER_A",j[j.LOWER_F=102]="LOWER_F",j[j.LOWER_X=120]="LOWER_X",j[j.LOWER_Z=122]="LOWER_Z",j[j.UPPER_A=65]="UPPER_A",j[j.UPPER_F=70]="UPPER_F",j[j.UPPER_Z=90]="UPPER_Z",(Q=ex||(ex={}))[Q.VALUE_LENGTH=49152]="VALUE_LENGTH",Q[Q.BRANCH_LENGTH=16256]="BRANCH_LENGTH",Q[Q.JUMP_TABLE=127]="JUMP_TABLE",(X=eS||(eS={}))[X.EntityStart=0]="EntityStart",X[X.NumericStart=1]="NumericStart",X[X.NumericDecimal=2]="NumericDecimal",X[X.NumericHex=3]="NumericHex",X[X.NamedEntity=4]="NamedEntity",(K=eC||(eC={}))[K.Legacy=0]="Legacy",K[K.Strict=1]="Strict",K[K.Attribute=2]="Attribute";let EntityDecoder=class EntityDecoder{constructor(h,v,_){this.decodeTree=h,this.emitCodePoint=v,this.errors=_,this.state=eS.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=eC.Strict}startEntity(h){this.decodeMode=h,this.state=eS.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(h,v){switch(this.state){case eS.EntityStart:if(h.charCodeAt(v)===eA.NUM)return this.state=eS.NumericStart,this.consumed+=1,this.stateNumericStart(h,v+1);return this.state=eS.NamedEntity,this.stateNamedEntity(h,v);case eS.NumericStart:return this.stateNumericStart(h,v);case eS.NumericDecimal:return this.stateNumericDecimal(h,v);case eS.NumericHex:return this.stateNumericHex(h,v);case eS.NamedEntity:return this.stateNamedEntity(h,v)}}stateNumericStart(h,v){return v>=h.length?-1:(32|h.charCodeAt(v))===eA.LOWER_X?(this.state=eS.NumericHex,this.consumed+=1,this.stateNumericHex(h,v+1)):(this.state=eS.NumericDecimal,this.stateNumericDecimal(h,v))}addToNumericResult(h,v,_,b){if(v!==_){let A=_-v;this.result=this.result*Math.pow(b,A)+parseInt(h.substr(v,A),b),this.consumed+=A}}stateNumericHex(h,v){let _=v;for(;v<h.length;){var b;let A=h.charCodeAt(v);if(!isNumber(A)&&(!((b=A)>=eA.UPPER_A)||!(b<=eA.UPPER_F))&&(!(b>=eA.LOWER_A)||!(b<=eA.LOWER_F)))return this.addToNumericResult(h,_,v,16),this.emitNumericEntity(A,3);v+=1}return this.addToNumericResult(h,_,v,16),-1}stateNumericDecimal(h,v){let _=v;for(;v<h.length;){let b=h.charCodeAt(v);if(!isNumber(b))return this.addToNumericResult(h,_,v,10),this.emitNumericEntity(b,2);v+=1}return this.addToNumericResult(h,_,v,10),-1}emitNumericEntity(h,v){var _,b,A;if(this.consumed<=v)return null===(_=this.errors)||void 0===_||_.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(h===eA.SEMI)this.consumed+=1;else if(this.decodeMode===eC.Strict)return 0;return this.emitCodePoint((b=this.result)>=55296&&b<=57343||b>1114111?65533:null!==(A=rb.get(b))&&void 0!==A?A:b,this.consumed),this.errors&&(h!==eA.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(h,v){let{decodeTree:_}=this,b=_[this.treeIndex],A=(b&ex.VALUE_LENGTH)>>14;for(;v<h.length;v++,this.excess++){let S=h.charCodeAt(v);if(this.treeIndex=determineBranch(_,b,this.treeIndex+Math.max(1,A),S),this.treeIndex<0)return 0===this.result||this.decodeMode===eC.Attribute&&(0===A||function(h){var v;return h===eA.EQUALS||(v=h)>=eA.UPPER_A&&v<=eA.UPPER_Z||v>=eA.LOWER_A&&v<=eA.LOWER_Z||isNumber(v)}(S))?0:this.emitNotTerminatedNamedEntity();if(0!=(A=((b=_[this.treeIndex])&ex.VALUE_LENGTH)>>14)){if(S===eA.SEMI)return this.emitNamedEntityData(this.treeIndex,A,this.consumed+this.excess);this.decodeMode!==eC.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var h;let{result:v,decodeTree:_}=this,b=(_[v]&ex.VALUE_LENGTH)>>14;return this.emitNamedEntityData(v,b,this.consumed),null===(h=this.errors)||void 0===h||h.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(h,v,_){let{decodeTree:b}=this;return this.emitCodePoint(1===v?b[h]&~ex.VALUE_LENGTH:b[h+1],_),3===v&&this.emitCodePoint(b[h+2],_),_}end(){var h;switch(this.state){case eS.NamedEntity:return 0!==this.result&&(this.decodeMode!==eC.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case eS.NumericDecimal:return this.emitNumericEntity(0,2);case eS.NumericHex:return this.emitNumericEntity(0,3);case eS.NumericStart:return null===(h=this.errors)||void 0===h||h.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case eS.EntityStart:return 0}}};function getDecoder(h){let v="",_=new EntityDecoder(h,h=>v+=rA(h));return function(h,b){let A=0,S=0;for(;(S=h.indexOf("&",S))>=0;){v+=h.slice(A,S),_.startEntity(b);let C=_.write(h,S+1);if(C<0){A=S+_.end();break}A=S+C,S=0===C?A+1:A}let C=v+h.slice(A);return v="",C}}function determineBranch(h,v,_,b){let A=(v&ex.BRANCH_LENGTH)>>7,S=v&ex.JUMP_TABLE;if(0===A)return 0!==S&&b===S?_:-1;if(S){let v=b-S;return v<0||v>=A?-1:h[_+v]-1}let C=_,w=C+A-1;for(;C<=w;){let v=C+w>>>1,_=h[v];if(_<b)C=v+1;else{if(!(_>b))return h[v+A];w=v-1}}return -1}getDecoder(ry),getDecoder(r_),(Z=ek=ek||(ek={})).HTML="http://www.w3.org/1999/xhtml",Z.MATHML="http://www.w3.org/1998/Math/MathML",Z.SVG="http://www.w3.org/2000/svg",Z.XLINK="http://www.w3.org/1999/xlink",Z.XML="http://www.w3.org/XML/1998/namespace",Z.XMLNS="http://www.w3.org/2000/xmlns/",(J=ew=ew||(ew={})).TYPE="type",J.ACTION="action",J.ENCODING="encoding",J.PROMPT="prompt",J.NAME="name",J.COLOR="color",J.FACE="face",J.SIZE="size",(en=eI=eI||(eI={})).NO_QUIRKS="no-quirks",en.QUIRKS="quirks",en.LIMITED_QUIRKS="limited-quirks",(ei=eN=eN||(eN={})).A="a",ei.ADDRESS="address",ei.ANNOTATION_XML="annotation-xml",ei.APPLET="applet",ei.AREA="area",ei.ARTICLE="article",ei.ASIDE="aside",ei.B="b",ei.BASE="base",ei.BASEFONT="basefont",ei.BGSOUND="bgsound",ei.BIG="big",ei.BLOCKQUOTE="blockquote",ei.BODY="body",ei.BR="br",ei.BUTTON="button",ei.CAPTION="caption",ei.CENTER="center",ei.CODE="code",ei.COL="col",ei.COLGROUP="colgroup",ei.DD="dd",ei.DESC="desc",ei.DETAILS="details",ei.DIALOG="dialog",ei.DIR="dir",ei.DIV="div",ei.DL="dl",ei.DT="dt",ei.EM="em",ei.EMBED="embed",ei.FIELDSET="fieldset",ei.FIGCAPTION="figcaption",ei.FIGURE="figure",ei.FONT="font",ei.FOOTER="footer",ei.FOREIGN_OBJECT="foreignObject",ei.FORM="form",ei.FRAME="frame",ei.FRAMESET="frameset",ei.H1="h1",ei.H2="h2",ei.H3="h3",ei.H4="h4",ei.H5="h5",ei.H6="h6",ei.HEAD="head",ei.HEADER="header",ei.HGROUP="hgroup",ei.HR="hr",ei.HTML="html",ei.I="i",ei.IMG="img",ei.IMAGE="image",ei.INPUT="input",ei.IFRAME="iframe",ei.KEYGEN="keygen",ei.LABEL="label",ei.LI="li",ei.LINK="link",ei.LISTING="listing",ei.MAIN="main",ei.MALIGNMARK="malignmark",ei.MARQUEE="marquee",ei.MATH="math",ei.MENU="menu",ei.META="meta",ei.MGLYPH="mglyph",ei.MI="mi",ei.MO="mo",ei.MN="mn",ei.MS="ms",ei.MTEXT="mtext",ei.NAV="nav",ei.NOBR="nobr",ei.NOFRAMES="noframes",ei.NOEMBED="noembed",ei.NOSCRIPT="noscript",ei.OBJECT="object",ei.OL="ol",ei.OPTGROUP="optgroup",ei.OPTION="option",ei.P="p",ei.PARAM="param",ei.PLAINTEXT="plaintext",ei.PRE="pre",ei.RB="rb",ei.RP="rp",ei.RT="rt",ei.RTC="rtc",ei.RUBY="ruby",ei.S="s",ei.SCRIPT="script",ei.SECTION="section",ei.SELECT="select",ei.SOURCE="source",ei.SMALL="small",ei.SPAN="span",ei.STRIKE="strike",ei.STRONG="strong",ei.STYLE="style",ei.SUB="sub",ei.SUMMARY="summary",ei.SUP="sup",ei.TABLE="table",ei.TBODY="tbody",ei.TEMPLATE="template",ei.TEXTAREA="textarea",ei.TFOOT="tfoot",ei.TD="td",ei.TH="th",ei.THEAD="thead",ei.TITLE="title",ei.TR="tr",ei.TRACK="track",ei.TT="tt",ei.U="u",ei.UL="ul",ei.SVG="svg",ei.VAR="var",ei.WBR="wbr",ei.XMP="xmp",(ea=eO=eO||(eO={}))[ea.UNKNOWN=0]="UNKNOWN",ea[ea.A=1]="A",ea[ea.ADDRESS=2]="ADDRESS",ea[ea.ANNOTATION_XML=3]="ANNOTATION_XML",ea[ea.APPLET=4]="APPLET",ea[ea.AREA=5]="AREA",ea[ea.ARTICLE=6]="ARTICLE",ea[ea.ASIDE=7]="ASIDE",ea[ea.B=8]="B",ea[ea.BASE=9]="BASE",ea[ea.BASEFONT=10]="BASEFONT",ea[ea.BGSOUND=11]="BGSOUND",ea[ea.BIG=12]="BIG",ea[ea.BLOCKQUOTE=13]="BLOCKQUOTE",ea[ea.BODY=14]="BODY",ea[ea.BR=15]="BR",ea[ea.BUTTON=16]="BUTTON",ea[ea.CAPTION=17]="CAPTION",ea[ea.CENTER=18]="CENTER",ea[ea.CODE=19]="CODE",ea[ea.COL=20]="COL",ea[ea.COLGROUP=21]="COLGROUP",ea[ea.DD=22]="DD",ea[ea.DESC=23]="DESC",ea[ea.DETAILS=24]="DETAILS",ea[ea.DIALOG=25]="DIALOG",ea[ea.DIR=26]="DIR",ea[ea.DIV=27]="DIV",ea[ea.DL=28]="DL",ea[ea.DT=29]="DT",ea[ea.EM=30]="EM",ea[ea.EMBED=31]="EMBED",ea[ea.FIELDSET=32]="FIELDSET",ea[ea.FIGCAPTION=33]="FIGCAPTION",ea[ea.FIGURE=34]="FIGURE",ea[ea.FONT=35]="FONT",ea[ea.FOOTER=36]="FOOTER",ea[ea.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",ea[ea.FORM=38]="FORM",ea[ea.FRAME=39]="FRAME",ea[ea.FRAMESET=40]="FRAMESET",ea[ea.H1=41]="H1",ea[ea.H2=42]="H2",ea[ea.H3=43]="H3",ea[ea.H4=44]="H4",ea[ea.H5=45]="H5",ea[ea.H6=46]="H6",ea[ea.HEAD=47]="HEAD",ea[ea.HEADER=48]="HEADER",ea[ea.HGROUP=49]="HGROUP",ea[ea.HR=50]="HR",ea[ea.HTML=51]="HTML",ea[ea.I=52]="I",ea[ea.IMG=53]="IMG",ea[ea.IMAGE=54]="IMAGE",ea[ea.INPUT=55]="INPUT",ea[ea.IFRAME=56]="IFRAME",ea[ea.KEYGEN=57]="KEYGEN",ea[ea.LABEL=58]="LABEL",ea[ea.LI=59]="LI",ea[ea.LINK=60]="LINK",ea[ea.LISTING=61]="LISTING",ea[ea.MAIN=62]="MAIN",ea[ea.MALIGNMARK=63]="MALIGNMARK",ea[ea.MARQUEE=64]="MARQUEE",ea[ea.MATH=65]="MATH",ea[ea.MENU=66]="MENU",ea[ea.META=67]="META",ea[ea.MGLYPH=68]="MGLYPH",ea[ea.MI=69]="MI",ea[ea.MO=70]="MO",ea[ea.MN=71]="MN",ea[ea.MS=72]="MS",ea[ea.MTEXT=73]="MTEXT",ea[ea.NAV=74]="NAV",ea[ea.NOBR=75]="NOBR",ea[ea.NOFRAMES=76]="NOFRAMES",ea[ea.NOEMBED=77]="NOEMBED",ea[ea.NOSCRIPT=78]="NOSCRIPT",ea[ea.OBJECT=79]="OBJECT",ea[ea.OL=80]="OL",ea[ea.OPTGROUP=81]="OPTGROUP",ea[ea.OPTION=82]="OPTION",ea[ea.P=83]="P",ea[ea.PARAM=84]="PARAM",ea[ea.PLAINTEXT=85]="PLAINTEXT",ea[ea.PRE=86]="PRE",ea[ea.RB=87]="RB",ea[ea.RP=88]="RP",ea[ea.RT=89]="RT",ea[ea.RTC=90]="RTC",ea[ea.RUBY=91]="RUBY",ea[ea.S=92]="S",ea[ea.SCRIPT=93]="SCRIPT",ea[ea.SECTION=94]="SECTION",ea[ea.SELECT=95]="SELECT",ea[ea.SOURCE=96]="SOURCE",ea[ea.SMALL=97]="SMALL",ea[ea.SPAN=98]="SPAN",ea[ea.STRIKE=99]="STRIKE",ea[ea.STRONG=100]="STRONG",ea[ea.STYLE=101]="STYLE",ea[ea.SUB=102]="SUB",ea[ea.SUMMARY=103]="SUMMARY",ea[ea.SUP=104]="SUP",ea[ea.TABLE=105]="TABLE",ea[ea.TBODY=106]="TBODY",ea[ea.TEMPLATE=107]="TEMPLATE",ea[ea.TEXTAREA=108]="TEXTAREA",ea[ea.TFOOT=109]="TFOOT",ea[ea.TD=110]="TD",ea[ea.TH=111]="TH",ea[ea.THEAD=112]="THEAD",ea[ea.TITLE=113]="TITLE",ea[ea.TR=114]="TR",ea[ea.TRACK=115]="TRACK",ea[ea.TT=116]="TT",ea[ea.U=117]="U",ea[ea.UL=118]="UL",ea[ea.SVG=119]="SVG",ea[ea.VAR=120]="VAR",ea[ea.WBR=121]="WBR",ea[ea.XMP=122]="XMP";let rx=new Map([[eN.A,eO.A],[eN.ADDRESS,eO.ADDRESS],[eN.ANNOTATION_XML,eO.ANNOTATION_XML],[eN.APPLET,eO.APPLET],[eN.AREA,eO.AREA],[eN.ARTICLE,eO.ARTICLE],[eN.ASIDE,eO.ASIDE],[eN.B,eO.B],[eN.BASE,eO.BASE],[eN.BASEFONT,eO.BASEFONT],[eN.BGSOUND,eO.BGSOUND],[eN.BIG,eO.BIG],[eN.BLOCKQUOTE,eO.BLOCKQUOTE],[eN.BODY,eO.BODY],[eN.BR,eO.BR],[eN.BUTTON,eO.BUTTON],[eN.CAPTION,eO.CAPTION],[eN.CENTER,eO.CENTER],[eN.CODE,eO.CODE],[eN.COL,eO.COL],[eN.COLGROUP,eO.COLGROUP],[eN.DD,eO.DD],[eN.DESC,eO.DESC],[eN.DETAILS,eO.DETAILS],[eN.DIALOG,eO.DIALOG],[eN.DIR,eO.DIR],[eN.DIV,eO.DIV],[eN.DL,eO.DL],[eN.DT,eO.DT],[eN.EM,eO.EM],[eN.EMBED,eO.EMBED],[eN.FIELDSET,eO.FIELDSET],[eN.FIGCAPTION,eO.FIGCAPTION],[eN.FIGURE,eO.FIGURE],[eN.FONT,eO.FONT],[eN.FOOTER,eO.FOOTER],[eN.FOREIGN_OBJECT,eO.FOREIGN_OBJECT],[eN.FORM,eO.FORM],[eN.FRAME,eO.FRAME],[eN.FRAMESET,eO.FRAMESET],[eN.H1,eO.H1],[eN.H2,eO.H2],[eN.H3,eO.H3],[eN.H4,eO.H4],[eN.H5,eO.H5],[eN.H6,eO.H6],[eN.HEAD,eO.HEAD],[eN.HEADER,eO.HEADER],[eN.HGROUP,eO.HGROUP],[eN.HR,eO.HR],[eN.HTML,eO.HTML],[eN.I,eO.I],[eN.IMG,eO.IMG],[eN.IMAGE,eO.IMAGE],[eN.INPUT,eO.INPUT],[eN.IFRAME,eO.IFRAME],[eN.KEYGEN,eO.KEYGEN],[eN.LABEL,eO.LABEL],[eN.LI,eO.LI],[eN.LINK,eO.LINK],[eN.LISTING,eO.LISTING],[eN.MAIN,eO.MAIN],[eN.MALIGNMARK,eO.MALIGNMARK],[eN.MARQUEE,eO.MARQUEE],[eN.MATH,eO.MATH],[eN.MENU,eO.MENU],[eN.META,eO.META],[eN.MGLYPH,eO.MGLYPH],[eN.MI,eO.MI],[eN.MO,eO.MO],[eN.MN,eO.MN],[eN.MS,eO.MS],[eN.MTEXT,eO.MTEXT],[eN.NAV,eO.NAV],[eN.NOBR,eO.NOBR],[eN.NOFRAMES,eO.NOFRAMES],[eN.NOEMBED,eO.NOEMBED],[eN.NOSCRIPT,eO.NOSCRIPT],[eN.OBJECT,eO.OBJECT],[eN.OL,eO.OL],[eN.OPTGROUP,eO.OPTGROUP],[eN.OPTION,eO.OPTION],[eN.P,eO.P],[eN.PARAM,eO.PARAM],[eN.PLAINTEXT,eO.PLAINTEXT],[eN.PRE,eO.PRE],[eN.RB,eO.RB],[eN.RP,eO.RP],[eN.RT,eO.RT],[eN.RTC,eO.RTC],[eN.RUBY,eO.RUBY],[eN.S,eO.S],[eN.SCRIPT,eO.SCRIPT],[eN.SECTION,eO.SECTION],[eN.SELECT,eO.SELECT],[eN.SOURCE,eO.SOURCE],[eN.SMALL,eO.SMALL],[eN.SPAN,eO.SPAN],[eN.STRIKE,eO.STRIKE],[eN.STRONG,eO.STRONG],[eN.STYLE,eO.STYLE],[eN.SUB,eO.SUB],[eN.SUMMARY,eO.SUMMARY],[eN.SUP,eO.SUP],[eN.TABLE,eO.TABLE],[eN.TBODY,eO.TBODY],[eN.TEMPLATE,eO.TEMPLATE],[eN.TEXTAREA,eO.TEXTAREA],[eN.TFOOT,eO.TFOOT],[eN.TD,eO.TD],[eN.TH,eO.TH],[eN.THEAD,eO.THEAD],[eN.TITLE,eO.TITLE],[eN.TR,eO.TR],[eN.TRACK,eO.TRACK],[eN.TT,eO.TT],[eN.U,eO.U],[eN.UL,eO.UL],[eN.SVG,eO.SVG],[eN.VAR,eO.VAR],[eN.WBR,eO.WBR],[eN.XMP,eO.XMP]]);function getTagID(h){var v;return null!==(v=rx.get(h))&&void 0!==v?v:eO.UNKNOWN}let rS=eO,rC={[ek.HTML]:new Set([rS.ADDRESS,rS.APPLET,rS.AREA,rS.ARTICLE,rS.ASIDE,rS.BASE,rS.BASEFONT,rS.BGSOUND,rS.BLOCKQUOTE,rS.BODY,rS.BR,rS.BUTTON,rS.CAPTION,rS.CENTER,rS.COL,rS.COLGROUP,rS.DD,rS.DETAILS,rS.DIR,rS.DIV,rS.DL,rS.DT,rS.EMBED,rS.FIELDSET,rS.FIGCAPTION,rS.FIGURE,rS.FOOTER,rS.FORM,rS.FRAME,rS.FRAMESET,rS.H1,rS.H2,rS.H3,rS.H4,rS.H5,rS.H6,rS.HEAD,rS.HEADER,rS.HGROUP,rS.HR,rS.HTML,rS.IFRAME,rS.IMG,rS.INPUT,rS.LI,rS.LINK,rS.LISTING,rS.MAIN,rS.MARQUEE,rS.MENU,rS.META,rS.NAV,rS.NOEMBED,rS.NOFRAMES,rS.NOSCRIPT,rS.OBJECT,rS.OL,rS.P,rS.PARAM,rS.PLAINTEXT,rS.PRE,rS.SCRIPT,rS.SECTION,rS.SELECT,rS.SOURCE,rS.STYLE,rS.SUMMARY,rS.TABLE,rS.TBODY,rS.TD,rS.TEMPLATE,rS.TEXTAREA,rS.TFOOT,rS.TH,rS.THEAD,rS.TITLE,rS.TR,rS.TRACK,rS.UL,rS.WBR,rS.XMP]),[ek.MATHML]:new Set([rS.MI,rS.MO,rS.MN,rS.MS,rS.MTEXT,rS.ANNOTATION_XML]),[ek.SVG]:new Set([rS.TITLE,rS.FOREIGN_OBJECT,rS.DESC]),[ek.XLINK]:new Set,[ek.XML]:new Set,[ek.XMLNS]:new Set};function isNumberedHeader(h){return h===rS.H1||h===rS.H2||h===rS.H3||h===rS.H4||h===rS.H5||h===rS.H6}eN.STYLE,eN.SCRIPT,eN.XMP,eN.IFRAME,eN.NOEMBED,eN.NOFRAMES,eN.PLAINTEXT;let rk=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);(eo=eR||(eR={}))[eo.DATA=0]="DATA",eo[eo.RCDATA=1]="RCDATA",eo[eo.RAWTEXT=2]="RAWTEXT",eo[eo.SCRIPT_DATA=3]="SCRIPT_DATA",eo[eo.PLAINTEXT=4]="PLAINTEXT",eo[eo.TAG_OPEN=5]="TAG_OPEN",eo[eo.END_TAG_OPEN=6]="END_TAG_OPEN",eo[eo.TAG_NAME=7]="TAG_NAME",eo[eo.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",eo[eo.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",eo[eo.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",eo[eo.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",eo[eo.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",eo[eo.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",eo[eo.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",eo[eo.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",eo[eo.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",eo[eo.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",eo[eo.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",eo[eo.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",eo[eo.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",eo[eo.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",eo[eo.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",eo[eo.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",eo[eo.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",eo[eo.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",eo[eo.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",eo[eo.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",eo[eo.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",eo[eo.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",eo[eo.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",eo[eo.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",eo[eo.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",eo[eo.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",eo[eo.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",eo[eo.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",eo[eo.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",eo[eo.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",eo[eo.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",eo[eo.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",eo[eo.BOGUS_COMMENT=40]="BOGUS_COMMENT",eo[eo.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",eo[eo.COMMENT_START=42]="COMMENT_START",eo[eo.COMMENT_START_DASH=43]="COMMENT_START_DASH",eo[eo.COMMENT=44]="COMMENT",eo[eo.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",eo[eo.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",eo[eo.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",eo[eo.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",eo[eo.COMMENT_END_DASH=49]="COMMENT_END_DASH",eo[eo.COMMENT_END=50]="COMMENT_END",eo[eo.COMMENT_END_BANG=51]="COMMENT_END_BANG",eo[eo.DOCTYPE=52]="DOCTYPE",eo[eo.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",eo[eo.DOCTYPE_NAME=54]="DOCTYPE_NAME",eo[eo.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",eo[eo.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",eo[eo.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",eo[eo.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",eo[eo.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",eo[eo.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",eo[eo.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",eo[eo.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",eo[eo.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",eo[eo.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",eo[eo.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",eo[eo.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",eo[eo.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",eo[eo.CDATA_SECTION=68]="CDATA_SECTION",eo[eo.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",eo[eo.CDATA_SECTION_END=70]="CDATA_SECTION_END",eo[eo.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",eo[eo.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",eo[eo.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",eo[eo.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",eo[eo.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",eo[eo.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",eo[eo.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",eo[eo.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END";let rw={DATA:eR.DATA,RCDATA:eR.RCDATA,RAWTEXT:eR.RAWTEXT,SCRIPT_DATA:eR.SCRIPT_DATA,PLAINTEXT:eR.PLAINTEXT,CDATA_SECTION:eR.CDATA_SECTION};function isAsciiDigit(h){return h>=eT.DIGIT_0&&h<=eT.DIGIT_9}function isAsciiUpper(h){return h>=eT.LATIN_CAPITAL_A&&h<=eT.LATIN_CAPITAL_Z}function isAsciiLetter(h){return h>=eT.LATIN_SMALL_A&&h<=eT.LATIN_SMALL_Z||isAsciiUpper(h)}function tokenizer_isAsciiAlphaNumeric(h){return isAsciiLetter(h)||isAsciiDigit(h)}function isAsciiUpperHexDigit(h){return h>=eT.LATIN_CAPITAL_A&&h<=eT.LATIN_CAPITAL_F}function isAsciiLowerHexDigit(h){return h>=eT.LATIN_SMALL_A&&h<=eT.LATIN_SMALL_F}function isWhitespace(h){return h===eT.SPACE||h===eT.LINE_FEED||h===eT.TABULATION||h===eT.FORM_FEED}function isScriptDataDoubleEscapeSequenceEnd(h){return isWhitespace(h)||h===eT.SOLIDUS||h===eT.GREATER_THAN_SIGN}let Tokenizer=class Tokenizer{constructor(h,v){this.options=h,this.handler=v,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=eR.DATA,this.returnState=eR.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(v),this.currentLocation=this.getCurrentLocation(-1)}_err(h){var v,_;null===(_=(v=this.handler).onParseError)||void 0===_||_.call(v,this.preprocessor.getError(h))}getCurrentLocation(h){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-h,startOffset:this.preprocessor.offset-h,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;let h=this._consume();this._ensureHibernation()||this._callState(h)}this.inLoop=!1}}pause(){this.paused=!0}resume(h){if(!this.paused)throw Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==h||h())}write(h,v,_){this.active=!0,this.preprocessor.write(h,v),this._runParsingLoop(),this.paused||null==_||_()}insertHtmlAtCurrentPos(h){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(h),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(h){this.consumedAfterSnapshot-=h,this.preprocessor.retreat(h)}_reconsumeInState(h,v){this.state=h,this._callState(v)}_advanceBy(h){this.consumedAfterSnapshot+=h;for(let v=0;v<h;v++)this.preprocessor.advance()}_consumeSequenceIfMatch(h,v){return!!this.preprocessor.startsWith(h,v)&&(this._advanceBy(h.length-1),!0)}_createStartTagToken(){this.currentToken={type:e_.START_TAG,tagName:"",tagID:eO.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:e_.END_TAG,tagName:"",tagID:eO.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(h){this.currentToken={type:e_.COMMENT,data:"",location:this.getCurrentLocation(h)}}_createDoctypeToken(h){this.currentToken={type:e_.DOCTYPE,name:h,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(h,v){this.currentCharacterToken={type:h,chars:v,location:this.currentLocation}}_createAttr(h){this.currentAttr={name:h,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var h,v;let _=this.currentToken;if(null===getTokenAttr(_,this.currentAttr.name)){if(_.attrs.push(this.currentAttr),_.location&&this.currentLocation){let b=null!==(h=(v=_.location).attrs)&&void 0!==h?h:v.attrs=Object.create(null);b[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ey.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(h){this._emitCurrentCharacterToken(h.location),this.currentToken=null,h.location&&(h.location.endLine=this.preprocessor.line,h.location.endCol=this.preprocessor.col+1,h.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){let h=this.currentToken;this.prepareToken(h),h.tagID=getTagID(h.tagName),h.type===e_.START_TAG?(this.lastStartTagName=h.tagName,this.handler.onStartTag(h)):(h.attrs.length>0&&this._err(ey.endTagWithAttributes),h.selfClosing&&this._err(ey.endTagWithTrailingSolidus),this.handler.onEndTag(h)),this.preprocessor.dropParsedChunk()}emitCurrentComment(h){this.prepareToken(h),this.handler.onComment(h),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(h){this.prepareToken(h),this.handler.onDoctype(h),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(h){if(this.currentCharacterToken){switch(h&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=h.startLine,this.currentCharacterToken.location.endCol=h.startCol,this.currentCharacterToken.location.endOffset=h.startOffset),this.currentCharacterToken.type){case e_.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case e_.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case e_.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){let h=this.getCurrentLocation(0);h&&(h.endLine=h.startLine,h.endCol=h.startCol,h.endOffset=h.startOffset),this._emitCurrentCharacterToken(h),this.handler.onEof({type:e_.EOF,location:h}),this.active=!1}_appendCharToCurrentCharacterToken(h,v){if(this.currentCharacterToken){if(this.currentCharacterToken.type!==h)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=v;return}}this._createCharacterToken(h,v)}_emitCodePoint(h){let v=isWhitespace(h)?e_.WHITESPACE_CHARACTER:h===eT.NULL?e_.NULL_CHARACTER:e_.CHARACTER;this._appendCharToCurrentCharacterToken(v,String.fromCodePoint(h))}_emitChars(h){this._appendCharToCurrentCharacterToken(e_.CHARACTER,h)}_matchNamedCharacterReference(h){let v=null,_=0,b=!1;for(let S=0,C=ry[0];S>=0&&!((S=determineBranch(ry,C,S+1,h))<0);h=this._consume()){_+=1,C=ry[S];let w=C&ex.VALUE_LENGTH;if(w){var A;let C=(w>>14)-1;if(h!==eT.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((A=this.preprocessor.peek(1))===eT.EQUALS_SIGN||tokenizer_isAsciiAlphaNumeric(A))?(v=[eT.AMPERSAND],S+=C):(v=0===C?[ry[S]&~ex.VALUE_LENGTH]:1===C?[ry[++S]]:[ry[++S],ry[++S]],_=0,b=h!==eT.SEMICOLON),0===C){this._consume();break}}}return this._unconsume(_),b&&!this.preprocessor.endOfChunkHit&&this._err(ey.missingSemicolonAfterCharacterReference),this._unconsume(1),v}_isCharacterReferenceInAttribute(){return this.returnState===eR.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===eR.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===eR.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(h){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(h):this._emitCodePoint(h)}_callState(h){switch(this.state){case eR.DATA:this._stateData(h);break;case eR.RCDATA:this._stateRcdata(h);break;case eR.RAWTEXT:this._stateRawtext(h);break;case eR.SCRIPT_DATA:this._stateScriptData(h);break;case eR.PLAINTEXT:this._statePlaintext(h);break;case eR.TAG_OPEN:this._stateTagOpen(h);break;case eR.END_TAG_OPEN:this._stateEndTagOpen(h);break;case eR.TAG_NAME:this._stateTagName(h);break;case eR.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(h);break;case eR.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(h);break;case eR.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(h);break;case eR.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(h);break;case eR.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(h);break;case eR.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(h);break;case eR.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(h);break;case eR.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(h);break;case eR.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(h);break;case eR.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(h);break;case eR.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(h);break;case eR.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(h);break;case eR.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(h);break;case eR.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(h);break;case eR.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(h);break;case eR.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(h);break;case eR.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(h);break;case eR.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(h);break;case eR.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(h);break;case eR.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(h);break;case eR.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(h);break;case eR.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(h);break;case eR.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(h);break;case eR.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(h);break;case eR.ATTRIBUTE_NAME:this._stateAttributeName(h);break;case eR.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(h);break;case eR.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(h);break;case eR.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(h);break;case eR.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(h);break;case eR.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(h);break;case eR.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(h);break;case eR.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(h);break;case eR.BOGUS_COMMENT:this._stateBogusComment(h);break;case eR.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(h);break;case eR.COMMENT_START:this._stateCommentStart(h);break;case eR.COMMENT_START_DASH:this._stateCommentStartDash(h);break;case eR.COMMENT:this._stateComment(h);break;case eR.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(h);break;case eR.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(h);break;case eR.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(h);break;case eR.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(h);break;case eR.COMMENT_END_DASH:this._stateCommentEndDash(h);break;case eR.COMMENT_END:this._stateCommentEnd(h);break;case eR.COMMENT_END_BANG:this._stateCommentEndBang(h);break;case eR.DOCTYPE:this._stateDoctype(h);break;case eR.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(h);break;case eR.DOCTYPE_NAME:this._stateDoctypeName(h);break;case eR.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(h);break;case eR.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(h);break;case eR.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(h);break;case eR.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(h);break;case eR.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(h);break;case eR.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(h);break;case eR.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(h);break;case eR.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(h);break;case eR.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(h);break;case eR.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(h);break;case eR.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(h);break;case eR.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(h);break;case eR.BOGUS_DOCTYPE:this._stateBogusDoctype(h);break;case eR.CDATA_SECTION:this._stateCdataSection(h);break;case eR.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(h);break;case eR.CDATA_SECTION_END:this._stateCdataSectionEnd(h);break;case eR.CHARACTER_REFERENCE:this._stateCharacterReference(h);break;case eR.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(h);break;case eR.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(h);break;case eR.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(h);break;case eR.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(h);break;case eR.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(h);break;case eR.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(h);break;case eR.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(h);break;default:throw Error("Unknown state")}}_stateData(h){switch(h){case eT.LESS_THAN_SIGN:this.state=eR.TAG_OPEN;break;case eT.AMPERSAND:this.returnState=eR.DATA,this.state=eR.CHARACTER_REFERENCE;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this._emitCodePoint(h);break;case eT.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateRcdata(h){switch(h){case eT.AMPERSAND:this.returnState=eR.RCDATA,this.state=eR.CHARACTER_REFERENCE;break;case eT.LESS_THAN_SIGN:this.state=eR.RCDATA_LESS_THAN_SIGN;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this._emitChars("");break;case eT.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateRawtext(h){switch(h){case eT.LESS_THAN_SIGN:this.state=eR.RAWTEXT_LESS_THAN_SIGN;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this._emitChars("");break;case eT.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptData(h){switch(h){case eT.LESS_THAN_SIGN:this.state=eR.SCRIPT_DATA_LESS_THAN_SIGN;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this._emitChars("");break;case eT.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_statePlaintext(h){switch(h){case eT.NULL:this._err(ey.unexpectedNullCharacter),this._emitChars("");break;case eT.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateTagOpen(h){if(isAsciiLetter(h))this._createStartTagToken(),this.state=eR.TAG_NAME,this._stateTagName(h);else switch(h){case eT.EXCLAMATION_MARK:this.state=eR.MARKUP_DECLARATION_OPEN;break;case eT.SOLIDUS:this.state=eR.END_TAG_OPEN;break;case eT.QUESTION_MARK:this._err(ey.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=eR.BOGUS_COMMENT,this._stateBogusComment(h);break;case eT.EOF:this._err(ey.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(ey.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=eR.DATA,this._stateData(h)}}_stateEndTagOpen(h){if(isAsciiLetter(h))this._createEndTagToken(),this.state=eR.TAG_NAME,this._stateTagName(h);else switch(h){case eT.GREATER_THAN_SIGN:this._err(ey.missingEndTagName),this.state=eR.DATA;break;case eT.EOF:this._err(ey.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(ey.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=eR.BOGUS_COMMENT,this._stateBogusComment(h)}}_stateTagName(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this.state=eR.BEFORE_ATTRIBUTE_NAME;break;case eT.SOLIDUS:this.state=eR.SELF_CLOSING_START_TAG;break;case eT.GREATER_THAN_SIGN:this.state=eR.DATA,this.emitCurrentTagToken();break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.tagName+="";break;case eT.EOF:this._err(ey.eofInTag),this._emitEOFToken();break;default:v.tagName+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateRcdataLessThanSign(h){h===eT.SOLIDUS?this.state=eR.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=eR.RCDATA,this._stateRcdata(h))}_stateRcdataEndTagOpen(h){isAsciiLetter(h)?(this.state=eR.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(h)):(this._emitChars("</"),this.state=eR.RCDATA,this._stateRcdata(h))}handleSpecialEndTag(h){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();let v=this.currentToken;v.tagName=this.lastStartTagName;let _=this.preprocessor.peek(this.lastStartTagName.length);switch(_){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=eR.BEFORE_ATTRIBUTE_NAME,!1;case eT.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=eR.SELF_CLOSING_START_TAG,!1;case eT.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=eR.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eR.RCDATA,this._stateRcdata(h))}_stateRawtextLessThanSign(h){h===eT.SOLIDUS?this.state=eR.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=eR.RAWTEXT,this._stateRawtext(h))}_stateRawtextEndTagOpen(h){isAsciiLetter(h)?(this.state=eR.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(h)):(this._emitChars("</"),this.state=eR.RAWTEXT,this._stateRawtext(h))}_stateRawtextEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eR.RAWTEXT,this._stateRawtext(h))}_stateScriptDataLessThanSign(h){switch(h){case eT.SOLIDUS:this.state=eR.SCRIPT_DATA_END_TAG_OPEN;break;case eT.EXCLAMATION_MARK:this.state=eR.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=eR.SCRIPT_DATA,this._stateScriptData(h)}}_stateScriptDataEndTagOpen(h){isAsciiLetter(h)?(this.state=eR.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(h)):(this._emitChars("</"),this.state=eR.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eR.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscapeStart(h){h===eT.HYPHEN_MINUS?(this.state=eR.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=eR.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscapeStartDash(h){h===eT.HYPHEN_MINUS?(this.state=eR.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=eR.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscaped(h){switch(h){case eT.HYPHEN_MINUS:this.state=eR.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case eT.LESS_THAN_SIGN:this.state=eR.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this._emitChars("");break;case eT.EOF:this._err(ey.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptDataEscapedDash(h){switch(h){case eT.HYPHEN_MINUS:this.state=eR.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case eT.LESS_THAN_SIGN:this.state=eR.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.state=eR.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case eT.EOF:this._err(ey.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eR.SCRIPT_DATA_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataEscapedDashDash(h){switch(h){case eT.HYPHEN_MINUS:this._emitChars("-");break;case eT.LESS_THAN_SIGN:this.state=eR.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case eT.GREATER_THAN_SIGN:this.state=eR.SCRIPT_DATA,this._emitChars(">");break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.state=eR.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case eT.EOF:this._err(ey.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eR.SCRIPT_DATA_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataEscapedLessThanSign(h){h===eT.SOLIDUS?this.state=eR.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(h)?(this._emitChars("<"),this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(h)):(this._emitChars("<"),this.state=eR.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataEscapedEndTagOpen(h){isAsciiLetter(h)?(this.state=eR.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(h)):(this._emitChars("</"),this.state=eR.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataEscapedEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eR.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataDoubleEscapeStart(h){if(this.preprocessor.startsWith(rT.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(rT.SCRIPT.length))){this._emitCodePoint(h);for(let h=0;h<rT.SCRIPT.length;h++)this._emitCodePoint(this._consume());this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=eR.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataDoubleEscaped(h){switch(h){case eT.HYPHEN_MINUS:this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case eT.LESS_THAN_SIGN:this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this._emitChars("");break;case eT.EOF:this._err(ey.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedDash(h){switch(h){case eT.HYPHEN_MINUS:this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case eT.LESS_THAN_SIGN:this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case eT.EOF:this._err(ey.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedDashDash(h){switch(h){case eT.HYPHEN_MINUS:this._emitChars("-");break;case eT.LESS_THAN_SIGN:this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case eT.GREATER_THAN_SIGN:this.state=eR.SCRIPT_DATA,this._emitChars(">");break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case eT.EOF:this._err(ey.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedLessThanSign(h){h===eT.SOLIDUS?(this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(h))}_stateScriptDataDoubleEscapeEnd(h){if(this.preprocessor.startsWith(rT.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(rT.SCRIPT.length))){this._emitCodePoint(h);for(let h=0;h<rT.SCRIPT.length;h++)this._emitCodePoint(this._consume());this.state=eR.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=eR.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(h))}_stateBeforeAttributeName(h){switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.SOLIDUS:case eT.GREATER_THAN_SIGN:case eT.EOF:this.state=eR.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(h);break;case eT.EQUALS_SIGN:this._err(ey.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=eR.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=eR.ATTRIBUTE_NAME,this._stateAttributeName(h)}}_stateAttributeName(h){switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:case eT.SOLIDUS:case eT.GREATER_THAN_SIGN:case eT.EOF:this._leaveAttrName(),this.state=eR.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(h);break;case eT.EQUALS_SIGN:this._leaveAttrName(),this.state=eR.BEFORE_ATTRIBUTE_VALUE;break;case eT.QUOTATION_MARK:case eT.APOSTROPHE:case eT.LESS_THAN_SIGN:this._err(ey.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(h);break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.currentAttr.name+="";break;default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateAfterAttributeName(h){switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.SOLIDUS:this.state=eR.SELF_CLOSING_START_TAG;break;case eT.EQUALS_SIGN:this.state=eR.BEFORE_ATTRIBUTE_VALUE;break;case eT.GREATER_THAN_SIGN:this.state=eR.DATA,this.emitCurrentTagToken();break;case eT.EOF:this._err(ey.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=eR.ATTRIBUTE_NAME,this._stateAttributeName(h)}}_stateBeforeAttributeValue(h){switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.QUOTATION_MARK:this.state=eR.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case eT.APOSTROPHE:this.state=eR.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case eT.GREATER_THAN_SIGN:this._err(ey.missingAttributeValue),this.state=eR.DATA,this.emitCurrentTagToken();break;default:this.state=eR.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(h)}}_stateAttributeValueDoubleQuoted(h){switch(h){case eT.QUOTATION_MARK:this.state=eR.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case eT.AMPERSAND:this.returnState=eR.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=eR.CHARACTER_REFERENCE;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.currentAttr.value+="";break;case eT.EOF:this._err(ey.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAttributeValueSingleQuoted(h){switch(h){case eT.APOSTROPHE:this.state=eR.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case eT.AMPERSAND:this.returnState=eR.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=eR.CHARACTER_REFERENCE;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.currentAttr.value+="";break;case eT.EOF:this._err(ey.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAttributeValueUnquoted(h){switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this._leaveAttrValue(),this.state=eR.BEFORE_ATTRIBUTE_NAME;break;case eT.AMPERSAND:this.returnState=eR.ATTRIBUTE_VALUE_UNQUOTED,this.state=eR.CHARACTER_REFERENCE;break;case eT.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=eR.DATA,this.emitCurrentTagToken();break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this.currentAttr.value+="";break;case eT.QUOTATION_MARK:case eT.APOSTROPHE:case eT.LESS_THAN_SIGN:case eT.EQUALS_SIGN:case eT.GRAVE_ACCENT:this._err(ey.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(h);break;case eT.EOF:this._err(ey.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAfterAttributeValueQuoted(h){switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this._leaveAttrValue(),this.state=eR.BEFORE_ATTRIBUTE_NAME;break;case eT.SOLIDUS:this._leaveAttrValue(),this.state=eR.SELF_CLOSING_START_TAG;break;case eT.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=eR.DATA,this.emitCurrentTagToken();break;case eT.EOF:this._err(ey.eofInTag),this._emitEOFToken();break;default:this._err(ey.missingWhitespaceBetweenAttributes),this.state=eR.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(h)}}_stateSelfClosingStartTag(h){switch(h){case eT.GREATER_THAN_SIGN:{let h=this.currentToken;h.selfClosing=!0,this.state=eR.DATA,this.emitCurrentTagToken();break}case eT.EOF:this._err(ey.eofInTag),this._emitEOFToken();break;default:this._err(ey.unexpectedSolidusInTag),this.state=eR.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(h)}}_stateBogusComment(h){let v=this.currentToken;switch(h){case eT.GREATER_THAN_SIGN:this.state=eR.DATA,this.emitCurrentComment(v);break;case eT.EOF:this.emitCurrentComment(v),this._emitEOFToken();break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.data+="";break;default:v.data+=String.fromCodePoint(h)}}_stateMarkupDeclarationOpen(h){this._consumeSequenceIfMatch(rT.DASH_DASH,!0)?(this._createCommentToken(rT.DASH_DASH.length+1),this.state=eR.COMMENT_START):this._consumeSequenceIfMatch(rT.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(rT.DOCTYPE.length+1),this.state=eR.DOCTYPE):this._consumeSequenceIfMatch(rT.CDATA_START,!0)?this.inForeignNode?this.state=eR.CDATA_SECTION:(this._err(ey.cdataInHtmlContent),this._createCommentToken(rT.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=eR.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ey.incorrectlyOpenedComment),this._createCommentToken(2),this.state=eR.BOGUS_COMMENT,this._stateBogusComment(h))}_stateCommentStart(h){switch(h){case eT.HYPHEN_MINUS:this.state=eR.COMMENT_START_DASH;break;case eT.GREATER_THAN_SIGN:{this._err(ey.abruptClosingOfEmptyComment),this.state=eR.DATA;let h=this.currentToken;this.emitCurrentComment(h);break}default:this.state=eR.COMMENT,this._stateComment(h)}}_stateCommentStartDash(h){let v=this.currentToken;switch(h){case eT.HYPHEN_MINUS:this.state=eR.COMMENT_END;break;case eT.GREATER_THAN_SIGN:this._err(ey.abruptClosingOfEmptyComment),this.state=eR.DATA,this.emitCurrentComment(v);break;case eT.EOF:this._err(ey.eofInComment),this.emitCurrentComment(v),this._emitEOFToken();break;default:v.data+="-",this.state=eR.COMMENT,this._stateComment(h)}}_stateComment(h){let v=this.currentToken;switch(h){case eT.HYPHEN_MINUS:this.state=eR.COMMENT_END_DASH;break;case eT.LESS_THAN_SIGN:v.data+="<",this.state=eR.COMMENT_LESS_THAN_SIGN;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.data+="";break;case eT.EOF:this._err(ey.eofInComment),this.emitCurrentComment(v),this._emitEOFToken();break;default:v.data+=String.fromCodePoint(h)}}_stateCommentLessThanSign(h){let v=this.currentToken;switch(h){case eT.EXCLAMATION_MARK:v.data+="!",this.state=eR.COMMENT_LESS_THAN_SIGN_BANG;break;case eT.LESS_THAN_SIGN:v.data+="<";break;default:this.state=eR.COMMENT,this._stateComment(h)}}_stateCommentLessThanSignBang(h){h===eT.HYPHEN_MINUS?this.state=eR.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=eR.COMMENT,this._stateComment(h))}_stateCommentLessThanSignBangDash(h){h===eT.HYPHEN_MINUS?this.state=eR.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=eR.COMMENT_END_DASH,this._stateCommentEndDash(h))}_stateCommentLessThanSignBangDashDash(h){h!==eT.GREATER_THAN_SIGN&&h!==eT.EOF&&this._err(ey.nestedComment),this.state=eR.COMMENT_END,this._stateCommentEnd(h)}_stateCommentEndDash(h){let v=this.currentToken;switch(h){case eT.HYPHEN_MINUS:this.state=eR.COMMENT_END;break;case eT.EOF:this._err(ey.eofInComment),this.emitCurrentComment(v),this._emitEOFToken();break;default:v.data+="-",this.state=eR.COMMENT,this._stateComment(h)}}_stateCommentEnd(h){let v=this.currentToken;switch(h){case eT.GREATER_THAN_SIGN:this.state=eR.DATA,this.emitCurrentComment(v);break;case eT.EXCLAMATION_MARK:this.state=eR.COMMENT_END_BANG;break;case eT.HYPHEN_MINUS:v.data+="-";break;case eT.EOF:this._err(ey.eofInComment),this.emitCurrentComment(v),this._emitEOFToken();break;default:v.data+="--",this.state=eR.COMMENT,this._stateComment(h)}}_stateCommentEndBang(h){let v=this.currentToken;switch(h){case eT.HYPHEN_MINUS:v.data+="--!",this.state=eR.COMMENT_END_DASH;break;case eT.GREATER_THAN_SIGN:this._err(ey.incorrectlyClosedComment),this.state=eR.DATA,this.emitCurrentComment(v);break;case eT.EOF:this._err(ey.eofInComment),this.emitCurrentComment(v),this._emitEOFToken();break;default:v.data+="--!",this.state=eR.COMMENT,this._stateComment(h)}}_stateDoctype(h){switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this.state=eR.BEFORE_DOCTYPE_NAME;break;case eT.GREATER_THAN_SIGN:this.state=eR.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(h);break;case eT.EOF:{this._err(ey.eofInDoctype),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this._emitEOFToken();break}default:this._err(ey.missingWhitespaceBeforeDoctypeName),this.state=eR.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(h)}}_stateBeforeDoctypeName(h){if(isAsciiUpper(h))this._createDoctypeToken(String.fromCharCode(h+32)),this.state=eR.DOCTYPE_NAME;else switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.NULL:this._err(ey.unexpectedNullCharacter),this._createDoctypeToken(""),this.state=eR.DOCTYPE_NAME;break;case eT.GREATER_THAN_SIGN:{this._err(ey.missingDoctypeName),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this.state=eR.DATA;break}case eT.EOF:{this._err(ey.eofInDoctype),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(h)),this.state=eR.DOCTYPE_NAME}}_stateDoctypeName(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this.state=eR.AFTER_DOCTYPE_NAME;break;case eT.GREATER_THAN_SIGN:this.state=eR.DATA,this.emitCurrentDoctype(v);break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.name+="";break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:v.name+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateAfterDoctypeName(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.GREATER_THAN_SIGN:this.state=eR.DATA,this.emitCurrentDoctype(v);break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(rT.PUBLIC,!1)?this.state=eR.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(rT.SYSTEM,!1)?this.state=eR.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ey.invalidCharacterSequenceAfterDoctypeName),v.forceQuirks=!0,this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h))}}_stateAfterDoctypePublicKeyword(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this.state=eR.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case eT.QUOTATION_MARK:this._err(ey.missingWhitespaceAfterDoctypePublicKeyword),v.publicId="",this.state=eR.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case eT.APOSTROPHE:this._err(ey.missingWhitespaceAfterDoctypePublicKeyword),v.publicId="",this.state=eR.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case eT.GREATER_THAN_SIGN:this._err(ey.missingDoctypePublicIdentifier),v.forceQuirks=!0,this.state=eR.DATA,this.emitCurrentDoctype(v);break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._err(ey.missingQuoteBeforeDoctypePublicIdentifier),v.forceQuirks=!0,this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBeforeDoctypePublicIdentifier(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.QUOTATION_MARK:v.publicId="",this.state=eR.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case eT.APOSTROPHE:v.publicId="",this.state=eR.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case eT.GREATER_THAN_SIGN:this._err(ey.missingDoctypePublicIdentifier),v.forceQuirks=!0,this.state=eR.DATA,this.emitCurrentDoctype(v);break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._err(ey.missingQuoteBeforeDoctypePublicIdentifier),v.forceQuirks=!0,this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateDoctypePublicIdentifierDoubleQuoted(h){let v=this.currentToken;switch(h){case eT.QUOTATION_MARK:this.state=eR.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.publicId+="";break;case eT.GREATER_THAN_SIGN:this._err(ey.abruptDoctypePublicIdentifier),v.forceQuirks=!0,this.emitCurrentDoctype(v),this.state=eR.DATA;break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:v.publicId+=String.fromCodePoint(h)}}_stateDoctypePublicIdentifierSingleQuoted(h){let v=this.currentToken;switch(h){case eT.APOSTROPHE:this.state=eR.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.publicId+="";break;case eT.GREATER_THAN_SIGN:this._err(ey.abruptDoctypePublicIdentifier),v.forceQuirks=!0,this.emitCurrentDoctype(v),this.state=eR.DATA;break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:v.publicId+=String.fromCodePoint(h)}}_stateAfterDoctypePublicIdentifier(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this.state=eR.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case eT.GREATER_THAN_SIGN:this.state=eR.DATA,this.emitCurrentDoctype(v);break;case eT.QUOTATION_MARK:this._err(ey.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case eT.APOSTROPHE:this._err(ey.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._err(ey.missingQuoteBeforeDoctypeSystemIdentifier),v.forceQuirks=!0,this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBetweenDoctypePublicAndSystemIdentifiers(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.GREATER_THAN_SIGN:this.emitCurrentDoctype(v),this.state=eR.DATA;break;case eT.QUOTATION_MARK:v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case eT.APOSTROPHE:v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._err(ey.missingQuoteBeforeDoctypeSystemIdentifier),v.forceQuirks=!0,this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateAfterDoctypeSystemKeyword(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:this.state=eR.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case eT.QUOTATION_MARK:this._err(ey.missingWhitespaceAfterDoctypeSystemKeyword),v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case eT.APOSTROPHE:this._err(ey.missingWhitespaceAfterDoctypeSystemKeyword),v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case eT.GREATER_THAN_SIGN:this._err(ey.missingDoctypeSystemIdentifier),v.forceQuirks=!0,this.state=eR.DATA,this.emitCurrentDoctype(v);break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._err(ey.missingQuoteBeforeDoctypeSystemIdentifier),v.forceQuirks=!0,this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBeforeDoctypeSystemIdentifier(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.QUOTATION_MARK:v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case eT.APOSTROPHE:v.systemId="",this.state=eR.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case eT.GREATER_THAN_SIGN:this._err(ey.missingDoctypeSystemIdentifier),v.forceQuirks=!0,this.state=eR.DATA,this.emitCurrentDoctype(v);break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._err(ey.missingQuoteBeforeDoctypeSystemIdentifier),v.forceQuirks=!0,this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateDoctypeSystemIdentifierDoubleQuoted(h){let v=this.currentToken;switch(h){case eT.QUOTATION_MARK:this.state=eR.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.systemId+="";break;case eT.GREATER_THAN_SIGN:this._err(ey.abruptDoctypeSystemIdentifier),v.forceQuirks=!0,this.emitCurrentDoctype(v),this.state=eR.DATA;break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:v.systemId+=String.fromCodePoint(h)}}_stateDoctypeSystemIdentifierSingleQuoted(h){let v=this.currentToken;switch(h){case eT.APOSTROPHE:this.state=eR.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case eT.NULL:this._err(ey.unexpectedNullCharacter),v.systemId+="";break;case eT.GREATER_THAN_SIGN:this._err(ey.abruptDoctypeSystemIdentifier),v.forceQuirks=!0,this.emitCurrentDoctype(v),this.state=eR.DATA;break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:v.systemId+=String.fromCodePoint(h)}}_stateAfterDoctypeSystemIdentifier(h){let v=this.currentToken;switch(h){case eT.SPACE:case eT.LINE_FEED:case eT.TABULATION:case eT.FORM_FEED:break;case eT.GREATER_THAN_SIGN:this.emitCurrentDoctype(v),this.state=eR.DATA;break;case eT.EOF:this._err(ey.eofInDoctype),v.forceQuirks=!0,this.emitCurrentDoctype(v),this._emitEOFToken();break;default:this._err(ey.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=eR.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBogusDoctype(h){let v=this.currentToken;switch(h){case eT.GREATER_THAN_SIGN:this.emitCurrentDoctype(v),this.state=eR.DATA;break;case eT.NULL:this._err(ey.unexpectedNullCharacter);break;case eT.EOF:this.emitCurrentDoctype(v),this._emitEOFToken()}}_stateCdataSection(h){switch(h){case eT.RIGHT_SQUARE_BRACKET:this.state=eR.CDATA_SECTION_BRACKET;break;case eT.EOF:this._err(ey.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateCdataSectionBracket(h){h===eT.RIGHT_SQUARE_BRACKET?this.state=eR.CDATA_SECTION_END:(this._emitChars("]"),this.state=eR.CDATA_SECTION,this._stateCdataSection(h))}_stateCdataSectionEnd(h){switch(h){case eT.GREATER_THAN_SIGN:this.state=eR.DATA;break;case eT.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=eR.CDATA_SECTION,this._stateCdataSection(h)}}_stateCharacterReference(h){h===eT.NUMBER_SIGN?this.state=eR.NUMERIC_CHARACTER_REFERENCE:tokenizer_isAsciiAlphaNumeric(h)?(this.state=eR.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(h)):(this._flushCodePointConsumedAsCharacterReference(eT.AMPERSAND),this._reconsumeInState(this.returnState,h))}_stateNamedCharacterReference(h){let v=this._matchNamedCharacterReference(h);if(this._ensureHibernation());else if(v){for(let h=0;h<v.length;h++)this._flushCodePointConsumedAsCharacterReference(v[h]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(eT.AMPERSAND),this.state=eR.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(h){tokenizer_isAsciiAlphaNumeric(h)?this._flushCodePointConsumedAsCharacterReference(h):(h===eT.SEMICOLON&&this._err(ey.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,h))}_stateNumericCharacterReference(h){this.charRefCode=0,h===eT.LATIN_SMALL_X||h===eT.LATIN_CAPITAL_X?this.state=eR.HEXADEMICAL_CHARACTER_REFERENCE_START:isAsciiDigit(h)?(this.state=eR.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(h)):(this._err(ey.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(eT.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(eT.NUMBER_SIGN),this._reconsumeInState(this.returnState,h))}_stateHexademicalCharacterReferenceStart(h){isAsciiDigit(h)||isAsciiUpperHexDigit(h)||isAsciiLowerHexDigit(h)?(this.state=eR.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(h)):(this._err(ey.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(eT.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(eT.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(h){isAsciiUpperHexDigit(h)?this.charRefCode=16*this.charRefCode+h-55:isAsciiLowerHexDigit(h)?this.charRefCode=16*this.charRefCode+h-87:isAsciiDigit(h)?this.charRefCode=16*this.charRefCode+h-48:h===eT.SEMICOLON?this.state=eR.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ey.missingSemicolonAfterCharacterReference),this.state=eR.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(h))}_stateDecimalCharacterReference(h){isAsciiDigit(h)?this.charRefCode=10*this.charRefCode+h-48:h===eT.SEMICOLON?this.state=eR.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ey.missingSemicolonAfterCharacterReference),this.state=eR.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(h))}_stateNumericCharacterReferenceEnd(h){if(this.charRefCode===eT.NULL)this._err(ey.nullCharacterReference),this.charRefCode=eT.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ey.characterReferenceOutsideUnicodeRange),this.charRefCode=eT.REPLACEMENT_CHARACTER;else if(isSurrogate(this.charRefCode))this._err(ey.surrogateCharacterReference),this.charRefCode=eT.REPLACEMENT_CHARACTER;else if(isUndefinedCodePoint(this.charRefCode))this._err(ey.noncharacterCharacterReference);else if(isControlCodePoint(this.charRefCode)||this.charRefCode===eT.CARRIAGE_RETURN){this._err(ey.controlCharacterReference);let h=rk.get(this.charRefCode);void 0!==h&&(this.charRefCode=h)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,h)}};let rI=new Set([eO.DD,eO.DT,eO.LI,eO.OPTGROUP,eO.OPTION,eO.P,eO.RB,eO.RP,eO.RT,eO.RTC]),rN=new Set([...rI,eO.CAPTION,eO.COLGROUP,eO.TBODY,eO.TD,eO.TFOOT,eO.TH,eO.THEAD,eO.TR]),rO=new Map([[eO.APPLET,ek.HTML],[eO.CAPTION,ek.HTML],[eO.HTML,ek.HTML],[eO.MARQUEE,ek.HTML],[eO.OBJECT,ek.HTML],[eO.TABLE,ek.HTML],[eO.TD,ek.HTML],[eO.TEMPLATE,ek.HTML],[eO.TH,ek.HTML],[eO.ANNOTATION_XML,ek.MATHML],[eO.MI,ek.MATHML],[eO.MN,ek.MATHML],[eO.MO,ek.MATHML],[eO.MS,ek.MATHML],[eO.MTEXT,ek.MATHML],[eO.DESC,ek.SVG],[eO.FOREIGN_OBJECT,ek.SVG],[eO.TITLE,ek.SVG]]),rR=[eO.H1,eO.H2,eO.H3,eO.H4,eO.H5,eO.H6],rL=[eO.TR,eO.TEMPLATE,eO.HTML],rD=[eO.TBODY,eO.TFOOT,eO.THEAD,eO.TEMPLATE,eO.HTML],rP=[eO.TABLE,eO.TEMPLATE,eO.HTML],rM=[eO.TD,eO.TH];let OpenElementStack=class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(h,v,_){this.treeAdapter=v,this.handler=_,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=eO.UNKNOWN,this.current=h}_indexOf(h){return this.items.lastIndexOf(h,this.stackTop)}_isInTemplate(){return this.currentTagId===eO.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ek.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(h,v){this.stackTop++,this.items[this.stackTop]=h,this.current=h,this.tagIDs[this.stackTop]=v,this.currentTagId=v,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(h,v,!0)}pop(){let h=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(h,!0)}replace(h,v){let _=this._indexOf(h);this.items[_]=v,_===this.stackTop&&(this.current=v)}insertAfter(h,v,_){let b=this._indexOf(h)+1;this.items.splice(b,0,v),this.tagIDs.splice(b,0,_),this.stackTop++,b===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,b===this.stackTop)}popUntilTagNamePopped(h){let v=this.stackTop+1;do v=this.tagIDs.lastIndexOf(h,v-1);while(v>0&&this.treeAdapter.getNamespaceURI(this.items[v])!==ek.HTML);this.shortenToLength(v<0?0:v)}shortenToLength(h){for(;this.stackTop>=h;){let v=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(v,this.stackTop<h)}}popUntilElementPopped(h){let v=this._indexOf(h);this.shortenToLength(v<0?0:v)}popUntilPopped(h,v){let _=this._indexOfTagNames(h,v);this.shortenToLength(_<0?0:_)}popUntilNumberedHeaderPopped(){this.popUntilPopped(rR,ek.HTML)}popUntilTableCellPopped(){this.popUntilPopped(rM,ek.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(h,v){for(let _=this.stackTop;_>=0;_--)if(h.includes(this.tagIDs[_])&&this.treeAdapter.getNamespaceURI(this.items[_])===v)return _;return -1}clearBackTo(h,v){let _=this._indexOfTagNames(h,v);this.shortenToLength(_+1)}clearBackToTableContext(){this.clearBackTo(rP,ek.HTML)}clearBackToTableBodyContext(){this.clearBackTo(rD,ek.HTML)}clearBackToTableRowContext(){this.clearBackTo(rL,ek.HTML)}remove(h){let v=this._indexOf(h);v>=0&&(v===this.stackTop?this.pop():(this.items.splice(v,1),this.tagIDs.splice(v,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(h,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===eO.BODY?this.items[1]:null}contains(h){return this._indexOf(h)>-1}getCommonAncestor(h){let v=this._indexOf(h)-1;return v>=0?this.items[v]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===eO.HTML}hasInScope(h){for(let v=this.stackTop;v>=0;v--){let _=this.tagIDs[v],b=this.treeAdapter.getNamespaceURI(this.items[v]);if(_===h&&b===ek.HTML)break;if(rO.get(_)===b)return!1}return!0}hasNumberedHeaderInScope(){for(let h=this.stackTop;h>=0;h--){let v=this.tagIDs[h],_=this.treeAdapter.getNamespaceURI(this.items[h]);if(isNumberedHeader(v)&&_===ek.HTML)break;if(rO.get(v)===_)return!1}return!0}hasInListItemScope(h){for(let v=this.stackTop;v>=0;v--){let _=this.tagIDs[v],b=this.treeAdapter.getNamespaceURI(this.items[v]);if(_===h&&b===ek.HTML)break;if((_===eO.UL||_===eO.OL)&&b===ek.HTML||rO.get(_)===b)return!1}return!0}hasInButtonScope(h){for(let v=this.stackTop;v>=0;v--){let _=this.tagIDs[v],b=this.treeAdapter.getNamespaceURI(this.items[v]);if(_===h&&b===ek.HTML)break;if(_===eO.BUTTON&&b===ek.HTML||rO.get(_)===b)return!1}return!0}hasInTableScope(h){for(let v=this.stackTop;v>=0;v--){let _=this.tagIDs[v],b=this.treeAdapter.getNamespaceURI(this.items[v]);if(b===ek.HTML){if(_===h)break;if(_===eO.TABLE||_===eO.TEMPLATE||_===eO.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let h=this.stackTop;h>=0;h--){let v=this.tagIDs[h],_=this.treeAdapter.getNamespaceURI(this.items[h]);if(_===ek.HTML){if(v===eO.TBODY||v===eO.THEAD||v===eO.TFOOT)break;if(v===eO.TABLE||v===eO.HTML)return!1}}return!0}hasInSelectScope(h){for(let v=this.stackTop;v>=0;v--){let _=this.tagIDs[v],b=this.treeAdapter.getNamespaceURI(this.items[v]);if(b===ek.HTML){if(_===h)break;if(_!==eO.OPTION&&_!==eO.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;rI.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;rN.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(h){for(;this.currentTagId!==h&&rN.has(this.currentTagId);)this.pop()}};(es=eL=eL||(eL={}))[es.Marker=0]="Marker",es[es.Element=1]="Element";let rF={type:eL.Marker};let FormattingElementList=class FormattingElementList{constructor(h){this.treeAdapter=h,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(h,v){let _=[],b=v.length,A=this.treeAdapter.getTagName(h),S=this.treeAdapter.getNamespaceURI(h);for(let h=0;h<this.entries.length;h++){let v=this.entries[h];if(v.type===eL.Marker)break;let{element:C}=v;if(this.treeAdapter.getTagName(C)===A&&this.treeAdapter.getNamespaceURI(C)===S){let v=this.treeAdapter.getAttrList(C);v.length===b&&_.push({idx:h,attrs:v})}}return _}_ensureNoahArkCondition(h){if(this.entries.length<3)return;let v=this.treeAdapter.getAttrList(h),_=this._getNoahArkConditionCandidates(h,v);if(_.length<3)return;let b=new Map(v.map(h=>[h.name,h.value])),A=0;for(let h=0;h<_.length;h++){let v=_[h];v.attrs.every(h=>b.get(h.name)===h.value)&&(A+=1)>=3&&this.entries.splice(v.idx,1)}}insertMarker(){this.entries.unshift(rF)}pushElement(h,v){this._ensureNoahArkCondition(h),this.entries.unshift({type:eL.Element,element:h,token:v})}insertElementAfterBookmark(h,v){let _=this.entries.indexOf(this.bookmark);this.entries.splice(_,0,{type:eL.Element,element:h,token:v})}removeEntry(h){let v=this.entries.indexOf(h);v>=0&&this.entries.splice(v,1)}clearToLastMarker(){let h=this.entries.indexOf(rF);h>=0?this.entries.splice(0,h+1):this.entries.length=0}getElementEntryInScopeWithTagName(h){let v=this.entries.find(v=>v.type===eL.Marker||this.treeAdapter.getTagName(v.element)===h);return v&&v.type===eL.Element?v:null}getElementEntry(h){return this.entries.find(v=>v.type===eL.Element&&v.element===h)}};function createTextNode(h){return{nodeName:"#text",value:h,parentNode:null}}let rB={createDocument:()=>({nodeName:"#document",mode:eI.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(h,v,_)=>({nodeName:h,tagName:h,attrs:_,namespaceURI:v,childNodes:[],parentNode:null}),createCommentNode:h=>({nodeName:"#comment",data:h,parentNode:null}),appendChild(h,v){h.childNodes.push(v),v.parentNode=h},insertBefore(h,v,_){let b=h.childNodes.indexOf(_);h.childNodes.splice(b,0,v),v.parentNode=h},setTemplateContent(h,v){h.content=v},getTemplateContent:h=>h.content,setDocumentType(h,v,_,b){let A=h.childNodes.find(h=>"#documentType"===h.nodeName);A?(A.name=v,A.publicId=_,A.systemId=b):rB.appendChild(h,{nodeName:"#documentType",name:v,publicId:_,systemId:b,parentNode:null})},setDocumentMode(h,v){h.mode=v},getDocumentMode:h=>h.mode,detachNode(h){if(h.parentNode){let v=h.parentNode.childNodes.indexOf(h);h.parentNode.childNodes.splice(v,1),h.parentNode=null}},insertText(h,v){if(h.childNodes.length>0){let _=h.childNodes[h.childNodes.length-1];if(rB.isTextNode(_)){_.value+=v;return}}rB.appendChild(h,createTextNode(v))},insertTextBefore(h,v,_){let b=h.childNodes[h.childNodes.indexOf(_)-1];b&&rB.isTextNode(b)?b.value+=v:rB.insertBefore(h,createTextNode(v),_)},adoptAttributes(h,v){let _=new Set(h.attrs.map(h=>h.name));for(let b=0;b<v.length;b++)_.has(v[b].name)||h.attrs.push(v[b])},getFirstChild:h=>h.childNodes[0],getChildNodes:h=>h.childNodes,getParentNode:h=>h.parentNode,getAttrList:h=>h.attrs,getTagName:h=>h.tagName,getNamespaceURI:h=>h.namespaceURI,getTextNodeContent:h=>h.value,getCommentNodeContent:h=>h.data,getDocumentTypeNodeName:h=>h.name,getDocumentTypeNodePublicId:h=>h.publicId,getDocumentTypeNodeSystemId:h=>h.systemId,isTextNode:h=>"#text"===h.nodeName,isCommentNode:h=>"#comment"===h.nodeName,isDocumentTypeNode:h=>"#documentType"===h.nodeName,isElementNode:h=>Object.prototype.hasOwnProperty.call(h,"tagName"),setNodeSourceCodeLocation(h,v){h.sourceCodeLocation=v},getNodeSourceCodeLocation:h=>h.sourceCodeLocation,updateNodeSourceCodeLocation(h,v){h.sourceCodeLocation={...h.sourceCodeLocation,...v}}},rH="html",rU=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],rz=[...rU,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],r$=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),rG=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],rj=[...rG,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(h,v){return v.some(v=>h.startsWith(v))}let rV={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},rW=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(h=>[h.toLowerCase(),h])),rq=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ek.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ek.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ek.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ek.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ek.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ek.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ek.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ek.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ek.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ek.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ek.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ek.XMLNS}]]),rY=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(h=>[h.toLowerCase(),h])),rQ=new Set([eO.B,eO.BIG,eO.BLOCKQUOTE,eO.BODY,eO.BR,eO.CENTER,eO.CODE,eO.DD,eO.DIV,eO.DL,eO.DT,eO.EM,eO.EMBED,eO.H1,eO.H2,eO.H3,eO.H4,eO.H5,eO.H6,eO.HEAD,eO.HR,eO.I,eO.IMG,eO.LI,eO.LISTING,eO.MENU,eO.META,eO.NOBR,eO.OL,eO.P,eO.PRE,eO.RUBY,eO.S,eO.SMALL,eO.SPAN,eO.STRONG,eO.STRIKE,eO.SUB,eO.SUP,eO.TABLE,eO.TT,eO.U,eO.UL,eO.VAR]);function adjustTokenMathMLAttrs(h){for(let v=0;v<h.attrs.length;v++)if("definitionurl"===h.attrs[v].name){h.attrs[v].name="definitionURL";break}}function adjustTokenSVGAttrs(h){for(let v=0;v<h.attrs.length;v++){let _=rW.get(h.attrs[v].name);null!=_&&(h.attrs[v].name=_)}}function adjustTokenXMLAttrs(h){for(let v=0;v<h.attrs.length;v++){let _=rq.get(h.attrs[v].name);_&&(h.attrs[v].prefix=_.prefix,h.attrs[v].name=_.name,h.attrs[v].namespace=_.namespace)}}(el=eD||(eD={}))[el.INITIAL=0]="INITIAL",el[el.BEFORE_HTML=1]="BEFORE_HTML",el[el.BEFORE_HEAD=2]="BEFORE_HEAD",el[el.IN_HEAD=3]="IN_HEAD",el[el.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",el[el.AFTER_HEAD=5]="AFTER_HEAD",el[el.IN_BODY=6]="IN_BODY",el[el.TEXT=7]="TEXT",el[el.IN_TABLE=8]="IN_TABLE",el[el.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",el[el.IN_CAPTION=10]="IN_CAPTION",el[el.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",el[el.IN_TABLE_BODY=12]="IN_TABLE_BODY",el[el.IN_ROW=13]="IN_ROW",el[el.IN_CELL=14]="IN_CELL",el[el.IN_SELECT=15]="IN_SELECT",el[el.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",el[el.IN_TEMPLATE=17]="IN_TEMPLATE",el[el.AFTER_BODY=18]="AFTER_BODY",el[el.IN_FRAMESET=19]="IN_FRAMESET",el[el.AFTER_FRAMESET=20]="AFTER_FRAMESET",el[el.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",el[el.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET";let rX={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},rK=new Set([eO.TABLE,eO.TBODY,eO.TFOOT,eO.THEAD,eO.TR]),rZ={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:rB,onParseError:null};let parser_Parser=class parser_Parser{constructor(h,v,_=null,b=null){this.fragmentContext=_,this.scriptHandler=b,this.currentToken=null,this.stopped=!1,this.insertionMode=eD.INITIAL,this.originalInsertionMode=eD.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...rZ,...h},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=v?v:this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=_?getTagID(this.treeAdapter.getTagName(_)):eO.UNKNOWN,this._setContextModes(null!=_?_:this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(h,v){let _=new this(v);return _.tokenizer.write(h,!0),_.document}static getFragmentParser(h,v){let _={...rZ,...v};null!=h||(h=_.treeAdapter.createElement(eN.TEMPLATE,ek.HTML,[]));let b=_.treeAdapter.createElement("documentmock",ek.HTML,[]),A=new this(_,b,h);return A.fragmentContextID===eO.TEMPLATE&&A.tmplInsertionModeStack.unshift(eD.IN_TEMPLATE),A._initTokenizerForFragmentParsing(),A._insertFakeRootElement(),A._resetInsertionMode(),A._findFormInFragmentContext(),A}getFragment(){let h=this.treeAdapter.getFirstChild(this.document),v=this.treeAdapter.createDocumentFragment();return this._adoptNodes(h,v),v}_err(h,v,_){var b;if(!this.onParseError)return;let A=null!==(b=h.location)&&void 0!==b?b:rX,S={code:v,startLine:A.startLine,startCol:A.startCol,startOffset:A.startOffset,endLine:_?A.startLine:A.endLine,endCol:_?A.startCol:A.endCol,endOffset:_?A.startOffset:A.endOffset};this.onParseError(S)}onItemPush(h,v,_){var b,A;null===(A=(b=this.treeAdapter).onItemPush)||void 0===A||A.call(b,h),_&&this.openElements.stackTop>0&&this._setContextModes(h,v)}onItemPop(h,v){var _,b;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(h,this.currentToken),null===(b=(_=this.treeAdapter).onItemPop)||void 0===b||b.call(_,h,this.openElements.current),v){let h,v;0===this.openElements.stackTop&&this.fragmentContext?(h=this.fragmentContext,v=this.fragmentContextID):{current:h,currentTagId:v}=this.openElements,this._setContextModes(h,v)}}_setContextModes(h,v){let _=h===this.document||this.treeAdapter.getNamespaceURI(h)===ek.HTML;this.currentNotInHTML=!_,this.tokenizer.inForeignNode=!_&&!this._isIntegrationPoint(v,h)}_switchToTextParsing(h,v){this._insertElement(h,ek.HTML),this.tokenizer.state=v,this.originalInsertionMode=this.insertionMode,this.insertionMode=eD.TEXT}switchToPlaintextParsing(){this.insertionMode=eD.TEXT,this.originalInsertionMode=eD.IN_BODY,this.tokenizer.state=rw.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let h=this.fragmentContext;for(;h;){if(this.treeAdapter.getTagName(h)===eN.FORM){this.formElement=h;break}h=this.treeAdapter.getParentNode(h)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===ek.HTML)switch(this.fragmentContextID){case eO.TITLE:case eO.TEXTAREA:this.tokenizer.state=rw.RCDATA;break;case eO.STYLE:case eO.XMP:case eO.IFRAME:case eO.NOEMBED:case eO.NOFRAMES:case eO.NOSCRIPT:this.tokenizer.state=rw.RAWTEXT;break;case eO.SCRIPT:this.tokenizer.state=rw.SCRIPT_DATA;break;case eO.PLAINTEXT:this.tokenizer.state=rw.PLAINTEXT}}_setDocumentType(h){let v=h.name||"",_=h.publicId||"",b=h.systemId||"";if(this.treeAdapter.setDocumentType(this.document,v,_,b),h.location){let v=this.treeAdapter.getChildNodes(this.document),_=v.find(h=>this.treeAdapter.isDocumentTypeNode(h));_&&this.treeAdapter.setNodeSourceCodeLocation(_,h.location)}}_attachElementToTree(h,v){if(this.options.sourceCodeLocationInfo){let _=v&&{...v,startTag:v};this.treeAdapter.setNodeSourceCodeLocation(h,_)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(h);else{let v=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(v,h)}}_appendElement(h,v){let _=this.treeAdapter.createElement(h.tagName,v,h.attrs);this._attachElementToTree(_,h.location)}_insertElement(h,v){let _=this.treeAdapter.createElement(h.tagName,v,h.attrs);this._attachElementToTree(_,h.location),this.openElements.push(_,h.tagID)}_insertFakeElement(h,v){let _=this.treeAdapter.createElement(h,ek.HTML,[]);this._attachElementToTree(_,null),this.openElements.push(_,v)}_insertTemplate(h){let v=this.treeAdapter.createElement(h.tagName,ek.HTML,h.attrs),_=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(v,_),this._attachElementToTree(v,h.location),this.openElements.push(v,h.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(_,null)}_insertFakeRootElement(){let h=this.treeAdapter.createElement(eN.HTML,ek.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(h,null),this.treeAdapter.appendChild(this.openElements.current,h),this.openElements.push(h,eO.HTML)}_appendCommentNode(h,v){let _=this.treeAdapter.createCommentNode(h.data);this.treeAdapter.appendChild(v,_),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(_,h.location)}_insertCharacters(h){let v,_;if(this._shouldFosterParentOnInsertion()?({parent:v,beforeElement:_}=this._findFosterParentingLocation(),_?this.treeAdapter.insertTextBefore(v,h.chars,_):this.treeAdapter.insertText(v,h.chars)):(v=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(v,h.chars)),!h.location)return;let b=this.treeAdapter.getChildNodes(v),A=_?b.lastIndexOf(_):b.length,S=b[A-1],C=this.treeAdapter.getNodeSourceCodeLocation(S);if(C){let{endLine:v,endCol:_,endOffset:b}=h.location;this.treeAdapter.updateNodeSourceCodeLocation(S,{endLine:v,endCol:_,endOffset:b})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(S,h.location)}_adoptNodes(h,v){for(let _=this.treeAdapter.getFirstChild(h);_;_=this.treeAdapter.getFirstChild(h))this.treeAdapter.detachNode(_),this.treeAdapter.appendChild(v,_)}_setEndLocation(h,v){if(this.treeAdapter.getNodeSourceCodeLocation(h)&&v.location){let _=v.location,b=this.treeAdapter.getTagName(h),A=v.type===e_.END_TAG&&b===v.tagName?{endTag:{..._},endLine:_.endLine,endCol:_.endCol,endOffset:_.endOffset}:{endLine:_.startLine,endCol:_.startCol,endOffset:_.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(h,A)}}shouldProcessStartTagTokenInForeignContent(h){let v,_;return!!this.currentNotInHTML&&(0===this.openElements.stackTop&&this.fragmentContext?(v=this.fragmentContext,_=this.fragmentContextID):{current:v,currentTagId:_}=this.openElements,(h.tagID!==eO.SVG||this.treeAdapter.getTagName(v)!==eN.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(v)!==ek.MATHML)&&(this.tokenizer.inForeignNode||(h.tagID===eO.MGLYPH||h.tagID===eO.MALIGNMARK)&&!this._isIntegrationPoint(_,v,ek.HTML)))}_processToken(h){switch(h.type){case e_.CHARACTER:this.onCharacter(h);break;case e_.NULL_CHARACTER:this.onNullCharacter(h);break;case e_.COMMENT:this.onComment(h);break;case e_.DOCTYPE:this.onDoctype(h);break;case e_.START_TAG:this._processStartTag(h);break;case e_.END_TAG:this.onEndTag(h);break;case e_.EOF:this.onEof(h);break;case e_.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(h)}}_isIntegrationPoint(h,v,_){let b=this.treeAdapter.getNamespaceURI(v),A=this.treeAdapter.getAttrList(v);return(!_||_===ek.HTML)&&function(h,v,_){if(v===ek.MATHML&&h===eO.ANNOTATION_XML){for(let h=0;h<_.length;h++)if(_[h].name===ew.ENCODING){let v=_[h].value.toLowerCase();return v===rV.TEXT_HTML||v===rV.APPLICATION_XML}}return v===ek.SVG&&(h===eO.FOREIGN_OBJECT||h===eO.DESC||h===eO.TITLE)}(h,b,A)||(!_||_===ek.MATHML)&&b===ek.MATHML&&(h===eO.MI||h===eO.MO||h===eO.MN||h===eO.MS||h===eO.MTEXT)}_reconstructActiveFormattingElements(){let h=this.activeFormattingElements.entries.length;if(h){let v=this.activeFormattingElements.entries.findIndex(h=>h.type===eL.Marker||this.openElements.contains(h.element)),_=v<0?h-1:v-1;for(let h=_;h>=0;h--){let v=this.activeFormattingElements.entries[h];this._insertElement(v.token,this.treeAdapter.getNamespaceURI(v.element)),v.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=eD.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(eO.P),this.openElements.popUntilTagNamePopped(eO.P)}_resetInsertionMode(){for(let h=this.openElements.stackTop;h>=0;h--)switch(0===h&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[h]){case eO.TR:this.insertionMode=eD.IN_ROW;return;case eO.TBODY:case eO.THEAD:case eO.TFOOT:this.insertionMode=eD.IN_TABLE_BODY;return;case eO.CAPTION:this.insertionMode=eD.IN_CAPTION;return;case eO.COLGROUP:this.insertionMode=eD.IN_COLUMN_GROUP;return;case eO.TABLE:this.insertionMode=eD.IN_TABLE;return;case eO.BODY:this.insertionMode=eD.IN_BODY;return;case eO.FRAMESET:this.insertionMode=eD.IN_FRAMESET;return;case eO.SELECT:this._resetInsertionModeForSelect(h);return;case eO.TEMPLATE:this.insertionMode=this.tmplInsertionModeStack[0];return;case eO.HTML:this.insertionMode=this.headElement?eD.AFTER_HEAD:eD.BEFORE_HEAD;return;case eO.TD:case eO.TH:if(h>0){this.insertionMode=eD.IN_CELL;return}break;case eO.HEAD:if(h>0){this.insertionMode=eD.IN_HEAD;return}}this.insertionMode=eD.IN_BODY}_resetInsertionModeForSelect(h){if(h>0)for(let v=h-1;v>0;v--){let h=this.openElements.tagIDs[v];if(h===eO.TEMPLATE)break;if(h===eO.TABLE){this.insertionMode=eD.IN_SELECT_IN_TABLE;return}}this.insertionMode=eD.IN_SELECT}_isElementCausesFosterParenting(h){return rK.has(h)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let h=this.openElements.stackTop;h>=0;h--){let v=this.openElements.items[h];switch(this.openElements.tagIDs[h]){case eO.TEMPLATE:if(this.treeAdapter.getNamespaceURI(v)===ek.HTML)return{parent:this.treeAdapter.getTemplateContent(v),beforeElement:null};break;case eO.TABLE:{let _=this.treeAdapter.getParentNode(v);if(_)return{parent:_,beforeElement:v};return{parent:this.openElements.items[h-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(h){let v=this._findFosterParentingLocation();v.beforeElement?this.treeAdapter.insertBefore(v.parent,h,v.beforeElement):this.treeAdapter.appendChild(v.parent,h)}_isSpecialElement(h,v){let _=this.treeAdapter.getNamespaceURI(h);return rC[_].has(v)}onCharacter(h){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){this._insertCharacters(h),this.framesetOk=!1;return}switch(this.insertionMode){case eD.INITIAL:tokenInInitialMode(this,h);break;case eD.BEFORE_HTML:tokenBeforeHtml(this,h);break;case eD.BEFORE_HEAD:tokenBeforeHead(this,h);break;case eD.IN_HEAD:tokenInHead(this,h);break;case eD.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case eD.AFTER_HEAD:tokenAfterHead(this,h);break;case eD.IN_BODY:case eD.IN_CAPTION:case eD.IN_CELL:case eD.IN_TEMPLATE:characterInBody(this,h);break;case eD.TEXT:case eD.IN_SELECT:case eD.IN_SELECT_IN_TABLE:this._insertCharacters(h);break;case eD.IN_TABLE:case eD.IN_TABLE_BODY:case eD.IN_ROW:characterInTable(this,h);break;case eD.IN_TABLE_TEXT:characterInTableText(this,h);break;case eD.IN_COLUMN_GROUP:tokenInColumnGroup(this,h);break;case eD.AFTER_BODY:tokenAfterBody(this,h);break;case eD.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onNullCharacter(h){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){h.chars="",this._insertCharacters(h);return}switch(this.insertionMode){case eD.INITIAL:tokenInInitialMode(this,h);break;case eD.BEFORE_HTML:tokenBeforeHtml(this,h);break;case eD.BEFORE_HEAD:tokenBeforeHead(this,h);break;case eD.IN_HEAD:tokenInHead(this,h);break;case eD.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case eD.AFTER_HEAD:tokenAfterHead(this,h);break;case eD.TEXT:this._insertCharacters(h);break;case eD.IN_TABLE:case eD.IN_TABLE_BODY:case eD.IN_ROW:characterInTable(this,h);break;case eD.IN_COLUMN_GROUP:tokenInColumnGroup(this,h);break;case eD.AFTER_BODY:tokenAfterBody(this,h);break;case eD.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onComment(h){if(this.skipNextNewLine=!1,this.currentNotInHTML){appendComment(this,h);return}switch(this.insertionMode){case eD.INITIAL:case eD.BEFORE_HTML:case eD.BEFORE_HEAD:case eD.IN_HEAD:case eD.IN_HEAD_NO_SCRIPT:case eD.AFTER_HEAD:case eD.IN_BODY:case eD.IN_TABLE:case eD.IN_CAPTION:case eD.IN_COLUMN_GROUP:case eD.IN_TABLE_BODY:case eD.IN_ROW:case eD.IN_CELL:case eD.IN_SELECT:case eD.IN_SELECT_IN_TABLE:case eD.IN_TEMPLATE:case eD.IN_FRAMESET:case eD.AFTER_FRAMESET:appendComment(this,h);break;case eD.IN_TABLE_TEXT:tokenInTableText(this,h);break;case eD.AFTER_BODY:!function(h,v){h._appendCommentNode(v,h.openElements.items[0])}(this,h);break;case eD.AFTER_AFTER_BODY:case eD.AFTER_AFTER_FRAMESET:!function(h,v){h._appendCommentNode(v,h.document)}(this,h)}}onDoctype(h){switch(this.skipNextNewLine=!1,this.insertionMode){case eD.INITIAL:!function(h,v){h._setDocumentType(v);let _=v.forceQuirks?eI.QUIRKS:function(h){if(h.name!==rH)return eI.QUIRKS;let{systemId:v}=h;if(v&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===v.toLowerCase())return eI.QUIRKS;let{publicId:_}=h;if(null!==_){if(_=_.toLowerCase(),r$.has(_))return eI.QUIRKS;let h=null===v?rz:rU;if(hasPrefix(_,h))return eI.QUIRKS;if(hasPrefix(_,h=null===v?rG:rj))return eI.LIMITED_QUIRKS}return eI.NO_QUIRKS}(v);v.name===rH&&null===v.publicId&&(null===v.systemId||"about:legacy-compat"===v.systemId)||h._err(v,ey.nonConformingDoctype),h.treeAdapter.setDocumentMode(h.document,_),h.insertionMode=eD.BEFORE_HTML}(this,h);break;case eD.BEFORE_HEAD:case eD.IN_HEAD:case eD.IN_HEAD_NO_SCRIPT:case eD.AFTER_HEAD:this._err(h,ey.misplacedDoctype);break;case eD.IN_TABLE_TEXT:tokenInTableText(this,h)}}onStartTag(h){this.skipNextNewLine=!1,this.currentToken=h,this._processStartTag(h),h.selfClosing&&!h.ackSelfClosing&&this._err(h,ey.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(h){this.shouldProcessStartTagTokenInForeignContent(h)?function(h,v){if(function(h){let v=h.tagID,_=v===eO.FONT&&h.attrs.some(({name:h})=>h===ew.COLOR||h===ew.SIZE||h===ew.FACE);return _||rQ.has(v)}(v))popUntilHtmlOrIntegrationPoint(h),h._startTagOutsideForeignContent(v);else{let _=h._getAdjustedCurrentElement(),b=h.treeAdapter.getNamespaceURI(_);b===ek.MATHML?adjustTokenMathMLAttrs(v):b===ek.SVG&&(function(h){let v=rY.get(h.tagName);null!=v&&(h.tagName=v,h.tagID=getTagID(h.tagName))}(v),adjustTokenSVGAttrs(v)),adjustTokenXMLAttrs(v),v.selfClosing?h._appendElement(v,b):h._insertElement(v,b),v.ackSelfClosing=!0}}(this,h):this._startTagOutsideForeignContent(h)}_startTagOutsideForeignContent(h){switch(this.insertionMode){case eD.INITIAL:tokenInInitialMode(this,h);break;case eD.BEFORE_HTML:h.tagID===eO.HTML?(this._insertElement(h,ek.HTML),this.insertionMode=eD.BEFORE_HEAD):tokenBeforeHtml(this,h);break;case eD.BEFORE_HEAD:!function(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.HEAD:h._insertElement(v,ek.HTML),h.headElement=h.openElements.current,h.insertionMode=eD.IN_HEAD;break;default:tokenBeforeHead(h,v)}}(this,h);break;case eD.IN_HEAD:startTagInHead(this,h);break;case eD.IN_HEAD_NO_SCRIPT:!function(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.BASEFONT:case eO.BGSOUND:case eO.HEAD:case eO.LINK:case eO.META:case eO.NOFRAMES:case eO.STYLE:startTagInHead(h,v);break;case eO.NOSCRIPT:h._err(v,ey.nestedNoscriptInHead);break;default:tokenInHeadNoScript(h,v)}}(this,h);break;case eD.AFTER_HEAD:!function(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.BODY:h._insertElement(v,ek.HTML),h.framesetOk=!1,h.insertionMode=eD.IN_BODY;break;case eO.FRAMESET:h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_FRAMESET;break;case eO.BASE:case eO.BASEFONT:case eO.BGSOUND:case eO.LINK:case eO.META:case eO.NOFRAMES:case eO.SCRIPT:case eO.STYLE:case eO.TEMPLATE:case eO.TITLE:h._err(v,ey.abandonedHeadElementChild),h.openElements.push(h.headElement,eO.HEAD),startTagInHead(h,v),h.openElements.remove(h.headElement);break;case eO.HEAD:h._err(v,ey.misplacedStartTagForHeadElement);break;default:tokenAfterHead(h,v)}}(this,h);break;case eD.IN_BODY:startTagInBody(this,h);break;case eD.IN_TABLE:startTagInTable(this,h);break;case eD.IN_TABLE_TEXT:tokenInTableText(this,h);break;case eD.IN_CAPTION:!function(h,v){let _=v.tagID;rJ.has(_)?h.openElements.hasInTableScope(eO.CAPTION)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eO.CAPTION),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=eD.IN_TABLE,startTagInTable(h,v)):startTagInBody(h,v)}(this,h);break;case eD.IN_COLUMN_GROUP:startTagInColumnGroup(this,h);break;case eD.IN_TABLE_BODY:startTagInTableBody(this,h);break;case eD.IN_ROW:startTagInRow(this,h);break;case eD.IN_CELL:!function(h,v){let _=v.tagID;rJ.has(_)?(h.openElements.hasInTableScope(eO.TD)||h.openElements.hasInTableScope(eO.TH))&&(h._closeTableCell(),startTagInRow(h,v)):startTagInBody(h,v)}(this,h);break;case eD.IN_SELECT:startTagInSelect(this,h);break;case eD.IN_SELECT_IN_TABLE:!function(h,v){let _=v.tagID;_===eO.CAPTION||_===eO.TABLE||_===eO.TBODY||_===eO.TFOOT||_===eO.THEAD||_===eO.TR||_===eO.TD||_===eO.TH?(h.openElements.popUntilTagNamePopped(eO.SELECT),h._resetInsertionMode(),h._processStartTag(v)):startTagInSelect(h,v)}(this,h);break;case eD.IN_TEMPLATE:!function(h,v){switch(v.tagID){case eO.BASE:case eO.BASEFONT:case eO.BGSOUND:case eO.LINK:case eO.META:case eO.NOFRAMES:case eO.SCRIPT:case eO.STYLE:case eO.TEMPLATE:case eO.TITLE:startTagInHead(h,v);break;case eO.CAPTION:case eO.COLGROUP:case eO.TBODY:case eO.TFOOT:case eO.THEAD:h.tmplInsertionModeStack[0]=eD.IN_TABLE,h.insertionMode=eD.IN_TABLE,startTagInTable(h,v);break;case eO.COL:h.tmplInsertionModeStack[0]=eD.IN_COLUMN_GROUP,h.insertionMode=eD.IN_COLUMN_GROUP,startTagInColumnGroup(h,v);break;case eO.TR:h.tmplInsertionModeStack[0]=eD.IN_TABLE_BODY,h.insertionMode=eD.IN_TABLE_BODY,startTagInTableBody(h,v);break;case eO.TD:case eO.TH:h.tmplInsertionModeStack[0]=eD.IN_ROW,h.insertionMode=eD.IN_ROW,startTagInRow(h,v);break;default:h.tmplInsertionModeStack[0]=eD.IN_BODY,h.insertionMode=eD.IN_BODY,startTagInBody(h,v)}}(this,h);break;case eD.AFTER_BODY:h.tagID===eO.HTML?startTagInBody(this,h):tokenAfterBody(this,h);break;case eD.IN_FRAMESET:!function(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.FRAMESET:h._insertElement(v,ek.HTML);break;case eO.FRAME:h._appendElement(v,ek.HTML),v.ackSelfClosing=!0;break;case eO.NOFRAMES:startTagInHead(h,v)}}(this,h);break;case eD.AFTER_FRAMESET:!function(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.NOFRAMES:startTagInHead(h,v)}}(this,h);break;case eD.AFTER_AFTER_BODY:h.tagID===eO.HTML?startTagInBody(this,h):tokenAfterAfterBody(this,h);break;case eD.AFTER_AFTER_FRAMESET:!function(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.NOFRAMES:startTagInHead(h,v)}}(this,h)}}onEndTag(h){this.skipNextNewLine=!1,this.currentToken=h,this.currentNotInHTML?function(h,v){if(v.tagID===eO.P||v.tagID===eO.BR){popUntilHtmlOrIntegrationPoint(h),h._endTagOutsideForeignContent(v);return}for(let _=h.openElements.stackTop;_>0;_--){let b=h.openElements.items[_];if(h.treeAdapter.getNamespaceURI(b)===ek.HTML){h._endTagOutsideForeignContent(v);break}let A=h.treeAdapter.getTagName(b);if(A.toLowerCase()===v.tagName){v.tagName=A,h.openElements.shortenToLength(_);break}}}(this,h):this._endTagOutsideForeignContent(h)}_endTagOutsideForeignContent(h){var v;switch(this.insertionMode){case eD.INITIAL:tokenInInitialMode(this,h);break;case eD.BEFORE_HTML:!function(h,v){let _=v.tagID;(_===eO.HTML||_===eO.HEAD||_===eO.BODY||_===eO.BR)&&tokenBeforeHtml(h,v)}(this,h);break;case eD.BEFORE_HEAD:!function(h,v){let _=v.tagID;_===eO.HEAD||_===eO.BODY||_===eO.HTML||_===eO.BR?tokenBeforeHead(h,v):h._err(v,ey.endTagWithoutMatchingOpenElement)}(this,h);break;case eD.IN_HEAD:!function(h,v){switch(v.tagID){case eO.HEAD:h.openElements.pop(),h.insertionMode=eD.AFTER_HEAD;break;case eO.BODY:case eO.BR:case eO.HTML:tokenInHead(h,v);break;case eO.TEMPLATE:templateEndTagInHead(h,v);break;default:h._err(v,ey.endTagWithoutMatchingOpenElement)}}(this,h);break;case eD.IN_HEAD_NO_SCRIPT:!function(h,v){switch(v.tagID){case eO.NOSCRIPT:h.openElements.pop(),h.insertionMode=eD.IN_HEAD;break;case eO.BR:tokenInHeadNoScript(h,v);break;default:h._err(v,ey.endTagWithoutMatchingOpenElement)}}(this,h);break;case eD.AFTER_HEAD:!function(h,v){switch(v.tagID){case eO.BODY:case eO.HTML:case eO.BR:tokenAfterHead(h,v);break;case eO.TEMPLATE:templateEndTagInHead(h,v);break;default:h._err(v,ey.endTagWithoutMatchingOpenElement)}}(this,h);break;case eD.IN_BODY:endTagInBody(this,h);break;case eD.TEXT:h.tagID===eO.SCRIPT&&(null===(v=this.scriptHandler)||void 0===v||v.call(this,this.openElements.current)),this.openElements.pop(),this.insertionMode=this.originalInsertionMode;break;case eD.IN_TABLE:endTagInTable(this,h);break;case eD.IN_TABLE_TEXT:tokenInTableText(this,h);break;case eD.IN_CAPTION:!function(h,v){let _=v.tagID;switch(_){case eO.CAPTION:case eO.TABLE:h.openElements.hasInTableScope(eO.CAPTION)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eO.CAPTION),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=eD.IN_TABLE,_===eO.TABLE&&endTagInTable(h,v));break;case eO.BODY:case eO.COL:case eO.COLGROUP:case eO.HTML:case eO.TBODY:case eO.TD:case eO.TFOOT:case eO.TH:case eO.THEAD:case eO.TR:break;default:endTagInBody(h,v)}}(this,h);break;case eD.IN_COLUMN_GROUP:!function(h,v){switch(v.tagID){case eO.COLGROUP:h.openElements.currentTagId===eO.COLGROUP&&(h.openElements.pop(),h.insertionMode=eD.IN_TABLE);break;case eO.TEMPLATE:templateEndTagInHead(h,v);break;case eO.COL:break;default:tokenInColumnGroup(h,v)}}(this,h);break;case eD.IN_TABLE_BODY:endTagInTableBody(this,h);break;case eD.IN_ROW:endTagInRow(this,h);break;case eD.IN_CELL:!function(h,v){let _=v.tagID;switch(_){case eO.TD:case eO.TH:h.openElements.hasInTableScope(_)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(_),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=eD.IN_ROW);break;case eO.TABLE:case eO.TBODY:case eO.TFOOT:case eO.THEAD:case eO.TR:h.openElements.hasInTableScope(_)&&(h._closeTableCell(),endTagInRow(h,v));break;case eO.BODY:case eO.CAPTION:case eO.COL:case eO.COLGROUP:case eO.HTML:break;default:endTagInBody(h,v)}}(this,h);break;case eD.IN_SELECT:endTagInSelect(this,h);break;case eD.IN_SELECT_IN_TABLE:!function(h,v){let _=v.tagID;_===eO.CAPTION||_===eO.TABLE||_===eO.TBODY||_===eO.TFOOT||_===eO.THEAD||_===eO.TR||_===eO.TD||_===eO.TH?h.openElements.hasInTableScope(_)&&(h.openElements.popUntilTagNamePopped(eO.SELECT),h._resetInsertionMode(),h.onEndTag(v)):endTagInSelect(h,v)}(this,h);break;case eD.IN_TEMPLATE:h.tagID===eO.TEMPLATE&&templateEndTagInHead(this,h);break;case eD.AFTER_BODY:endTagAfterBody(this,h);break;case eD.IN_FRAMESET:h.tagID!==eO.FRAMESET||this.openElements.isRootHtmlElementCurrent()||(this.openElements.pop(),this.fragmentContext||this.openElements.currentTagId===eO.FRAMESET||(this.insertionMode=eD.AFTER_FRAMESET));break;case eD.AFTER_FRAMESET:h.tagID===eO.HTML&&(this.insertionMode=eD.AFTER_AFTER_FRAMESET);break;case eD.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onEof(h){switch(this.insertionMode){case eD.INITIAL:tokenInInitialMode(this,h);break;case eD.BEFORE_HTML:tokenBeforeHtml(this,h);break;case eD.BEFORE_HEAD:tokenBeforeHead(this,h);break;case eD.IN_HEAD:tokenInHead(this,h);break;case eD.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case eD.AFTER_HEAD:tokenAfterHead(this,h);break;case eD.IN_BODY:case eD.IN_TABLE:case eD.IN_CAPTION:case eD.IN_COLUMN_GROUP:case eD.IN_TABLE_BODY:case eD.IN_ROW:case eD.IN_CELL:case eD.IN_SELECT:case eD.IN_SELECT_IN_TABLE:eofInBody(this,h);break;case eD.TEXT:this._err(h,ey.eofInElementThatCanContainOnlyText),this.openElements.pop(),this.insertionMode=this.originalInsertionMode,this.onEof(h);break;case eD.IN_TABLE_TEXT:tokenInTableText(this,h);break;case eD.IN_TEMPLATE:eofInTemplate(this,h);break;case eD.AFTER_BODY:case eD.IN_FRAMESET:case eD.AFTER_FRAMESET:case eD.AFTER_AFTER_BODY:case eD.AFTER_AFTER_FRAMESET:stopParsing(this,h)}}onWhitespaceCharacter(h){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,h.chars.charCodeAt(0)===eT.LINE_FEED)){if(1===h.chars.length)return;h.chars=h.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(h);return}switch(this.insertionMode){case eD.IN_HEAD:case eD.IN_HEAD_NO_SCRIPT:case eD.AFTER_HEAD:case eD.TEXT:case eD.IN_COLUMN_GROUP:case eD.IN_SELECT:case eD.IN_SELECT_IN_TABLE:case eD.IN_FRAMESET:case eD.AFTER_FRAMESET:this._insertCharacters(h);break;case eD.IN_BODY:case eD.IN_CAPTION:case eD.IN_CELL:case eD.IN_TEMPLATE:case eD.AFTER_BODY:case eD.AFTER_AFTER_BODY:case eD.AFTER_AFTER_FRAMESET:whitespaceCharacterInBody(this,h);break;case eD.IN_TABLE:case eD.IN_TABLE_BODY:case eD.IN_ROW:characterInTable(this,h);break;case eD.IN_TABLE_TEXT:whitespaceCharacterInTableText(this,h)}}};function callAdoptionAgency(h,v){for(let _=0;_<8;_++){let _=function(h,v){let _=h.activeFormattingElements.getElementEntryInScopeWithTagName(v.tagName);return _?h.openElements.contains(_.element)?h.openElements.hasInScope(v.tagID)||(_=null):(h.activeFormattingElements.removeEntry(_),_=null):genericEndTagInBody(h,v),_}(h,v);if(!_)break;let b=function(h,v){let _=null,b=h.openElements.stackTop;for(;b>=0;b--){let A=h.openElements.items[b];if(A===v.element)break;h._isSpecialElement(A,h.openElements.tagIDs[b])&&(_=A)}return _||(h.openElements.shortenToLength(b<0?0:b),h.activeFormattingElements.removeEntry(v)),_}(h,_);if(!b)break;h.activeFormattingElements.bookmark=_;let A=function(h,v,_){let b=v,A=h.openElements.getCommonAncestor(v);for(let S=0,C=A;C!==_;S++,C=A){A=h.openElements.getCommonAncestor(C);let _=h.activeFormattingElements.getElementEntry(C),w=_&&S>=3,O=!_||w;O?(w&&h.activeFormattingElements.removeEntry(_),h.openElements.remove(C)):(C=function(h,v){let _=h.treeAdapter.getNamespaceURI(v.element),b=h.treeAdapter.createElement(v.token.tagName,_,v.token.attrs);return h.openElements.replace(v.element,b),v.element=b,b}(h,_),b===v&&(h.activeFormattingElements.bookmark=_),h.treeAdapter.detachNode(b),h.treeAdapter.appendChild(C,b),b=C)}return b}(h,b,_.element),S=h.openElements.getCommonAncestor(_.element);h.treeAdapter.detachNode(A),S&&function(h,v,_){let b=h.treeAdapter.getTagName(v),A=getTagID(b);if(h._isElementCausesFosterParenting(A))h._fosterParentElement(_);else{let b=h.treeAdapter.getNamespaceURI(v);A===eO.TEMPLATE&&b===ek.HTML&&(v=h.treeAdapter.getTemplateContent(v)),h.treeAdapter.appendChild(v,_)}}(h,S,A),function(h,v,_){let b=h.treeAdapter.getNamespaceURI(_.element),{token:A}=_,S=h.treeAdapter.createElement(A.tagName,b,A.attrs);h._adoptNodes(v,S),h.treeAdapter.appendChild(v,S),h.activeFormattingElements.insertElementAfterBookmark(S,A),h.activeFormattingElements.removeEntry(_),h.openElements.remove(_.element),h.openElements.insertAfter(v,S,A.tagID)}(h,b,_)}}function appendComment(h,v){h._appendCommentNode(v,h.openElements.currentTmplContentOrNode)}function stopParsing(h,v){if(h.stopped=!0,v.location){let _=h.fragmentContext?0:2;for(let b=h.openElements.stackTop;b>=_;b--)h._setEndLocation(h.openElements.items[b],v);if(!h.fragmentContext&&h.openElements.stackTop>=0){let _=h.openElements.items[0],b=h.treeAdapter.getNodeSourceCodeLocation(_);if(b&&!b.endTag&&(h._setEndLocation(_,v),h.openElements.stackTop>=1)){let _=h.openElements.items[1],b=h.treeAdapter.getNodeSourceCodeLocation(_);b&&!b.endTag&&h._setEndLocation(_,v)}}}}function tokenInInitialMode(h,v){h._err(v,ey.missingDoctype,!0),h.treeAdapter.setDocumentMode(h.document,eI.QUIRKS),h.insertionMode=eD.BEFORE_HTML,h._processToken(v)}function tokenBeforeHtml(h,v){h._insertFakeRootElement(),h.insertionMode=eD.BEFORE_HEAD,h._processToken(v)}function tokenBeforeHead(h,v){h._insertFakeElement(eN.HEAD,eO.HEAD),h.headElement=h.openElements.current,h.insertionMode=eD.IN_HEAD,h._processToken(v)}function startTagInHead(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.BASE:case eO.BASEFONT:case eO.BGSOUND:case eO.LINK:case eO.META:h._appendElement(v,ek.HTML),v.ackSelfClosing=!0;break;case eO.TITLE:h._switchToTextParsing(v,rw.RCDATA);break;case eO.NOSCRIPT:h.options.scriptingEnabled?h._switchToTextParsing(v,rw.RAWTEXT):(h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_HEAD_NO_SCRIPT);break;case eO.NOFRAMES:case eO.STYLE:h._switchToTextParsing(v,rw.RAWTEXT);break;case eO.SCRIPT:h._switchToTextParsing(v,rw.SCRIPT_DATA);break;case eO.TEMPLATE:h._insertTemplate(v),h.activeFormattingElements.insertMarker(),h.framesetOk=!1,h.insertionMode=eD.IN_TEMPLATE,h.tmplInsertionModeStack.unshift(eD.IN_TEMPLATE);break;case eO.HEAD:h._err(v,ey.misplacedStartTagForHeadElement);break;default:tokenInHead(h,v)}}function templateEndTagInHead(h,v){h.openElements.tmplCount>0?(h.openElements.generateImpliedEndTagsThoroughly(),h.openElements.currentTagId!==eO.TEMPLATE&&h._err(v,ey.closingOfElementWithOpenChildElements),h.openElements.popUntilTagNamePopped(eO.TEMPLATE),h.activeFormattingElements.clearToLastMarker(),h.tmplInsertionModeStack.shift(),h._resetInsertionMode()):h._err(v,ey.endTagWithoutMatchingOpenElement)}function tokenInHead(h,v){h.openElements.pop(),h.insertionMode=eD.AFTER_HEAD,h._processToken(v)}function tokenInHeadNoScript(h,v){let _=v.type===e_.EOF?ey.openElementsLeftAfterEof:ey.disallowedContentInNoscriptInHead;h._err(v,_),h.openElements.pop(),h.insertionMode=eD.IN_HEAD,h._processToken(v)}function tokenAfterHead(h,v){h._insertFakeElement(eN.BODY,eO.BODY),h.insertionMode=eD.IN_BODY,modeInBody(h,v)}function modeInBody(h,v){switch(v.type){case e_.CHARACTER:characterInBody(h,v);break;case e_.WHITESPACE_CHARACTER:whitespaceCharacterInBody(h,v);break;case e_.COMMENT:appendComment(h,v);break;case e_.START_TAG:startTagInBody(h,v);break;case e_.END_TAG:endTagInBody(h,v);break;case e_.EOF:eofInBody(h,v)}}function whitespaceCharacterInBody(h,v){h._reconstructActiveFormattingElements(),h._insertCharacters(v)}function characterInBody(h,v){h._reconstructActiveFormattingElements(),h._insertCharacters(v),h.framesetOk=!1}function areaStartTagInBody(h,v){h._reconstructActiveFormattingElements(),h._appendElement(v,ek.HTML),h.framesetOk=!1,v.ackSelfClosing=!0}function isHiddenInput(h){let v=getTokenAttr(h,ew.TYPE);return null!=v&&"hidden"===v.toLowerCase()}function noembedStartTagInBody(h,v){h._switchToTextParsing(v,rw.RAWTEXT)}function genericStartTagInBody(h,v){h._reconstructActiveFormattingElements(),h._insertElement(v,ek.HTML)}function startTagInBody(h,v){switch(v.tagID){case eO.I:case eO.S:case eO.B:case eO.U:case eO.EM:case eO.TT:case eO.BIG:case eO.CODE:case eO.FONT:case eO.SMALL:case eO.STRIKE:case eO.STRONG:h._reconstructActiveFormattingElements(),h._insertElement(v,ek.HTML),h.activeFormattingElements.pushElement(h.openElements.current,v);break;case eO.A:!function(h,v){let _=h.activeFormattingElements.getElementEntryInScopeWithTagName(eN.A);_&&(callAdoptionAgency(h,v),h.openElements.remove(_.element),h.activeFormattingElements.removeEntry(_)),h._reconstructActiveFormattingElements(),h._insertElement(v,ek.HTML),h.activeFormattingElements.pushElement(h.openElements.current,v)}(h,v);break;case eO.H1:case eO.H2:case eO.H3:case eO.H4:case eO.H5:case eO.H6:h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),isNumberedHeader(h.openElements.currentTagId)&&h.openElements.pop(),h._insertElement(v,ek.HTML);break;case eO.P:case eO.DL:case eO.OL:case eO.UL:case eO.DIV:case eO.DIR:case eO.NAV:case eO.MAIN:case eO.MENU:case eO.ASIDE:case eO.CENTER:case eO.FIGURE:case eO.FOOTER:case eO.HEADER:case eO.HGROUP:case eO.DIALOG:case eO.DETAILS:case eO.ADDRESS:case eO.ARTICLE:case eO.SECTION:case eO.SUMMARY:case eO.FIELDSET:case eO.BLOCKQUOTE:case eO.FIGCAPTION:h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._insertElement(v,ek.HTML);break;case eO.LI:case eO.DD:case eO.DT:!function(h,v){h.framesetOk=!1;let _=v.tagID;for(let v=h.openElements.stackTop;v>=0;v--){let b=h.openElements.tagIDs[v];if(_===eO.LI&&b===eO.LI||(_===eO.DD||_===eO.DT)&&(b===eO.DD||b===eO.DT)){h.openElements.generateImpliedEndTagsWithExclusion(b),h.openElements.popUntilTagNamePopped(b);break}if(b!==eO.ADDRESS&&b!==eO.DIV&&b!==eO.P&&h._isSpecialElement(h.openElements.items[v],b))break}h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._insertElement(v,ek.HTML)}(h,v);break;case eO.BR:case eO.IMG:case eO.WBR:case eO.AREA:case eO.EMBED:case eO.KEYGEN:areaStartTagInBody(h,v);break;case eO.HR:h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._appendElement(v,ek.HTML),h.framesetOk=!1,v.ackSelfClosing=!0;break;case eO.RB:case eO.RTC:h.openElements.hasInScope(eO.RUBY)&&h.openElements.generateImpliedEndTags(),h._insertElement(v,ek.HTML);break;case eO.RT:case eO.RP:h.openElements.hasInScope(eO.RUBY)&&h.openElements.generateImpliedEndTagsWithExclusion(eO.RTC),h._insertElement(v,ek.HTML);break;case eO.PRE:case eO.LISTING:h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._insertElement(v,ek.HTML),h.skipNextNewLine=!0,h.framesetOk=!1;break;case eO.XMP:h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._reconstructActiveFormattingElements(),h.framesetOk=!1,h._switchToTextParsing(v,rw.RAWTEXT);break;case eO.SVG:h._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(v),adjustTokenXMLAttrs(v),v.selfClosing?h._appendElement(v,ek.SVG):h._insertElement(v,ek.SVG),v.ackSelfClosing=!0;break;case eO.HTML:0===h.openElements.tmplCount&&h.treeAdapter.adoptAttributes(h.openElements.items[0],v.attrs);break;case eO.BASE:case eO.LINK:case eO.META:case eO.STYLE:case eO.TITLE:case eO.SCRIPT:case eO.BGSOUND:case eO.BASEFONT:case eO.TEMPLATE:startTagInHead(h,v);break;case eO.BODY:!function(h,v){let _=h.openElements.tryPeekProperlyNestedBodyElement();_&&0===h.openElements.tmplCount&&(h.framesetOk=!1,h.treeAdapter.adoptAttributes(_,v.attrs))}(h,v);break;case eO.FORM:!function(h,v){let _=h.openElements.tmplCount>0;h.formElement&&!_||(h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._insertElement(v,ek.HTML),_||(h.formElement=h.openElements.current))}(h,v);break;case eO.NOBR:h._reconstructActiveFormattingElements(),h.openElements.hasInScope(eO.NOBR)&&(callAdoptionAgency(h,v),h._reconstructActiveFormattingElements()),h._insertElement(v,ek.HTML),h.activeFormattingElements.pushElement(h.openElements.current,v);break;case eO.MATH:h._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(v),adjustTokenXMLAttrs(v),v.selfClosing?h._appendElement(v,ek.MATHML):h._insertElement(v,ek.MATHML),v.ackSelfClosing=!0;break;case eO.TABLE:h.treeAdapter.getDocumentMode(h.document)!==eI.QUIRKS&&h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._insertElement(v,ek.HTML),h.framesetOk=!1,h.insertionMode=eD.IN_TABLE;break;case eO.INPUT:h._reconstructActiveFormattingElements(),h._appendElement(v,ek.HTML),isHiddenInput(v)||(h.framesetOk=!1),v.ackSelfClosing=!0;break;case eO.PARAM:case eO.TRACK:case eO.SOURCE:h._appendElement(v,ek.HTML),v.ackSelfClosing=!0;break;case eO.IMAGE:v.tagName=eN.IMG,v.tagID=eO.IMG,areaStartTagInBody(h,v);break;case eO.BUTTON:h.openElements.hasInScope(eO.BUTTON)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eO.BUTTON)),h._reconstructActiveFormattingElements(),h._insertElement(v,ek.HTML),h.framesetOk=!1;break;case eO.APPLET:case eO.OBJECT:case eO.MARQUEE:h._reconstructActiveFormattingElements(),h._insertElement(v,ek.HTML),h.activeFormattingElements.insertMarker(),h.framesetOk=!1;break;case eO.IFRAME:h.framesetOk=!1,h._switchToTextParsing(v,rw.RAWTEXT);break;case eO.SELECT:h._reconstructActiveFormattingElements(),h._insertElement(v,ek.HTML),h.framesetOk=!1,h.insertionMode=h.insertionMode===eD.IN_TABLE||h.insertionMode===eD.IN_CAPTION||h.insertionMode===eD.IN_TABLE_BODY||h.insertionMode===eD.IN_ROW||h.insertionMode===eD.IN_CELL?eD.IN_SELECT_IN_TABLE:eD.IN_SELECT;break;case eO.OPTION:case eO.OPTGROUP:h.openElements.currentTagId===eO.OPTION&&h.openElements.pop(),h._reconstructActiveFormattingElements(),h._insertElement(v,ek.HTML);break;case eO.NOEMBED:noembedStartTagInBody(h,v);break;case eO.FRAMESET:!function(h,v){let _=h.openElements.tryPeekProperlyNestedBodyElement();h.framesetOk&&_&&(h.treeAdapter.detachNode(_),h.openElements.popAllUpToHtmlElement(),h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_FRAMESET)}(h,v);break;case eO.TEXTAREA:h._insertElement(v,ek.HTML),h.skipNextNewLine=!0,h.tokenizer.state=rw.RCDATA,h.originalInsertionMode=h.insertionMode,h.framesetOk=!1,h.insertionMode=eD.TEXT;break;case eO.NOSCRIPT:h.options.scriptingEnabled?noembedStartTagInBody(h,v):genericStartTagInBody(h,v);break;case eO.PLAINTEXT:h.openElements.hasInButtonScope(eO.P)&&h._closePElement(),h._insertElement(v,ek.HTML),h.tokenizer.state=rw.PLAINTEXT;break;case eO.COL:case eO.TH:case eO.TD:case eO.TR:case eO.HEAD:case eO.FRAME:case eO.TBODY:case eO.TFOOT:case eO.THEAD:case eO.CAPTION:case eO.COLGROUP:break;default:genericStartTagInBody(h,v)}}function genericEndTagInBody(h,v){let _=v.tagName,b=v.tagID;for(let v=h.openElements.stackTop;v>0;v--){let A=h.openElements.items[v],S=h.openElements.tagIDs[v];if(b===S&&(b!==eO.UNKNOWN||h.treeAdapter.getTagName(A)===_)){h.openElements.generateImpliedEndTagsWithExclusion(b),h.openElements.stackTop>=v&&h.openElements.shortenToLength(v);break}if(h._isSpecialElement(A,S))break}}function endTagInBody(h,v){switch(v.tagID){case eO.A:case eO.B:case eO.I:case eO.S:case eO.U:case eO.EM:case eO.TT:case eO.BIG:case eO.CODE:case eO.FONT:case eO.NOBR:case eO.SMALL:case eO.STRIKE:case eO.STRONG:callAdoptionAgency(h,v);break;case eO.P:h.openElements.hasInButtonScope(eO.P)||h._insertFakeElement(eN.P,eO.P),h._closePElement();break;case eO.DL:case eO.UL:case eO.OL:case eO.DIR:case eO.DIV:case eO.NAV:case eO.PRE:case eO.MAIN:case eO.MENU:case eO.ASIDE:case eO.BUTTON:case eO.CENTER:case eO.FIGURE:case eO.FOOTER:case eO.HEADER:case eO.HGROUP:case eO.DIALOG:case eO.ADDRESS:case eO.ARTICLE:case eO.DETAILS:case eO.SECTION:case eO.SUMMARY:case eO.LISTING:case eO.FIELDSET:case eO.BLOCKQUOTE:case eO.FIGCAPTION:!function(h,v){let _=v.tagID;h.openElements.hasInScope(_)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(_))}(h,v);break;case eO.LI:h.openElements.hasInListItemScope(eO.LI)&&(h.openElements.generateImpliedEndTagsWithExclusion(eO.LI),h.openElements.popUntilTagNamePopped(eO.LI));break;case eO.DD:case eO.DT:!function(h,v){let _=v.tagID;h.openElements.hasInScope(_)&&(h.openElements.generateImpliedEndTagsWithExclusion(_),h.openElements.popUntilTagNamePopped(_))}(h,v);break;case eO.H1:case eO.H2:case eO.H3:case eO.H4:case eO.H5:case eO.H6:h.openElements.hasNumberedHeaderInScope()&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilNumberedHeaderPopped());break;case eO.BR:h._reconstructActiveFormattingElements(),h._insertFakeElement(eN.BR,eO.BR),h.openElements.pop(),h.framesetOk=!1;break;case eO.BODY:!function(h,v){if(h.openElements.hasInScope(eO.BODY)&&(h.insertionMode=eD.AFTER_BODY,h.options.sourceCodeLocationInfo)){let _=h.openElements.tryPeekProperlyNestedBodyElement();_&&h._setEndLocation(_,v)}}(h,v);break;case eO.HTML:h.openElements.hasInScope(eO.BODY)&&(h.insertionMode=eD.AFTER_BODY,endTagAfterBody(h,v));break;case eO.FORM:!function(h){let v=h.openElements.tmplCount>0,{formElement:_}=h;v||(h.formElement=null),(_||v)&&h.openElements.hasInScope(eO.FORM)&&(h.openElements.generateImpliedEndTags(),v?h.openElements.popUntilTagNamePopped(eO.FORM):_&&h.openElements.remove(_))}(h);break;case eO.APPLET:case eO.OBJECT:case eO.MARQUEE:!function(h,v){let _=v.tagID;h.openElements.hasInScope(_)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(_),h.activeFormattingElements.clearToLastMarker())}(h,v);break;case eO.TEMPLATE:templateEndTagInHead(h,v);break;default:genericEndTagInBody(h,v)}}function eofInBody(h,v){h.tmplInsertionModeStack.length>0?eofInTemplate(h,v):stopParsing(h,v)}function characterInTable(h,v){if(rK.has(h.openElements.currentTagId))switch(h.pendingCharacterTokens.length=0,h.hasNonWhitespacePendingCharacterToken=!1,h.originalInsertionMode=h.insertionMode,h.insertionMode=eD.IN_TABLE_TEXT,v.type){case e_.CHARACTER:characterInTableText(h,v);break;case e_.WHITESPACE_CHARACTER:whitespaceCharacterInTableText(h,v)}else tokenInTable(h,v)}function startTagInTable(h,v){switch(v.tagID){case eO.TD:case eO.TH:case eO.TR:h.openElements.clearBackToTableContext(),h._insertFakeElement(eN.TBODY,eO.TBODY),h.insertionMode=eD.IN_TABLE_BODY,startTagInTableBody(h,v);break;case eO.STYLE:case eO.SCRIPT:case eO.TEMPLATE:startTagInHead(h,v);break;case eO.COL:h.openElements.clearBackToTableContext(),h._insertFakeElement(eN.COLGROUP,eO.COLGROUP),h.insertionMode=eD.IN_COLUMN_GROUP,startTagInColumnGroup(h,v);break;case eO.FORM:h.formElement||0!==h.openElements.tmplCount||(h._insertElement(v,ek.HTML),h.formElement=h.openElements.current,h.openElements.pop());break;case eO.TABLE:h.openElements.hasInTableScope(eO.TABLE)&&(h.openElements.popUntilTagNamePopped(eO.TABLE),h._resetInsertionMode(),h._processStartTag(v));break;case eO.TBODY:case eO.TFOOT:case eO.THEAD:h.openElements.clearBackToTableContext(),h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_TABLE_BODY;break;case eO.INPUT:isHiddenInput(v)?h._appendElement(v,ek.HTML):tokenInTable(h,v),v.ackSelfClosing=!0;break;case eO.CAPTION:h.openElements.clearBackToTableContext(),h.activeFormattingElements.insertMarker(),h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_CAPTION;break;case eO.COLGROUP:h.openElements.clearBackToTableContext(),h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_COLUMN_GROUP;break;default:tokenInTable(h,v)}}function endTagInTable(h,v){switch(v.tagID){case eO.TABLE:h.openElements.hasInTableScope(eO.TABLE)&&(h.openElements.popUntilTagNamePopped(eO.TABLE),h._resetInsertionMode());break;case eO.TEMPLATE:templateEndTagInHead(h,v);break;case eO.BODY:case eO.CAPTION:case eO.COL:case eO.COLGROUP:case eO.HTML:case eO.TBODY:case eO.TD:case eO.TFOOT:case eO.TH:case eO.THEAD:case eO.TR:break;default:tokenInTable(h,v)}}function tokenInTable(h,v){let _=h.fosterParentingEnabled;h.fosterParentingEnabled=!0,modeInBody(h,v),h.fosterParentingEnabled=_}function whitespaceCharacterInTableText(h,v){h.pendingCharacterTokens.push(v)}function characterInTableText(h,v){h.pendingCharacterTokens.push(v),h.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(h,v){let _=0;if(h.hasNonWhitespacePendingCharacterToken)for(;_<h.pendingCharacterTokens.length;_++)tokenInTable(h,h.pendingCharacterTokens[_]);else for(;_<h.pendingCharacterTokens.length;_++)h._insertCharacters(h.pendingCharacterTokens[_]);h.insertionMode=h.originalInsertionMode,h._processToken(v)}let rJ=new Set([eO.CAPTION,eO.COL,eO.COLGROUP,eO.TBODY,eO.TD,eO.TFOOT,eO.TH,eO.THEAD,eO.TR]);function startTagInColumnGroup(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.COL:h._appendElement(v,ek.HTML),v.ackSelfClosing=!0;break;case eO.TEMPLATE:startTagInHead(h,v);break;default:tokenInColumnGroup(h,v)}}function tokenInColumnGroup(h,v){h.openElements.currentTagId===eO.COLGROUP&&(h.openElements.pop(),h.insertionMode=eD.IN_TABLE,h._processToken(v))}function startTagInTableBody(h,v){switch(v.tagID){case eO.TR:h.openElements.clearBackToTableBodyContext(),h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_ROW;break;case eO.TH:case eO.TD:h.openElements.clearBackToTableBodyContext(),h._insertFakeElement(eN.TR,eO.TR),h.insertionMode=eD.IN_ROW,startTagInRow(h,v);break;case eO.CAPTION:case eO.COL:case eO.COLGROUP:case eO.TBODY:case eO.TFOOT:case eO.THEAD:h.openElements.hasTableBodyContextInTableScope()&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=eD.IN_TABLE,startTagInTable(h,v));break;default:startTagInTable(h,v)}}function endTagInTableBody(h,v){let _=v.tagID;switch(v.tagID){case eO.TBODY:case eO.TFOOT:case eO.THEAD:h.openElements.hasInTableScope(_)&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=eD.IN_TABLE);break;case eO.TABLE:h.openElements.hasTableBodyContextInTableScope()&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=eD.IN_TABLE,endTagInTable(h,v));break;case eO.BODY:case eO.CAPTION:case eO.COL:case eO.COLGROUP:case eO.HTML:case eO.TD:case eO.TH:case eO.TR:break;default:endTagInTable(h,v)}}function startTagInRow(h,v){switch(v.tagID){case eO.TH:case eO.TD:h.openElements.clearBackToTableRowContext(),h._insertElement(v,ek.HTML),h.insertionMode=eD.IN_CELL,h.activeFormattingElements.insertMarker();break;case eO.CAPTION:case eO.COL:case eO.COLGROUP:case eO.TBODY:case eO.TFOOT:case eO.THEAD:case eO.TR:h.openElements.hasInTableScope(eO.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=eD.IN_TABLE_BODY,startTagInTableBody(h,v));break;default:startTagInTable(h,v)}}function endTagInRow(h,v){switch(v.tagID){case eO.TR:h.openElements.hasInTableScope(eO.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=eD.IN_TABLE_BODY);break;case eO.TABLE:h.openElements.hasInTableScope(eO.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=eD.IN_TABLE_BODY,endTagInTableBody(h,v));break;case eO.TBODY:case eO.TFOOT:case eO.THEAD:(h.openElements.hasInTableScope(v.tagID)||h.openElements.hasInTableScope(eO.TR))&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=eD.IN_TABLE_BODY,endTagInTableBody(h,v));break;case eO.BODY:case eO.CAPTION:case eO.COL:case eO.COLGROUP:case eO.HTML:case eO.TD:case eO.TH:break;default:endTagInTable(h,v)}}function startTagInSelect(h,v){switch(v.tagID){case eO.HTML:startTagInBody(h,v);break;case eO.OPTION:h.openElements.currentTagId===eO.OPTION&&h.openElements.pop(),h._insertElement(v,ek.HTML);break;case eO.OPTGROUP:h.openElements.currentTagId===eO.OPTION&&h.openElements.pop(),h.openElements.currentTagId===eO.OPTGROUP&&h.openElements.pop(),h._insertElement(v,ek.HTML);break;case eO.INPUT:case eO.KEYGEN:case eO.TEXTAREA:case eO.SELECT:h.openElements.hasInSelectScope(eO.SELECT)&&(h.openElements.popUntilTagNamePopped(eO.SELECT),h._resetInsertionMode(),v.tagID!==eO.SELECT&&h._processStartTag(v));break;case eO.SCRIPT:case eO.TEMPLATE:startTagInHead(h,v)}}function endTagInSelect(h,v){switch(v.tagID){case eO.OPTGROUP:h.openElements.stackTop>0&&h.openElements.currentTagId===eO.OPTION&&h.openElements.tagIDs[h.openElements.stackTop-1]===eO.OPTGROUP&&h.openElements.pop(),h.openElements.currentTagId===eO.OPTGROUP&&h.openElements.pop();break;case eO.OPTION:h.openElements.currentTagId===eO.OPTION&&h.openElements.pop();break;case eO.SELECT:h.openElements.hasInSelectScope(eO.SELECT)&&(h.openElements.popUntilTagNamePopped(eO.SELECT),h._resetInsertionMode());break;case eO.TEMPLATE:templateEndTagInHead(h,v)}}function eofInTemplate(h,v){h.openElements.tmplCount>0?(h.openElements.popUntilTagNamePopped(eO.TEMPLATE),h.activeFormattingElements.clearToLastMarker(),h.tmplInsertionModeStack.shift(),h._resetInsertionMode(),h.onEof(v)):stopParsing(h,v)}function endTagAfterBody(h,v){var _;if(v.tagID===eO.HTML){if(h.fragmentContext||(h.insertionMode=eD.AFTER_AFTER_BODY),h.options.sourceCodeLocationInfo&&h.openElements.tagIDs[0]===eO.HTML){h._setEndLocation(h.openElements.items[0],v);let b=h.openElements.items[1];!b||(null===(_=h.treeAdapter.getNodeSourceCodeLocation(b))||void 0===_?void 0:_.endTag)||h._setEndLocation(b,v)}}else tokenAfterBody(h,v)}function tokenAfterBody(h,v){h.insertionMode=eD.IN_BODY,modeInBody(h,v)}function tokenAfterAfterBody(h,v){h.insertionMode=eD.IN_BODY,modeInBody(h,v)}function popUntilHtmlOrIntegrationPoint(h){for(;h.treeAdapter.getNamespaceURI(h.openElements.current)!==ek.HTML&&!h._isIntegrationPoint(h.openElements.currentTagId,h.openElements.current);)h.openElements.pop()}let r0=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function getEscaper(h,v){return function(_){let b;let A=0,S="";for(;b=h.exec(_);)A!==b.index&&(S+=_.substring(A,b.index)),S+=v.get(b[0].charCodeAt(0)),A=b.index+1;return S+_.substring(A)}}null!=String.prototype.codePointAt||((h,v)=>(64512&h.charCodeAt(v))==55296?(h.charCodeAt(v)-55296)*1024+h.charCodeAt(v+1)-56320+65536:h.charCodeAt(v)),getEscaper(/[&<>'"]/g,r0),getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),eN.AREA,eN.BASE,eN.BASEFONT,eN.BGSOUND,eN.BR,eN.COL,eN.EMBED,eN.FRAME,eN.HR,eN.IMG,eN.INPUT,eN.KEYGEN,eN.LINK,eN.META,eN.PARAM,eN.SOURCE,eN.TRACK,eN.WBR;let r1=lib_point("end"),r2=lib_point("start");function lib_point(h){return function(v){let _=v&&v.position&&v.position[h]||{};if("number"==typeof _.line&&_.line>0&&"number"==typeof _.column&&_.column>0)return{line:_.line,column:_.column,offset:"number"==typeof _.offset&&_.offset>-1?_.offset:void 0}}}let convert=function(h){if(null==h)return lib_ok;if("function"==typeof h)return castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let v=[],_=-1;for(;++_<h.length;)v[_]=convert(h[_]);return castFactory(function(...h){let _=-1;for(;++_<v.length;)if(v[_].apply(this,h))return!0;return!1})}(h):castFactory(function(v){let _;for(_ in h)if(v[_]!==h[_])return!1;return!0});if("string"==typeof h)return castFactory(function(v){return v&&v.type===h});throw Error("Expected function, string, or object as test")};function castFactory(h){return function(v,_,b){var A;return!!(null!==(A=v)&&"object"==typeof A&&"type"in A&&h.call(this,v,"number"==typeof _?_:void 0,b||void 0))}}function lib_ok(){return!0}let r3=[];function visitParents(h,v,_,b){let A;"function"==typeof v&&"function"!=typeof _?(b=_,_=v):A=v;let S=convert(A),C=b?-1:1;(function factory(h,A,w){let O=h&&"object"==typeof h?h:{};if("string"==typeof O.type){let v="string"==typeof O.tagName?O.tagName:"string"==typeof O.name?O.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(v?"<"+v+">":"")+")"})}return visit;function visit(){var O;let L,M,F,U=r3;if((!v||S(h,A,w[w.length-1]||void 0))&&!1===(U=Array.isArray(O=_(h,w))?O:"number"==typeof O?[!0,O]:null==O?r3:[O])[0])return U;if("children"in h&&h.children&&h.children&&"skip"!==U[0])for(M=(b?h.children.length:-1)+C,F=w.concat(h);M>-1&&M<h.children.length;){let v=h.children[M];if(!1===(L=factory(v,M,F)())[0])return L;M="number"==typeof L[1]?L[1]:M+C}return U}})(h,void 0,[])()}function visit(h,v,_,b){let A,S,C;"function"==typeof v&&"function"!=typeof _?(S=void 0,C=v,A=_):(S=v,C=_,A=b),visitParents(h,S,function(h,v){let _=v[v.length-1],b=_?_.children.indexOf(h):void 0;return C(h,b,_)},A)}let r4=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),r5={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function raw(h,v){let _=function(h){let v="root"===h.type?h.children[0]:h;return!!(v&&("doctype"===v.type||"element"===v.type&&"html"===v.tagName))}(h),b=zwitch("type",{handlers:{root:lib_root,element:hast_util_raw_lib_element,text:hast_util_raw_lib_text,comment:lib_comment,doctype:lib_doctype,raw:handleRaw},unknown}),A={parser:_?new parser_Parser(r5):parser_Parser.getFragmentParser(void 0,r5),handle(h){b(h,A)},stitches:!1,options:v||{}};b(h,A),resetTokenizer(A,r2());let S=_?A.parser.document:A.parser.getFragment(),C=function(h,v){let _=v||{};return one({file:_.file||void 0,location:!1,schema:"svg"===_.space?n6:n5,verbose:_.verbose||!1},h)}(S,{file:A.options.file});return(A.stitches&&visit(C,"comment",function(h,v,_){if(h.value.stitch&&_&&void 0!==v){let b=_.children;return b[v]=h.value.stitch,v}}),"root"===C.type&&1===C.children.length&&C.children[0].type===h.type)?C.children[0]:C}function hast_util_raw_lib_all(h,v){let _=-1;if(h)for(;++_<h.length;)v.handle(h[_])}function lib_root(h,v){hast_util_raw_lib_all(h.children,v)}function hast_util_raw_lib_element(h,v){(function(h,v){if(v.parser.tokenizer.state===rw.PLAINTEXT)return;resetTokenizer(v,r2(h));let _=v.parser.openElements.current,b="namespaceURI"in _?_.namespaceURI:ru.html;b===ru.html&&"svg"===h.tagName&&(b=ru.svg);let A=function(h,v){let _=(v||rm).space;return rg(h,"svg"===_?n6:n5)}({...h,children:[]},{space:b===ru.svg?"svg":"html"}),S="attrs"in A?A.attrs:[],C={type:e_.START_TAG,tagName:h.tagName,tagID:getTagID(h.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:S,location:createParse5Location(h)};v.parser.currentToken=C,v.parser._processToken(v.parser.currentToken),v.parser.tokenizer.lastStartTagName=h.tagName})(h,v),hast_util_raw_lib_all(h.children,v),function(h,v){if(!v.parser.tokenizer.inForeignNode&&rE.includes(h.tagName)||v.parser.tokenizer.state===rw.PLAINTEXT)return;resetTokenizer(v,r1(h));let _={type:e_.END_TAG,tagName:h.tagName,tagID:getTagID(h.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:createParse5Location(h)};v.parser.currentToken=_,v.parser._processToken(v.parser.currentToken),_.tagName===v.parser.tokenizer.lastStartTagName&&(v.parser.tokenizer.state===rw.RCDATA||v.parser.tokenizer.state===rw.RAWTEXT||v.parser.tokenizer.state===rw.SCRIPT_DATA)&&(v.parser.tokenizer.state=rw.DATA)}(h,v)}function hast_util_raw_lib_text(h,v){let _={type:e_.CHARACTER,chars:h.value,location:createParse5Location(h)};resetTokenizer(v,r2(h)),v.parser.currentToken=_,v.parser._processToken(v.parser.currentToken)}function lib_doctype(h,v){let _={type:e_.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:createParse5Location(h)};resetTokenizer(v,r2(h)),v.parser.currentToken=_,v.parser._processToken(v.parser.currentToken)}function lib_comment(h,v){let _=h.value,b={type:e_.COMMENT,data:_,location:createParse5Location(h)};resetTokenizer(v,r2(h)),v.parser.currentToken=b,v.parser._processToken(v.parser.currentToken)}function handleRaw(h,v){if(v.parser.tokenizer.preprocessor.html="",v.parser.tokenizer.preprocessor.pos=-1,v.parser.tokenizer.preprocessor.lastGapPos=-2,v.parser.tokenizer.preprocessor.gapStack=[],v.parser.tokenizer.preprocessor.skipNextNewLine=!1,v.parser.tokenizer.preprocessor.lastChunkWritten=!1,v.parser.tokenizer.preprocessor.endOfChunkHit=!1,v.parser.tokenizer.preprocessor.isEol=!1,setPoint(v,r2(h)),v.parser.tokenizer.write(h.value,!1),v.parser.tokenizer._runParsingLoop(),72===v.parser.tokenizer.state||78===v.parser.tokenizer.state){v.parser.tokenizer.preprocessor.lastChunkWritten=!0;let h=v.parser.tokenizer._consume();v.parser.tokenizer._callState(h)}}function unknown(h,v){if(v.options.passThrough&&v.options.passThrough.includes(h.type))!function(h,v){v.stitches=!0;let _="children"in h?n$({...h,children:[]}):n$(h);if("children"in h&&"children"in _){let b=raw({type:"root",children:h.children},v.options);_.children=b.children}lib_comment({type:"comment",value:{stitch:_}},v)}(h,v);else{let v="";throw r4.has(h.type)&&(v=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),Error("Cannot compile `"+h.type+"` node"+v)}}function resetTokenizer(h,v){setPoint(h,v);let _=h.parser.tokenizer.currentCharacterToken;_&&_.location&&(_.location.endLine=h.parser.tokenizer.preprocessor.line,_.location.endCol=h.parser.tokenizer.preprocessor.col+1,_.location.endOffset=h.parser.tokenizer.preprocessor.offset+1,h.parser.currentToken=_,h.parser._processToken(h.parser.currentToken)),h.parser.tokenizer.paused=!1,h.parser.tokenizer.inLoop=!1,h.parser.tokenizer.active=!1,h.parser.tokenizer.returnState=rw.DATA,h.parser.tokenizer.charRefCode=-1,h.parser.tokenizer.consumedAfterSnapshot=-1,h.parser.tokenizer.currentLocation=null,h.parser.tokenizer.currentCharacterToken=null,h.parser.tokenizer.currentToken=null,h.parser.tokenizer.currentAttr={name:"",value:""}}function setPoint(h,v){if(v&&void 0!==v.offset){let _={startLine:v.line,startCol:v.column,startOffset:v.offset,endLine:-1,endCol:-1,endOffset:-1};h.parser.tokenizer.preprocessor.lineStartPos=-v.column+1,h.parser.tokenizer.preprocessor.droppedBufferSize=v.offset,h.parser.tokenizer.preprocessor.line=v.line,h.parser.tokenizer.currentLocation=_}}function createParse5Location(h){let v=r2(h)||{line:void 0,column:void 0,offset:void 0},_=r1(h)||{line:void 0,column:void 0,offset:void 0},b={startLine:v.line,startCol:v.column,startOffset:v.offset,endLine:_.line,endCol:_.column,endOffset:_.offset};return b}function rehypeRaw(h){return function(v,_){let b=raw(v,{...h,file:_});return b}}let r6=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],r8={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},r9=["cent","copy","divide","gt","lt","not","para","times"],r7={}.hasOwnProperty,ie={};for(A in r8)r7.call(r8,A)&&(ie[r8[A]]=A);function formatSmart(h,v,_){let b,A=function(h,v,_){let b="&#x"+h.toString(16).toUpperCase();return _&&v&&!/[\dA-Fa-f]/.test(String.fromCharCode(v))?b:b+";"}(h,v,_.omitOptionalSemicolons);if((_.useNamedReferences||_.useShortestReferences)&&(b=function(h,v,_,b){let A=String.fromCharCode(h);if(r7.call(ie,A)){let h=ie[A],S="&"+h;return _&&r6.includes(h)&&!r9.includes(h)&&(!b||v&&61!==v&&/[^\da-z]/i.test(String.fromCharCode(v)))?S:S+";"}return""}(h,v,_.omitOptionalSemicolons,_.attribute)),(_.useShortestReferences||!b)&&_.useShortestReferences){let b=function(h,v,_){let b="&#"+String(h);return _&&v&&!/\d/.test(String.fromCharCode(v))?b:b+";"}(h,v,_.omitOptionalSemicolons);b.length<A.length&&(A=b)}return b&&(!_.useShortestReferences||b.length<A.length)?b:A}function stringifyEntities(h,v){return function(h,v){if(h=h.replace(v.subset?function(h){let v=[],_=-1;for(;++_<h.length;)v.push(h[_].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return RegExp("(?:"+v.join("|")+")","g")}(v.subset):/["&'<>`]/g,basic),v.subset||v.escapeOnly)return h;return h.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(h,_,b){return v.format((h.charCodeAt(0)-55296)*1024+h.charCodeAt(1)-56320+65536,b.charCodeAt(_+2),v)}).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,basic);function basic(h,_,b){return v.format(h.charCodeAt(0),b.charCodeAt(_+1),v)}}(h,Object.assign({format:formatSmart},v))}let ir=/^>|^->|<!--|-->|--!>|<!-$/g,ii=[">"],io=["<",">"];function ccount(h,v){let _=String(h);if("string"!=typeof v)throw TypeError("Expected character");let b=0,A=_.indexOf(v);for(;-1!==A;)b++,A=_.indexOf(v,A+v.length);return b}let is=/[ \t\n\f\r]/g;function whitespace(h){return"object"==typeof h?"text"===h.type&&lib_empty(h.value):lib_empty(h)}function lib_empty(h){return""===h.replace(is,"")}let il=siblings(1),ic=siblings(-1),iu=[];function siblings(h){return function(v,_,b){let A=v?v.children:iu,S=(_||0)+h,C=A[S];if(!b)for(;C&&whitespace(C);)S+=h,C=A[S];return C}}let id={}.hasOwnProperty;function omission(h){return function(v,_,b){return id.call(h,v.tagName)&&h[v.tagName](v,_,b)}}let ip=omission({body:function(h,v,_){let b=il(_,v);return!b||"comment"!==b.type},caption:headOrColgroupOrCaption,colgroup:headOrColgroupOrCaption,dd:function(h,v,_){let b=il(_,v);return!b||"element"===b.type&&("dt"===b.tagName||"dd"===b.tagName)},dt:function(h,v,_){let b=il(_,v);return!!(b&&"element"===b.type&&("dt"===b.tagName||"dd"===b.tagName))},head:headOrColgroupOrCaption,html:function(h,v,_){let b=il(_,v);return!b||"comment"!==b.type},li:function(h,v,_){let b=il(_,v);return!b||"element"===b.type&&"li"===b.tagName},optgroup:function(h,v,_){let b=il(_,v);return!b||"element"===b.type&&"optgroup"===b.tagName},option:function(h,v,_){let b=il(_,v);return!b||"element"===b.type&&("option"===b.tagName||"optgroup"===b.tagName)},p:function(h,v,_){let b=il(_,v);return b?"element"===b.type&&("address"===b.tagName||"article"===b.tagName||"aside"===b.tagName||"blockquote"===b.tagName||"details"===b.tagName||"div"===b.tagName||"dl"===b.tagName||"fieldset"===b.tagName||"figcaption"===b.tagName||"figure"===b.tagName||"footer"===b.tagName||"form"===b.tagName||"h1"===b.tagName||"h2"===b.tagName||"h3"===b.tagName||"h4"===b.tagName||"h5"===b.tagName||"h6"===b.tagName||"header"===b.tagName||"hgroup"===b.tagName||"hr"===b.tagName||"main"===b.tagName||"menu"===b.tagName||"nav"===b.tagName||"ol"===b.tagName||"p"===b.tagName||"pre"===b.tagName||"section"===b.tagName||"table"===b.tagName||"ul"===b.tagName):!_||!("element"===_.type&&("a"===_.tagName||"audio"===_.tagName||"del"===_.tagName||"ins"===_.tagName||"map"===_.tagName||"noscript"===_.tagName||"video"===_.tagName))},rp:rubyElement,rt:rubyElement,tbody:function(h,v,_){let b=il(_,v);return!b||"element"===b.type&&("tbody"===b.tagName||"tfoot"===b.tagName)},td:cells,tfoot:function(h,v,_){return!il(_,v)},th:cells,thead:function(h,v,_){let b=il(_,v);return!!(b&&"element"===b.type&&("tbody"===b.tagName||"tfoot"===b.tagName))},tr:function(h,v,_){let b=il(_,v);return!b||"element"===b.type&&"tr"===b.tagName}});function headOrColgroupOrCaption(h,v,_){let b=il(_,v,!0);return!b||"comment"!==b.type&&!("text"===b.type&&whitespace(b.value.charAt(0)))}function rubyElement(h,v,_){let b=il(_,v);return!b||"element"===b.type&&("rp"===b.tagName||"rt"===b.tagName)}function cells(h,v,_){let b=il(_,v);return!b||"element"===b.type&&("td"===b.tagName||"th"===b.tagName)}let ih=omission({body:function(h){let v=il(h,-1,!0);return!v||"comment"!==v.type&&!("text"===v.type&&whitespace(v.value.charAt(0)))&&!("element"===v.type&&("meta"===v.tagName||"link"===v.tagName||"script"===v.tagName||"style"===v.tagName||"template"===v.tagName))},colgroup:function(h,v,_){let b=ic(_,v),A=il(h,-1,!0);return!(_&&b&&"element"===b.type&&"colgroup"===b.tagName&&ip(b,_.children.indexOf(b),_))&&!!(A&&"element"===A.type&&"col"===A.tagName)},head:function(h){let v=h.children,_=[],b=-1;for(;++b<v.length;){let h=v[b];if("element"===h.type&&("title"===h.tagName||"base"===h.tagName)){if(_.includes(h.tagName))return!1;_.push(h.tagName)}}return v.length>0},html:function(h){let v=il(h,-1);return!v||"comment"!==v.type},tbody:function(h,v,_){let b=ic(_,v),A=il(h,-1);return!(_&&b&&"element"===b.type&&("thead"===b.tagName||"tbody"===b.tagName)&&ip(b,_.children.indexOf(b),_))&&!!(A&&"element"===A.type&&"tr"===A.tagName)}}),im={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\x00	\n\f\r \"&'/<=>".split(""),"\x00	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\x00	\n\f\r \"&'<=>`".split("")],["\x00	\n\f\r \"&'<=>`".split(""),"\x00	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\x00&'".split(""),"\x00\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\x00"&'.split(""),"\x00\"&'`".split("")]]},ig=["<","&"];function text_text(h,v,_,b){return _&&"element"===_.type&&("script"===_.tagName||"style"===_.tagName)?h.value:stringifyEntities(h.value,Object.assign({},b.settings.characterReferences,{subset:ig}))}let iE=zwitch("type",{invalid:function(h){throw Error("Expected node, not `"+h+"`")},unknown:function(h){throw Error("Cannot compile unknown node `"+h.type+"`")},handlers:{comment:function(h,v,_,b){return b.settings.bogusComments?"<?"+stringifyEntities(h.value,Object.assign({},b.settings.characterReferences,{subset:ii}))+">":"<!--"+h.value.replace(ir,function(h){return stringifyEntities(h,Object.assign({},b.settings.characterReferences,{subset:io}))})+"-->"},doctype:function(h,v,_,b){return"<!"+(b.settings.upperDoctype?"DOCTYPE":"doctype")+(b.settings.tightDoctype?"":" ")+"html>"},element:function(h,v,_,b){let A;let S=b.schema,C="svg"!==S.space&&b.settings.omitOptionalTags,w="svg"===S.space?b.settings.closeEmptyElements:b.settings.voids.includes(h.tagName.toLowerCase()),O=[];"html"===S.space&&"svg"===h.tagName&&(b.schema=n6);let L=function(h,v){let _;let b=[],A=-1;if(v){for(_ in v)if(null!==v[_]&&void 0!==v[_]){let A=function(h,v,_){let b;let A=find(h.schema,v),S=h.settings.allowParseErrors&&"html"===h.schema.space?0:1,C=h.settings.allowDangerousCharacters?0:1,w=h.quote;if(A.overloadedBoolean&&(_===A.attribute||""===_)?_=!0:(A.boolean||A.overloadedBoolean&&"string"!=typeof _)&&(_=!!_),null==_||!1===_||"number"==typeof _&&Number.isNaN(_))return"";let O=stringifyEntities(A.attribute,Object.assign({},h.settings.characterReferences,{subset:im.name[S][C]}));return!0===_?O:(_=Array.isArray(_)?(A.commaSeparated?comma_separated_tokens_stringify:space_separated_tokens_stringify)(_,{padLeft:!h.settings.tightCommaSeparatedLists}):String(_),h.settings.collapseEmptyAttributes&&!_)?O:(h.settings.preferUnquoted&&(b=stringifyEntities(_,Object.assign({},h.settings.characterReferences,{attribute:!0,subset:im.unquoted[S][C]}))),b!==_&&(h.settings.quoteSmart&&ccount(_,w)>ccount(_,h.alternative)&&(w=h.alternative),b=w+stringifyEntities(_,Object.assign({},h.settings.characterReferences,{subset:("'"===w?im.single:im.double)[S][C],attribute:!0}))+w),O+(b?"="+b:b))}(h,_,v[_]);A&&b.push(A)}}for(;++A<b.length;){let v=h.settings.tightAttributes?b[A].charAt(b[A].length-1):void 0;A!==b.length-1&&'"'!==v&&"'"!==v&&(b[A]+=" ")}return b.join("")}(b,h.properties),M=b.all("html"===S.space&&"template"===h.tagName?h.content:h);return b.schema=S,M&&(w=!1),!L&&C&&ih(h,v,_)||(O.push("<",h.tagName,L?" "+L:""),w&&("svg"===S.space||b.settings.closeSelfClosing)&&(A=L.charAt(L.length-1),(!b.settings.tightSelfClosing||"/"===A||A&&'"'!==A&&"'"!==A)&&O.push(" "),O.push("/")),O.push(">")),O.push(M),w||C&&ip(h,v,_)||O.push("</"+h.tagName+">"),O.join("")},raw:function(h,v,_,b){return b.settings.allowDangerousHtml?h.value:text_text(h,v,_,b)},root:function(h,v,_,b){return b.all(h)},text:text_text}}),iv={},iT={},iy=[];function hast_util_to_html_lib_one(h,v,_){return iE(h,v,_,this)}function hast_util_to_html_lib_all(h){let v=[],_=h&&h.children||iy,b=-1;for(;++b<_.length;)v[b]=this.one(_[b],b,h);return v.join("")}function rehypeStringify(h){let v={...this.data("settings"),...h};this.compiler=function(h){return function(h,v){let _=v||iv,b=_.quote||'"';if('"'!==b&&"'"!==b)throw Error("Invalid quote `"+b+"`, expected `'` or `\"`");let A={one:hast_util_to_html_lib_one,all:hast_util_to_html_lib_all,settings:{omitOptionalTags:_.omitOptionalTags||!1,allowParseErrors:_.allowParseErrors||!1,allowDangerousCharacters:_.allowDangerousCharacters||!1,quoteSmart:_.quoteSmart||!1,preferUnquoted:_.preferUnquoted||!1,tightAttributes:_.tightAttributes||!1,upperDoctype:_.upperDoctype||!1,tightDoctype:_.tightDoctype||!1,bogusComments:_.bogusComments||!1,tightCommaSeparatedLists:_.tightCommaSeparatedLists||!1,tightSelfClosing:_.tightSelfClosing||!1,collapseEmptyAttributes:_.collapseEmptyAttributes||!1,allowDangerousHtml:_.allowDangerousHtml||!1,voids:_.voids||rE,characterReferences:_.characterReferences||iT,closeSelfClosing:_.closeSelfClosing||!1,closeEmptyElements:_.closeEmptyElements||!1},schema:"svg"===_.space?n6:n5,quote:b,alternative:'"'===b?"'":'"'};return A.one(Array.isArray(h)?{type:"root",children:h}:h,void 0,void 0)}(h,v)}}let i_=regexCheck(/[A-Za-z]/),ib=regexCheck(/[\dA-Za-z]/),iA=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(h){return null!==h&&(h<32||127===h)}let ix=regexCheck(/\d/),iS=regexCheck(/[\dA-Fa-f]/),iC=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(h){return null!==h&&h<-2}function markdownLineEndingOrSpace(h){return null!==h&&(h<0||32===h)}function markdownSpace(h){return -2===h||-1===h||32===h}let ik=regexCheck(/\p{P}|\p{S}/u),iw=regexCheck(/\s/);function regexCheck(h){return function(v){return null!==v&&v>-1&&h.test(String.fromCharCode(v))}}var iI=_(1204);let lib_convert=function(h){if(null==h)return unist_util_is_lib_ok;if("function"==typeof h)return lib_castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let v=[],_=-1;for(;++_<h.length;)v[_]=lib_convert(h[_]);return lib_castFactory(function(...h){let _=-1;for(;++_<v.length;)if(v[_].apply(this,h))return!0;return!1})}(h):lib_castFactory(function(v){let _;for(_ in h)if(v[_]!==h[_])return!1;return!0});if("string"==typeof h)return lib_castFactory(function(v){return v&&v.type===h});throw Error("Expected function, string, or object as test")};function lib_castFactory(h){return function(v,_,b){var A;return!!(null!==(A=v)&&"object"==typeof A&&"type"in A&&h.call(this,v,"number"==typeof _?_:void 0,b||void 0))}}function unist_util_is_lib_ok(){return!0}let iN="phrasing",iO=["autolink","link","image","label"];function enterLiteralAutolink(h){this.enter({type:"link",title:null,url:"",children:[]},h)}function enterLiteralAutolinkValue(h){this.config.enter.autolinkProtocol.call(this,h)}function exitLiteralAutolinkHttp(h){this.config.exit.autolinkProtocol.call(this,h)}function exitLiteralAutolinkWww(h){this.config.exit.data.call(this,h);let v=this.stack[this.stack.length-1];v.type,v.url="http://"+this.sliceSerialize(h)}function exitLiteralAutolinkEmail(h){this.config.exit.autolinkEmail.call(this,h)}function exitLiteralAutolink(h){this.exit(h)}function transformGfmAutolinkLiterals(h){!function(h,v,_){let b=lib_convert((_||{}).ignore||[]),A=function(h){let v=[];if(!Array.isArray(h))throw TypeError("Expected find and replace tuple or list of tuples");let _=!h[0]||Array.isArray(h[0])?h:[h],b=-1;for(;++b<_.length;){var A;let h=_[b];v.push(["string"==typeof(A=h[0])?RegExp((0,iI.Z)(A),"g"):A,function(h){return"function"==typeof h?h:function(){return h}}(h[1])])}return v}(v),S=-1;for(;++S<A.length;)visitParents(h,"text",visitor);function visitor(h,v){let _,C=-1;for(;++C<v.length;){let h=v[C],A=_?_.children:void 0;if(b(h,A?A.indexOf(h):void 0,_))return;_=h}if(_)return function(h,v){let _=v[v.length-1],b=A[S][0],C=A[S][1],w=0,O=_.children,L=O.indexOf(h),M=!1,F=[];b.lastIndex=0;let U=b.exec(h.value);for(;U;){let _=U.index,A={index:U.index,input:U.input,stack:[...v,h]},S=C(...U,A);if("string"==typeof S&&(S=S.length>0?{type:"text",value:S}:void 0),!1===S?b.lastIndex=_+1:(w!==_&&F.push({type:"text",value:h.value.slice(w,_)}),Array.isArray(S)?F.push(...S):S&&F.push(S),w=_+U[0].length,M=!0),!b.global)break;U=b.exec(h.value)}return M?(w<h.value.length&&F.push({type:"text",value:h.value.slice(w)}),_.children.splice(L,1,...F)):F=[h],L+F.length}(h,v)}}(h,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,findEmail]],{ignore:["link","linkReference"]})}function findUrl(h,v,_,b,A){let S="";if(!previous(A)||(/^w/i.test(v)&&(_=v+_,v="",S="http://"),!function(h){let v=h.split(".");return!(v.length<2||v[v.length-1]&&(/_/.test(v[v.length-1])||!/[a-zA-Z\d]/.test(v[v.length-1]))||v[v.length-2]&&(/_/.test(v[v.length-2])||!/[a-zA-Z\d]/.test(v[v.length-2])))}(_)))return!1;let C=function(h){let v=/[!"&'),.:;<>?\]}]+$/.exec(h);if(!v)return[h,void 0];h=h.slice(0,v.index);let _=v[0],b=_.indexOf(")"),A=ccount(h,"("),S=ccount(h,")");for(;-1!==b&&A>S;)h+=_.slice(0,b+1),b=(_=_.slice(b+1)).indexOf(")"),S++;return[h,_]}(_+b);if(!C[0])return!1;let w={type:"link",title:null,url:S+v+C[0],children:[{type:"text",value:v+C[0]}]};return C[1]?[w,{type:"text",value:C[1]}]:w}function findEmail(h,v,_,b){return!(!previous(b,!0)||/[-\d_]$/.test(_))&&{type:"link",title:null,url:"mailto:"+v+"@"+_,children:[{type:"text",value:v+"@"+_}]}}function previous(h,v){let _=h.input.charCodeAt(h.index-1);return(0===h.index||iw(_)||ik(_))&&(!v||47!==_)}function normalizeIdentifier(h){return h.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function enterFootnoteDefinition(h){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},h)}function enterFootnoteDefinitionLabelString(){this.buffer()}function exitFootnoteDefinitionLabelString(h){let v=this.resume(),_=this.stack[this.stack.length-1];_.type,_.label=v,_.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()}function exitFootnoteDefinition(h){this.exit(h)}function enterFootnoteCall(h){this.enter({type:"footnoteReference",identifier:"",label:""},h)}function enterFootnoteCallString(){this.buffer()}function exitFootnoteCallString(h){let v=this.resume(),_=this.stack[this.stack.length-1];_.type,_.label=v,_.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()}function exitFootnoteCall(h){this.exit(h)}function footnoteReference(h,v,_,b){let A=_.createTracker(b),S=A.move("[^"),C=_.enter("footnoteReference"),w=_.enter("reference");return S+=A.move(_.safe(_.associationId(h),{...A.current(),before:S,after:"]"})),w(),C(),S+=A.move("]")}function footnoteDefinition(h,v,_,b){let A=_.createTracker(b),S=A.move("[^"),C=_.enter("footnoteDefinition"),w=_.enter("label");return S+=A.move(_.safe(_.associationId(h),{...A.current(),before:S,after:"]"})),w(),S+=A.move("]:"+(h.children&&h.children.length>0?" ":"")),A.shift(4),S+=A.move(_.indentLines(_.containerFlow(h,A.current()),map)),C(),S}function map(h,v,_){return 0===v?h:(_?"":"    ")+h}footnoteReference.peek=function(){return"["};let iR=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function enterStrikethrough(h){this.enter({type:"delete",children:[]},h)}function exitStrikethrough(h){this.exit(h)}function handleDelete(h,v,_,b){let A=_.createTracker(b),S=_.enter("strikethrough"),C=A.move("~~");return C+=_.containerPhrasing(h,{...A.current(),before:C,after:"~"})+A.move("~~"),S(),C}function defaultStringLength(h){return h.length}function toAlignment(h){let v="string"==typeof h?h.codePointAt(0):0;return 67===v||99===v?99:76===v||108===v?108:82===v||114===v?114:0}function blockquote_map(h,v,_){return">"+(_?"":" ")+h}function listInScope(h,v,_){if("string"==typeof v&&(v=[v]),!v||0===v.length)return _;let b=-1;for(;++b<v.length;)if(h.includes(v[b]))return!0;return!1}function hardBreak(h,v,_,b){let A=-1;for(;++A<_.unsafe.length;){var S,C;if("\n"===_.unsafe[A].character&&listInScope(S=_.stack,(C=_.unsafe[A]).inConstruct,!0)&&!listInScope(S,C.notInConstruct,!1))return/[ \t]/.test(b.before)?"":" "}return"\\\n"}function code_map(h,v,_){return(_?"":"    ")+h}function checkQuote(h){let v=h.options.quote||'"';if('"'!==v&&"'"!==v)throw Error("Cannot serialize title with `"+v+"` for `options.quote`, expected `\"`, or `'`");return v}function emphasis(h,v,_,b){let A=function(h){let v=h.options.emphasis||"*";if("*"!==v&&"_"!==v)throw Error("Cannot serialize emphasis with `"+v+"` for `options.emphasis`, expected `*`, or `_`");return v}(_),S=_.enter("emphasis"),C=_.createTracker(b),w=C.move(A);return w+=C.move(_.containerPhrasing(h,{before:w,after:A,...C.current()}))+C.move(A),S(),w}handleDelete.peek=function(){return"~"},emphasis.peek=function(h,v,_){return _.options.emphasis||"*"};let iL={};function lib_toString(h,v){let _=v||iL,b="boolean"!=typeof _.includeImageAlt||_.includeImageAlt,A="boolean"!=typeof _.includeHtml||_.includeHtml;return mdast_util_to_string_lib_one(h,b,A)}function mdast_util_to_string_lib_one(h,v,_){if(h&&"object"==typeof h){if("value"in h)return"html"!==h.type||_?h.value:"";if(v&&"alt"in h&&h.alt)return h.alt;if("children"in h)return mdast_util_to_string_lib_all(h.children,v,_)}return Array.isArray(h)?mdast_util_to_string_lib_all(h,v,_):""}function mdast_util_to_string_lib_all(h,v,_){let b=[],A=-1;for(;++A<h.length;)b[A]=mdast_util_to_string_lib_one(h[A],v,_);return b.join("")}function html_html(h){return h.value||""}function image_image(h,v,_,b){let A=checkQuote(_),S='"'===A?"Quote":"Apostrophe",C=_.enter("image"),w=_.enter("label"),O=_.createTracker(b),L=O.move("![");return L+=O.move(_.safe(h.alt,{before:L,after:"]",...O.current()}))+O.move("]("),w(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(w=_.enter("destinationLiteral"),L+=O.move("<"),L+=O.move(_.safe(h.url,{before:L,after:">",...O.current()}))+O.move(">")):(w=_.enter("destinationRaw"),L+=O.move(_.safe(h.url,{before:L,after:h.title?" ":")",...O.current()}))),w(),h.title&&(w=_.enter(`title${S}`),L+=O.move(" "+A),L+=O.move(_.safe(h.title,{before:L,after:A,...O.current()}))+O.move(A),w()),L+=O.move(")"),C(),L}function imageReference(h,v,_,b){let A=h.referenceType,S=_.enter("imageReference"),C=_.enter("label"),w=_.createTracker(b),O=w.move("!["),L=_.safe(h.alt,{before:O,after:"]",...w.current()});O+=w.move(L+"]["),C();let M=_.stack;_.stack=[],C=_.enter("reference");let F=_.safe(_.associationId(h),{before:O,after:"]",...w.current()});return C(),_.stack=M,S(),"full"!==A&&L&&L===F?"shortcut"===A?O=O.slice(0,-1):O+=w.move("]"):O+=w.move(F+"]"),O}function inlineCode(h,v,_){let b=h.value||"",A="`",S=-1;for(;RegExp("(^|[^`])"+A+"([^`]|$)").test(b);)A+="`";for(/[^ \r\n]/.test(b)&&(/^[ \r\n]/.test(b)&&/[ \r\n]$/.test(b)||/^`|`$/.test(b))&&(b=" "+b+" ");++S<_.unsafe.length;){let h;let v=_.unsafe[S],A=_.compilePattern(v);if(v.atBreak)for(;h=A.exec(b);){let v=h.index;10===b.charCodeAt(v)&&13===b.charCodeAt(v-1)&&v--,b=b.slice(0,v)+" "+b.slice(h.index+1)}}return A+b+A}function formatLinkAsAutolink(h,v){let _=lib_toString(h);return!!(!v.options.resourceLink&&h.url&&!h.title&&h.children&&1===h.children.length&&"text"===h.children[0].type&&(_===h.url||"mailto:"+_===h.url)&&/^[a-z][a-z+.-]+:/i.test(h.url)&&!/[\0- <>\u007F]/.test(h.url))}function link_link(h,v,_,b){let A,S;let C=checkQuote(_),w='"'===C?"Quote":"Apostrophe",O=_.createTracker(b);if(formatLinkAsAutolink(h,_)){let v=_.stack;_.stack=[],A=_.enter("autolink");let b=O.move("<");return b+=O.move(_.containerPhrasing(h,{before:b,after:">",...O.current()}))+O.move(">"),A(),_.stack=v,b}A=_.enter("link"),S=_.enter("label");let L=O.move("[");return L+=O.move(_.containerPhrasing(h,{before:L,after:"](",...O.current()}))+O.move("]("),S(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(S=_.enter("destinationLiteral"),L+=O.move("<"),L+=O.move(_.safe(h.url,{before:L,after:">",...O.current()}))+O.move(">")):(S=_.enter("destinationRaw"),L+=O.move(_.safe(h.url,{before:L,after:h.title?" ":")",...O.current()}))),S(),h.title&&(S=_.enter(`title${w}`),L+=O.move(" "+C),L+=O.move(_.safe(h.title,{before:L,after:C,...O.current()}))+O.move(C),S()),L+=O.move(")"),A(),L}function linkReference(h,v,_,b){let A=h.referenceType,S=_.enter("linkReference"),C=_.enter("label"),w=_.createTracker(b),O=w.move("["),L=_.containerPhrasing(h,{before:O,after:"]",...w.current()});O+=w.move(L+"]["),C();let M=_.stack;_.stack=[],C=_.enter("reference");let F=_.safe(_.associationId(h),{before:O,after:"]",...w.current()});return C(),_.stack=M,S(),"full"!==A&&L&&L===F?"shortcut"===A?O=O.slice(0,-1):O+=w.move("]"):O+=w.move(F+"]"),O}function checkBullet(h){let v=h.options.bullet||"*";if("*"!==v&&"+"!==v&&"-"!==v)throw Error("Cannot serialize items with `"+v+"` for `options.bullet`, expected `*`, `+`, or `-`");return v}function checkRule(h){let v=h.options.rule||"*";if("*"!==v&&"-"!==v&&"_"!==v)throw Error("Cannot serialize rules with `"+v+"` for `options.rule`, expected `*`, `-`, or `_`");return v}html_html.peek=function(){return"<"},image_image.peek=function(){return"!"},imageReference.peek=function(){return"!"},inlineCode.peek=function(){return"`"},link_link.peek=function(h,v,_){return formatLinkAsAutolink(h,_)?"<":"["},linkReference.peek=function(){return"["};let iD=lib_convert(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function strong(h,v,_,b){let A=function(h){let v=h.options.strong||"*";if("*"!==v&&"_"!==v)throw Error("Cannot serialize strong with `"+v+"` for `options.strong`, expected `*`, or `_`");return v}(_),S=_.enter("strong"),C=_.createTracker(b),w=C.move(A+A);return w+=C.move(_.containerPhrasing(h,{before:w,after:A,...C.current()}))+C.move(A+A),S(),w}strong.peek=function(h,v,_){return _.options.strong||"*"};let iP={blockquote:function(h,v,_,b){let A=_.enter("blockquote"),S=_.createTracker(b);S.move("> "),S.shift(2);let C=_.indentLines(_.containerFlow(h,S.current()),blockquote_map);return A(),C},break:hardBreak,code:function(h,v,_,b){let A=function(h){let v=h.options.fence||"`";if("`"!==v&&"~"!==v)throw Error("Cannot serialize code with `"+v+"` for `options.fence`, expected `` ` `` or `~`");return v}(_),S=h.value||"",C="`"===A?"GraveAccent":"Tilde";if(!1===_.options.fences&&h.value&&!h.lang&&/[^ \r\n]/.test(h.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(h.value)){let h=_.enter("codeIndented"),v=_.indentLines(S,code_map);return h(),v}let w=_.createTracker(b),O=A.repeat(Math.max(function(h,v){let _=String(h),b=_.indexOf(v),A=b,S=0,C=0;if("string"!=typeof v)throw TypeError("Expected substring");for(;-1!==b;)b===A?++S>C&&(C=S):S=1,A=b+v.length,b=_.indexOf(v,A);return C}(S,A)+1,3)),L=_.enter("codeFenced"),M=w.move(O);if(h.lang){let v=_.enter(`codeFencedLang${C}`);M+=w.move(_.safe(h.lang,{before:M,after:" ",encode:["`"],...w.current()})),v()}if(h.lang&&h.meta){let v=_.enter(`codeFencedMeta${C}`);M+=w.move(" "),M+=w.move(_.safe(h.meta,{before:M,after:"\n",encode:["`"],...w.current()})),v()}return M+=w.move("\n"),S&&(M+=w.move(S+"\n")),M+=w.move(O),L(),M},definition:function(h,v,_,b){let A=checkQuote(_),S='"'===A?"Quote":"Apostrophe",C=_.enter("definition"),w=_.enter("label"),O=_.createTracker(b),L=O.move("[");return L+=O.move(_.safe(_.associationId(h),{before:L,after:"]",...O.current()}))+O.move("]: "),w(),!h.url||/[\0- \u007F]/.test(h.url)?(w=_.enter("destinationLiteral"),L+=O.move("<"),L+=O.move(_.safe(h.url,{before:L,after:">",...O.current()}))+O.move(">")):(w=_.enter("destinationRaw"),L+=O.move(_.safe(h.url,{before:L,after:h.title?" ":"\n",...O.current()}))),w(),h.title&&(w=_.enter(`title${S}`),L+=O.move(" "+A),L+=O.move(_.safe(h.title,{before:L,after:A,...O.current()}))+O.move(A),w()),C(),L},emphasis:emphasis,hardBreak:hardBreak,heading:function(h,v,_,b){let A;let S=Math.max(Math.min(6,h.depth||1),1),C=_.createTracker(b);if(A=!1,visit(h,function(h){if("value"in h&&/\r?\n|\r/.test(h.value)||"break"===h.type)return A=!0,!1}),(!h.depth||h.depth<3)&&lib_toString(h)&&(_.options.setext||A)){let v=_.enter("headingSetext"),b=_.enter("phrasing"),A=_.containerPhrasing(h,{...C.current(),before:"\n",after:"\n"});return b(),v(),A+"\n"+(1===S?"=":"-").repeat(A.length-(Math.max(A.lastIndexOf("\r"),A.lastIndexOf("\n"))+1))}let w="#".repeat(S),O=_.enter("headingAtx"),L=_.enter("phrasing");C.move(w+" ");let M=_.containerPhrasing(h,{before:"# ",after:"\n",...C.current()});return/^[\t ]/.test(M)&&(M="&#x"+M.charCodeAt(0).toString(16).toUpperCase()+";"+M.slice(1)),M=M?w+" "+M:w,_.options.closeAtx&&(M+=" "+w),L(),O(),M},html:html_html,image:image_image,imageReference:imageReference,inlineCode:inlineCode,link:link_link,linkReference:linkReference,list:function(h,v,_,b){let A=_.enter("list"),S=_.bulletCurrent,C=h.ordered?function(h){let v=h.options.bulletOrdered||".";if("."!==v&&")"!==v)throw Error("Cannot serialize items with `"+v+"` for `options.bulletOrdered`, expected `.` or `)`");return v}(_):checkBullet(_),w=h.ordered?"."===C?")":".":function(h){let v=checkBullet(h),_=h.options.bulletOther;if(!_)return"*"===v?"-":"*";if("*"!==_&&"+"!==_&&"-"!==_)throw Error("Cannot serialize items with `"+_+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(_===v)throw Error("Expected `bullet` (`"+v+"`) and `bulletOther` (`"+_+"`) to be different");return _}(_),O=!!v&&!!_.bulletLastUsed&&C===_.bulletLastUsed;if(!h.ordered){let v=h.children?h.children[0]:void 0;if("*"!==C&&"-"!==C||!v||v.children&&v.children[0]||"list"!==_.stack[_.stack.length-1]||"listItem"!==_.stack[_.stack.length-2]||"list"!==_.stack[_.stack.length-3]||"listItem"!==_.stack[_.stack.length-4]||0!==_.indexStack[_.indexStack.length-1]||0!==_.indexStack[_.indexStack.length-2]||0!==_.indexStack[_.indexStack.length-3]||(O=!0),checkRule(_)===C&&v){let v=-1;for(;++v<h.children.length;){let _=h.children[v];if(_&&"listItem"===_.type&&_.children&&_.children[0]&&"thematicBreak"===_.children[0].type){O=!0;break}}}}O&&(C=w),_.bulletCurrent=C;let L=_.containerFlow(h,b);return _.bulletLastUsed=C,_.bulletCurrent=S,A(),L},listItem:function(h,v,_,b){let A=function(h){let v=h.options.listItemIndent||"one";if("tab"!==v&&"one"!==v&&"mixed"!==v)throw Error("Cannot serialize items with `"+v+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return v}(_),S=_.bulletCurrent||checkBullet(_);v&&"list"===v.type&&v.ordered&&(S=("number"==typeof v.start&&v.start>-1?v.start:1)+(!1===_.options.incrementListMarker?0:v.children.indexOf(h))+S);let C=S.length+1;("tab"===A||"mixed"===A&&(v&&"list"===v.type&&v.spread||h.spread))&&(C=4*Math.ceil(C/4));let w=_.createTracker(b);w.move(S+" ".repeat(C-S.length)),w.shift(C);let O=_.enter("listItem"),L=_.indentLines(_.containerFlow(h,w.current()),function(h,v,_){return v?(_?"":" ".repeat(C))+h:(_?S:S+" ".repeat(C-S.length))+h});return O(),L},paragraph:function(h,v,_,b){let A=_.enter("paragraph"),S=_.enter("phrasing"),C=_.containerPhrasing(h,b);return S(),A(),C},root:function(h,v,_,b){let A=h.children.some(function(h){return iD(h)}),S=A?_.containerPhrasing:_.containerFlow;return S.call(_,h,b)},strong:strong,text:function(h,v,_,b){return _.safe(h.value,b)},thematicBreak:function(h,v,_){let b=(checkRule(_)+(_.options.ruleSpaces?" ":"")).repeat(function(h){let v=h.options.ruleRepetition||3;if(v<3)throw Error("Cannot serialize rules with repetition `"+v+"` for `options.ruleRepetition`, expected `3` or more");return v}(_));return _.options.ruleSpaces?b.slice(0,-1):b}};function enterTable(h){let v=h._align;this.enter({type:"table",align:v.map(function(h){return"none"===h?null:h}),children:[]},h),this.data.inTable=!0}function exitTable(h){this.exit(h),this.data.inTable=void 0}function enterRow(h){this.enter({type:"tableRow",children:[]},h)}function exit(h){this.exit(h)}function enterCell(h){this.enter({type:"tableCell",children:[]},h)}function exitCodeText(h){let v=this.resume();this.data.inTable&&(v=v.replace(/\\([\\|])/g,replace));let _=this.stack[this.stack.length-1];_.type,_.value=v,this.exit(h)}function replace(h,v){return"|"===v?v:h}function exitCheck(h){let v=this.stack[this.stack.length-2];v.type,v.checked="taskListCheckValueChecked"===h.type}function exitParagraphWithTaskListItem(h){let v=this.stack[this.stack.length-2];if(v&&"listItem"===v.type&&"boolean"==typeof v.checked){let h=this.stack[this.stack.length-1];h.type;let _=h.children[0];if(_&&"text"===_.type){let b;let A=v.children,S=-1;for(;++S<A.length;){let h=A[S];if("paragraph"===h.type){b=h;break}}b===h&&(_.value=_.value.slice(1),0===_.value.length?h.children.shift():h.position&&_.position&&"number"==typeof _.position.start.offset&&(_.position.start.column++,_.position.start.offset++,h.position.start=Object.assign({},_.position.start)))}}this.exit(h)}function listItemWithTaskListItem(h,v,_,b){let A=h.children[0],S="boolean"==typeof h.checked&&A&&"paragraph"===A.type,C="["+(h.checked?"x":" ")+"] ",w=_.createTracker(b);S&&w.move(C);let O=iP.listItem(h,v,_,{...b,...w.current()});return S&&(O=O.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(h){return h+C})),O}function splice(h,v,_,b){let A;let S=h.length,C=0;if(v=v<0?-v>S?0:S+v:v>S?S:v,_=_>0?_:0,b.length<1e4)(A=Array.from(b)).unshift(v,_),h.splice(...A);else for(_&&h.splice(v,_);C<b.length;)(A=b.slice(C,C+1e4)).unshift(v,0),h.splice(...A),C+=1e4,v+=1e4}function push(h,v){return h.length>0?(splice(h,h.length,0,v),h):v}let iM={}.hasOwnProperty;function combineExtensions(h){let v={},_=-1;for(;++_<h.length;)!function(h,v){let _;for(_ in v){let b;let A=iM.call(h,_)?h[_]:void 0,S=A||(h[_]={}),C=v[_];if(C)for(b in C){iM.call(S,b)||(S[b]=[]);let h=C[b];!function(h,v){let _=-1,b=[];for(;++_<v.length;)("after"===v[_].add?h:b).push(v[_]);splice(h,0,0,b)}(S[b],Array.isArray(h)?h:h?[h]:[])}}}(v,h[_]);return v}let iF={tokenize:function(h,v,_){let b=0;return function wwwPrefixInside(v){return(87===v||119===v)&&b<3?(b++,h.consume(v),wwwPrefixInside):46===v&&3===b?(h.consume(v),wwwPrefixAfter):_(v)};function wwwPrefixAfter(h){return null===h?_(h):v(h)}},partial:!0},iB={tokenize:function(h,v,_){let b,A,S;return domainInside;function domainInside(v){return 46===v||95===v?h.check(iU,domainAfter,domainAtPunctuation)(v):null===v||markdownLineEndingOrSpace(v)||iw(v)||45!==v&&ik(v)?domainAfter(v):(S=!0,h.consume(v),domainInside)}function domainAtPunctuation(v){return 95===v?b=!0:(A=b,b=void 0),h.consume(v),domainInside}function domainAfter(h){return A||b||!S?_(h):v(h)}},partial:!0},iH={tokenize:function(h,v){let _=0,b=0;return pathInside;function pathInside(A){return 40===A?(_++,h.consume(A),pathInside):41===A&&b<_?pathAtPunctuation(A):33===A||34===A||38===A||39===A||41===A||42===A||44===A||46===A||58===A||59===A||60===A||63===A||93===A||95===A||126===A?h.check(iU,v,pathAtPunctuation)(A):null===A||markdownLineEndingOrSpace(A)||iw(A)?v(A):(h.consume(A),pathInside)}function pathAtPunctuation(v){return 41===v&&b++,h.consume(v),pathInside}},partial:!0},iU={tokenize:function(h,v,_){return trail;function trail(b){return 33===b||34===b||39===b||41===b||42===b||44===b||46===b||58===b||59===b||63===b||95===b||126===b?(h.consume(b),trail):38===b?(h.consume(b),trailCharRefStart):93===b?(h.consume(b),trailBracketAfter):60===b||null===b||markdownLineEndingOrSpace(b)||iw(b)?v(b):_(b)}function trailBracketAfter(h){return null===h||40===h||91===h||markdownLineEndingOrSpace(h)||iw(h)?v(h):trail(h)}function trailCharRefStart(v){return i_(v)?function trailCharRefInside(v){return 59===v?(h.consume(v),trail):i_(v)?(h.consume(v),trailCharRefInside):_(v)}(v):_(v)}},partial:!0},iz={tokenize:function(h,v,_){return function(v){return h.consume(v),after};function after(h){return ib(h)?_(h):v(h)}},partial:!0},i$={tokenize:function(h,v,_){let b=this;return function(v){return 87!==v&&119!==v||!previousWww.call(b,b.previous)||previousUnbalanced(b.events)?_(v):(h.enter("literalAutolink"),h.enter("literalAutolinkWww"),h.check(iF,h.attempt(iB,h.attempt(iH,wwwAfter),_),_)(v))};function wwwAfter(_){return h.exit("literalAutolinkWww"),h.exit("literalAutolink"),v(_)}},previous:previousWww},iG={tokenize:function(h,v,_){let b=this,A="",S=!1;return function(v){return(72===v||104===v)&&previousProtocol.call(b,b.previous)&&!previousUnbalanced(b.events)?(h.enter("literalAutolink"),h.enter("literalAutolinkHttp"),A+=String.fromCodePoint(v),h.consume(v),protocolPrefixInside):_(v)};function protocolPrefixInside(v){if(i_(v)&&A.length<5)return A+=String.fromCodePoint(v),h.consume(v),protocolPrefixInside;if(58===v){let _=A.toLowerCase();if("http"===_||"https"===_)return h.consume(v),protocolSlashesInside}return _(v)}function protocolSlashesInside(v){return 47===v?(h.consume(v),S)?afterProtocol:(S=!0,protocolSlashesInside):_(v)}function afterProtocol(v){return null===v||asciiControl(v)||markdownLineEndingOrSpace(v)||iw(v)||ik(v)?_(v):h.attempt(iB,h.attempt(iH,protocolAfter),_)(v)}function protocolAfter(_){return h.exit("literalAutolinkHttp"),h.exit("literalAutolink"),v(_)}},previous:previousProtocol},ij={tokenize:function(h,v,_){let b,A;let S=this;return function(v){return!gfmAtext(v)||!previousEmail.call(S,S.previous)||previousUnbalanced(S.events)?_(v):(h.enter("literalAutolink"),h.enter("literalAutolinkEmail"),function atext(v){return gfmAtext(v)?(h.consume(v),atext):64===v?(h.consume(v),emailDomain):_(v)}(v))};function emailDomain(v){return 46===v?h.check(iz,emailDomainAfter,emailDomainDot)(v):45===v||95===v||ib(v)?(A=!0,h.consume(v),emailDomain):emailDomainAfter(v)}function emailDomainDot(v){return h.consume(v),b=!0,emailDomain}function emailDomainAfter(C){return A&&b&&i_(S.previous)?(h.exit("literalAutolinkEmail"),h.exit("literalAutolink"),v(C)):_(C)}},previous:previousEmail},iV={},iW=48;for(;iW<123;)iV[iW]=ij,58==++iW?iW=65:91===iW&&(iW=97);function previousWww(h){return null===h||40===h||42===h||95===h||91===h||93===h||126===h||markdownLineEndingOrSpace(h)}function previousProtocol(h){return!i_(h)}function previousEmail(h){return!(47===h||gfmAtext(h))}function gfmAtext(h){return 43===h||45===h||46===h||95===h||ib(h)}function previousUnbalanced(h){let v=h.length,_=!1;for(;v--;){let b=h[v][1];if(("labelLink"===b.type||"labelImage"===b.type)&&!b._balanced){_=!0;break}if(b._gfmAutolinkLiteralWalkedInto){_=!1;break}}return h.length>0&&!_&&(h[h.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),_}function factorySpace(h,v,_,b){let A=b?b-1:Number.POSITIVE_INFINITY,S=0;return function(b){return markdownSpace(b)?(h.enter(_),function prefix(b){return markdownSpace(b)&&S++<A?(h.consume(b),prefix):(h.exit(_),v(b))}(b)):v(b)}}iV[43]=ij,iV[45]=ij,iV[46]=ij,iV[95]=ij,iV[72]=[ij,iG],iV[104]=[ij,iG],iV[87]=[ij,i$],iV[119]=[ij,i$];let iq={tokenize:function(h,v,_){return function(v){return markdownSpace(v)?factorySpace(h,after,"linePrefix")(v):after(v)};function after(h){return null===h||markdownLineEnding(h)?v(h):_(h)}},partial:!0},iY={tokenize:function(h,v,_){let b=this;return factorySpace(h,function(h){let A=b.events[b.events.length-1];return A&&"gfmFootnoteDefinitionIndent"===A[1].type&&4===A[2].sliceSerialize(A[1],!0).length?v(h):_(h)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function tokenizePotentialGfmFootnoteCall(h,v,_){let b;let A=this,S=A.events.length,C=A.parser.gfmFootnotes||(A.parser.gfmFootnotes=[]);for(;S--;){let h=A.events[S][1];if("labelImage"===h.type){b=h;break}if("gfmFootnoteCall"===h.type||"labelLink"===h.type||"label"===h.type||"image"===h.type||"link"===h.type)break}return function(S){if(!b||!b._balanced)return _(S);let w=normalizeIdentifier(A.sliceSerialize({start:b.end,end:A.now()}));return 94===w.codePointAt(0)&&C.includes(w.slice(1))?(h.enter("gfmFootnoteCallLabelMarker"),h.consume(S),h.exit("gfmFootnoteCallLabelMarker"),v(S)):_(S)}}function resolveToPotentialGfmFootnoteCall(h,v){let _=h.length;for(;_--;)if("labelImage"===h[_][1].type&&"enter"===h[_][0]){h[_][1];break}h[_+1][1].type="data",h[_+3][1].type="gfmFootnoteCallLabelMarker";let b={type:"gfmFootnoteCall",start:Object.assign({},h[_+3][1].start),end:Object.assign({},h[h.length-1][1].end)},A={type:"gfmFootnoteCallMarker",start:Object.assign({},h[_+3][1].end),end:Object.assign({},h[_+3][1].end)};A.end.column++,A.end.offset++,A.end._bufferIndex++;let S={type:"gfmFootnoteCallString",start:Object.assign({},A.end),end:Object.assign({},h[h.length-1][1].start)},C={type:"chunkString",contentType:"string",start:Object.assign({},S.start),end:Object.assign({},S.end)},w=[h[_+1],h[_+2],["enter",b,v],h[_+3],h[_+4],["enter",A,v],["exit",A,v],["enter",S,v],["enter",C,v],["exit",C,v],["exit",S,v],h[h.length-2],h[h.length-1],["exit",b,v]];return h.splice(_,h.length-_+1,...w),h}function tokenizeGfmFootnoteCall(h,v,_){let b;let A=this,S=A.parser.gfmFootnotes||(A.parser.gfmFootnotes=[]),C=0;return function(v){return h.enter("gfmFootnoteCall"),h.enter("gfmFootnoteCallLabelMarker"),h.consume(v),h.exit("gfmFootnoteCallLabelMarker"),callStart};function callStart(v){return 94!==v?_(v):(h.enter("gfmFootnoteCallMarker"),h.consume(v),h.exit("gfmFootnoteCallMarker"),h.enter("gfmFootnoteCallString"),h.enter("chunkString").contentType="string",callData)}function callData(w){if(C>999||93===w&&!b||null===w||91===w||markdownLineEndingOrSpace(w))return _(w);if(93===w){h.exit("chunkString");let b=h.exit("gfmFootnoteCallString");return S.includes(normalizeIdentifier(A.sliceSerialize(b)))?(h.enter("gfmFootnoteCallLabelMarker"),h.consume(w),h.exit("gfmFootnoteCallLabelMarker"),h.exit("gfmFootnoteCall"),v):_(w)}return markdownLineEndingOrSpace(w)||(b=!0),C++,h.consume(w),92===w?callEscape:callData}function callEscape(v){return 91===v||92===v||93===v?(h.consume(v),C++,callData):callData(v)}}function tokenizeDefinitionStart(h,v,_){let b,A;let S=this,C=S.parser.gfmFootnotes||(S.parser.gfmFootnotes=[]),w=0;return function(v){return h.enter("gfmFootnoteDefinition")._container=!0,h.enter("gfmFootnoteDefinitionLabel"),h.enter("gfmFootnoteDefinitionLabelMarker"),h.consume(v),h.exit("gfmFootnoteDefinitionLabelMarker"),labelAtMarker};function labelAtMarker(v){return 94===v?(h.enter("gfmFootnoteDefinitionMarker"),h.consume(v),h.exit("gfmFootnoteDefinitionMarker"),h.enter("gfmFootnoteDefinitionLabelString"),h.enter("chunkString").contentType="string",labelInside):_(v)}function labelInside(v){if(w>999||93===v&&!A||null===v||91===v||markdownLineEndingOrSpace(v))return _(v);if(93===v){h.exit("chunkString");let _=h.exit("gfmFootnoteDefinitionLabelString");return b=normalizeIdentifier(S.sliceSerialize(_)),h.enter("gfmFootnoteDefinitionLabelMarker"),h.consume(v),h.exit("gfmFootnoteDefinitionLabelMarker"),h.exit("gfmFootnoteDefinitionLabel"),labelAfter}return markdownLineEndingOrSpace(v)||(A=!0),w++,h.consume(v),92===v?labelEscape:labelInside}function labelEscape(v){return 91===v||92===v||93===v?(h.consume(v),w++,labelInside):labelInside(v)}function labelAfter(v){return 58===v?(h.enter("definitionMarker"),h.consume(v),h.exit("definitionMarker"),C.includes(b)||C.push(b),factorySpace(h,whitespaceAfter,"gfmFootnoteDefinitionWhitespace")):_(v)}function whitespaceAfter(h){return v(h)}}function tokenizeDefinitionContinuation(h,v,_){return h.check(iq,v,h.attempt(iY,v,_))}function gfmFootnoteDefinitionEnd(h){h.exit("gfmFootnoteDefinition")}function classifyCharacter(h){return null===h||markdownLineEndingOrSpace(h)||iw(h)?1:ik(h)?2:void 0}function resolveAll(h,v,_){let b=[],A=-1;for(;++A<h.length;){let S=h[A].resolveAll;S&&!b.includes(S)&&(v=S(v,_),b.push(S))}return v}let EditMap=class EditMap{constructor(){this.map=[]}add(h,v,_){!function(h,v,_,b){let A=0;if(0!==_||0!==b.length){for(;A<h.map.length;){if(h.map[A][0]===v){h.map[A][1]+=_,h.map[A][2].push(...b);return}A+=1}h.map.push([v,_,b])}}(this,h,v,_)}consume(h){if(this.map.sort(function(h,v){return h[0]-v[0]}),0===this.map.length)return;let v=this.map.length,_=[];for(;v>0;)v-=1,_.push(h.slice(this.map[v][0]+this.map[v][1]),this.map[v][2]),h.length=this.map[v][0];_.push([...h]),h.length=0;let b=_.pop();for(;b;)h.push(...b),b=_.pop();this.map.length=0}};function tokenizeTable(h,v,_){let b;let A=this,S=0,C=0;return function(h){let v=A.events.length-1;for(;v>-1;){let h=A.events[v][1].type;if("lineEnding"===h||"linePrefix"===h)v--;else break}let b=v>-1?A.events[v][1].type:null,S="tableHead"===b||"tableRow"===b?bodyRowStart:headRowBefore;return S===bodyRowStart&&A.parser.lazy[A.now().line]?_(h):S(h)};function headRowBefore(v){return h.enter("tableHead"),h.enter("tableRow"),124===v||(b=!0,C+=1),headRowBreak(v)}function headRowBreak(v){return null===v?_(v):markdownLineEnding(v)?C>1?(C=0,A.interrupt=!0,h.exit("tableRow"),h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),headDelimiterStart):_(v):markdownSpace(v)?factorySpace(h,headRowBreak,"whitespace")(v):(C+=1,b&&(b=!1,S+=1),124===v)?(h.enter("tableCellDivider"),h.consume(v),h.exit("tableCellDivider"),b=!0,headRowBreak):(h.enter("data"),headRowData(v))}function headRowData(v){return null===v||124===v||markdownLineEndingOrSpace(v)?(h.exit("data"),headRowBreak(v)):(h.consume(v),92===v?headRowEscape:headRowData)}function headRowEscape(v){return 92===v||124===v?(h.consume(v),headRowData):headRowData(v)}function headDelimiterStart(v){return(A.interrupt=!1,A.parser.lazy[A.now().line])?_(v):(h.enter("tableDelimiterRow"),b=!1,markdownSpace(v))?factorySpace(h,headDelimiterBefore,"linePrefix",A.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):headDelimiterBefore(v)}function headDelimiterBefore(v){return 45===v||58===v?headDelimiterValueBefore(v):124===v?(b=!0,h.enter("tableCellDivider"),h.consume(v),h.exit("tableCellDivider"),headDelimiterCellBefore):_(v)}function headDelimiterCellBefore(v){return markdownSpace(v)?factorySpace(h,headDelimiterValueBefore,"whitespace")(v):headDelimiterValueBefore(v)}function headDelimiterValueBefore(v){return 58===v?(C+=1,b=!0,h.enter("tableDelimiterMarker"),h.consume(v),h.exit("tableDelimiterMarker"),headDelimiterLeftAlignmentAfter):45===v?(C+=1,headDelimiterLeftAlignmentAfter(v)):null===v||markdownLineEnding(v)?headDelimiterCellAfter(v):_(v)}function headDelimiterLeftAlignmentAfter(v){return 45===v?(h.enter("tableDelimiterFiller"),function headDelimiterFiller(v){return 45===v?(h.consume(v),headDelimiterFiller):58===v?(b=!0,h.exit("tableDelimiterFiller"),h.enter("tableDelimiterMarker"),h.consume(v),h.exit("tableDelimiterMarker"),headDelimiterRightAlignmentAfter):(h.exit("tableDelimiterFiller"),headDelimiterRightAlignmentAfter(v))}(v)):_(v)}function headDelimiterRightAlignmentAfter(v){return markdownSpace(v)?factorySpace(h,headDelimiterCellAfter,"whitespace")(v):headDelimiterCellAfter(v)}function headDelimiterCellAfter(A){return 124===A?headDelimiterBefore(A):null===A||markdownLineEnding(A)?b&&S===C?(h.exit("tableDelimiterRow"),h.exit("tableHead"),v(A)):_(A):_(A)}function bodyRowStart(v){return h.enter("tableRow"),bodyRowBreak(v)}function bodyRowBreak(_){return 124===_?(h.enter("tableCellDivider"),h.consume(_),h.exit("tableCellDivider"),bodyRowBreak):null===_||markdownLineEnding(_)?(h.exit("tableRow"),v(_)):markdownSpace(_)?factorySpace(h,bodyRowBreak,"whitespace")(_):(h.enter("data"),bodyRowData(_))}function bodyRowData(v){return null===v||124===v||markdownLineEndingOrSpace(v)?(h.exit("data"),bodyRowBreak(v)):(h.consume(v),92===v?bodyRowEscape:bodyRowData)}function bodyRowEscape(v){return 92===v||124===v?(h.consume(v),bodyRowData):bodyRowData(v)}}function resolveTable(h,v){let _,b,A,S=-1,C=!0,w=0,O=[0,0,0,0],L=[0,0,0,0],M=!1,F=0,U=new EditMap;for(;++S<h.length;){let $=h[S],G=$[1];"enter"===$[0]?"tableHead"===G.type?(M=!1,0!==F&&(flushTableEnd(U,v,F,_,b),b=void 0,F=0),_={type:"table",start:Object.assign({},G.start),end:Object.assign({},G.end)},U.add(S,0,[["enter",_,v]])):"tableRow"===G.type||"tableDelimiterRow"===G.type?(C=!0,A=void 0,O=[0,0,0,0],L=[0,S+1,0,0],M&&(M=!1,b={type:"tableBody",start:Object.assign({},G.start),end:Object.assign({},G.end)},U.add(S,0,[["enter",b,v]])),w="tableDelimiterRow"===G.type?2:b?3:1):w&&("data"===G.type||"tableDelimiterMarker"===G.type||"tableDelimiterFiller"===G.type)?(C=!1,0===L[2]&&(0!==O[1]&&(L[0]=L[1],A=flushCell(U,v,O,w,void 0,A),O=[0,0,0,0]),L[2]=S)):"tableCellDivider"===G.type&&(C?C=!1:(0!==O[1]&&(L[0]=L[1],A=flushCell(U,v,O,w,void 0,A)),L=[(O=L)[1],S,0,0])):"tableHead"===G.type?(M=!0,F=S):"tableRow"===G.type||"tableDelimiterRow"===G.type?(F=S,0!==O[1]?(L[0]=L[1],A=flushCell(U,v,O,w,S,A)):0!==L[1]&&(A=flushCell(U,v,L,w,S,A)),w=0):w&&("data"===G.type||"tableDelimiterMarker"===G.type||"tableDelimiterFiller"===G.type)&&(L[3]=S)}for(0!==F&&flushTableEnd(U,v,F,_,b),U.consume(v.events),S=-1;++S<v.events.length;){let h=v.events[S];"enter"===h[0]&&"table"===h[1].type&&(h[1]._align=function(h,v){let _=!1,b=[];for(;v<h.length;){let A=h[v];if(_){if("enter"===A[0])"tableContent"===A[1].type&&b.push("tableDelimiterMarker"===h[v+1][1].type?"left":"none");else if("tableContent"===A[1].type){if("tableDelimiterMarker"===h[v-1][1].type){let h=b.length-1;b[h]="left"===b[h]?"center":"right"}}else if("tableDelimiterRow"===A[1].type)break}else"enter"===A[0]&&"tableDelimiterRow"===A[1].type&&(_=!0);v+=1}return b}(v.events,S))}return h}function flushCell(h,v,_,b,A,S){0!==_[0]&&(S.end=Object.assign({},getPoint(v.events,_[0])),h.add(_[0],0,[["exit",S,v]]));let C=getPoint(v.events,_[1]);if(S={type:1===b?"tableHeader":2===b?"tableDelimiter":"tableData",start:Object.assign({},C),end:Object.assign({},C)},h.add(_[1],0,[["enter",S,v]]),0!==_[2]){let A=getPoint(v.events,_[2]),S=getPoint(v.events,_[3]),C={type:"tableContent",start:Object.assign({},A),end:Object.assign({},S)};if(h.add(_[2],0,[["enter",C,v]]),2!==b){let b=v.events[_[2]],A=v.events[_[3]];if(b[1].end=Object.assign({},A[1].end),b[1].type="chunkText",b[1].contentType="text",_[3]>_[2]+1){let v=_[2]+1,b=_[3]-_[2]-1;h.add(v,b,[])}}h.add(_[3]+1,0,[["exit",C,v]])}return void 0!==A&&(S.end=Object.assign({},getPoint(v.events,A)),h.add(A,0,[["exit",S,v]]),S=void 0),S}function flushTableEnd(h,v,_,b,A){let S=[],C=getPoint(v.events,_);A&&(A.end=Object.assign({},C),S.push(["exit",A,v])),b.end=Object.assign({},C),S.push(["exit",b,v]),h.add(_+1,0,S)}function getPoint(h,v){let _=h[v],b="enter"===_[0]?"start":"end";return _[1][b]}let iQ={tokenize:function(h,v,_){let b=this;return function(v){return null===b.previous&&b._gfmTasklistFirstContentOfListItem?(h.enter("taskListCheck"),h.enter("taskListCheckMarker"),h.consume(v),h.exit("taskListCheckMarker"),inside):_(v)};function inside(v){return markdownLineEndingOrSpace(v)?(h.enter("taskListCheckValueUnchecked"),h.consume(v),h.exit("taskListCheckValueUnchecked"),close):88===v||120===v?(h.enter("taskListCheckValueChecked"),h.consume(v),h.exit("taskListCheckValueChecked"),close):_(v)}function close(v){return 93===v?(h.enter("taskListCheckMarker"),h.consume(v),h.exit("taskListCheckMarker"),h.exit("taskListCheck"),after):_(v)}function after(b){return markdownLineEnding(b)?v(b):markdownSpace(b)?h.check({tokenize:spaceThenNonSpace},v,_)(b):_(b)}}};function spaceThenNonSpace(h,v,_){return factorySpace(h,function(h){return null===h?_(h):v(h)},"whitespace")}let iX={};function remarkGfm(h){let v=h||iX,_=this.data(),b=_.micromarkExtensions||(_.micromarkExtensions=[]),A=_.fromMarkdownExtensions||(_.fromMarkdownExtensions=[]),S=_.toMarkdownExtensions||(_.toMarkdownExtensions=[]);b.push(combineExtensions([{text:iV},{document:{91:{tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{tokenize:tokenizeGfmFootnoteCall},93:{add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}},function(h){let v=(h||{}).singleTilde,_={tokenize:function(h,_,b){let A=this.previous,S=this.events,C=0;return function(w){return 126===A&&"characterEscape"!==S[S.length-1][1].type?b(w):(h.enter("strikethroughSequenceTemporary"),function more(S){let w=classifyCharacter(A);if(126===S)return C>1?b(S):(h.consume(S),C++,more);if(C<2&&!v)return b(S);let O=h.exit("strikethroughSequenceTemporary"),L=classifyCharacter(S);return O._open=!L||2===L&&!!w,O._close=!w||2===w&&!!L,_(S)}(w))}},resolveAll:function(h,v){let _=-1;for(;++_<h.length;)if("enter"===h[_][0]&&"strikethroughSequenceTemporary"===h[_][1].type&&h[_][1]._close){let b=_;for(;b--;)if("exit"===h[b][0]&&"strikethroughSequenceTemporary"===h[b][1].type&&h[b][1]._open&&h[_][1].end.offset-h[_][1].start.offset==h[b][1].end.offset-h[b][1].start.offset){h[_][1].type="strikethroughSequence",h[b][1].type="strikethroughSequence";let A={type:"strikethrough",start:Object.assign({},h[b][1].start),end:Object.assign({},h[_][1].end)},S={type:"strikethroughText",start:Object.assign({},h[b][1].end),end:Object.assign({},h[_][1].start)},C=[["enter",A,v],["enter",h[b][1],v],["exit",h[b][1],v],["enter",S,v]],w=v.parser.constructs.insideSpan.null;w&&splice(C,C.length,0,resolveAll(w,h.slice(b+1,_),v)),splice(C,C.length,0,[["exit",S,v],["enter",h[_][1],v],["exit",h[_][1],v],["exit",A,v]]),splice(h,b-1,_-b+3,C),_=b+C.length-2;break}}for(_=-1;++_<h.length;)"strikethroughSequenceTemporary"===h[_][1].type&&(h[_][1].type="data");return h}};return null==v&&(v=!0),{text:{126:_},insideSpan:{null:[_]},attentionMarkers:{null:[126]}}}(v),{flow:{null:{tokenize:tokenizeTable,resolveAll:resolveTable}}},{text:{91:iQ}}])),A.push([{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}},{enter:{gfmFootnoteDefinition:enterFootnoteDefinition,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteCallString:enterFootnoteCallString},exit:{gfmFootnoteDefinition:exitFootnoteDefinition,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteCallString:exitFootnoteCallString}},{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}},{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}},{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}]),S.push({extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:iN,notInConstruct:iO},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:iN,notInConstruct:iO},{character:":",before:"[ps]",after:"\\/",inConstruct:iN,notInConstruct:iO}]},{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition,footnoteReference}},{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:iR}],handlers:{delete:handleDelete}},function(h){let v=h||{},_=v.tableCellPadding,b=v.tablePipeAlign,A=v.stringLength,S=_?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(h,v,_){let b=iP.inlineCode(h,v,_);return _.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b},table:function(h,v,_,b){return serializeData(function(h,v,_){let b=h.children,A=-1,S=[],C=v.enter("table");for(;++A<b.length;)S[A]=handleTableRowAsData(b[A],v,_);return C(),S}(h,_,b),h.align)},tableCell:handleTableCell,tableRow:function(h,v,_,b){let A=handleTableRowAsData(h,_,b),S=serializeData([A]);return S.slice(0,S.indexOf("\n"))}}};function handleTableCell(h,v,_,b){let A=_.enter("tableCell"),C=_.enter("phrasing"),w=_.containerPhrasing(h,{...b,before:S,after:S});return C(),A(),w}function serializeData(h,v){return function(h,v={}){let _=(v.align||[]).concat(),b=v.stringLength||defaultStringLength,A=[],S=[],C=[],w=[],O=0,L=-1;for(;++L<h.length;){let _=[],A=[],F=-1;for(h[L].length>O&&(O=h[L].length);++F<h[L].length;){var M;let S=null==(M=h[L][F])?"":String(M);if(!1!==v.alignDelimiters){let h=b(S);A[F]=h,(void 0===w[F]||h>w[F])&&(w[F]=h)}_.push(S)}S[L]=_,C[L]=A}let F=-1;if("object"==typeof _&&"length"in _)for(;++F<O;)A[F]=toAlignment(_[F]);else{let h=toAlignment(_);for(;++F<O;)A[F]=h}F=-1;let U=[],$=[];for(;++F<O;){let h=A[F],_="",b="";99===h?(_=":",b=":"):108===h?_=":":114===h&&(b=":");let S=!1===v.alignDelimiters?1:Math.max(1,w[F]-_.length-b.length),C=_+"-".repeat(S)+b;!1!==v.alignDelimiters&&((S=_.length+S+b.length)>w[F]&&(w[F]=S),$[F]=S),U[F]=C}S.splice(1,0,U),C.splice(1,0,$),L=-1;let G=[];for(;++L<S.length;){let h=S[L],_=C[L];F=-1;let b=[];for(;++F<O;){let S=h[F]||"",C="",L="";if(!1!==v.alignDelimiters){let h=w[F]-(_[F]||0),v=A[F];114===v?C=" ".repeat(h):99===v?h%2?(C=" ".repeat(h/2+.5),L=" ".repeat(h/2-.5)):L=C=" ".repeat(h/2):L=" ".repeat(h)}!1===v.delimiterStart||F||b.push("|"),!1!==v.padding&&!(!1===v.alignDelimiters&&""===S)&&(!1!==v.delimiterStart||F)&&b.push(" "),!1!==v.alignDelimiters&&b.push(C),b.push(S),!1!==v.alignDelimiters&&b.push(L),!1!==v.padding&&b.push(" "),(!1!==v.delimiterEnd||F!==O-1)&&b.push("|")}G.push(!1===v.delimiterEnd?b.join("").replace(/ +$/,""):b.join(""))}return G.join("\n")}(h,{align:v,alignDelimiters:b,padding:_,stringLength:A})}function handleTableRowAsData(h,v,_){let b=h.children,A=-1,S=[],C=v.enter("tableRow");for(;++A<b.length;)S[A]=handleTableCell(b[A],h,v,_);return C(),S}}(v),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}]})}let SpliceBuffer=class SpliceBuffer{constructor(h){this.left=h?[...h]:[],this.right=[]}get(h){if(h<0||h>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+h+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return h<this.left.length?this.left[h]:this.right[this.right.length-h+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(h,v){let _=null==v?Number.POSITIVE_INFINITY:v;return _<this.left.length?this.left.slice(h,_):h>this.left.length?this.right.slice(this.right.length-_+this.left.length,this.right.length-h+this.left.length).reverse():this.left.slice(h).concat(this.right.slice(this.right.length-_+this.left.length).reverse())}splice(h,v,_){let b=v||0;this.setCursor(Math.trunc(h));let A=this.right.splice(this.right.length-b,Number.POSITIVE_INFINITY);return _&&chunkedPush(this.left,_),A.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(h){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(h)}pushMany(h){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,h)}unshift(h){this.setCursor(0),this.right.push(h)}unshiftMany(h){this.setCursor(0),chunkedPush(this.right,h.reverse())}setCursor(h){if(h!==this.left.length&&(!(h>this.left.length)||0!==this.right.length)&&(!(h<0)||0!==this.left.length)){if(h<this.left.length){let v=this.left.splice(h,Number.POSITIVE_INFINITY);chunkedPush(this.right,v.reverse())}else{let v=this.right.splice(this.left.length+this.right.length-h,Number.POSITIVE_INFINITY);chunkedPush(this.left,v.reverse())}}}};function chunkedPush(h,v){let _=0;if(v.length<1e4)h.push(...v);else for(;_<v.length;)h.push(...v.slice(_,_+1e4)),_+=1e4}function subtokenize(h){let v,_,b,A,S,C,w;let O={},L=-1,M=new SpliceBuffer(h);for(;++L<M.length;){for(;(L in O);)L=O[L];if(v=M.get(L),L&&"chunkFlow"===v[1].type&&"listItemPrefix"===M.get(L-1)[1].type&&((b=0)<(C=v[1]._tokenizer.events).length&&"lineEndingBlank"===C[b][1].type&&(b+=2),b<C.length&&"content"===C[b][1].type))for(;++b<C.length&&"content"!==C[b][1].type;)"chunkText"===C[b][1].type&&(C[b][1]._isInFirstContentOfListItem=!0,b++);if("enter"===v[0])v[1].contentType&&(Object.assign(O,function(h,v){let _,b;let A=h.get(v)[1],S=h.get(v)[2],C=v-1,w=[],O=A._tokenizer||S.parser[A.contentType](A.start),L=O.events,M=[],F={},U=-1,$=A,G=0,j=0,Q=[j];for(;$;){for(;h.get(++C)[1]!==$;);w.push(C),!$._tokenizer&&(_=S.sliceStream($),$.next||_.push(null),b&&O.defineSkip($.start),$._isInFirstContentOfListItem&&(O._gfmTasklistFirstContentOfListItem=!0),O.write(_),$._isInFirstContentOfListItem&&(O._gfmTasklistFirstContentOfListItem=void 0)),b=$,$=$.next}for($=A;++U<L.length;)"exit"===L[U][0]&&"enter"===L[U-1][0]&&L[U][1].type===L[U-1][1].type&&L[U][1].start.line!==L[U][1].end.line&&(j=U+1,Q.push(j),$._tokenizer=void 0,$.previous=void 0,$=$.next);for(O.events=[],$?($._tokenizer=void 0,$.previous=void 0):Q.pop(),U=Q.length;U--;){let v=L.slice(Q[U],Q[U+1]),_=w.pop();M.push([_,_+v.length-1]),h.splice(_,2,v)}for(M.reverse(),U=-1;++U<M.length;)F[G+M[U][0]]=G+M[U][1],G+=M[U][1]-M[U][0]-1;return F}(M,L)),L=O[L],w=!0);else if(v[1]._container){for(b=L,_=void 0;b--;)if("lineEnding"===(A=M.get(b))[1].type||"lineEndingBlank"===A[1].type)"enter"===A[0]&&(_&&(M.get(_)[1].type="lineEndingBlank"),A[1].type="lineEnding",_=b);else break;_&&(v[1].end=Object.assign({},M.get(_)[1].start),(S=M.slice(_,L)).unshift(v),M.splice(_,L-_+1,S))}}return splice(h,0,Number.POSITIVE_INFINITY,M.slice(0)),!w}let iK={tokenize:function(h){let v;let _=h.attempt(this.parser.constructs.contentInitial,function(v){if(null===v){h.consume(v);return}return h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),factorySpace(h,_,"linePrefix")},function(_){return h.enter("paragraph"),function lineStart(_){let b=h.enter("chunkText",{contentType:"text",previous:v});return v&&(v.next=b),v=b,function data(v){if(null===v){h.exit("chunkText"),h.exit("paragraph"),h.consume(v);return}return markdownLineEnding(v)?(h.consume(v),h.exit("chunkText"),lineStart):(h.consume(v),data)}(_)}(_)});return _}},iZ={tokenize:function(h){let v,_,b;let A=this,S=[],C=0;return start;function start(v){if(C<S.length){let _=S[C];return A.containerState=_[1],h.attempt(_[0].continuation,documentContinue,checkNewContainers)(v)}return checkNewContainers(v)}function documentContinue(h){if(C++,A.containerState._closeFlow){let _;A.containerState._closeFlow=void 0,v&&closeFlow();let b=A.events.length,S=b;for(;S--;)if("exit"===A.events[S][0]&&"chunkFlow"===A.events[S][1].type){_=A.events[S][1].end;break}exitContainers(C);let w=b;for(;w<A.events.length;)A.events[w][1].end=Object.assign({},_),w++;return splice(A.events,S+1,0,A.events.slice(b)),A.events.length=w,checkNewContainers(h)}return start(h)}function checkNewContainers(_){if(C===S.length){if(!v)return documentContinued(_);if(v.currentConstruct&&v.currentConstruct.concrete)return flowStart(_);A.interrupt=!!(v.currentConstruct&&!v._gfmTableDynamicInterruptHack)}return A.containerState={},h.check(iJ,thereIsANewContainer,thereIsNoNewContainer)(_)}function thereIsANewContainer(h){return v&&closeFlow(),exitContainers(C),documentContinued(h)}function thereIsNoNewContainer(h){return A.parser.lazy[A.now().line]=C!==S.length,b=A.now().offset,flowStart(h)}function documentContinued(v){return A.containerState={},h.attempt(iJ,containerContinue,flowStart)(v)}function containerContinue(h){return C++,S.push([A.currentConstruct,A.containerState]),documentContinued(h)}function flowStart(b){if(null===b){v&&closeFlow(),exitContainers(0),h.consume(b);return}return v=v||A.parser.flow(A.now()),h.enter("chunkFlow",{contentType:"flow",previous:_,_tokenizer:v}),function flowContinue(v){if(null===v){writeToChild(h.exit("chunkFlow"),!0),exitContainers(0),h.consume(v);return}return markdownLineEnding(v)?(h.consume(v),writeToChild(h.exit("chunkFlow")),C=0,A.interrupt=void 0,start):(h.consume(v),flowContinue)}(b)}function writeToChild(h,S){let w=A.sliceStream(h);if(S&&w.push(null),h.previous=_,_&&(_.next=h),_=h,v.defineSkip(h.start),v.write(w),A.parser.lazy[h.start.line]){let h,_,S=v.events.length;for(;S--;)if(v.events[S][1].start.offset<b&&(!v.events[S][1].end||v.events[S][1].end.offset>b))return;let w=A.events.length,O=w;for(;O--;)if("exit"===A.events[O][0]&&"chunkFlow"===A.events[O][1].type){if(h){_=A.events[O][1].end;break}h=!0}for(exitContainers(C),S=w;S<A.events.length;)A.events[S][1].end=Object.assign({},_),S++;splice(A.events,O+1,0,A.events.slice(w)),A.events.length=S}}function exitContainers(v){let _=S.length;for(;_-- >v;){let v=S[_];A.containerState=v[1],v[0].exit.call(A,h)}S.length=v}function closeFlow(){v.write([null]),_=void 0,v=void 0,A.containerState._closeFlow=void 0}}},iJ={tokenize:function(h,v,_){return factorySpace(h,h.attempt(this.parser.constructs.document,v,_),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},i0={tokenize:function(h,v){let _;return function(v){return h.enter("content"),_=h.enter("chunkContent",{contentType:"content"}),chunkInside(v)};function chunkInside(v){return null===v?contentEnd(v):markdownLineEnding(v)?h.check(i1,contentContinue,contentEnd)(v):(h.consume(v),chunkInside)}function contentEnd(_){return h.exit("chunkContent"),h.exit("content"),v(_)}function contentContinue(v){return h.consume(v),h.exit("chunkContent"),_.next=h.enter("chunkContent",{contentType:"content",previous:_}),_=_.next,chunkInside}},resolve:function(h){return subtokenize(h),h}},i1={tokenize:function(h,v,_){let b=this;return function(v){return h.exit("chunkContent"),h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),factorySpace(h,prefixed,"linePrefix")};function prefixed(A){if(null===A||markdownLineEnding(A))return _(A);let S=b.events[b.events.length-1];return!b.parser.constructs.disable.null.includes("codeIndented")&&S&&"linePrefix"===S[1].type&&S[2].sliceSerialize(S[1],!0).length>=4?v(A):h.interrupt(b.parser.constructs.flow,_,v)(A)}},partial:!0},i2={tokenize:function(h){let v=this,_=h.attempt(iq,function(b){if(null===b){h.consume(b);return}return h.enter("lineEndingBlank"),h.consume(b),h.exit("lineEndingBlank"),v.currentConstruct=void 0,_},h.attempt(this.parser.constructs.flowInitial,afterConstruct,factorySpace(h,h.attempt(this.parser.constructs.flow,afterConstruct,h.attempt(i0,afterConstruct)),"linePrefix")));return _;function afterConstruct(b){if(null===b){h.consume(b);return}return h.enter("lineEnding"),h.consume(b),h.exit("lineEnding"),v.currentConstruct=void 0,_}}},i3={resolveAll:createResolver()},i4=initializeFactory("string"),i5=initializeFactory("text");function initializeFactory(h){return{tokenize:function(v){let _=this,b=this.parser.constructs[h],A=v.attempt(b,start,notText);return start;function start(h){return atBreak(h)?A(h):notText(h)}function notText(h){if(null===h){v.consume(h);return}return v.enter("data"),v.consume(h),data}function data(h){return atBreak(h)?(v.exit("data"),A(h)):(v.consume(h),data)}function atBreak(h){if(null===h)return!0;let v=b[h],A=-1;if(v)for(;++A<v.length;){let h=v[A];if(!h.previous||h.previous.call(_,_.previous))return!0}return!1}},resolveAll:createResolver("text"===h?resolveAllLineSuffixes:void 0)}}function createResolver(h){return function(v,_){let b,A=-1;for(;++A<=v.length;)void 0===b?v[A]&&"data"===v[A][1].type&&(b=A,A++):v[A]&&"data"===v[A][1].type||(A!==b+2&&(v[b][1].end=v[A-1][1].end,v.splice(b+2,A-b-2),A=b+2),b=void 0);return h?h(v,_):v}}function resolveAllLineSuffixes(h,v){let _=0;for(;++_<=h.length;)if((_===h.length||"lineEnding"===h[_][1].type)&&"data"===h[_-1][1].type){let b;let A=h[_-1][1],S=v.sliceStream(A),C=S.length,w=-1,O=0;for(;C--;){let h=S[C];if("string"==typeof h){for(w=h.length;32===h.charCodeAt(w-1);)O++,w--;if(w)break;w=-1}else if(-2===h)b=!0,O++;else if(-1===h);else{C++;break}}if(O){let S={type:_===h.length||b||O<2?"lineSuffix":"hardBreakTrailing",start:{line:A.end.line,column:A.end.column-O,offset:A.end.offset-O,_index:A.start._index+C,_bufferIndex:C?w:A.start._bufferIndex+w},end:Object.assign({},A.end)};A.end=Object.assign({},S.start),A.start.offset===A.end.offset?Object.assign(A,S):(h.splice(_,0,["enter",S,v],["exit",S,v]),_+=2)}_++}return h}let i6={name:"thematicBreak",tokenize:function(h,v,_){let b,A=0;return function(S){return h.enter("thematicBreak"),b=S,function atBreak(S){return S===b?(h.enter("thematicBreakSequence"),function sequence(v){return v===b?(h.consume(v),A++,sequence):(h.exit("thematicBreakSequence"),markdownSpace(v)?factorySpace(h,atBreak,"whitespace")(v):atBreak(v))}(S)):A>=3&&(null===S||markdownLineEnding(S))?(h.exit("thematicBreak"),v(S)):_(S)}(S)}}},i8={name:"list",tokenize:function(h,v,_){let b=this,A=b.events[b.events.length-1],S=A&&"linePrefix"===A[1].type?A[2].sliceSerialize(A[1],!0).length:0,C=0;return function(v){let A=b.containerState.type||(42===v||43===v||45===v?"listUnordered":"listOrdered");if("listUnordered"===A?!b.containerState.marker||v===b.containerState.marker:ix(v)){if(b.containerState.type||(b.containerState.type=A,h.enter(A,{_container:!0})),"listUnordered"===A)return h.enter("listItemPrefix"),42===v||45===v?h.check(i6,_,atMarker)(v):atMarker(v);if(!b.interrupt||49===v)return h.enter("listItemPrefix"),h.enter("listItemValue"),function inside(v){return ix(v)&&++C<10?(h.consume(v),inside):(!b.interrupt||C<2)&&(b.containerState.marker?v===b.containerState.marker:41===v||46===v)?(h.exit("listItemValue"),atMarker(v)):_(v)}(v)}return _(v)};function atMarker(v){return h.enter("listItemMarker"),h.consume(v),h.exit("listItemMarker"),b.containerState.marker=b.containerState.marker||v,h.check(iq,b.interrupt?_:onBlank,h.attempt(i9,endOfPrefix,otherPrefix))}function onBlank(h){return b.containerState.initialBlankLine=!0,S++,endOfPrefix(h)}function otherPrefix(v){return markdownSpace(v)?(h.enter("listItemPrefixWhitespace"),h.consume(v),h.exit("listItemPrefixWhitespace"),endOfPrefix):_(v)}function endOfPrefix(_){return b.containerState.size=S+b.sliceSerialize(h.exit("listItemPrefix"),!0).length,v(_)}},continuation:{tokenize:function(h,v,_){let b=this;return b.containerState._closeFlow=void 0,h.check(iq,function(_){return b.containerState.furtherBlankLines=b.containerState.furtherBlankLines||b.containerState.initialBlankLine,factorySpace(h,v,"listItemIndent",b.containerState.size+1)(_)},function(_){return b.containerState.furtherBlankLines||!markdownSpace(_)?(b.containerState.furtherBlankLines=void 0,b.containerState.initialBlankLine=void 0,notInCurrentItem(_)):(b.containerState.furtherBlankLines=void 0,b.containerState.initialBlankLine=void 0,h.attempt(i7,v,notInCurrentItem)(_))});function notInCurrentItem(A){return b.containerState._closeFlow=!0,b.interrupt=void 0,factorySpace(h,h.attempt(i8,v,_),"linePrefix",b.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A)}}},exit:function(h){h.exit(this.containerState.type)}},i9={tokenize:function(h,v,_){let b=this;return factorySpace(h,function(h){let A=b.events[b.events.length-1];return!markdownSpace(h)&&A&&"listItemPrefixWhitespace"===A[1].type?v(h):_(h)},"listItemPrefixWhitespace",b.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},i7={tokenize:function(h,v,_){let b=this;return factorySpace(h,function(h){let A=b.events[b.events.length-1];return A&&"listItemIndent"===A[1].type&&A[2].sliceSerialize(A[1],!0).length===b.containerState.size?v(h):_(h)},"listItemIndent",b.containerState.size+1)},partial:!0},at={name:"blockQuote",tokenize:function(h,v,_){let b=this;return function(v){if(62===v){let _=b.containerState;return _.open||(h.enter("blockQuote",{_container:!0}),_.open=!0),h.enter("blockQuotePrefix"),h.enter("blockQuoteMarker"),h.consume(v),h.exit("blockQuoteMarker"),after}return _(v)};function after(_){return markdownSpace(_)?(h.enter("blockQuotePrefixWhitespace"),h.consume(_),h.exit("blockQuotePrefixWhitespace"),h.exit("blockQuotePrefix"),v):(h.exit("blockQuotePrefix"),v(_))}},continuation:{tokenize:function(h,v,_){let b=this;return function(v){return markdownSpace(v)?factorySpace(h,contBefore,"linePrefix",b.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):contBefore(v)};function contBefore(b){return h.attempt(at,v,_)(b)}}},exit:function(h){h.exit("blockQuote")}};function factoryDestination(h,v,_,b,A,S,C,w,O){let L=O||Number.POSITIVE_INFINITY,M=0;return function(v){return 60===v?(h.enter(b),h.enter(A),h.enter(S),h.consume(v),h.exit(S),enclosedBefore):null===v||32===v||41===v||asciiControl(v)?_(v):(h.enter(b),h.enter(C),h.enter(w),h.enter("chunkString",{contentType:"string"}),raw(v))};function enclosedBefore(_){return 62===_?(h.enter(S),h.consume(_),h.exit(S),h.exit(A),h.exit(b),v):(h.enter(w),h.enter("chunkString",{contentType:"string"}),enclosed(_))}function enclosed(v){return 62===v?(h.exit("chunkString"),h.exit(w),enclosedBefore(v)):null===v||60===v||markdownLineEnding(v)?_(v):(h.consume(v),92===v?enclosedEscape:enclosed)}function enclosedEscape(v){return 60===v||62===v||92===v?(h.consume(v),enclosed):enclosed(v)}function raw(A){return!M&&(null===A||41===A||markdownLineEndingOrSpace(A))?(h.exit("chunkString"),h.exit(w),h.exit(C),h.exit(b),v(A)):M<L&&40===A?(h.consume(A),M++,raw):41===A?(h.consume(A),M--,raw):null===A||32===A||40===A||asciiControl(A)?_(A):(h.consume(A),92===A?rawEscape:raw)}function rawEscape(v){return 40===v||41===v||92===v?(h.consume(v),raw):raw(v)}}function factoryLabel(h,v,_,b,A,S){let C;let w=this,O=0;return function(v){return h.enter(b),h.enter(A),h.consume(v),h.exit(A),h.enter(S),atBreak};function atBreak(L){return O>999||null===L||91===L||93===L&&!C||94===L&&!O&&"_hiddenFootnoteSupport"in w.parser.constructs?_(L):93===L?(h.exit(S),h.enter(A),h.consume(L),h.exit(A),h.exit(b),v):markdownLineEnding(L)?(h.enter("lineEnding"),h.consume(L),h.exit("lineEnding"),atBreak):(h.enter("chunkString",{contentType:"string"}),labelInside(L))}function labelInside(v){return null===v||91===v||93===v||markdownLineEnding(v)||O++>999?(h.exit("chunkString"),atBreak(v)):(h.consume(v),C||(C=!markdownSpace(v)),92===v?labelEscape:labelInside)}function labelEscape(v){return 91===v||92===v||93===v?(h.consume(v),O++,labelInside):labelInside(v)}}function factoryTitle(h,v,_,b,A,S){let C;return function(v){return 34===v||39===v||40===v?(h.enter(b),h.enter(A),h.consume(v),h.exit(A),C=40===v?41:v,begin):_(v)};function begin(_){return _===C?(h.enter(A),h.consume(_),h.exit(A),h.exit(b),v):(h.enter(S),atBreak(_))}function atBreak(v){return v===C?(h.exit(S),begin(C)):null===v?_(v):markdownLineEnding(v)?(h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),factorySpace(h,atBreak,"linePrefix")):(h.enter("chunkString",{contentType:"string"}),inside(v))}function inside(v){return v===C||null===v||markdownLineEnding(v)?(h.exit("chunkString"),atBreak(v)):(h.consume(v),92===v?escape:inside)}function escape(v){return v===C||92===v?(h.consume(v),inside):inside(v)}}function factoryWhitespace(h,v){let _;return function start(b){return markdownLineEnding(b)?(h.enter("lineEnding"),h.consume(b),h.exit("lineEnding"),_=!0,start):markdownSpace(b)?factorySpace(h,start,_?"linePrefix":"lineSuffix")(b):v(b)}}let ai={tokenize:function(h,v,_){return function(v){return markdownLineEndingOrSpace(v)?factoryWhitespace(h,beforeMarker)(v):_(v)};function beforeMarker(v){return factoryTitle(h,titleAfter,_,"definitionTitle","definitionTitleMarker","definitionTitleString")(v)}function titleAfter(v){return markdownSpace(v)?factorySpace(h,titleAfterOptionalWhitespace,"whitespace")(v):titleAfterOptionalWhitespace(v)}function titleAfterOptionalWhitespace(h){return null===h||markdownLineEnding(h)?v(h):_(h)}},partial:!0},aa={name:"codeIndented",tokenize:function(h,v,_){let b=this;return function(v){return h.enter("codeIndented"),factorySpace(h,afterPrefix,"linePrefix",5)(v)};function afterPrefix(v){let A=b.events[b.events.length-1];return A&&"linePrefix"===A[1].type&&A[2].sliceSerialize(A[1],!0).length>=4?function atBreak(v){return null===v?after(v):markdownLineEnding(v)?h.attempt(ao,atBreak,after)(v):(h.enter("codeFlowValue"),function inside(v){return null===v||markdownLineEnding(v)?(h.exit("codeFlowValue"),atBreak(v)):(h.consume(v),inside)}(v))}(v):_(v)}function after(_){return h.exit("codeIndented"),v(_)}}},ao={tokenize:function(h,v,_){let b=this;return furtherStart;function furtherStart(v){return b.parser.lazy[b.now().line]?_(v):markdownLineEnding(v)?(h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),furtherStart):factorySpace(h,afterPrefix,"linePrefix",5)(v)}function afterPrefix(h){let A=b.events[b.events.length-1];return A&&"linePrefix"===A[1].type&&A[2].sliceSerialize(A[1],!0).length>=4?v(h):markdownLineEnding(h)?furtherStart(h):_(h)}},partial:!0},al={name:"setextUnderline",tokenize:function(h,v,_){let b;let A=this;return function(v){let S,C=A.events.length;for(;C--;)if("lineEnding"!==A.events[C][1].type&&"linePrefix"!==A.events[C][1].type&&"content"!==A.events[C][1].type){S="paragraph"===A.events[C][1].type;break}return!A.parser.lazy[A.now().line]&&(A.interrupt||S)?(h.enter("setextHeadingLine"),b=v,h.enter("setextHeadingLineSequence"),function inside(v){return v===b?(h.consume(v),inside):(h.exit("setextHeadingLineSequence"),markdownSpace(v)?factorySpace(h,after,"lineSuffix")(v):after(v))}(v)):_(v)};function after(b){return null===b||markdownLineEnding(b)?(h.exit("setextHeadingLine"),v(b)):_(b)}},resolveTo:function(h,v){let _,b,A,S=h.length;for(;S--;)if("enter"===h[S][0]){if("content"===h[S][1].type){_=S;break}"paragraph"===h[S][1].type&&(b=S)}else"content"===h[S][1].type&&h.splice(S,1),A||"definition"!==h[S][1].type||(A=S);let C={type:"setextHeading",start:Object.assign({},h[b][1].start),end:Object.assign({},h[h.length-1][1].end)};return h[b][1].type="setextHeadingText",A?(h.splice(b,0,["enter",C,v]),h.splice(A+1,0,["exit",h[_][1],v]),h[_][1].end=Object.assign({},h[A][1].end)):h[_][1]=C,h.push(["exit",C,v]),h}},ac=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],au=["pre","script","style","textarea"],ad={tokenize:function(h,v,_){return function(b){return h.enter("lineEnding"),h.consume(b),h.exit("lineEnding"),h.attempt(iq,v,_)}},partial:!0},ap={tokenize:function(h,v,_){let b=this;return function(v){return markdownLineEnding(v)?(h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),after):_(v)};function after(h){return b.parser.lazy[b.now().line]?_(h):v(h)}},partial:!0},ah={tokenize:function(h,v,_){let b=this;return function(v){return null===v?_(v):(h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),lineStart)};function lineStart(h){return b.parser.lazy[b.now().line]?_(h):v(h)}},partial:!0},am={name:"codeFenced",tokenize:function(h,v,_){let b;let A=this,S={tokenize:function(h,v,_){let S=0;return function(v){return h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),start};function start(v){return h.enter("codeFencedFence"),markdownSpace(v)?factorySpace(h,beforeSequenceClose,"linePrefix",A.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):beforeSequenceClose(v)}function beforeSequenceClose(v){return v===b?(h.enter("codeFencedFenceSequence"),function sequenceClose(v){return v===b?(S++,h.consume(v),sequenceClose):S>=w?(h.exit("codeFencedFenceSequence"),markdownSpace(v)?factorySpace(h,sequenceCloseAfter,"whitespace")(v):sequenceCloseAfter(v)):_(v)}(v)):_(v)}function sequenceCloseAfter(b){return null===b||markdownLineEnding(b)?(h.exit("codeFencedFence"),v(b)):_(b)}},partial:!0},C=0,w=0;return function(v){return function(v){let S=A.events[A.events.length-1];return C=S&&"linePrefix"===S[1].type?S[2].sliceSerialize(S[1],!0).length:0,b=v,h.enter("codeFenced"),h.enter("codeFencedFence"),h.enter("codeFencedFenceSequence"),function sequenceOpen(v){return v===b?(w++,h.consume(v),sequenceOpen):w<3?_(v):(h.exit("codeFencedFenceSequence"),markdownSpace(v)?factorySpace(h,infoBefore,"whitespace")(v):infoBefore(v))}(v)}(v)};function infoBefore(S){return null===S||markdownLineEnding(S)?(h.exit("codeFencedFence"),A.interrupt?v(S):h.check(ah,atNonLazyBreak,after)(S)):(h.enter("codeFencedFenceInfo"),h.enter("chunkString",{contentType:"string"}),function info(v){return null===v||markdownLineEnding(v)?(h.exit("chunkString"),h.exit("codeFencedFenceInfo"),infoBefore(v)):markdownSpace(v)?(h.exit("chunkString"),h.exit("codeFencedFenceInfo"),factorySpace(h,metaBefore,"whitespace")(v)):96===v&&v===b?_(v):(h.consume(v),info)}(S))}function metaBefore(v){return null===v||markdownLineEnding(v)?infoBefore(v):(h.enter("codeFencedFenceMeta"),h.enter("chunkString",{contentType:"string"}),function meta(v){return null===v||markdownLineEnding(v)?(h.exit("chunkString"),h.exit("codeFencedFenceMeta"),infoBefore(v)):96===v&&v===b?_(v):(h.consume(v),meta)}(v))}function atNonLazyBreak(v){return h.attempt(S,after,contentBefore)(v)}function contentBefore(v){return h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),contentStart}function contentStart(v){return C>0&&markdownSpace(v)?factorySpace(h,beforeContentChunk,"linePrefix",C+1)(v):beforeContentChunk(v)}function beforeContentChunk(v){return null===v||markdownLineEnding(v)?h.check(ah,atNonLazyBreak,after)(v):(h.enter("codeFlowValue"),function contentChunk(v){return null===v||markdownLineEnding(v)?(h.exit("codeFlowValue"),beforeContentChunk(v)):(h.consume(v),contentChunk)}(v))}function after(_){return h.exit("codeFenced"),v(_)}},concrete:!0},af=document.createElement("i");function decodeNamedCharacterReference(h){let v="&"+h+";";af.innerHTML=v;let _=af.textContent;return(59!==_.charCodeAt(_.length-1)||"semi"===h)&&_!==v&&_}let ag={name:"characterReference",tokenize:function(h,v,_){let b,A;let S=this,C=0;return function(v){return h.enter("characterReference"),h.enter("characterReferenceMarker"),h.consume(v),h.exit("characterReferenceMarker"),open};function open(v){return 35===v?(h.enter("characterReferenceMarkerNumeric"),h.consume(v),h.exit("characterReferenceMarkerNumeric"),numeric):(h.enter("characterReferenceValue"),b=31,A=ib,value(v))}function numeric(v){return 88===v||120===v?(h.enter("characterReferenceMarkerHexadecimal"),h.consume(v),h.exit("characterReferenceMarkerHexadecimal"),h.enter("characterReferenceValue"),b=6,A=iS,value):(h.enter("characterReferenceValue"),b=7,A=ix,value(v))}function value(w){if(59===w&&C){let b=h.exit("characterReferenceValue");return A!==ib||decodeNamedCharacterReference(S.sliceSerialize(b))?(h.enter("characterReferenceMarker"),h.consume(w),h.exit("characterReferenceMarker"),h.exit("characterReference"),v):_(w)}return A(w)&&C++<b?(h.consume(w),value):_(w)}}},aE={name:"characterEscape",tokenize:function(h,v,_){return function(v){return h.enter("characterEscape"),h.enter("escapeMarker"),h.consume(v),h.exit("escapeMarker"),inside};function inside(b){return iC(b)?(h.enter("characterEscapeValue"),h.consume(b),h.exit("characterEscapeValue"),h.exit("characterEscape"),v):_(b)}}},av={name:"lineEnding",tokenize:function(h,v){return function(_){return h.enter("lineEnding"),h.consume(_),h.exit("lineEnding"),factorySpace(h,v,"linePrefix")}}},aT={name:"labelEnd",tokenize:function(h,v,_){let b,A;let S=this,C=S.events.length;for(;C--;)if(("labelImage"===S.events[C][1].type||"labelLink"===S.events[C][1].type)&&!S.events[C][1]._balanced){b=S.events[C][1];break}return function(v){return b?b._inactive?labelEndNok(v):(A=S.parser.defined.includes(normalizeIdentifier(S.sliceSerialize({start:b.end,end:S.now()}))),h.enter("labelEnd"),h.enter("labelMarker"),h.consume(v),h.exit("labelMarker"),h.exit("labelEnd"),after):_(v)};function after(v){return 40===v?h.attempt(ay,labelEndOk,A?labelEndOk:labelEndNok)(v):91===v?h.attempt(a_,labelEndOk,A?referenceNotFull:labelEndNok)(v):A?labelEndOk(v):labelEndNok(v)}function referenceNotFull(v){return h.attempt(ab,labelEndOk,labelEndNok)(v)}function labelEndOk(h){return v(h)}function labelEndNok(h){return b._balanced=!0,_(h)}},resolveTo:function(h,v){let _,b,A,S,C=h.length,w=0;for(;C--;)if(_=h[C][1],b){if("link"===_.type||"labelLink"===_.type&&_._inactive)break;"enter"===h[C][0]&&"labelLink"===_.type&&(_._inactive=!0)}else if(A){if("enter"===h[C][0]&&("labelImage"===_.type||"labelLink"===_.type)&&!_._balanced&&(b=C,"labelLink"!==_.type)){w=2;break}}else"labelEnd"===_.type&&(A=C);let O={type:"labelLink"===h[b][1].type?"link":"image",start:Object.assign({},h[b][1].start),end:Object.assign({},h[h.length-1][1].end)},L={type:"label",start:Object.assign({},h[b][1].start),end:Object.assign({},h[A][1].end)},M={type:"labelText",start:Object.assign({},h[b+w+2][1].end),end:Object.assign({},h[A-2][1].start)};return S=push(S=[["enter",O,v],["enter",L,v]],h.slice(b+1,b+w+3)),S=push(S,[["enter",M,v]]),S=push(S,resolveAll(v.parser.constructs.insideSpan.null,h.slice(b+w+4,A-3),v)),S=push(S,[["exit",M,v],h[A-2],h[A-1],["exit",L,v]]),S=push(S,h.slice(A+1)),S=push(S,[["exit",O,v]]),splice(h,b,h.length,S),h},resolveAll:function(h){let v=-1;for(;++v<h.length;){let _=h[v][1];("labelImage"===_.type||"labelLink"===_.type||"labelEnd"===_.type)&&(h.splice(v+1,"labelImage"===_.type?4:2),_.type="data",v++)}return h}},ay={tokenize:function(h,v,_){return function(v){return h.enter("resource"),h.enter("resourceMarker"),h.consume(v),h.exit("resourceMarker"),resourceBefore};function resourceBefore(v){return markdownLineEndingOrSpace(v)?factoryWhitespace(h,resourceOpen)(v):resourceOpen(v)}function resourceOpen(v){return 41===v?resourceEnd(v):factoryDestination(h,resourceDestinationAfter,resourceDestinationMissing,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function resourceDestinationAfter(v){return markdownLineEndingOrSpace(v)?factoryWhitespace(h,resourceBetween)(v):resourceEnd(v)}function resourceDestinationMissing(h){return _(h)}function resourceBetween(v){return 34===v||39===v||40===v?factoryTitle(h,resourceTitleAfter,_,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):resourceEnd(v)}function resourceTitleAfter(v){return markdownLineEndingOrSpace(v)?factoryWhitespace(h,resourceEnd)(v):resourceEnd(v)}function resourceEnd(b){return 41===b?(h.enter("resourceMarker"),h.consume(b),h.exit("resourceMarker"),h.exit("resource"),v):_(b)}}},a_={tokenize:function(h,v,_){let b=this;return function(v){return factoryLabel.call(b,h,referenceFullAfter,referenceFullMissing,"reference","referenceMarker","referenceString")(v)};function referenceFullAfter(h){return b.parser.defined.includes(normalizeIdentifier(b.sliceSerialize(b.events[b.events.length-1][1]).slice(1,-1)))?v(h):_(h)}function referenceFullMissing(h){return _(h)}}},ab={tokenize:function(h,v,_){return function(v){return h.enter("reference"),h.enter("referenceMarker"),h.consume(v),h.exit("referenceMarker"),referenceCollapsedOpen};function referenceCollapsedOpen(b){return 93===b?(h.enter("referenceMarker"),h.consume(b),h.exit("referenceMarker"),h.exit("reference"),v):_(b)}}},aA={name:"labelStartImage",tokenize:function(h,v,_){let b=this;return function(v){return h.enter("labelImage"),h.enter("labelImageMarker"),h.consume(v),h.exit("labelImageMarker"),open};function open(v){return 91===v?(h.enter("labelMarker"),h.consume(v),h.exit("labelMarker"),h.exit("labelImage"),after):_(v)}function after(h){return 94===h&&"_hiddenFootnoteSupport"in b.parser.constructs?_(h):v(h)}},resolveAll:aT.resolveAll},ax={name:"attention",tokenize:function(h,v){let _;let b=this.parser.constructs.attentionMarkers.null,A=this.previous,S=classifyCharacter(A);return function(C){return _=C,h.enter("attentionSequence"),function inside(C){if(C===_)return h.consume(C),inside;let w=h.exit("attentionSequence"),O=classifyCharacter(C),L=!O||2===O&&S||b.includes(C),M=!S||2===S&&O||b.includes(A);return w._open=!!(42===_?L:L&&(S||!M)),w._close=!!(42===_?M:M&&(O||!L)),v(C)}(C)}},resolveAll:function(h,v){let _,b,A,S,C,w,O,L,M=-1;for(;++M<h.length;)if("enter"===h[M][0]&&"attentionSequence"===h[M][1].type&&h[M][1]._close){for(_=M;_--;)if("exit"===h[_][0]&&"attentionSequence"===h[_][1].type&&h[_][1]._open&&v.sliceSerialize(h[_][1]).charCodeAt(0)===v.sliceSerialize(h[M][1]).charCodeAt(0)){if((h[_][1]._close||h[M][1]._open)&&(h[M][1].end.offset-h[M][1].start.offset)%3&&!((h[_][1].end.offset-h[_][1].start.offset+h[M][1].end.offset-h[M][1].start.offset)%3))continue;w=h[_][1].end.offset-h[_][1].start.offset>1&&h[M][1].end.offset-h[M][1].start.offset>1?2:1;let F=Object.assign({},h[_][1].end),U=Object.assign({},h[M][1].start);movePoint(F,-w),movePoint(U,w),S={type:w>1?"strongSequence":"emphasisSequence",start:F,end:Object.assign({},h[_][1].end)},C={type:w>1?"strongSequence":"emphasisSequence",start:Object.assign({},h[M][1].start),end:U},A={type:w>1?"strongText":"emphasisText",start:Object.assign({},h[_][1].end),end:Object.assign({},h[M][1].start)},b={type:w>1?"strong":"emphasis",start:Object.assign({},S.start),end:Object.assign({},C.end)},h[_][1].end=Object.assign({},S.start),h[M][1].start=Object.assign({},C.end),O=[],h[_][1].end.offset-h[_][1].start.offset&&(O=push(O,[["enter",h[_][1],v],["exit",h[_][1],v]])),O=push(O,[["enter",b,v],["enter",S,v],["exit",S,v],["enter",A,v]]),O=push(O,resolveAll(v.parser.constructs.insideSpan.null,h.slice(_+1,M),v)),O=push(O,[["exit",A,v],["enter",C,v],["exit",C,v],["exit",b,v]]),h[M][1].end.offset-h[M][1].start.offset?(L=2,O=push(O,[["enter",h[M][1],v],["exit",h[M][1],v]])):L=0,splice(h,_-1,M-_+3,O),M=_+O.length-L-2;break}}for(M=-1;++M<h.length;)"attentionSequence"===h[M][1].type&&(h[M][1].type="data");return h}};function movePoint(h,v){h.column+=v,h.offset+=v,h._bufferIndex+=v}let aS={name:"labelStartLink",tokenize:function(h,v,_){let b=this;return function(v){return h.enter("labelLink"),h.enter("labelMarker"),h.consume(v),h.exit("labelMarker"),h.exit("labelLink"),after};function after(h){return 94===h&&"_hiddenFootnoteSupport"in b.parser.constructs?_(h):v(h)}},resolveAll:aT.resolveAll},aC={42:i8,43:i8,45:i8,48:i8,49:i8,50:i8,51:i8,52:i8,53:i8,54:i8,55:i8,56:i8,57:i8,62:at},ak={91:{name:"definition",tokenize:function(h,v,_){let b;let A=this;return function(v){return h.enter("definition"),factoryLabel.call(A,h,labelAfter,_,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)};function labelAfter(v){return(b=normalizeIdentifier(A.sliceSerialize(A.events[A.events.length-1][1]).slice(1,-1)),58===v)?(h.enter("definitionMarker"),h.consume(v),h.exit("definitionMarker"),markerAfter):_(v)}function markerAfter(v){return markdownLineEndingOrSpace(v)?factoryWhitespace(h,destinationBefore)(v):destinationBefore(v)}function destinationBefore(v){return factoryDestination(h,destinationAfter,_,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function destinationAfter(v){return h.attempt(ai,after,after)(v)}function after(v){return markdownSpace(v)?factorySpace(h,afterWhitespace,"whitespace")(v):afterWhitespace(v)}function afterWhitespace(S){return null===S||markdownLineEnding(S)?(h.exit("definition"),A.parser.defined.push(b),v(S)):_(S)}}}},aw={[-2]:aa,[-1]:aa,32:aa},aI={35:{name:"headingAtx",tokenize:function(h,v,_){let b=0;return function(A){return h.enter("atxHeading"),h.enter("atxHeadingSequence"),function sequenceOpen(A){return 35===A&&b++<6?(h.consume(A),sequenceOpen):null===A||markdownLineEndingOrSpace(A)?(h.exit("atxHeadingSequence"),function atBreak(_){return 35===_?(h.enter("atxHeadingSequence"),function sequenceFurther(v){return 35===v?(h.consume(v),sequenceFurther):(h.exit("atxHeadingSequence"),atBreak(v))}(_)):null===_||markdownLineEnding(_)?(h.exit("atxHeading"),v(_)):markdownSpace(_)?factorySpace(h,atBreak,"whitespace")(_):(h.enter("atxHeadingText"),function data(v){return null===v||35===v||markdownLineEndingOrSpace(v)?(h.exit("atxHeadingText"),atBreak(v)):(h.consume(v),data)}(_))}(A)):_(A)}(A)}},resolve:function(h,v){let _,b,A=h.length-2,S=3;return"whitespace"===h[3][1].type&&(S+=2),A-2>S&&"whitespace"===h[A][1].type&&(A-=2),"atxHeadingSequence"===h[A][1].type&&(S===A-1||A-4>S&&"whitespace"===h[A-2][1].type)&&(A-=S+1===A?2:4),A>S&&(_={type:"atxHeadingText",start:h[S][1].start,end:h[A][1].end},b={type:"chunkText",start:h[S][1].start,end:h[A][1].end,contentType:"text"},splice(h,S,A-S+1,[["enter",_,v],["enter",b,v],["exit",b,v],["exit",_,v]])),h}},42:i6,45:[al,i6],60:{name:"htmlFlow",tokenize:function(h,v,_){let b,A,S,C,w;let O=this;return function(v){return h.enter("htmlFlow"),h.enter("htmlFlowData"),h.consume(v),open};function open(C){return 33===C?(h.consume(C),declarationOpen):47===C?(h.consume(C),A=!0,tagCloseStart):63===C?(h.consume(C),b=3,O.interrupt?v:continuationDeclarationInside):i_(C)?(h.consume(C),S=String.fromCharCode(C),tagName):_(C)}function declarationOpen(A){return 45===A?(h.consume(A),b=2,commentOpenInside):91===A?(h.consume(A),b=5,C=0,cdataOpenInside):i_(A)?(h.consume(A),b=4,O.interrupt?v:continuationDeclarationInside):_(A)}function commentOpenInside(b){return 45===b?(h.consume(b),O.interrupt?v:continuationDeclarationInside):_(b)}function cdataOpenInside(b){let A="CDATA[";return b===A.charCodeAt(C++)?(h.consume(b),C===A.length)?O.interrupt?v:continuation:cdataOpenInside:_(b)}function tagCloseStart(v){return i_(v)?(h.consume(v),S=String.fromCharCode(v),tagName):_(v)}function tagName(C){if(null===C||47===C||62===C||markdownLineEndingOrSpace(C)){let w=47===C,L=S.toLowerCase();return!w&&!A&&au.includes(L)?(b=1,O.interrupt?v(C):continuation(C)):ac.includes(S.toLowerCase())?(b=6,w)?(h.consume(C),basicSelfClosing):O.interrupt?v(C):continuation(C):(b=7,O.interrupt&&!O.parser.lazy[O.now().line]?_(C):A?function completeClosingTagAfter(v){return markdownSpace(v)?(h.consume(v),completeClosingTagAfter):completeEnd(v)}(C):completeAttributeNameBefore(C))}return 45===C||ib(C)?(h.consume(C),S+=String.fromCharCode(C),tagName):_(C)}function basicSelfClosing(b){return 62===b?(h.consume(b),O.interrupt?v:continuation):_(b)}function completeAttributeNameBefore(v){return 47===v?(h.consume(v),completeEnd):58===v||95===v||i_(v)?(h.consume(v),completeAttributeName):markdownSpace(v)?(h.consume(v),completeAttributeNameBefore):completeEnd(v)}function completeAttributeName(v){return 45===v||46===v||58===v||95===v||ib(v)?(h.consume(v),completeAttributeName):completeAttributeNameAfter(v)}function completeAttributeNameAfter(v){return 61===v?(h.consume(v),completeAttributeValueBefore):markdownSpace(v)?(h.consume(v),completeAttributeNameAfter):completeAttributeNameBefore(v)}function completeAttributeValueBefore(v){return null===v||60===v||61===v||62===v||96===v?_(v):34===v||39===v?(h.consume(v),w=v,completeAttributeValueQuoted):markdownSpace(v)?(h.consume(v),completeAttributeValueBefore):function completeAttributeValueUnquoted(v){return null===v||34===v||39===v||47===v||60===v||61===v||62===v||96===v||markdownLineEndingOrSpace(v)?completeAttributeNameAfter(v):(h.consume(v),completeAttributeValueUnquoted)}(v)}function completeAttributeValueQuoted(v){return v===w?(h.consume(v),w=null,completeAttributeValueQuotedAfter):null===v||markdownLineEnding(v)?_(v):(h.consume(v),completeAttributeValueQuoted)}function completeAttributeValueQuotedAfter(h){return 47===h||62===h||markdownSpace(h)?completeAttributeNameBefore(h):_(h)}function completeEnd(v){return 62===v?(h.consume(v),completeAfter):_(v)}function completeAfter(v){return null===v||markdownLineEnding(v)?continuation(v):markdownSpace(v)?(h.consume(v),completeAfter):_(v)}function continuation(v){return 45===v&&2===b?(h.consume(v),continuationCommentInside):60===v&&1===b?(h.consume(v),continuationRawTagOpen):62===v&&4===b?(h.consume(v),continuationClose):63===v&&3===b?(h.consume(v),continuationDeclarationInside):93===v&&5===b?(h.consume(v),continuationCdataInside):markdownLineEnding(v)&&(6===b||7===b)?(h.exit("htmlFlowData"),h.check(ad,continuationAfter,continuationStart)(v)):null===v||markdownLineEnding(v)?(h.exit("htmlFlowData"),continuationStart(v)):(h.consume(v),continuation)}function continuationStart(v){return h.check(ap,continuationStartNonLazy,continuationAfter)(v)}function continuationStartNonLazy(v){return h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),continuationBefore}function continuationBefore(v){return null===v||markdownLineEnding(v)?continuationStart(v):(h.enter("htmlFlowData"),continuation(v))}function continuationCommentInside(v){return 45===v?(h.consume(v),continuationDeclarationInside):continuation(v)}function continuationRawTagOpen(v){return 47===v?(h.consume(v),S="",continuationRawEndTag):continuation(v)}function continuationRawEndTag(v){if(62===v){let _=S.toLowerCase();return au.includes(_)?(h.consume(v),continuationClose):continuation(v)}return i_(v)&&S.length<8?(h.consume(v),S+=String.fromCharCode(v),continuationRawEndTag):continuation(v)}function continuationCdataInside(v){return 93===v?(h.consume(v),continuationDeclarationInside):continuation(v)}function continuationDeclarationInside(v){return 62===v?(h.consume(v),continuationClose):45===v&&2===b?(h.consume(v),continuationDeclarationInside):continuation(v)}function continuationClose(v){return null===v||markdownLineEnding(v)?(h.exit("htmlFlowData"),continuationAfter(v)):(h.consume(v),continuationClose)}function continuationAfter(_){return h.exit("htmlFlow"),v(_)}},resolveTo:function(h){let v=h.length;for(;v--&&("enter"!==h[v][0]||"htmlFlow"!==h[v][1].type););return v>1&&"linePrefix"===h[v-2][1].type&&(h[v][1].start=h[v-2][1].start,h[v+1][1].start=h[v-2][1].start,h.splice(v-2,2)),h},concrete:!0},61:al,95:i6,96:am,126:am},aN={38:ag,92:aE},aO={[-5]:av,[-4]:av,[-3]:av,33:aA,38:ag,42:ax,60:[{name:"autolink",tokenize:function(h,v,_){let b=0;return function(v){return h.enter("autolink"),h.enter("autolinkMarker"),h.consume(v),h.exit("autolinkMarker"),h.enter("autolinkProtocol"),open};function open(v){return i_(v)?(h.consume(v),schemeOrEmailAtext):64===v?_(v):emailAtext(v)}function schemeOrEmailAtext(v){return 43===v||45===v||46===v||ib(v)?(b=1,function schemeInsideOrEmailAtext(v){return 58===v?(h.consume(v),b=0,urlInside):(43===v||45===v||46===v||ib(v))&&b++<32?(h.consume(v),schemeInsideOrEmailAtext):(b=0,emailAtext(v))}(v)):emailAtext(v)}function urlInside(b){return 62===b?(h.exit("autolinkProtocol"),h.enter("autolinkMarker"),h.consume(b),h.exit("autolinkMarker"),h.exit("autolink"),v):null===b||32===b||60===b||asciiControl(b)?_(b):(h.consume(b),urlInside)}function emailAtext(v){return 64===v?(h.consume(v),emailAtSignOrDot):iA(v)?(h.consume(v),emailAtext):_(v)}function emailAtSignOrDot(A){return ib(A)?function emailLabel(A){return 46===A?(h.consume(A),b=0,emailAtSignOrDot):62===A?(h.exit("autolinkProtocol").type="autolinkEmail",h.enter("autolinkMarker"),h.consume(A),h.exit("autolinkMarker"),h.exit("autolink"),v):function emailValue(v){if((45===v||ib(v))&&b++<63){let _=45===v?emailValue:emailLabel;return h.consume(v),_}return _(v)}(A)}(A):_(A)}}},{name:"htmlText",tokenize:function(h,v,_){let b,A,S;let C=this;return function(v){return h.enter("htmlText"),h.enter("htmlTextData"),h.consume(v),open};function open(v){return 33===v?(h.consume(v),declarationOpen):47===v?(h.consume(v),tagCloseStart):63===v?(h.consume(v),instruction):i_(v)?(h.consume(v),tagOpen):_(v)}function declarationOpen(v){return 45===v?(h.consume(v),commentOpenInside):91===v?(h.consume(v),A=0,cdataOpenInside):i_(v)?(h.consume(v),declaration):_(v)}function commentOpenInside(v){return 45===v?(h.consume(v),commentEnd):_(v)}function comment(v){return null===v?_(v):45===v?(h.consume(v),commentClose):markdownLineEnding(v)?(S=comment,lineEndingBefore(v)):(h.consume(v),comment)}function commentClose(v){return 45===v?(h.consume(v),commentEnd):comment(v)}function commentEnd(h){return 62===h?end(h):45===h?commentClose(h):comment(h)}function cdataOpenInside(v){let b="CDATA[";return v===b.charCodeAt(A++)?(h.consume(v),A===b.length?cdata:cdataOpenInside):_(v)}function cdata(v){return null===v?_(v):93===v?(h.consume(v),cdataClose):markdownLineEnding(v)?(S=cdata,lineEndingBefore(v)):(h.consume(v),cdata)}function cdataClose(v){return 93===v?(h.consume(v),cdataEnd):cdata(v)}function cdataEnd(v){return 62===v?end(v):93===v?(h.consume(v),cdataEnd):cdata(v)}function declaration(v){return null===v||62===v?end(v):markdownLineEnding(v)?(S=declaration,lineEndingBefore(v)):(h.consume(v),declaration)}function instruction(v){return null===v?_(v):63===v?(h.consume(v),instructionClose):markdownLineEnding(v)?(S=instruction,lineEndingBefore(v)):(h.consume(v),instruction)}function instructionClose(h){return 62===h?end(h):instruction(h)}function tagCloseStart(v){return i_(v)?(h.consume(v),tagClose):_(v)}function tagClose(v){return 45===v||ib(v)?(h.consume(v),tagClose):function tagCloseBetween(v){return markdownLineEnding(v)?(S=tagCloseBetween,lineEndingBefore(v)):markdownSpace(v)?(h.consume(v),tagCloseBetween):end(v)}(v)}function tagOpen(v){return 45===v||ib(v)?(h.consume(v),tagOpen):47===v||62===v||markdownLineEndingOrSpace(v)?tagOpenBetween(v):_(v)}function tagOpenBetween(v){return 47===v?(h.consume(v),end):58===v||95===v||i_(v)?(h.consume(v),tagOpenAttributeName):markdownLineEnding(v)?(S=tagOpenBetween,lineEndingBefore(v)):markdownSpace(v)?(h.consume(v),tagOpenBetween):end(v)}function tagOpenAttributeName(v){return 45===v||46===v||58===v||95===v||ib(v)?(h.consume(v),tagOpenAttributeName):function tagOpenAttributeNameAfter(v){return 61===v?(h.consume(v),tagOpenAttributeValueBefore):markdownLineEnding(v)?(S=tagOpenAttributeNameAfter,lineEndingBefore(v)):markdownSpace(v)?(h.consume(v),tagOpenAttributeNameAfter):tagOpenBetween(v)}(v)}function tagOpenAttributeValueBefore(v){return null===v||60===v||61===v||62===v||96===v?_(v):34===v||39===v?(h.consume(v),b=v,tagOpenAttributeValueQuoted):markdownLineEnding(v)?(S=tagOpenAttributeValueBefore,lineEndingBefore(v)):markdownSpace(v)?(h.consume(v),tagOpenAttributeValueBefore):(h.consume(v),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuoted(v){return v===b?(h.consume(v),b=void 0,tagOpenAttributeValueQuotedAfter):null===v?_(v):markdownLineEnding(v)?(S=tagOpenAttributeValueQuoted,lineEndingBefore(v)):(h.consume(v),tagOpenAttributeValueQuoted)}function tagOpenAttributeValueUnquoted(v){return null===v||34===v||39===v||60===v||61===v||96===v?_(v):47===v||62===v||markdownLineEndingOrSpace(v)?tagOpenBetween(v):(h.consume(v),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuotedAfter(h){return 47===h||62===h||markdownLineEndingOrSpace(h)?tagOpenBetween(h):_(h)}function end(b){return 62===b?(h.consume(b),h.exit("htmlTextData"),h.exit("htmlText"),v):_(b)}function lineEndingBefore(v){return h.exit("htmlTextData"),h.enter("lineEnding"),h.consume(v),h.exit("lineEnding"),lineEndingAfter}function lineEndingAfter(v){return markdownSpace(v)?factorySpace(h,lineEndingAfterPrefix,"linePrefix",C.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):lineEndingAfterPrefix(v)}function lineEndingAfterPrefix(v){return h.enter("htmlTextData"),S(v)}}}],91:aS,92:[{name:"hardBreakEscape",tokenize:function(h,v,_){return function(v){return h.enter("hardBreakEscape"),h.consume(v),after};function after(b){return markdownLineEnding(b)?(h.exit("hardBreakEscape"),v(b)):_(b)}}},aE],93:aT,95:ax,96:{name:"codeText",tokenize:function(h,v,_){let b,A,S=0;return function(v){return h.enter("codeText"),h.enter("codeTextSequence"),function sequenceOpen(v){return 96===v?(h.consume(v),S++,sequenceOpen):(h.exit("codeTextSequence"),between(v))}(v)};function between(C){return null===C?_(C):32===C?(h.enter("space"),h.consume(C),h.exit("space"),between):96===C?(A=h.enter("codeTextSequence"),b=0,function sequenceClose(_){return 96===_?(h.consume(_),b++,sequenceClose):b===S?(h.exit("codeTextSequence"),h.exit("codeText"),v(_)):(A.type="codeTextData",data(_))}(C)):markdownLineEnding(C)?(h.enter("lineEnding"),h.consume(C),h.exit("lineEnding"),between):(h.enter("codeTextData"),data(C))}function data(v){return null===v||32===v||96===v||markdownLineEnding(v)?(h.exit("codeTextData"),between(v)):(h.consume(v),data)}},resolve:function(h){let v,_,b=h.length-4,A=3;if(("lineEnding"===h[3][1].type||"space"===h[A][1].type)&&("lineEnding"===h[b][1].type||"space"===h[b][1].type)){for(v=A;++v<b;)if("codeTextData"===h[v][1].type){h[A][1].type="codeTextPadding",h[b][1].type="codeTextPadding",A+=2,b-=2;break}}for(v=A-1,b++;++v<=b;)void 0===_?v!==b&&"lineEnding"!==h[v][1].type&&(_=v):(v===b||"lineEnding"===h[v][1].type)&&(h[_][1].type="codeTextData",v!==_+2&&(h[_][1].end=h[v-1][1].end,h.splice(_+2,v-_-2),b-=v-_-2,v=_+2),_=void 0);return h},previous:function(h){return 96!==h||"characterEscape"===this.events[this.events.length-1][1].type}}},aR={null:[ax,i3]},aL={null:[42,95]},aD={null:[]},aP=/[\0\t\n\r]/g;function decodeNumericCharacterReference(h,v){let _=Number.parseInt(h,v);return _<9||11===_||_>13&&_<32||_>126&&_<160||_>55295&&_<57344||_>64975&&_<65008||(65535&_)==65535||(65535&_)==65534||_>1114111?"":String.fromCodePoint(_)}let aM=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decode(h,v,_){if(v)return v;let b=_.charCodeAt(0);if(35===b){let h=_.charCodeAt(1),v=120===h||88===h;return decodeNumericCharacterReference(_.slice(v?2:1),v?16:10)}return decodeNamedCharacterReference(_)||h}function stringifyPosition(h){return h&&"object"==typeof h?"position"in h||"type"in h?unist_util_stringify_position_lib_position(h.position):"start"in h||"end"in h?unist_util_stringify_position_lib_position(h):"line"in h||"column"in h?unist_util_stringify_position_lib_point(h):"":""}function unist_util_stringify_position_lib_point(h){return index(h&&h.line)+":"+index(h&&h.column)}function unist_util_stringify_position_lib_position(h){return unist_util_stringify_position_lib_point(h&&h.start)+"-"+unist_util_stringify_position_lib_point(h&&h.end)}function index(h){return h&&"number"==typeof h?h:1}let aF={}.hasOwnProperty;function mdast_util_from_markdown_lib_point(h){return{line:h.line,column:h.column,offset:h.offset}}function defaultOnError(h,v){if(h)throw Error("Cannot close `"+h.type+"` ("+stringifyPosition({start:h.start,end:h.end})+"): a different token (`"+v.type+"`, "+stringifyPosition({start:v.start,end:v.end})+") is open");throw Error("Cannot close document, a token (`"+v.type+"`, "+stringifyPosition({start:v.start,end:v.end})+") is still open")}function remarkParse(h){let v=this;v.parser=function(_){var b,A;let S,C,w,O;return"string"!=typeof(b={...v.data("settings"),...h,extensions:v.data("micromarkExtensions")||[],mdastExtensions:v.data("fromMarkdownExtensions")||[]})&&(A=b,b=void 0),(function(h){let v={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:opener(link),autolinkProtocol:onenterdata,autolinkEmail:onenterdata,atxHeading:opener(heading),blockQuote:opener(function(){return{type:"blockquote",children:[]}}),characterEscape:onenterdata,characterReference:onenterdata,codeFenced:opener(codeFlow),codeFencedFenceInfo:buffer,codeFencedFenceMeta:buffer,codeIndented:opener(codeFlow,buffer),codeText:opener(function(){return{type:"inlineCode",value:""}},buffer),codeTextData:onenterdata,data:onenterdata,codeFlowValue:onenterdata,definition:opener(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:buffer,definitionLabelString:buffer,definitionTitleString:buffer,emphasis:opener(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:opener(hardBreak),hardBreakTrailing:opener(hardBreak),htmlFlow:opener(html,buffer),htmlFlowData:onenterdata,htmlText:opener(html,buffer),htmlTextData:onenterdata,image:opener(function(){return{type:"image",title:null,url:"",alt:null}}),label:buffer,link:opener(link),listItem:opener(function(h){return{type:"listItem",spread:h._spread,checked:null,children:[]}}),listItemValue:function(h){if(this.data.expectingFirstListItemValue){let v=this.stack[this.stack.length-2];v.start=Number.parseInt(this.sliceSerialize(h),10),this.data.expectingFirstListItemValue=void 0}},listOrdered:opener(list,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:opener(list),paragraph:opener(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:buffer,resourceDestinationString:buffer,resourceTitleString:buffer,setextHeading:opener(heading),strong:opener(function(){return{type:"strong",children:[]}}),thematicBreak:opener(function(){return{type:"thematicBreak"}})},exit:{atxHeading:closer(),atxHeadingSequence:function(h){let v=this.stack[this.stack.length-1];if(!v.depth){let _=this.sliceSerialize(h).length;v.depth=_}},autolink:closer(),autolinkEmail:function(h){onexitdata.call(this,h);let v=this.stack[this.stack.length-1];v.url="mailto:"+this.sliceSerialize(h)},autolinkProtocol:function(h){onexitdata.call(this,h);let v=this.stack[this.stack.length-1];v.url=this.sliceSerialize(h)},blockQuote:closer(),characterEscapeValue:onexitdata,characterReferenceMarkerHexadecimal:onexitcharacterreferencemarker,characterReferenceMarkerNumeric:onexitcharacterreferencemarker,characterReferenceValue:function(h){let v;let _=this.sliceSerialize(h),b=this.data.characterReferenceType;if(b)v=decodeNumericCharacterReference(_,"characterReferenceMarkerNumeric"===b?10:16),this.data.characterReferenceType=void 0;else{let h=decodeNamedCharacterReference(_);v=h}let A=this.stack.pop();A.value+=v,A.position.end=mdast_util_from_markdown_lib_point(h.end)},codeFenced:closer(function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.value=h.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.lang=h},codeFencedFenceMeta:function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.meta=h},codeFlowValue:onexitdata,codeIndented:closer(function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.value=h.replace(/(\r?\n|\r)$/g,"")}),codeText:closer(function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.value=h}),codeTextData:onexitdata,data:onexitdata,definition:closer(),definitionDestinationString:function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.url=h},definitionLabelString:function(h){let v=this.resume(),_=this.stack[this.stack.length-1];_.label=v,_.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()},definitionTitleString:function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.title=h},emphasis:closer(),hardBreakEscape:closer(onexithardbreak),hardBreakTrailing:closer(onexithardbreak),htmlFlow:closer(function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.value=h}),htmlFlowData:onexitdata,htmlText:closer(function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.value=h}),htmlTextData:onexitdata,image:closer(function(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let v=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=v,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}),label:function(){let h=this.stack[this.stack.length-1],v=this.resume(),_=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===_.type){let v=h.children;_.children=v}else _.alt=v},labelText:function(h){let v=this.sliceSerialize(h),_=this.stack[this.stack.length-2];_.label=v.replace(aM,decode),_.identifier=normalizeIdentifier(v).toLowerCase()},lineEnding:function(h){let _=this.stack[this.stack.length-1];if(this.data.atHardBreak){let v=_.children[_.children.length-1];v.position.end=mdast_util_from_markdown_lib_point(h.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&v.canContainEols.includes(_.type)&&(onenterdata.call(this,h),onexitdata.call(this,h))},link:closer(function(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let v=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=v,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}),listItem:closer(),listOrdered:closer(),listUnordered:closer(),paragraph:closer(),referenceString:function(h){let v=this.resume(),_=this.stack[this.stack.length-1];_.label=v,_.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.url=h},resourceTitleString:function(){let h=this.resume(),v=this.stack[this.stack.length-1];v.title=h},resource:function(){this.data.inReference=void 0},setextHeading:closer(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(h){let v=this.stack[this.stack.length-1];v.depth=61===this.sliceSerialize(h).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:closer(),thematicBreak:closer()}};(function configure(h,v){let _=-1;for(;++_<v.length;){let b=v[_];Array.isArray(b)?configure(h,b):function(h,v){let _;for(_ in v)if(aF.call(v,_))switch(_){case"canContainEols":{let b=v[_];b&&h[_].push(...b);break}case"transforms":{let b=v[_];b&&h[_].push(...b);break}case"enter":case"exit":{let b=v[_];b&&Object.assign(h[_],b)}}}(h,b)}})(v,(h||{}).mdastExtensions||[]);let _={};return function(h){let b={type:"root",children:[]},A={stack:[b],tokenStack:[],config:v,enter,exit,buffer,resume,data:_},S=[],C=-1;for(;++C<h.length;)if("listOrdered"===h[C][1].type||"listUnordered"===h[C][1].type){if("enter"===h[C][0])S.push(C);else{let v=S.pop();C=function(h,v,_){let b,A,S,C,w=v-1,O=-1,L=!1;for(;++w<=_;){let v=h[w];switch(v[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===v[0]?O++:O--,C=void 0;break;case"lineEndingBlank":"enter"===v[0]&&(!b||C||O||S||(S=w),C=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:C=void 0}if(!O&&"enter"===v[0]&&"listItemPrefix"===v[1].type||-1===O&&"exit"===v[0]&&("listUnordered"===v[1].type||"listOrdered"===v[1].type)){if(b){let C=w;for(A=void 0;C--;){let v=h[C];if("lineEnding"===v[1].type||"lineEndingBlank"===v[1].type){if("exit"===v[0])continue;A&&(h[A][1].type="lineEndingBlank",L=!0),v[1].type="lineEnding",A=C}else if("linePrefix"===v[1].type||"blockQuotePrefix"===v[1].type||"blockQuotePrefixWhitespace"===v[1].type||"blockQuoteMarker"===v[1].type||"listItemIndent"===v[1].type);else break}S&&(!A||S<A)&&(b._spread=!0),b.end=Object.assign({},A?h[A][1].start:v[1].end),h.splice(A||w,0,["exit",b,v[2]]),w++,_++}if("listItemPrefix"===v[1].type){let A={type:"listItem",_spread:!1,start:Object.assign({},v[1].start),end:void 0};b=A,h.splice(w,0,["enter",A,v[2]]),w++,_++,S=void 0,C=!0}}}return h[v][1]._spread=L,_}(h,v,C)}}for(C=-1;++C<h.length;){let _=v[h[C][0]];aF.call(_,h[C][1].type)&&_[h[C][1].type].call(Object.assign({sliceSerialize:h[C][2].sliceSerialize},A),h[C][1])}if(A.tokenStack.length>0){let h=A.tokenStack[A.tokenStack.length-1],v=h[1]||defaultOnError;v.call(A,void 0,h[0])}for(b.position={start:mdast_util_from_markdown_lib_point(h.length>0?h[0][1].start:{line:1,column:1,offset:0}),end:mdast_util_from_markdown_lib_point(h.length>0?h[h.length-2][1].end:{line:1,column:1,offset:0})},C=-1;++C<v.transforms.length;)b=v.transforms[C](b)||b;return b};function opener(h,v){return function(_){enter.call(this,h(_),_),v&&v.call(this,_)}}function buffer(){this.stack.push({type:"fragment",children:[]})}function enter(h,v,_){let b=this.stack[this.stack.length-1],A=b.children;A.push(h),this.stack.push(h),this.tokenStack.push([v,_]),h.position={start:mdast_util_from_markdown_lib_point(v.start),end:void 0}}function closer(h){return function(v){h&&h.call(this,v),exit.call(this,v)}}function exit(h,v){let _=this.stack.pop(),b=this.tokenStack.pop();if(b){if(b[0].type!==h.type){if(v)v.call(this,h,b[0]);else{let v=b[1]||defaultOnError;v.call(this,h,b[0])}}}else throw Error("Cannot close `"+h.type+"` ("+stringifyPosition({start:h.start,end:h.end})+"): its not open");_.position.end=mdast_util_from_markdown_lib_point(h.end)}function resume(){return lib_toString(this.stack.pop())}function onenterdata(h){let v=this.stack[this.stack.length-1],_=v.children,b=_[_.length-1];b&&"text"===b.type||((b={type:"text",value:""}).position={start:mdast_util_from_markdown_lib_point(h.start),end:void 0},_.push(b)),this.stack.push(b)}function onexitdata(h){let v=this.stack.pop();v.value+=this.sliceSerialize(h),v.position.end=mdast_util_from_markdown_lib_point(h.end)}function onexithardbreak(){this.data.atHardBreak=!0}function onexitcharacterreferencemarker(h){this.data.characterReferenceType=h.type}function codeFlow(){return{type:"code",lang:null,meta:null,value:""}}function heading(){return{type:"heading",depth:0,children:[]}}function hardBreak(){return{type:"break"}}function html(){return{type:"html",value:""}}function link(){return{type:"link",title:null,url:"",children:[]}}function list(h){return{type:"list",ordered:"listOrdered"===h.type,start:null,spread:h._spread,children:[]}}})(A)(function(h){for(;!subtokenize(h););return h}((function(h){let v=combineExtensions([eG,...(h||{}).extensions||[]]),_={defined:[],lazy:{},constructs:v,content:create(iK),document:create(iZ),flow:create(i2),string:create(i4),text:create(i5)};return _;function create(h){return function(v){return function(h,v,_){let b=Object.assign(_?Object.assign({},_):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),A={},S=[],C=[],w=[],O={consume:function(h){markdownLineEnding(h)?(b.line++,b.column=1,b.offset+=-3===h?2:1,accountForPotentialSkip()):-1!==h&&(b.column++,b.offset++),b._bufferIndex<0?b._index++:(b._bufferIndex++,b._bufferIndex===C[b._index].length&&(b._bufferIndex=-1,b._index++)),L.previous=h},enter:function(h,v){let _=v||{};return _.type=h,_.start=now(),L.events.push(["enter",_,L]),w.push(_),_},exit:function(h){let v=w.pop();return v.end=now(),L.events.push(["exit",v,L]),v},attempt:constructFactory(function(h,v){addResult(h,v.from)}),check:constructFactory(onsuccessfulcheck),interrupt:constructFactory(onsuccessfulcheck,{interrupt:!0})},L={previous:null,code:null,containerState:{},events:[],parser:h,sliceStream,sliceSerialize:function(h,v){return function(h,v){let _,b=-1,A=[];for(;++b<h.length;){let S;let C=h[b];if("string"==typeof C)S=C;else switch(C){case -5:S="\r";break;case -4:S="\n";break;case -3:S="\r\n";break;case -2:S=v?" ":"	";break;case -1:if(!v&&_)continue;S=" ";break;default:S=String.fromCharCode(C)}_=-2===C,A.push(S)}return A.join("")}(sliceStream(h),v)},now,defineSkip:function(h){A[h.line]=h.column,accountForPotentialSkip()},write:function(h){return(C=push(C,h),function(){let h;for(;b._index<C.length;){var v;let _=C[b._index];if("string"==typeof _)for(h=b._index,b._bufferIndex<0&&(b._bufferIndex=0);b._index===h&&b._bufferIndex<_.length;)v=_.charCodeAt(b._bufferIndex),M=M(v);else M=M(_)}}(),null!==C[C.length-1])?[]:(addResult(v,0),L.events=resolveAll(S,L.events,L),L.events)}},M=v.tokenize.call(L,O);return v.resolveAll&&S.push(v),L;function sliceStream(h){return function(h,v){let _;let b=v.start._index,A=v.start._bufferIndex,S=v.end._index,C=v.end._bufferIndex;if(b===S)_=[h[b].slice(A,C)];else{if(_=h.slice(b,S),A>-1){let h=_[0];"string"==typeof h?_[0]=h.slice(A):_.shift()}C>0&&_.push(h[S].slice(0,C))}return _}(C,h)}function now(){let{line:h,column:v,offset:_,_index:A,_bufferIndex:S}=b;return{line:h,column:v,offset:_,_index:A,_bufferIndex:S}}function onsuccessfulcheck(h,v){v.restore()}function constructFactory(h,v){return function(_,A,S){let C,M,F,U;return Array.isArray(_)?handleListOfConstructs(_):"tokenize"in _?handleListOfConstructs([_]):function(h){let v=null!==h&&_[h],b=null!==h&&_.null,A=[...Array.isArray(v)?v:v?[v]:[],...Array.isArray(b)?b:b?[b]:[]];return handleListOfConstructs(A)(h)};function handleListOfConstructs(h){return(C=h,M=0,0===h.length)?S:handleConstruct(h[M])}function handleConstruct(h){return function(_){return(U=function(){let h=now(),v=L.previous,_=L.currentConstruct,A=L.events.length,S=Array.from(w);return{restore:function(){b=h,L.previous=v,L.currentConstruct=_,L.events.length=A,w=S,accountForPotentialSkip()},from:A}}(),F=h,h.partial||(L.currentConstruct=h),h.name&&L.parser.constructs.disable.null.includes(h.name))?nok(_):h.tokenize.call(v?Object.assign(Object.create(L),v):L,O,ok,nok)(_)}}function ok(v){return h(F,U),A}function nok(h){return(U.restore(),++M<C.length)?handleConstruct(C[M]):S}}}function addResult(h,v){h.resolveAll&&!S.includes(h)&&S.push(h),h.resolve&&splice(L.events,v,L.events.length-v,h.resolve(L.events.slice(v),L)),h.resolveTo&&(L.events=h.resolveTo(L.events,L))}function accountForPotentialSkip(){b.line in A&&b.column<2&&(b.column=A[b.line],b.offset+=A[b.line]-1)}}(_,h,v)}}})(A).document().write((C=1,w="",O=!0,function(h,v,_){let b,A,L,M,F;let U=[];for(h=w+("string"==typeof h?h.toString():new TextDecoder(v||void 0).decode(h)),L=0,w="",O&&(65279===h.charCodeAt(0)&&L++,O=void 0);L<h.length;){if(aP.lastIndex=L,M=(b=aP.exec(h))&&void 0!==b.index?b.index:h.length,F=h.charCodeAt(M),!b){w=h.slice(L);break}if(10===F&&L===M&&S)U.push(-3),S=void 0;else switch(S&&(U.push(-5),S=void 0),L<M&&(U.push(h.slice(L,M)),C+=M-L),F){case 0:U.push(65533),C++;break;case 9:for(A=4*Math.ceil(C/4),U.push(-2);C++<A;)U.push(-1);break;case 10:U.push(-4),C=1;break;default:S=!0,C=1}L=M+1}return _&&(S&&U.push(-5),w&&U.push(w),U.push(null)),U})(_,b,!0))))}}micromark_util_character_regexCheck(/\p{P}/u),micromark_util_character_regexCheck(/[A-Za-z]/);let aB=micromark_util_character_regexCheck(/[\dA-Za-z]/);function micromark_util_character_regexCheck(h){return function(v){return null!==v&&v>-1&&h.test(String.fromCharCode(v))}}function normalizeUri(h){let v=[],_=-1,b=0,A=0;for(;++_<h.length;){let S=h.charCodeAt(_),C="";if(37===S&&aB(h.charCodeAt(_+1))&&aB(h.charCodeAt(_+2)))A=2;else if(S<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(S))||(C=String.fromCharCode(S));else if(S>55295&&S<57344){let v=h.charCodeAt(_+1);S<56320&&v>56319&&v<57344?(C=String.fromCharCode(S,v),A=1):C=""}else C=String.fromCharCode(S);C&&(v.push(h.slice(b,_),encodeURIComponent(C)),b=_+A+1,C=""),A&&(_+=A,A=0)}return v.join("")+h.slice(b)}function defaultFootnoteBackContent(h,v){let _=[{type:"text",value:""}];return v>1&&_.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(v)}]}),_}function defaultFootnoteBackLabel(h,v){return"Back to reference "+(h+1)+(v>1?"-"+v:"")}micromark_util_character_regexCheck(/[#-'*+\--9=?A-Z^-~]/),micromark_util_character_regexCheck(/\d/),micromark_util_character_regexCheck(/[\dA-Fa-f]/),micromark_util_character_regexCheck(/[!-/:-@[-`{-~]/),micromark_util_character_regexCheck(/\s/);let aH=unist_util_position_lib_point("end"),aU=unist_util_position_lib_point("start");function unist_util_position_lib_point(h){return function(v){let _=v&&v.position&&v.position[h]||{};if("number"==typeof _.line&&_.line>0&&"number"==typeof _.column&&_.column>0)return{line:_.line,column:_.column,offset:"number"==typeof _.offset&&_.offset>-1?_.offset:void 0}}}function revert(h,v){let _=v.referenceType,b="]";if("collapsed"===_?b+="[]":"full"===_&&(b+="["+(v.label||v.identifier)+"]"),"imageReference"===v.type)return[{type:"text",value:"!["+v.alt+b}];let A=h.all(v),S=A[0];S&&"text"===S.type?S.value="["+S.value:A.unshift({type:"text",value:"["});let C=A[A.length-1];return C&&"text"===C.type?C.value+=b:A.push({type:"text",value:b}),A}function listItemLoose(h){let v=h.spread;return null==v?h.children.length>1:v}function trimLine(h,v,_){let b=0,A=h.length;if(v){let v=h.codePointAt(b);for(;9===v||32===v;)b++,v=h.codePointAt(b)}if(_){let v=h.codePointAt(A-1);for(;9===v||32===v;)A--,v=h.codePointAt(A-1)}return A>b?h.slice(b,A):""}let az={blockquote:function(h,v){let _={type:"element",tagName:"blockquote",properties:{},children:h.wrap(h.all(v),!0)};return h.patch(v,_),h.applyData(v,_)},break:function(h,v){let _={type:"element",tagName:"br",properties:{},children:[]};return h.patch(v,_),[h.applyData(v,_),{type:"text",value:"\n"}]},code:function(h,v){let _=v.value?v.value+"\n":"",b={};v.lang&&(b.className=["language-"+v.lang]);let A={type:"element",tagName:"code",properties:b,children:[{type:"text",value:_}]};return v.meta&&(A.data={meta:v.meta}),h.patch(v,A),A={type:"element",tagName:"pre",properties:{},children:[A=h.applyData(v,A)]},h.patch(v,A),A},delete:function(h,v){let _={type:"element",tagName:"del",properties:{},children:h.all(v)};return h.patch(v,_),h.applyData(v,_)},emphasis:function(h,v){let _={type:"element",tagName:"em",properties:{},children:h.all(v)};return h.patch(v,_),h.applyData(v,_)},footnoteReference:function(h,v){let _;let b="string"==typeof h.options.clobberPrefix?h.options.clobberPrefix:"user-content-",A=String(v.identifier).toUpperCase(),S=normalizeUri(A.toLowerCase()),C=h.footnoteOrder.indexOf(A),w=h.footnoteCounts.get(A);void 0===w?(w=0,h.footnoteOrder.push(A),_=h.footnoteOrder.length):_=C+1,w+=1,h.footnoteCounts.set(A,w);let O={type:"element",tagName:"a",properties:{href:"#"+b+"fn-"+S,id:b+"fnref-"+S+(w>1?"-"+w:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(_)}]};h.patch(v,O);let L={type:"element",tagName:"sup",properties:{},children:[O]};return h.patch(v,L),h.applyData(v,L)},heading:function(h,v){let _={type:"element",tagName:"h"+v.depth,properties:{},children:h.all(v)};return h.patch(v,_),h.applyData(v,_)},html:function(h,v){if(h.options.allowDangerousHtml){let _={type:"raw",value:v.value};return h.patch(v,_),h.applyData(v,_)}},imageReference:function(h,v){let _=String(v.identifier).toUpperCase(),b=h.definitionById.get(_);if(!b)return revert(h,v);let A={src:normalizeUri(b.url||""),alt:v.alt};null!==b.title&&void 0!==b.title&&(A.title=b.title);let S={type:"element",tagName:"img",properties:A,children:[]};return h.patch(v,S),h.applyData(v,S)},image:function(h,v){let _={src:normalizeUri(v.url)};null!==v.alt&&void 0!==v.alt&&(_.alt=v.alt),null!==v.title&&void 0!==v.title&&(_.title=v.title);let b={type:"element",tagName:"img",properties:_,children:[]};return h.patch(v,b),h.applyData(v,b)},inlineCode:function(h,v){let _={type:"text",value:v.value.replace(/\r?\n|\r/g," ")};h.patch(v,_);let b={type:"element",tagName:"code",properties:{},children:[_]};return h.patch(v,b),h.applyData(v,b)},linkReference:function(h,v){let _=String(v.identifier).toUpperCase(),b=h.definitionById.get(_);if(!b)return revert(h,v);let A={href:normalizeUri(b.url||"")};null!==b.title&&void 0!==b.title&&(A.title=b.title);let S={type:"element",tagName:"a",properties:A,children:h.all(v)};return h.patch(v,S),h.applyData(v,S)},link:function(h,v){let _={href:normalizeUri(v.url)};null!==v.title&&void 0!==v.title&&(_.title=v.title);let b={type:"element",tagName:"a",properties:_,children:h.all(v)};return h.patch(v,b),h.applyData(v,b)},listItem:function(h,v,_){let b=h.all(v),A=_?function(h){let v=!1;if("list"===h.type){v=h.spread||!1;let _=h.children,b=-1;for(;!v&&++b<_.length;)v=listItemLoose(_[b])}return v}(_):listItemLoose(v),S={},C=[];if("boolean"==typeof v.checked){let h;let _=b[0];_&&"element"===_.type&&"p"===_.tagName?h=_:(h={type:"element",tagName:"p",properties:{},children:[]},b.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:v.checked,disabled:!0},children:[]}),S.className=["task-list-item"]}let w=-1;for(;++w<b.length;){let h=b[w];(A||0!==w||"element"!==h.type||"p"!==h.tagName)&&C.push({type:"text",value:"\n"}),"element"!==h.type||"p"!==h.tagName||A?C.push(h):C.push(...h.children)}let O=b[b.length-1];O&&(A||"element"!==O.type||"p"!==O.tagName)&&C.push({type:"text",value:"\n"});let L={type:"element",tagName:"li",properties:S,children:C};return h.patch(v,L),h.applyData(v,L)},list:function(h,v){let _={},b=h.all(v),A=-1;for("number"==typeof v.start&&1!==v.start&&(_.start=v.start);++A<b.length;){let h=b[A];if("element"===h.type&&"li"===h.tagName&&h.properties&&Array.isArray(h.properties.className)&&h.properties.className.includes("task-list-item")){_.className=["contains-task-list"];break}}let S={type:"element",tagName:v.ordered?"ol":"ul",properties:_,children:h.wrap(b,!0)};return h.patch(v,S),h.applyData(v,S)},paragraph:function(h,v){let _={type:"element",tagName:"p",properties:{},children:h.all(v)};return h.patch(v,_),h.applyData(v,_)},root:function(h,v){let _={type:"root",children:h.wrap(h.all(v))};return h.patch(v,_),h.applyData(v,_)},strong:function(h,v){let _={type:"element",tagName:"strong",properties:{},children:h.all(v)};return h.patch(v,_),h.applyData(v,_)},table:function(h,v){let _=h.all(v),b=_.shift(),A=[];if(b){let _={type:"element",tagName:"thead",properties:{},children:h.wrap([b],!0)};h.patch(v.children[0],_),A.push(_)}if(_.length>0){let b={type:"element",tagName:"tbody",properties:{},children:h.wrap(_,!0)},S=aU(v.children[1]),C=aH(v.children[v.children.length-1]);S&&C&&(b.position={start:S,end:C}),A.push(b)}let S={type:"element",tagName:"table",properties:{},children:h.wrap(A,!0)};return h.patch(v,S),h.applyData(v,S)},tableCell:function(h,v){let _={type:"element",tagName:"td",properties:{},children:h.all(v)};return h.patch(v,_),h.applyData(v,_)},tableRow:function(h,v,_){let b=_?_.children:void 0,A=b?b.indexOf(v):1,S=0===A?"th":"td",C=_&&"table"===_.type?_.align:void 0,w=C?C.length:v.children.length,O=-1,L=[];for(;++O<w;){let _=v.children[O],b={},A=C?C[O]:void 0;A&&(b.align=A);let w={type:"element",tagName:S,properties:b,children:[]};_&&(w.children=h.all(_),h.patch(_,w),w=h.applyData(_,w)),L.push(w)}let M={type:"element",tagName:"tr",properties:{},children:h.wrap(L,!0)};return h.patch(v,M),h.applyData(v,M)},text:function(h,v){let _={type:"text",value:function(h){let v=String(h),_=/\r?\n|\r/g,b=_.exec(v),A=0,S=[];for(;b;)S.push(trimLine(v.slice(A,b.index),A>0,!0),b[0]),A=b.index+b[0].length,b=_.exec(v);return S.push(trimLine(v.slice(A),A>0,!1)),S.join("")}(String(v.value))};return h.patch(v,_),h.applyData(v,_)},thematicBreak:function(h,v){let _={type:"element",tagName:"hr",properties:{},children:[]};return h.patch(v,_),h.applyData(v,_)},toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}let a$={}.hasOwnProperty,aG={};function state_patch(h,v){h.position&&(v.position=function(h){let v=aU(h),_=aH(h);if(v&&_)return{start:v,end:_}}(h))}function applyData(h,v){let _=v;if(h&&h.data){let v=h.data.hName,b=h.data.hChildren,A=h.data.hProperties;if("string"==typeof v){if("element"===_.type)_.tagName=v;else{let h="children"in _?_.children:[_];_={type:"element",tagName:v,properties:{},children:h}}}"element"===_.type&&A&&Object.assign(_.properties,n$(A)),"children"in _&&_.children&&null!=b&&(_.children=b)}return _}function defaultUnknownHandler(h,v){let _=v.data||{},b="value"in v&&!(a$.call(_,"hProperties")||a$.call(_,"hChildren"))?{type:"text",value:v.value}:{type:"element",tagName:"div",properties:{},children:h.all(v)};return h.patch(v,b),h.applyData(v,b)}function wrap(h,v){let _=[],b=-1;for(v&&_.push({type:"text",value:"\n"});++b<h.length;)b&&_.push({type:"text",value:"\n"}),_.push(h[b]);return v&&h.length>0&&_.push({type:"text",value:"\n"}),_}function trimMarkdownSpaceStart(h){let v=0,_=h.charCodeAt(v);for(;9===_||32===_;)v++,_=h.charCodeAt(v);return h.slice(v)}function toHast(h,v){let _=function(h,v){let _=v||aG,b=new Map,A=new Map,S=new Map,C={...az,..._.handlers},w={all:function(h){let v=[];if("children"in h){let _=h.children,b=-1;for(;++b<_.length;){let A=w.one(_[b],h);if(A){if(b&&"break"===_[b-1].type&&(Array.isArray(A)||"text"!==A.type||(A.value=trimMarkdownSpaceStart(A.value)),!Array.isArray(A)&&"element"===A.type)){let h=A.children[0];h&&"text"===h.type&&(h.value=trimMarkdownSpaceStart(h.value))}Array.isArray(A)?v.push(...A):v.push(A)}}}return v},applyData,definitionById:b,footnoteById:A,footnoteCounts:S,footnoteOrder:[],handlers:C,one:function(h,v){let _=h.type,b=w.handlers[_];if(a$.call(w.handlers,_)&&b)return b(w,h,v);if(w.options.passThrough&&w.options.passThrough.includes(_)){if("children"in h){let{children:v,..._}=h,b=n$(_);return b.children=w.all(h),b}return n$(h)}let A=w.options.unknownHandler||defaultUnknownHandler;return A(w,h,v)},options:_,patch:state_patch,wrap};return visit(h,function(h){if("definition"===h.type||"footnoteDefinition"===h.type){let v="definition"===h.type?b:A,_=String(h.identifier).toUpperCase();v.has(_)||v.set(_,h)}}),w}(h,v),b=_.one(h,void 0),A=function(h){let v="string"==typeof h.options.clobberPrefix?h.options.clobberPrefix:"user-content-",_=h.options.footnoteBackContent||defaultFootnoteBackContent,b=h.options.footnoteBackLabel||defaultFootnoteBackLabel,A=h.options.footnoteLabel||"Footnotes",S=h.options.footnoteLabelTagName||"h2",C=h.options.footnoteLabelProperties||{className:["sr-only"]},w=[],O=-1;for(;++O<h.footnoteOrder.length;){let A=h.footnoteById.get(h.footnoteOrder[O]);if(!A)continue;let S=h.all(A),C=String(A.identifier).toUpperCase(),L=normalizeUri(C.toLowerCase()),M=0,F=[],U=h.footnoteCounts.get(C);for(;void 0!==U&&++M<=U;){F.length>0&&F.push({type:"text",value:" "});let h="string"==typeof _?_:_(O,M);"string"==typeof h&&(h={type:"text",value:h}),F.push({type:"element",tagName:"a",properties:{href:"#"+v+"fnref-"+L+(M>1?"-"+M:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof b?b:b(O,M),className:["data-footnote-backref"]},children:Array.isArray(h)?h:[h]})}let $=S[S.length-1];if($&&"element"===$.type&&"p"===$.tagName){let h=$.children[$.children.length-1];h&&"text"===h.type?h.value+=" ":$.children.push({type:"text",value:" "}),$.children.push(...F)}else S.push(...F);let G={type:"element",tagName:"li",properties:{id:v+"fn-"+L},children:h.wrap(S,!0)};h.patch(A,G),w.push(G)}if(0!==w.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:S,properties:{...n$(C),id:"footnote-label"},children:[{type:"text",value:A}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:h.wrap(w,!0)},{type:"text",value:"\n"}]}}(_),S=Array.isArray(b)?{type:"root",children:b}:b||{type:"root",children:[]};return A&&S.children.push({type:"text",value:"\n"},A),S}function remarkRehype(h,v){return h&&"run"in h?async function(_,b){let A=toHast(_,{file:b,...v});await h.run(A,b)}:function(_,b){return toHast(_,{file:b,...v||h})}}function bail(h){if(h)throw h}var aj=_(4470);function is_plain_obj_isPlainObject(h){if("object"!=typeof h||null===h)return!1;let v=Object.getPrototypeOf(h);return(null===v||v===Object.prototype||null===Object.getPrototypeOf(v))&&!(Symbol.toStringTag in h)&&!(Symbol.iterator in h)}function node_modules_unist_util_stringify_position_lib_point(h){return lib_index(h&&h.line)+":"+lib_index(h&&h.column)}function node_modules_unist_util_stringify_position_lib_position(h){return node_modules_unist_util_stringify_position_lib_point(h&&h.start)+"-"+node_modules_unist_util_stringify_position_lib_point(h&&h.end)}function lib_index(h){return h&&"number"==typeof h?h:1}let VFileMessage=class VFileMessage extends Error{constructor(h,v,_){var b;super(),"string"==typeof v&&(_=v,v=void 0);let A="",S={},C=!1;if(v&&(S="line"in v&&"column"in v?{place:v}:"start"in v&&"end"in v?{place:v}:"type"in v?{ancestors:[v],place:v.position}:{...v}),"string"==typeof h?A=h:!S.cause&&h&&(C=!0,A=h.message,S.cause=h),!S.ruleId&&!S.source&&"string"==typeof _){let h=_.indexOf(":");-1===h?S.ruleId=_:(S.source=_.slice(0,h),S.ruleId=_.slice(h+1))}if(!S.place&&S.ancestors&&S.ancestors){let h=S.ancestors[S.ancestors.length-1];h&&(S.place=h.position)}let w=S.place&&"start"in S.place?S.place.start:S.place;this.ancestors=S.ancestors||void 0,this.cause=S.cause||void 0,this.column=w?w.column:void 0,this.fatal=void 0,this.file,this.message=A,this.line=w?w.line:void 0,this.name=((b=S.place)&&"object"==typeof b?"position"in b||"type"in b?node_modules_unist_util_stringify_position_lib_position(b.position):"start"in b||"end"in b?node_modules_unist_util_stringify_position_lib_position(b):"line"in b||"column"in b?node_modules_unist_util_stringify_position_lib_point(b):"":"")||"1:1",this.place=S.place||void 0,this.reason=this.message,this.ruleId=S.ruleId||void 0,this.source=S.source||void 0,this.stack=C&&S.cause&&"string"==typeof S.cause.stack?S.cause.stack:"",this.actual,this.expected,this.note,this.url}};VFileMessage.prototype.file="",VFileMessage.prototype.name="",VFileMessage.prototype.reason="",VFileMessage.prototype.message="",VFileMessage.prototype.stack="",VFileMessage.prototype.column=void 0,VFileMessage.prototype.line=void 0,VFileMessage.prototype.ancestors=void 0,VFileMessage.prototype.cause=void 0,VFileMessage.prototype.fatal=void 0,VFileMessage.prototype.place=void 0,VFileMessage.prototype.ruleId=void 0,VFileMessage.prototype.source=void 0;let aV={basename:function(h,v){let _;if(void 0!==v&&"string"!=typeof v)throw TypeError('"ext" argument must be a string');assertPath(h);let b=0,A=-1,S=h.length;if(void 0===v||0===v.length||v.length>h.length){for(;S--;)if(47===h.codePointAt(S)){if(_){b=S+1;break}}else A<0&&(_=!0,A=S+1);return A<0?"":h.slice(b,A)}if(v===h)return"";let C=-1,w=v.length-1;for(;S--;)if(47===h.codePointAt(S)){if(_){b=S+1;break}}else C<0&&(_=!0,C=S+1),w>-1&&(h.codePointAt(S)===v.codePointAt(w--)?w<0&&(A=S):(w=-1,A=C));return b===A?A=C:A<0&&(A=h.length),h.slice(b,A)},dirname:function(h){let v;if(assertPath(h),0===h.length)return".";let _=-1,b=h.length;for(;--b;)if(47===h.codePointAt(b)){if(v){_=b;break}}else v||(v=!0);return _<0?47===h.codePointAt(0)?"/":".":1===_&&47===h.codePointAt(0)?"//":h.slice(0,_)},extname:function(h){let v;assertPath(h);let _=h.length,b=-1,A=0,S=-1,C=0;for(;_--;){let w=h.codePointAt(_);if(47===w){if(v){A=_+1;break}continue}b<0&&(v=!0,b=_+1),46===w?S<0?S=_:1!==C&&(C=1):S>-1&&(C=-1)}return S<0||b<0||0===C||1===C&&S===b-1&&S===A+1?"":h.slice(S,b)},join:function(...h){let v,_=-1;for(;++_<h.length;)assertPath(h[_]),h[_]&&(v=void 0===v?h[_]:v+"/"+h[_]);return void 0===v?".":function(h){assertPath(h);let v=47===h.codePointAt(0),_=function(h,v){let _,b,A="",S=0,C=-1,w=0,O=-1;for(;++O<=h.length;){if(O<h.length)_=h.codePointAt(O);else if(47===_)break;else _=47;if(47===_){if(C===O-1||1===w);else if(C!==O-1&&2===w){if(A.length<2||2!==S||46!==A.codePointAt(A.length-1)||46!==A.codePointAt(A.length-2)){if(A.length>2){if((b=A.lastIndexOf("/"))!==A.length-1){b<0?(A="",S=0):S=(A=A.slice(0,b)).length-1-A.lastIndexOf("/"),C=O,w=0;continue}}else if(A.length>0){A="",S=0,C=O,w=0;continue}}v&&(A=A.length>0?A+"/..":"..",S=2)}else A.length>0?A+="/"+h.slice(C+1,O):A=h.slice(C+1,O),S=O-C-1;C=O,w=0}else 46===_&&w>-1?w++:w=-1}return A}(h,!v);return 0!==_.length||v||(_="."),_.length>0&&47===h.codePointAt(h.length-1)&&(_+="/"),v?"/"+_:_}(v)},sep:"/"};function assertPath(h){if("string"!=typeof h)throw TypeError("Path must be a string. Received "+JSON.stringify(h))}function isUrl(h){return!!(null!==h&&"object"==typeof h&&"href"in h&&h.href&&"protocol"in h&&h.protocol&&void 0===h.auth)}let aW=["history","path","basename","stem","extname","dirname"];let VFile=class VFile{constructor(h){let v,_;v=h?isUrl(h)?{path:h}:"string"==typeof h||h&&"object"==typeof h&&"byteLength"in h&&"byteOffset"in h?{value:h}:h:{},this.cwd="/",this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let b=-1;for(;++b<aW.length;){let h=aW[b];h in v&&void 0!==v[h]&&null!==v[h]&&(this[h]="history"===h?[...v[h]]:v[h])}for(_ in v)aW.includes(_)||(this[_]=v[_])}get basename(){return"string"==typeof this.path?aV.basename(this.path):void 0}set basename(h){assertNonEmpty(h,"basename"),assertPart(h,"basename"),this.path=aV.join(this.dirname||"",h)}get dirname(){return"string"==typeof this.path?aV.dirname(this.path):void 0}set dirname(h){lib_assertPath(this.basename,"dirname"),this.path=aV.join(h||"",this.basename)}get extname(){return"string"==typeof this.path?aV.extname(this.path):void 0}set extname(h){if(assertPart(h,"extname"),lib_assertPath(this.dirname,"extname"),h){if(46!==h.codePointAt(0))throw Error("`extname` must start with `.`");if(h.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=aV.join(this.dirname,this.stem+(h||""))}get path(){return this.history[this.history.length-1]}set path(h){isUrl(h)&&(h=function(h){if("string"==typeof h)h=new URL(h);else if(!isUrl(h)){let v=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+h+"`");throw v.code="ERR_INVALID_ARG_TYPE",v}if("file:"!==h.protocol){let h=TypeError("The URL must be of scheme file");throw h.code="ERR_INVALID_URL_SCHEME",h}return function(h){if(""!==h.hostname){let h=TypeError('File URL host must be "localhost" or empty on darwin');throw h.code="ERR_INVALID_FILE_URL_HOST",h}let v=h.pathname,_=-1;for(;++_<v.length;)if(37===v.codePointAt(_)&&50===v.codePointAt(_+1)){let h=v.codePointAt(_+2);if(70===h||102===h){let h=TypeError("File URL path must not include encoded / characters");throw h.code="ERR_INVALID_FILE_URL_PATH",h}}return decodeURIComponent(v)}(h)}(h)),assertNonEmpty(h,"path"),this.path!==h&&this.history.push(h)}get stem(){return"string"==typeof this.path?aV.basename(this.path,this.extname):void 0}set stem(h){assertNonEmpty(h,"stem"),assertPart(h,"stem"),this.path=aV.join(this.dirname||"",h+(this.extname||""))}fail(h,v,_){let b=this.message(h,v,_);throw b.fatal=!0,b}info(h,v,_){let b=this.message(h,v,_);return b.fatal=void 0,b}message(h,v,_){let b=new VFileMessage(h,v,_);return this.path&&(b.name=this.path+":"+b.name,b.file=this.path),b.fatal=!1,this.messages.push(b),b}toString(h){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;let v=new TextDecoder(h||void 0);return v.decode(this.value)}};function assertPart(h,v){if(h&&h.includes(aV.sep))throw Error("`"+v+"` cannot be a path: did not expect `"+aV.sep+"`")}function assertNonEmpty(h,v){if(!h)throw Error("`"+v+"` cannot be empty")}function lib_assertPath(h,v){if(!h)throw Error("Setting `"+v+"` requires `path` to be set too")}let CallableInstance=function(h){let v=this.constructor,_=v.prototype,b=_[h],apply=function(){return b.apply(apply,arguments)};Object.setPrototypeOf(apply,_);let A=Object.getOwnPropertyNames(b);for(let h of A){let v=Object.getOwnPropertyDescriptor(b,h);v&&Object.defineProperty(apply,h,v)}return apply},aq={}.hasOwnProperty;let Processor=class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){let h=[],v={run:function(...v){let _=-1,b=v.pop();if("function"!=typeof b)throw TypeError("Expected function as last argument, not "+b);(function next(A,...S){let C=h[++_],w=-1;if(A){b(A);return}for(;++w<v.length;)(null===S[w]||void 0===S[w])&&(S[w]=v[w]);v=S,C?(function(h,v){let _;return function(...v){let b;let A=h.length>v.length;A&&v.push(done);try{b=h.apply(this,v)}catch(h){if(A&&_)throw h;return done(h)}A||(b instanceof Promise?b.then(then,done):b instanceof Error?done(b):then(b))};function done(h,...b){_||(_=!0,v(h,...b))}function then(h){done(null,h)}})(C,next)(...S):b(null,...S)})(null,...v)},use:function(_){if("function"!=typeof _)throw TypeError("Expected `middelware` to be a function, not "+_);return h.push(_),v}};return v}()}copy(){let h=new Processor,v=-1;for(;++v<this.attachers.length;){let _=this.attachers[v];h.use(..._)}return h.data(aj(!0,{},this.namespace)),h}data(h,v){return"string"==typeof h?2==arguments.length?(assertUnfrozen("data",this.frozen),this.namespace[h]=v,this):aq.call(this.namespace,h)&&this.namespace[h]||void 0:h?(assertUnfrozen("data",this.frozen),this.namespace=h,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[h,...v]=this.attachers[this.freezeIndex];if(!1===v[0])continue;!0===v[0]&&(v[0]=void 0);let _=h.call(this,...v);"function"==typeof _&&this.transformers.use(_)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(h){this.freeze();let v=vfile(h),_=this.parser||this.Parser;return assertParser("parse",_),_(String(v),v)}process(h,v){let _=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),v?executor(void 0,v):new Promise(executor);function executor(b,A){let S=vfile(h),C=_.parse(S);function realDone(h,_){h||!_?A(h):b?b(_):v(void 0,_)}_.run(C,S,function(h,v,b){if(h||!v||!b)return realDone(h);let A=_.stringify(v,b);"string"==typeof A||A&&"object"==typeof A&&"byteLength"in A&&"byteOffset"in A?b.value=A:b.result=A,realDone(h,b)})}}processSync(h){let v,_=!1;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(h,function(h,b){_=!0,bail(h),v=b}),assertDone("processSync","process",_),v}run(h,v,_){assertNode(h),this.freeze();let b=this.transformers;return _||"function"!=typeof v||(_=v,v=void 0),_?executor(void 0,_):new Promise(executor);function executor(A,S){let C=vfile(v);b.run(h,C,function(v,b,C){let w=b||h;v?S(v):A?A(w):_(void 0,w,C)})}}runSync(h,v){let _,b=!1;return this.run(h,v,function(h,v){bail(h),_=v,b=!0}),assertDone("runSync","run",b),_}stringify(h,v){this.freeze();let _=vfile(v),b=this.compiler||this.Compiler;return assertCompiler("stringify",b),assertNode(h),b(h,_)}use(h,...v){let _=this.attachers,b=this.namespace;if(assertUnfrozen("use",this.frozen),null==h);else if("function"==typeof h)addPlugin(h,v);else if("object"==typeof h)Array.isArray(h)?addList(h):addPreset(h);else throw TypeError("Expected usable value, not `"+h+"`");return this;function addPreset(h){if(!("plugins"in h)&&!("settings"in h))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");addList(h.plugins),h.settings&&(b.settings=aj(!0,b.settings,h.settings))}function addList(h){let v=-1;if(null==h);else if(Array.isArray(h))for(;++v<h.length;){let _=h[v];!function(h){if("function"==typeof h)addPlugin(h,[]);else if("object"==typeof h){if(Array.isArray(h)){let[v,..._]=h;addPlugin(v,_)}else addPreset(h)}else throw TypeError("Expected usable value, not `"+h+"`")}(_)}else throw TypeError("Expected a list of plugins, not `"+h+"`")}function addPlugin(h,v){let b=-1,A=-1;for(;++b<_.length;)if(_[b][0]===h){A=b;break}if(-1===A)_.push([h,...v]);else if(v.length>0){let[b,...S]=v,C=_[A][1];is_plain_obj_isPlainObject(C)&&is_plain_obj_isPlainObject(b)&&(b=aj(!0,C,b)),_[A]=[h,b,...S]}}}};let aY=new Processor().freeze();function assertParser(h,v){if("function"!=typeof v)throw TypeError("Cannot `"+h+"` without `parser`")}function assertCompiler(h,v){if("function"!=typeof v)throw TypeError("Cannot `"+h+"` without `compiler`")}function assertUnfrozen(h,v){if(v)throw Error("Cannot call `"+h+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(h){if(!is_plain_obj_isPlainObject(h)||"string"!=typeof h.type)throw TypeError("Expected node, got `"+h+"`")}function assertDone(h,v,_){if(!_)throw Error("`"+h+"` finished async. Use `"+v+"` instead")}function vfile(h){return h&&"object"==typeof h&&"message"in h&&"messages"in h?h:new VFile(h)}var aQ={exports:{}},aX={};aQ.exports=function(){if(eP)return aX;eP=1;var h=Symbol.for("react.element"),v=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,b=eV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function x(v,S,C){var w,O={},L=null,M=null;for(w in void 0!==C&&(L=""+C),void 0!==S.key&&(L=""+S.key),void 0!==S.ref&&(M=S.ref),S)_.call(S,w)&&!A.hasOwnProperty(w)&&(O[w]=S[w]);if(v&&v.defaultProps)for(w in S=v.defaultProps)void 0===O[w]&&(O[w]=S[w]);return{$$typeof:h,type:v,key:L,ref:M,props:O,_owner:b.current}}return aX.Fragment=v,aX.jsx=x,aX.jsxs=x,aX}();var aK=aQ.exports;async function mr(h){let v=await aY().use(remarkParse).use(remarkGfm).use(remarkRehype,{allowDangerousHtml:!0}).use(rehypeRaw).use(rehypeStringify).processSync(h);return String(v)}var aZ=_(4921);let aJ={annotations:[],manifest:void 0,searchString:void 0,options:{offset:0},vault:new Vault};function scroll_se(h,v){switch(v.type){case"updateAnnotations":return{...h,annotations:v.payload};case"updateSearchString":return{...h,searchString:v.payload};default:return h}}let a0=(0,eV.createContext)({dispatch:()=>null,state:aJ}),scroll_ce=h=>{let{children:v,manifest:_}=h,b={...aJ.options,...h.options},[A,S]=(0,eV.useReducer)(scroll_se,aJ);return eV.createElement(a0.Provider,{value:{state:{...A,manifest:_,options:b},dispatch:S}},v)},scroll_de=(h,v="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[v]){let v=Object.getOwnPropertyNames(h);if(v.length>0)return h[v[0]]}return h[v]&&Array.isArray(h[v])?h[v]:null},scroll_M=(h,v="none",_=", ")=>{let b=scroll_de(h,v);return Array.isArray(b)?b.join(`${_}`):b};function T(h,v){let _=Object.keys(h).filter(h=>v.includes(h)?null:h),b={};return _.forEach(v=>{b[v]=h[v]}),b}let{styled:a1,css:a2,keyframes:a3,createTheme:a4}=(0,eY.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),a5=a1("span",{}),scroll_F=h=>{let{as:v,label:_}=h,b=T(h,["as","label"]);return eV.createElement(a5,{as:v,...b},scroll_M(_,b.lang))};a1("img",{objectFit:"cover"}),a1("a",{});let a6={delimiter:", "},a8=(0,eV.createContext)(void 0),xe=()=>{let h=(0,eV.useContext)(a8);if(void 0===h)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return h},ve=({children:h,initialState:v=a6})=>{let _=we(v,"delimiter");return eV.createElement(a8.Provider,{value:{delimiter:_}},h)},we=(h,v)=>Object.hasOwn(h,v)?h[v].toString():void 0,a9=a1("span",{}),scroll_O=h=>{let{as:v,markup:_}=h,{delimiter:b}=xe();if(!_)return eV.createElement(eV.Fragment,null);let A=T(h,["as","markup"]),S={__html:nF(scroll_M(_,A.lang,b),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return eV.createElement(a9,{as:v,...A,dangerouslySetInnerHTML:S})},scroll_Se=h=>eV.useContext(a8)?eV.createElement(scroll_O,{...h}):eV.createElement(ve,null,eV.createElement(scroll_O,{...h}));a1("span",{}),a1("dl",{}),a1("li",{}),a1("ul",{}),a1("li",{}),a1("ul",{}),a1("dl",{}),a1("li",{}),a1("ul",{});let Ee=h=>{let{as:v,summary:_}=h,b=T(h,["as","customValueDelimiter","summary"]);return eV.createElement(scroll_Se,{as:v,markup:_,...b})},a7=a1("div",{display:"flex",flexDirection:"column",justifyContent:"space-between"}),oe=a1("aside",{margin:"0",padding:"0",position:"relative",zIndex:2,flexGrow:"1",flexShrink:"0",[`& ${a7}`]:{position:"absolute",width:"50%",top:0},"&.anchor":{[`& ${a7}`]:{position:"fixed",width:"50%"}}}),ot=a1("header",{display:"flex",justifyContent:"space-between",fontSize:"1",flexGrow:"1",flexShrink:"0",marginBottom:"1.618rem",strong:{fontWeight:"400",fontSize:"1.33rem"}}),or=a1("section",{margin:"0",gap:"1rem"}),ke=({label:h})=>eV.createElement(ot,null,eV.createElement("strong",null,eV.createElement(scroll_F,{label:h}))),oi=a1("article",{transition:"all 0.382s ease-in-out",display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"2.618rem"}),oo=a1("div",{transition:"$all",width:"50%",opacity:0,transform:"translateX(2.618rem)",zIndex:-1}),os=a1("div",{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}),ol=a1("hr",{margin:"0",borderColor:"transparent",height:"1.618rem",position:"relative",zIndex:0,display:"flex",justifyContent:"flex-end",marginTop:"2.618rem","&::before":{content:"attr(aria-label)",position:"absolute",right:"1.618rem",bottom:"0",zIndex:1,display:"flex",fontSize:"0.7222rem",fontWeight:"400",lineHeight:"1rem",background:"inherit",opacity:.7},"&::after":{content:"",width:"100%",position:"absolute",zIndex:0,height:"1px",background:"#6662"}}),oc=a1("div",{position:"relative",zIndex:"1",display:"flex",flexDirection:"column",gap:"2.618rem","&[data-figures-visible='true']":{[`& ${oo}`]:{opacity:1,zIndex:0,transform:"translateX(0)"}}}),scroll_e=({canvas:h,canvasInfo:{current:v,total:_}})=>eV.createElement("figcaption",null,eV.createElement("em",null,v," / ",_),(null==h?void 0:h.label)&&eV.createElement(scroll_F,{label:null==h?void 0:h.label}),(null==h?void 0:h.summary)&&eV.createElement(Ee,{summary:null==h?void 0:h.summary,as:"p"})),ou=window.OpenSeadragon;if(!ou&&!(ou=ej))throw Error("OpenSeadragon is missing.");let od="http://www.w3.org/2000/svg";ou.Viewer&&(ou.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new scroll_K(this)),this._svgOverlayInfo});let scroll_K=function(h){let v=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(od,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(od,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){v.resize()}),this._viewer.addHandler("open",function(){v.resize()}),this._viewer.addHandler("rotate",function(){v.resize()}),this._viewer.addHandler("flip",function(){v.resize()}),this._viewer.addHandler("resize",function(){v.resize()}),this.resize()};scroll_K.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new ou.Point(0,0),!0),v=this._viewer.viewport.getZoom(!0),_=this._viewer.viewport.getRotation(),b=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,S=A*v,C=S;b&&(S=-S,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+S+","+C+") rotate("+_+")")},onClick:function(h,v){new ou.MouseTracker({element:h,clickHandler:v}).setTracking(!0)}};let Be=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(v=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${v}`)}),Pe=h=>{let v,_;return Array.isArray(h)&&(v=h[0])&&(_="@id"in v?v["@id"]:v.id),_};var op=((ec=op||{}).TiledImage="tiledImage",ec.SimpleImage="simpleImage",ec);let Me=h=>{let v=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,_=v?Pe(null==h?void 0:h.service):null==h?void 0:h.id,b=v?op.TiledImage:op.SimpleImage;return{uri:_,imageType:b}},scroll_Te=(h,v)=>{let _=v?op.TiledImage:op.SimpleImage;return{uri:h,imageType:_}},oh=a1("div",{display:"flex",flexDirection:"column",alignItems:"center"}),om=a1("p",{fontWeight:"bold",fontSize:"x-large"}),of=a1("span",{fontSize:"medium"}),He=({error:h})=>{let{message:v}=h;return eV.createElement(oh,{role:"alert"},eV.createElement(om,{"data-testid":"headline"},"Something went wrong"),v&&eV.createElement(of,null,`Error message: ${v}`," "))},og=a1("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),oE=a1("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),ov=a1("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${og}`]:{display:"block"}},false:{[`${og}`]:{display:"none"}}}}}),oT=a1("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),E=({className:h,id:v,label:_,children:b})=>{let A=_.toLowerCase().replace(/\s/g,"-");return eV.createElement(oT,{id:v,className:h,"data-testid":"openseadragon-button","data-button":A},eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${v}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eV.createElement("title",{id:`${v}-svg-title`},_),b))},oy=a1("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),o_={annotationOverlays:{backgroundColor:"#6666ff",borderColor:"#000099",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",contentSearch:{searchResultsLimit:20,overlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:4}},ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:{behavior:"smooth",block:"center"}}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0,renderContentSearch:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1,localeText:{contentSearch:{tabLabel:"Search Results",formPlaceholder:"Enter search words",noSearchResults:"No search results",loading:"Loading...",moreResults:"more results"}}},ob=(eu=null==(eF=null==(eM=null==o_?void 0:o_.informationPanel)?void 0:eM.vtt)?void 0:eF.autoScroll,L={...o_.informationPanel.vtt.autoScroll},"object"==typeof eu&&(L="enabled"in eu?eu:{enabled:!0,settings:eu}),!1===eu&&(L.enabled=!1),function({behavior:h,block:v}){let _=["auto","instant","smooth"],b=["center","end","nearest","start"];if(!_.includes(h))throw TypeError(`'${h}' not in ${_.join(" | ")}`);if(!b.includes(v))throw TypeError(`'${v}' not in ${b.join(" | ")}`)}(L.settings),L),oA={activeCanvas:"",activeManifest:"",OSDImageLoaded:!1,collection:{},configOptions:o_,customDisplays:[],plugins:[],isAutoScrollEnabled:ob.enabled,isAutoScrolling:!1,isInformationOpen:null==(eB=null==o_?void 0:o_.informationPanel)?void 0:eB.open,isLoaded:!1,isUserScrolling:void 0,vault:new Vault,contentSearchVault:new Vault,openSeadragonViewer:null,viewerId:esm_browser_v4()},ox=eV.createContext(oA),oS=eV.createContext(oA);function scroll_W(){let h=eV.useContext(ox);if(void 0===h)throw Error("useViewerState must be used within a ViewerProvider");return h}function scroll_J(){let h=eV.useContext(oS);if(void 0===h)throw Error("useViewerDispatch must be used within a ViewerProvider");return h}let Ke=()=>eV.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),Ye=()=>eV.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),Je=()=>eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Qe=()=>eV.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),V=()=>eV.createElement(eV.Fragment,null,eV.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eV.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),et=({_cloverViewerHasPlaceholder:h,config:v})=>{let _=scroll_W(),{activeCanvas:b,plugins:A,vault:S}=_,C=S.get({id:b,type:"Canvas"});return eV.createElement(oy,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},v.showZoomControl&&eV.createElement(eV.Fragment,null,eV.createElement(E,{id:v.zoomInButton,label:"zoom in"},eV.createElement(Ke,null)),eV.createElement(E,{id:v.zoomOutButton,label:"zoom out"},eV.createElement(Ye,null))),v.showFullPageControl&&eV.createElement(E,{id:v.fullPageButton,label:"full page"},eV.createElement(Je,null)),v.showRotationControl&&eV.createElement(eV.Fragment,null,eV.createElement(E,{id:v.rotateRightButton,label:"rotate right"},eV.createElement(V,null)),eV.createElement(E,{id:v.rotateLeftButton,label:"rotate left"},eV.createElement(V,null))),v.showHomeControl&&eV.createElement(E,{id:v.homeButton,label:"reset"},eV.createElement(Qe,null)),A.filter(h=>{var v;return null==(v=h.imageViewer)?void 0:v.controls}).map((h,v)=>{var _,b,A,S;let w=null==(b=null==(_=h.imageViewer)?void 0:_.controls)?void 0:b.component;return eV.createElement(w,{key:v,...null==(S=null==(A=null==h?void 0:h.imageViewer)?void 0:A.controls)?void 0:S.componentProps,canvas:C,useViewerDispatch:scroll_J,useViewerState:scroll_W})}))},tt=({ariaLabel:h,config:v,uri:_,_cloverViewerHasPlaceholder:b,imageType:A,openSeadragonCallback:S})=>{let[C,w]=(0,eV.useState)(),[O,L]=(0,eV.useState)(),M=scroll_J(),F=(0,eV.useRef)(!1);return(0,eV.useEffect)(()=>(F.current||(F.current=!0,O||L(ej(v))),()=>null==O?void 0:O.destroy()),[]),(0,eV.useEffect)(()=>{O&&S&&S(O)},[O,S]),(0,eV.useEffect)(()=>{O&&_!==C&&(null==O||O.forceRedraw(),w(_))},[O,C,_]),(0,eV.useEffect)(()=>{if(C&&O)switch(A){case"simpleImage":null==O||O.addSimpleImage({url:C});break;case"tiledImage":Be(C).then(h=>{try{if(!h)throw Error(`No tile source found for ${C}`);null==O||O.addTiledImage({tileSource:h,success:()=>{"function"==typeof M&&M({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}})}catch(h){console.error(h)}});break;default:null==O||O.close(),console.warn(`Unable to render ${C} in OpenSeadragon as type: "${A}"`)}},[A,C]),eV.createElement(ov,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":v.id,hasNavigator:v.showNavigator},eV.createElement(et,{_cloverViewerHasPlaceholder:b,config:v}),v.showNavigator&&eV.createElement(og,{id:v.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eV.createElement(oE,{id:v.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},nt=({_cloverViewerHasPlaceholder:h=!1,body:v,instanceId:_,isTiledImage:b=!1,label:A,src:S="",openSeadragonCallback:C,openSeadragonConfig:w={}})=>{let O=_||esm_browser_v4(),L="string"==typeof A?A:scroll_M(A),M={id:`openseadragon-${O}`,navigatorId:`openseadragon-navigator-${O}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${O}`,homeButton:`reset-${O}`,rotateLeftButton:`rotateLeft-${O}`,rotateRightButton:`rotateRight-${O}`,zoomInButton:`zoomIn-${O}`,zoomOutButton:`zoomOut-${O}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...w},{imageType:F,uri:U}=v?Me(v):scroll_Te(S,b);return U?eV.createElement(ErrorBoundary,{FallbackComponent:He},eV.createElement(tt,{_cloverViewerHasPlaceholder:h,ariaLabel:L,config:M,imageType:F,key:O,uri:U,openSeadragonCallback:C})):null},oC=a1("div",{width:"100%",height:"400px",background:"#6662",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),it=({body:h,label:v})=>eV.createElement(oC,{"data-testid":"scroll-figure-image"},eV.createElement(nt,{body:h,openSeadragonConfig:{showNavigator:!1,showHomeControl:!1},...v&&{label:v}})),ow=a1("figure",{figcaption:{display:"flex",flexDirection:"column",margin:"1.618rem 0 0",opacity:.9,em:{fontSize:"0.9em",fontStyle:"normal",opacity:.7}}}),lt=(h,v,_,b)=>{var A,S;let C={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(C.canvas=h.get(v),C.canvas&&(C.annotationPage=h.get(C.canvas.items[0]),C.accompanyingCanvas=null!=(A=C.canvas)&&A.accompanyingCanvas?h.get(null==(S=C.canvas)?void 0:S.accompanyingCanvas):void 0),C.annotationPage){let A=h.get(C.annotationPage.items).map(v=>({body:h.get(v.body[0].id),motivation:v.motivation,type:"Annotation"})),S=[];A.forEach(v=>{"Choice"===v.body.type?v.body.items.forEach(_=>S.push({...v,id:_.id,body:h.get(_.id)})):S.push(v)}),C.annotations=S.filter(A=>{if(A){if(!A.body||!A.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",A);return}let S=A.body;Array.isArray(S)&&(S=S[0]);let C=h.get(S.id);if(C)switch(_){case"painting":return A.target===v.id&&A.motivation&&"painting"===A.motivation[0]&&b.includes(C.type)&&(A.body=C),!!A;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return C},st=(h,v)=>{let _=lt(h,{id:v,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==_.annotations.length&&_.annotations&&_.annotations)return _.annotations.map(h=>null==h?void 0:h.body)},ct=({canvas:h,canvasInfo:v})=>{let{state:_}=(0,eV.useContext)(a0),{vault:b}=_,A=st(b,h.id);return A?eV.createElement(ow,null,null==A?void 0:A.map(v=>eV.createElement(it,{body:v,key:null==v?void 0:v.id,label:null==h?void 0:h.label})),eV.createElement(scroll_e,{canvas:h,canvasInfo:v})):null},oI="255, 197, 32",oN=a1("div",{ul:{padding:"1rem"},li:{listStyleType:"disc",li:{listStyleType:"circle"}},"span.highlight":{position:"relative",fontWeight:"bold","&::before":{top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",borderRadius:"3px",border:`1px solid rgba(${oI}, 0.2)`,borderBottom:`1px solid rgba(${oI}, 0.618)`,boxShadow:"1px 1px 1px #6661"},"&::after":{left:"0",top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",marginTop:"-1px",borderRadius:"3px",backgroundColor:`rgba(${oI}, 0.2)`,zIndex:-1}}}),ut=({searchString:h="",content:v,stringLength:_=150})=>{let b=v.toLowerCase().indexOf(h.toLowerCase());if(-1!==b){let A=Math.max(0,b-_/2),S=Math.min(v.length,b+h.length+_/2);if(A>0){let h=v.lastIndexOf(" ",A+1);A=h>0?h+1:A}if(S<v.length){let h=v.indexOf(" ",S-1);S=h>-1?h:S}v=(A>0?"... ":"")+v.substring(A,S)+(S<v.length?" ...":"")}else v=v.substring(0,_)+"...";return v},scroll_Q=({body:h,stringLength:v,type:_="content"})=>{let b;let{state:A}=(0,eV.useContext)(a0),{searchString:S}=A,C=String(h.value);"snippet"==_&&(C=ut({searchString:S,content:C,stringLength:v}));let w=function(h){let[v,_]=eV.useState("");return eV.useEffect(()=>{(async()=>{let v=await mr(h);_(v)})()},[h]),{html:v,jsx:aK.jsx("div",{dangerouslySetInnerHTML:{__html:v}})}}(C);if("text/plain"===h.format&&(b=null==C?void 0:C.replace(/\n/g,"<br />")),"text/markdown"===h.format&&(b=null==w?void 0:w.html),"text/html"===h.format&&(b=C),S&&b){let h=RegExp(`(${S})`,"gi");b=null==b?void 0:b.replace(h,h=>`<span class="highlight">${h}</span>`)}let O=[h.id,_].join("-"),L=["ar"].includes(String(h.language));return b?eV.createElement(oN,{dangerouslySetInnerHTML:{__html:b},"data-body-id":O,"data-testid":"scroll-item-body",id:O,dir:L?"rtl":"ltr",css:{fontSize:L?"1.3em":"1em"}}):null},oO=eV.memo(({hasItemBreak:h,isLastItem:v,item:_,itemCount:b,itemNumber:A})=>{var S;let{state:C}=eV.useContext(a0),{annotations:w,vault:O}=C,L=null==O?void 0:O.get(_),M=null==(S=null==w?void 0:w.filter(h=>h.target===_.id))?void 0:S.map(h=>{var v;return null==(v=null==h?void 0:h.body)?void 0:v.map((h,v)=>eV.createElement(scroll_Q,{body:h,key:v}))}),F={current:A,total:b};return eV.createElement(oi,{"data-page-break":h,"data-page-number":A,"data-last-item":v},eV.createElement(oo,null,L&&eV.createElement(ct,{canvas:L,canvasInfo:F})),eV.createElement(os,null,(null==L?void 0:L.label)&&eV.createElement("strong",null,eV.createElement(scroll_F,{label:null==L?void 0:L.label})," ",`(${F.current} / ${F.total})`),eV.createElement("div",null,M||eV.createElement("p",null,"[Blank]")),h&&eV.createElement(ol,{"aria-label":"Page Break"})))}),oR="255, 197, 32",oL=a1("span",{fontWeight:"700"}),oD=a1("div",{display:"flex",gap:"0.25rem"}),oP=a1("div",{fontSize:"0.9rem",padding:"1rem 0.618rem"}),oM=a1("div",{display:"flex",flexDirection:"column",gap:"0.5rem",hr:{margin:"0.618rem",border:"none",borderBottom:"1px solid #6662"},button:{backgroundColor:"#6660",opacity:"0.7",transition:"$all",padding:"0.5rem 0.618rem",fontSize:"0.9rem",lineHeight:"1.1rem",textAlign:"left",borderRadius:"6px",border:"1px solid #6662",display:"flex",flexDirection:"column",gap:"0.25rem","&:hover":{opacity:"1",boxShadow:"5px 5px 13px #6662"},"&[data-result=true]":{backgroundColor:`rgba(${oR}, 0.2)`,borderColor:`rgba(${oR}, 0.2)`,opacity:"1","&:hover":{backgroundColor:`rgba(${oR}, 0.2)`}}}}),oF=a1("input",{margin:"0",padding:"0 1rem 0 2rem",background:"none",zIndex:"2",height:"2rem",marginLeft:"1rem",marginTop:"1rem",justifyContent:"center",display:"flex",alignItems:"center",fontSize:"1rem",borderRadius:"2rem",fontFamily:"inherit",backgroundColor:"$primary",border:"none",color:"$secondary",cursor:"text",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important",flexGrow:"0",width:"100%","&:placeholder":{color:"inherit"}}),oB=a1("span",{position:"absolute",zIndex:"3",width:"2rem",height:"2rem",padding:"8px",marginTop:"1rem",marginLeft:"1rem",color:"$secondary",fill:"$secondary",stroke:"$secondary",transition:"$all",cursor:"text"}),oH=a1("button",{opacity:"1",display:"flex",alignItems:"center",borderRadius:"2rem",width:"2rem",height:"2rem",alignSelf:"center",marginTop:"1rem",gap:"0.35rem",backgroundColor:"$accent",fill:"$secondary",flexShrink:"0",svg:{padding:"6px",color:"inherit",fill:"inherit"},'&[aria-disabled="true"]':{opacity:"0",display:"none"}}),oU=a1("form",{display:"flex",justifyContent:"space-between",gap:"1rem",width:"100%",variants:{isPanelExpanded:{true:{[`${oB}`]:{marginLeft:"0"},[`& ${oF}`]:{marginLeft:"0",backgroundColor:"$primary",width:"auto",flexGrow:"1"}},false:{}}}}),oz=a1("div",{}),scroll_D=({annotation:h,isResult:v})=>{var _,b;let A=[null==(_=null==h?void 0:h.body)?void 0:_.id,"content"].join("-"),l=h=>{var v;h&&(null==(v=document.getElementById(h))||v.scrollIntoView({behavior:"smooth"}))};return eV.createElement("button",{"data-result":v?"true":"false",onClick:()=>l(A),key:A},eV.createElement(oD,null,eV.createElement(oL,null,h.motivation),eV.createElement("span",null,null==(b=null==h?void 0:h.body)?void 0:b.language)),eV.createElement(scroll_Q,{body:h.body,stringLength:144,type:"snippet"}))},St=({results:h})=>eV.createElement(oM,null,h.found.map(h=>eV.createElement(scroll_D,{annotation:h,isResult:!0,key:h.id})),eV.createElement("hr",null),h.notFound.map(h=>eV.createElement(scroll_D,{annotation:h,key:h.id}))),o$={charset:"latin:extra, arabic:extra, cyrillic:extra, cjk:extra",optimize:!0,tokenize:"full",resolution:9,document:{id:"id",index:"content"}},bt=()=>{var h;let{state:v}=(0,eV.useContext)(a0),{annotations:_,searchString:b=""}=v,A=new aZ.Z.Document(o$),S=[];function i(h){return h.map(h=>null==_?void 0:_.filter(v=>v.body.find(v=>v.id===h)).map(v=>{let _=v.body.findIndex(v=>v.id===h);return{...v,body:v.body[_]}}).shift())}null==_||_.forEach(h=>{var v;null==(v=null==h?void 0:h.body)||v.forEach(h=>{var v;let _=null==(v=null==h?void 0:h.value)?void 0:v.replace(/\n/g,"");S.push(null==h?void 0:h.id),A.add({id:null==h?void 0:h.id,content:_})})});let C=null==A?void 0:A.search(b).reduce((h,v)=>[...new Set([...h,...v.result])],[]),w={found:i(C),notFound:i(S.filter(h=>!C.includes(h)))};return eV.createElement(oz,null,b&&eV.createElement(oP,null,null==(h=w.found)?void 0:h.length," results for ",eV.createElement("strong",null,b)),eV.createElement(St,{results:w}))},It=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Search"),eV.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),Ct=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Close"),eV.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),kt=({togglePanel:h,isPanelExpanded:v})=>{let{dispatch:_,state:b}=(0,eV.useContext)(a0),{searchString:A}=b,S=(0,eV.useRef)(null),s=()=>S.current===document.activeElement&&h(!0),a=()=>{var v;null==(v=S.current)||v.blur(),u(),h(!1),_({payload:"",type:"updateSearchString"})},u=()=>{S.current&&(S.current.value="")},p=h=>{"Escape"===h.key&&(h.preventDefault(),a())};return(0,eV.useEffect)(()=>(null==document||document.addEventListener("keydown",p),()=>{null==document||document.removeEventListener("keydown",p)}),[]),(0,eV.useEffect)(()=>{if(null!=S&&S.current)return S.current.addEventListener("focus",s),S.current.addEventListener("blur",s),()=>{S.current&&(S.current.removeEventListener("focus",s),S.current.removeEventListener("blur",s))}},[]),eV.createElement(oU,{id:"scroll-search",autoComplete:"off",isPanelExpanded:v},eV.createElement(oB,{onClick:()=>{var h;return null==(h=null==S?void 0:S.current)?void 0:h.focus()}},eV.createElement(It,null)),eV.createElement(oF,{ref:S,name:"clover-search",type:"text",placeholder:"Search...",defaultValue:A,onChange:h=>{var v;_({payload:null==(v=null==h?void 0:h.target)?void 0:v.value,type:"updateSearchString"})}}),eV.createElement(oH,{"aria-disabled":!v,"aria-label":"Close search panel",onClick:h=>{h.preventDefault(),a()},disabled:!v},eV.createElement(Ct,null)))},oG=a1("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maxWidth:"100%",marginTop:"1rem",transition:"$all",variants:{isPanelExpanded:{true:{zIndex:1,opacity:1,transform:"translateX(0)"},false:{zIndex:-1,opacity:0,transform:"translateX(-2.618rem)",transitionDelay:"0",transition:"none"}}}}),zt=h=>{let[v,_]=(0,eV.useState)({top:0,left:0});return(0,eV.useEffect)(()=>{let l=()=>{if(h.current){let v=h.current.getBoundingClientRect();_({top:v.top,left:v.left})}};return window.addEventListener("scroll",l),window.addEventListener("resize",l),l(),()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[h]),v},Lt=({isPanelExpanded:h,handlePanel:v})=>{var _;let b=(0,eV.useRef)(null),{state:A}=(0,eV.useContext)(a0),{options:S}=A,{offset:C}=S,{top:w}=zt(b),O=!!w&&w<C,L=null==(_=null==b?void 0:b.current)?void 0:_.offsetWidth,M=L&&.5*L,F={top:O?C:0,width:`calc(${M}px - 1.318rem)`,maxWidth:h?"100%":`${M?M-315:180}px`,minWidth:"130px"};return eV.createElement(oe,{ref:b,className:O?"anchor":"","data-testid":"scroll-panel"},eV.createElement(a7,{style:F},eV.createElement(kt,{togglePanel:v,isPanelExpanded:h}),eV.createElement(oG,{"data-testid":"scroll-panel-results","data-panel-expanded":h,isPanelExpanded:h},h&&eV.createElement(bt,null))))},At=({items:h})=>{let[v,_]=(0,eV.useState)(!1);return eV.createElement(eV.Fragment,null,eV.createElement(Lt,{isPanelExpanded:v,handlePanel:h=>_(h)}),eV.createElement(oc,{"data-figures-visible":!v},h.map((v,_)=>{let b=_+1,A=b===h.length;return eV.createElement(oO,{item:v,hasItemBreak:b<h.length,isLastItem:A,key:v.id,itemCount:h.length,itemNumber:b})})))},_t=(h,v)=>{let[_,b]=(0,eV.useState)([]);return(0,eV.useEffect)(()=>{if(!v)return;let _=[];null==h||h.forEach(h=>{var b;let A=v.get(h);null==(b=null==A?void 0:A.annotations)||b.forEach(h=>{var b;let A=v.get(h);null==(b=null==A?void 0:A.items)||b.forEach(h=>{var b;let A=v.get(h);A&&_.push({...A,body:null==(b=null==A?void 0:A.body)?void 0:b.map(h=>v.get(h))})})})});let A=_.reduce((h,v)=>(h.some(h=>h.id===v.id)||h.push(v),h),[]);b(A)},[h,v]),_},Bt=({iiifContent:h})=>{let[v,_]=(0,eV.useState)(),{state:b,dispatch:A}=(0,eV.useContext)(a0),{vault:S}=b,C=_t(null==v?void 0:v.items,S);return(0,eV.useEffect)(()=>{S&&S.load(h).then(h=>h&&_(h)).catch(v=>console.error(`Manifest ${h} failed to load: ${v}`))},[h,S]),(0,eV.useEffect)(()=>{A({type:"updateAnnotations",payload:C})},[C,A]),v?eV.createElement(or,null,v.label&&eV.createElement(ke,{label:v.label}),v.items&&eV.createElement(At,{items:v.items})):null},Xt=({iiifContent:h,options:v})=>eV.createElement(scroll_ce,{options:v},eV.createElement(Bt,{iiifContent:h}));function ssr_window_esm_isObject(h){return null!==h&&"object"==typeof h&&"constructor"in h&&h.constructor===Object}function ssr_window_esm_extend(h={},v={}){Object.keys(v).forEach(_=>{void 0===h[_]?h[_]=v[_]:ssr_window_esm_isObject(v[_])&&ssr_window_esm_isObject(h[_])&&Object.keys(v[_]).length>0&&ssr_window_esm_extend(h[_],v[_])})}let oj={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ssr_window_esm_getDocument(){let h="undefined"!=typeof document?document:{};return ssr_window_esm_extend(h,oj),h}let oV={document:oj,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:h=>"undefined"==typeof setTimeout?(h(),null):setTimeout(h,0),cancelAnimationFrame(h){"undefined"!=typeof setTimeout&&clearTimeout(h)}};function ssr_window_esm_getWindow(){let h="undefined"!=typeof window?window:{};return ssr_window_esm_extend(h,oV),h}function utils_nextTick(h,v=0){return setTimeout(h,v)}function utils_now(){return Date.now()}function utils_isObject(h){return"object"==typeof h&&null!==h&&h.constructor&&"Object"===Object.prototype.toString.call(h).slice(8,-1)}function utils_extend(...h){let v=Object(h[0]),_=["__proto__","constructor","prototype"];for(let b=1;b<h.length;b+=1){let A=h[b];if(null!=A&&("undefined"!=typeof window&&void 0!==window.HTMLElement?!(A instanceof HTMLElement):!A||1!==A.nodeType&&11!==A.nodeType)){let h=Object.keys(Object(A)).filter(h=>0>_.indexOf(h));for(let _=0,b=h.length;_<b;_+=1){let b=h[_],S=Object.getOwnPropertyDescriptor(A,b);void 0!==S&&S.enumerable&&(utils_isObject(v[b])&&utils_isObject(A[b])?A[b].__swiper__?v[b]=A[b]:utils_extend(v[b],A[b]):!utils_isObject(v[b])&&utils_isObject(A[b])?(v[b]={},A[b].__swiper__?v[b]=A[b]:utils_extend(v[b],A[b])):v[b]=A[b])}}}return v}function utils_setCSSProperty(h,v,_){h.style.setProperty(v,_)}function animateCSSModeScroll({swiper:h,targetPosition:v,side:_}){let b;let A=ssr_window_esm_getWindow(),S=-h.translate,C=null,w=h.params.speed;h.wrapperEl.style.scrollSnapType="none",A.cancelAnimationFrame(h.cssModeFrameID);let O=v>S?"next":"prev",isOutOfBound=(h,v)=>"next"===O&&h>=v||"prev"===O&&h<=v,animate=()=>{b=new Date().getTime(),null===C&&(C=b);let O=Math.max(Math.min((b-C)/w,1),0),L=S+(.5-Math.cos(O*Math.PI)/2)*(v-S);if(isOutOfBound(L,v)&&(L=v),h.wrapperEl.scrollTo({[_]:L}),isOutOfBound(L,v)){h.wrapperEl.style.overflow="hidden",h.wrapperEl.style.scrollSnapType="",setTimeout(()=>{h.wrapperEl.style.overflow="",h.wrapperEl.scrollTo({[_]:L})}),A.cancelAnimationFrame(h.cssModeFrameID);return}h.cssModeFrameID=A.requestAnimationFrame(animate)};animate()}function utils_elementChildren(h,v=""){return[...h.children].filter(h=>h.matches(v))}function utils_createElement(h,v=[]){let _=document.createElement(h);return _.classList.add(...Array.isArray(v)?v:[v]),_}function elementStyle(h,v){let _=ssr_window_esm_getWindow();return _.getComputedStyle(h,null).getPropertyValue(v)}function utils_elementIndex(h){let v,_=h;if(_){for(v=0;null!==(_=_.previousSibling);)1===_.nodeType&&(v+=1);return v}}function utils_elementOuterSize(h,v,_){let b=ssr_window_esm_getWindow();return _?h["width"===v?"offsetWidth":"offsetHeight"]+parseFloat(b.getComputedStyle(h,null).getPropertyValue("width"===v?"margin-right":"margin-top"))+parseFloat(b.getComputedStyle(h,null).getPropertyValue("width"===v?"margin-left":"margin-bottom")):h.offsetWidth}function getSupport(){return S||(S=function(){let h=ssr_window_esm_getWindow(),v=ssr_window_esm_getDocument();return{smoothScroll:v.documentElement&&v.documentElement.style&&"scrollBehavior"in v.documentElement.style,touch:!!("ontouchstart"in h||h.DocumentTouch&&v instanceof h.DocumentTouch)}}()),S}let processLazyPreloader=(h,v)=>{if(!h||h.destroyed||!h.params)return;let _=v.closest(h.isElement?"swiper-slide":`.${h.params.slideClass}`);if(_){let v=_.querySelector(`.${h.params.lazyPreloaderClass}`);v&&v.remove()}},unlazy=(h,v)=>{if(!h.slides[v])return;let _=h.slides[v].querySelector('[loading="lazy"]');_&&_.removeAttribute("loading")},preload=h=>{if(!h||h.destroyed||!h.params)return;let v=h.params.lazyPreloadPrevNext,_=h.slides.length;if(!_||!v||v<0)return;v=Math.min(v,_);let b="auto"===h.params.slidesPerView?h.slidesPerViewDynamic():Math.ceil(h.params.slidesPerView),A=h.activeIndex;if(h.params.grid&&h.params.grid.rows>1){let _=[A-v];_.push(...Array.from({length:v}).map((h,v)=>A+b+v)),h.slides.forEach((v,b)=>{_.includes(v.column)&&unlazy(h,b)});return}let S=A+b-1;if(h.params.rewind||h.params.loop)for(let b=A-v;b<=S+v;b+=1){let v=(b%_+_)%_;(v<A||v>S)&&unlazy(h,v)}else for(let b=Math.max(A-v,0);b<=Math.min(S+v,_-1);b+=1)b!==A&&(b>S||b<A)&&unlazy(h,b)};function transitionEmit({swiper:h,runCallbacks:v,direction:_,step:b}){let{activeIndex:A,previousIndex:S}=h,C=_;if(C||(C=A>S?"next":A<S?"prev":"reset"),h.emit(`transition${b}`),v&&A!==S){if("reset"===C){h.emit(`slideResetTransition${b}`);return}h.emit(`slideChangeTransition${b}`),"next"===C?h.emit(`slideNextTransition${b}`):h.emit(`slidePrevTransition${b}`)}}function onTouchStart(h){let v=ssr_window_esm_getDocument(),_=ssr_window_esm_getWindow(),b=this.touchEventsData;b.evCache.push(h);let{params:A,touches:S,enabled:C}=this;if(!C||!A.simulateTouch&&"mouse"===h.pointerType||this.animating&&A.preventInteractionOnTransition)return;!this.animating&&A.cssMode&&A.loop&&this.loopFix();let w=h;w.originalEvent&&(w=w.originalEvent);let O=w.target;if("wrapper"===A.touchEventsTarget&&!this.wrapperEl.contains(O)||"which"in w&&3===w.which||"button"in w&&w.button>0||b.isTouched&&b.isMoved)return;let L=!!A.noSwipingClass&&""!==A.noSwipingClass,M=h.composedPath?h.composedPath():h.path;L&&w.target&&w.target.shadowRoot&&M&&(O=M[0]);let F=A.noSwipingSelector?A.noSwipingSelector:`.${A.noSwipingClass}`,U=!!(w.target&&w.target.shadowRoot);if(A.noSwiping&&(U?function(h,v=this){return function __closestFrom(v){if(!v||v===ssr_window_esm_getDocument()||v===ssr_window_esm_getWindow())return null;v.assignedSlot&&(v=v.assignedSlot);let _=v.closest(h);return _||v.getRootNode?_||__closestFrom(v.getRootNode().host):null}(v)}(F,O):O.closest(F))){this.allowClick=!0;return}if(A.swipeHandler&&!O.closest(A.swipeHandler))return;S.currentX=w.pageX,S.currentY=w.pageY;let $=S.currentX,G=S.currentY,j=A.edgeSwipeDetection||A.iOSEdgeSwipeDetection,Q=A.edgeSwipeThreshold||A.iOSEdgeSwipeThreshold;if(j&&($<=Q||$>=_.innerWidth-Q)){if("prevent"!==j)return;h.preventDefault()}Object.assign(b,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),S.startX=$,S.startY=G,b.touchStartTime=utils_now(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,A.threshold>0&&(b.allowThresholdMove=!1);let X=!0;O.matches(b.focusableElements)&&(X=!1,"SELECT"===O.nodeName&&(b.isTouched=!1)),v.activeElement&&v.activeElement.matches(b.focusableElements)&&v.activeElement!==O&&v.activeElement.blur();let K=X&&this.allowTouchMove&&A.touchStartPreventDefault;(A.touchStartForcePreventDefault||K)&&!O.isContentEditable&&w.preventDefault(),A.freeMode&&A.freeMode.enabled&&this.freeMode&&this.animating&&!A.cssMode&&this.freeMode.onTouchStart(),this.emit("touchStart",w)}function onTouchMove(h){let v;let _=ssr_window_esm_getDocument(),b=this.touchEventsData,{params:A,touches:S,rtlTranslate:C,enabled:w}=this;if(!w||!A.simulateTouch&&"mouse"===h.pointerType)return;let O=h;if(O.originalEvent&&(O=O.originalEvent),!b.isTouched){b.startMoving&&b.isScrolling&&this.emit("touchMoveOpposite",O);return}let L=b.evCache.findIndex(h=>h.pointerId===O.pointerId);L>=0&&(b.evCache[L]=O);let M=b.evCache.length>1?b.evCache[0]:O,F=M.pageX,U=M.pageY;if(O.preventedByNestedSwiper){S.startX=F,S.startY=U;return}if(!this.allowTouchMove){O.target.matches(b.focusableElements)||(this.allowClick=!1),b.isTouched&&(Object.assign(S,{startX:F,startY:U,prevX:this.touches.currentX,prevY:this.touches.currentY,currentX:F,currentY:U}),b.touchStartTime=utils_now());return}if(A.touchReleaseOnEdges&&!A.loop){if(this.isVertical()){if(U<S.startY&&this.translate<=this.maxTranslate()||U>S.startY&&this.translate>=this.minTranslate()){b.isTouched=!1,b.isMoved=!1;return}}else if(F<S.startX&&this.translate<=this.maxTranslate()||F>S.startX&&this.translate>=this.minTranslate())return}if(_.activeElement&&O.target===_.activeElement&&O.target.matches(b.focusableElements)){b.isMoved=!0,this.allowClick=!1;return}if(b.allowTouchCallbacks&&this.emit("touchMove",O),O.targetTouches&&O.targetTouches.length>1)return;S.currentX=F,S.currentY=U;let $=S.currentX-S.startX,G=S.currentY-S.startY;if(this.params.threshold&&Math.sqrt($**2+G**2)<this.params.threshold)return;if(void 0===b.isScrolling){let h;this.isHorizontal()&&S.currentY===S.startY||this.isVertical()&&S.currentX===S.startX?b.isScrolling=!1:$*$+G*G>=25&&(h=180*Math.atan2(Math.abs(G),Math.abs($))/Math.PI,b.isScrolling=this.isHorizontal()?h>A.touchAngle:90-h>A.touchAngle)}if(b.isScrolling&&this.emit("touchMoveOpposite",O),void 0===b.startMoving&&(S.currentX!==S.startX||S.currentY!==S.startY)&&(b.startMoving=!0),b.isScrolling||this.zoom&&this.params.zoom&&this.params.zoom.enabled&&b.evCache.length>1){b.isTouched=!1;return}if(!b.startMoving)return;this.allowClick=!1,!A.cssMode&&O.cancelable&&O.preventDefault(),A.touchMoveStopPropagation&&!A.nested&&O.stopPropagation();let j=this.isHorizontal()?$:G,Q=this.isHorizontal()?S.currentX-S.previousX:S.currentY-S.previousY;A.oneWayMovement&&(j=Math.abs(j)*(C?1:-1),Q=Math.abs(Q)*(C?1:-1)),S.diff=j,j*=A.touchRatio,C&&(j=-j,Q=-Q);let X=this.touchesDirection;this.swipeDirection=j>0?"prev":"next",this.touchesDirection=Q>0?"prev":"next";let K=this.params.loop&&!A.cssMode;if(!b.isMoved){if(K&&this.loopFix({direction:this.swipeDirection}),b.startTranslate=this.getTranslate(),this.setTransition(0),this.animating){let h=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});this.wrapperEl.dispatchEvent(h)}b.allowMomentumBounce=!1,A.grabCursor&&(!0===this.allowSlideNext||!0===this.allowSlidePrev)&&this.setGrabCursor(!0),this.emit("sliderFirstMove",O)}b.isMoved&&X!==this.touchesDirection&&K&&Math.abs(j)>=1&&(this.loopFix({direction:this.swipeDirection,setTranslate:!0}),v=!0),this.emit("sliderMove",O),b.isMoved=!0,b.currentTranslate=j+b.startTranslate;let Z=!0,J=A.resistanceRatio;if(A.touchReleaseOnEdges&&(J=0),j>0?(K&&!v&&b.currentTranslate>(A.centeredSlides?this.minTranslate()-this.size/2:this.minTranslate())&&this.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),b.currentTranslate>this.minTranslate()&&(Z=!1,A.resistance&&(b.currentTranslate=this.minTranslate()-1+(-this.minTranslate()+b.startTranslate+j)**J))):j<0&&(K&&!v&&b.currentTranslate<(A.centeredSlides?this.maxTranslate()+this.size/2:this.maxTranslate())&&this.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:this.slides.length-("auto"===A.slidesPerView?this.slidesPerViewDynamic():Math.ceil(parseFloat(A.slidesPerView,10)))}),b.currentTranslate<this.maxTranslate()&&(Z=!1,A.resistance&&(b.currentTranslate=this.maxTranslate()+1-(this.maxTranslate()-b.startTranslate-j)**J))),Z&&(O.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&b.currentTranslate<b.startTranslate&&(b.currentTranslate=b.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&b.currentTranslate>b.startTranslate&&(b.currentTranslate=b.startTranslate),this.allowSlidePrev||this.allowSlideNext||(b.currentTranslate=b.startTranslate),A.threshold>0){if(Math.abs(j)>A.threshold||b.allowThresholdMove){if(!b.allowThresholdMove){b.allowThresholdMove=!0,S.startX=S.currentX,S.startY=S.currentY,b.currentTranslate=b.startTranslate,S.diff=this.isHorizontal()?S.currentX-S.startX:S.currentY-S.startY;return}}else{b.currentTranslate=b.startTranslate;return}}A.followFinger&&!A.cssMode&&((A.freeMode&&A.freeMode.enabled&&this.freeMode||A.watchSlidesProgress)&&(this.updateActiveIndex(),this.updateSlidesClasses()),A.freeMode&&A.freeMode.enabled&&this.freeMode&&this.freeMode.onTouchMove(),this.updateProgress(b.currentTranslate),this.setTranslate(b.currentTranslate))}function onTouchEnd(h){let v;let _=this,b=_.touchEventsData,A=b.evCache.findIndex(v=>v.pointerId===h.pointerId);if(A>=0&&b.evCache.splice(A,1),["pointercancel","pointerout","pointerleave"].includes(h.type)){let v="pointercancel"===h.type&&(_.browser.isSafari||_.browser.isWebView);if(!v)return}let{params:S,touches:C,rtlTranslate:w,slidesGrid:O,enabled:L}=_;if(!L||!S.simulateTouch&&"mouse"===h.pointerType)return;let M=h;if(M.originalEvent&&(M=M.originalEvent),b.allowTouchCallbacks&&_.emit("touchEnd",M),b.allowTouchCallbacks=!1,!b.isTouched){b.isMoved&&S.grabCursor&&_.setGrabCursor(!1),b.isMoved=!1,b.startMoving=!1;return}S.grabCursor&&b.isMoved&&b.isTouched&&(!0===_.allowSlideNext||!0===_.allowSlidePrev)&&_.setGrabCursor(!1);let F=utils_now(),U=F-b.touchStartTime;if(_.allowClick){let h=M.path||M.composedPath&&M.composedPath();_.updateClickedSlide(h&&h[0]||M.target),_.emit("tap click",M),U<300&&F-b.lastClickTime<300&&_.emit("doubleTap doubleClick",M)}if(b.lastClickTime=utils_now(),utils_nextTick(()=>{_.destroyed||(_.allowClick=!0)}),!b.isTouched||!b.isMoved||!_.swipeDirection||0===C.diff||b.currentTranslate===b.startTranslate){b.isTouched=!1,b.isMoved=!1,b.startMoving=!1;return}if(b.isTouched=!1,b.isMoved=!1,b.startMoving=!1,v=S.followFinger?w?_.translate:-_.translate:-b.currentTranslate,S.cssMode)return;if(S.freeMode&&S.freeMode.enabled){_.freeMode.onTouchEnd({currentPos:v});return}let $=0,G=_.slidesSizesGrid[0];for(let h=0;h<O.length;h+=h<S.slidesPerGroupSkip?1:S.slidesPerGroup){let _=h<S.slidesPerGroupSkip-1?1:S.slidesPerGroup;void 0!==O[h+_]?v>=O[h]&&v<O[h+_]&&($=h,G=O[h+_]-O[h]):v>=O[h]&&($=h,G=O[O.length-1]-O[O.length-2])}let j=null,Q=null;S.rewind&&(_.isBeginning?Q=S.virtual&&S.virtual.enabled&&_.virtual?_.virtual.slides.length-1:_.slides.length-1:_.isEnd&&(j=0));let X=(v-O[$])/G,K=$<S.slidesPerGroupSkip-1?1:S.slidesPerGroup;if(U>S.longSwipesMs){if(!S.longSwipes){_.slideTo(_.activeIndex);return}"next"===_.swipeDirection&&(X>=S.longSwipesRatio?_.slideTo(S.rewind&&_.isEnd?j:$+K):_.slideTo($)),"prev"===_.swipeDirection&&(X>1-S.longSwipesRatio?_.slideTo($+K):null!==Q&&X<0&&Math.abs(X)>S.longSwipesRatio?_.slideTo(Q):_.slideTo($))}else{if(!S.shortSwipes){_.slideTo(_.activeIndex);return}let h=_.navigation&&(M.target===_.navigation.nextEl||M.target===_.navigation.prevEl);h?M.target===_.navigation.nextEl?_.slideTo($+K):_.slideTo($):("next"===_.swipeDirection&&_.slideTo(null!==j?j:$+K),"prev"===_.swipeDirection&&_.slideTo(null!==Q?Q:$))}}function onResize(){let h=this,{params:v,el:_}=h;if(_&&0===_.offsetWidth)return;v.breakpoints&&h.setBreakpoint();let{allowSlideNext:b,allowSlidePrev:A,snapGrid:S}=h,C=h.virtual&&h.params.virtual.enabled;h.allowSlideNext=!0,h.allowSlidePrev=!0,h.updateSize(),h.updateSlides(),h.updateSlidesClasses();let w=C&&v.loop;"auto"!==v.slidesPerView&&!(v.slidesPerView>1)||!h.isEnd||h.isBeginning||h.params.centeredSlides||w?h.params.loop&&!C?h.slideToLoop(h.realIndex,0,!1,!0):h.slideTo(h.activeIndex,0,!1,!0):h.slideTo(h.slides.length-1,0,!1,!0),h.autoplay&&h.autoplay.running&&h.autoplay.paused&&(clearTimeout(h.autoplay.resizeTimeout),h.autoplay.resizeTimeout=setTimeout(()=>{h.autoplay&&h.autoplay.running&&h.autoplay.paused&&h.autoplay.resume()},500)),h.allowSlidePrev=A,h.allowSlideNext=b,h.params.watchOverflow&&S!==h.snapGrid&&h.checkOverflow()}function onClick(h){this.enabled&&!this.allowClick&&(this.params.preventClicks&&h.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(h.stopPropagation(),h.stopImmediatePropagation()))}function onScroll(){let{wrapperEl:h,rtlTranslate:v,enabled:_}=this;if(!_)return;this.previousTranslate=this.translate,this.isHorizontal()?this.translate=-h.scrollLeft:this.translate=-h.scrollTop,0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();let b=this.maxTranslate()-this.minTranslate();(0===b?0:(this.translate-this.minTranslate())/b)!==this.progress&&this.updateProgress(v?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}function onLoad(h){processLazyPreloader(this,h.target),!this.params.cssMode&&("auto"===this.params.slidesPerView||this.params.autoHeight)&&this.update()}let oW=!1;function dummyEventListener(){}let events=(h,v)=>{let _=ssr_window_esm_getDocument(),{params:b,el:A,wrapperEl:S,device:C}=h,w=!!b.nested,O="on"===v?"addEventListener":"removeEventListener";A[O]("pointerdown",h.onTouchStart,{passive:!1}),_[O]("pointermove",h.onTouchMove,{passive:!1,capture:w}),_[O]("pointerup",h.onTouchEnd,{passive:!0}),_[O]("pointercancel",h.onTouchEnd,{passive:!0}),_[O]("pointerout",h.onTouchEnd,{passive:!0}),_[O]("pointerleave",h.onTouchEnd,{passive:!0}),(b.preventClicks||b.preventClicksPropagation)&&A[O]("click",h.onClick,!0),b.cssMode&&S[O]("scroll",h.onScroll),b.updateOnWindowResize?h[v](C.ios||C.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):h[v]("observerUpdate",onResize,!0),A[O]("load",h.onLoad,{capture:!0})},isGridEnabled=(h,v)=>h.grid&&v.grid&&v.grid.rows>1;var oq={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};let oY={eventsEmitter:{on(h,v,_){let b=this;if(!b.eventsListeners||b.destroyed||"function"!=typeof v)return b;let A=_?"unshift":"push";return h.split(" ").forEach(h=>{b.eventsListeners[h]||(b.eventsListeners[h]=[]),b.eventsListeners[h][A](v)}),b},once(h,v,_){let b=this;if(!b.eventsListeners||b.destroyed||"function"!=typeof v)return b;function onceHandler(..._){b.off(h,onceHandler),onceHandler.__emitterProxy&&delete onceHandler.__emitterProxy,v.apply(b,_)}return onceHandler.__emitterProxy=v,b.on(h,onceHandler,_)},onAny(h,v){return!this.eventsListeners||this.destroyed||"function"!=typeof h||0>this.eventsAnyListeners.indexOf(h)&&this.eventsAnyListeners[v?"unshift":"push"](h),this},offAny(h){if(!this.eventsListeners||this.destroyed||!this.eventsAnyListeners)return this;let v=this.eventsAnyListeners.indexOf(h);return v>=0&&this.eventsAnyListeners.splice(v,1),this},off(h,v){let _=this;return _.eventsListeners&&!_.destroyed&&_.eventsListeners&&h.split(" ").forEach(h=>{void 0===v?_.eventsListeners[h]=[]:_.eventsListeners[h]&&_.eventsListeners[h].forEach((b,A)=>{(b===v||b.__emitterProxy&&b.__emitterProxy===v)&&_.eventsListeners[h].splice(A,1)})}),_},emit(...h){let v,_,b;let A=this;if(!A.eventsListeners||A.destroyed||!A.eventsListeners)return A;"string"==typeof h[0]||Array.isArray(h[0])?(v=h[0],_=h.slice(1,h.length),b=A):(v=h[0].events,_=h[0].data,b=h[0].context||A),_.unshift(b);let S=Array.isArray(v)?v:v.split(" ");return S.forEach(h=>{A.eventsAnyListeners&&A.eventsAnyListeners.length&&A.eventsAnyListeners.forEach(v=>{v.apply(b,[h,..._])}),A.eventsListeners&&A.eventsListeners[h]&&A.eventsListeners[h].forEach(h=>{h.apply(b,_)})}),A}},update:{updateSize:function(){let h,v;let _=this.el;h=void 0!==this.params.width&&null!==this.params.width?this.params.width:_.clientWidth,v=void 0!==this.params.height&&null!==this.params.height?this.params.height:_.clientHeight,0===h&&this.isHorizontal()||0===v&&this.isVertical()||(h=h-parseInt(elementStyle(_,"padding-left")||0,10)-parseInt(elementStyle(_,"padding-right")||0,10),v=v-parseInt(elementStyle(_,"padding-top")||0,10)-parseInt(elementStyle(_,"padding-bottom")||0,10),Number.isNaN(h)&&(h=0),Number.isNaN(v)&&(v=0),Object.assign(this,{width:h,height:v,size:this.isHorizontal()?h:v}))},updateSlides:function(){let h;let v=this;function getDirectionLabel(h){return v.isHorizontal()?h:({width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"})[h]}function getDirectionPropertyValue(h,v){return parseFloat(h.getPropertyValue(getDirectionLabel(v))||0)}let _=v.params,{wrapperEl:b,slidesEl:A,size:S,rtlTranslate:C,wrongRTL:w}=v,O=v.virtual&&_.virtual.enabled,L=O?v.virtual.slides.length:v.slides.length,M=utils_elementChildren(A,`.${v.params.slideClass}, swiper-slide`),F=O?v.virtual.slides.length:M.length,U=[],$=[],G=[],j=_.slidesOffsetBefore;"function"==typeof j&&(j=_.slidesOffsetBefore.call(v));let Q=_.slidesOffsetAfter;"function"==typeof Q&&(Q=_.slidesOffsetAfter.call(v));let X=v.snapGrid.length,K=v.slidesGrid.length,Z=_.spaceBetween,J=-j,en=0,ei=0;if(void 0===S)return;"string"==typeof Z&&Z.indexOf("%")>=0?Z=parseFloat(Z.replace("%",""))/100*S:"string"==typeof Z&&(Z=parseFloat(Z)),v.virtualSize=-Z,M.forEach(h=>{C?h.style.marginLeft="":h.style.marginRight="",h.style.marginBottom="",h.style.marginTop=""}),_.centeredSlides&&_.cssMode&&(utils_setCSSProperty(b,"--swiper-centered-offset-before",""),utils_setCSSProperty(b,"--swiper-centered-offset-after",""));let ea=_.grid&&_.grid.rows>1&&v.grid;ea&&v.grid.initSlides(F);let eo="auto"===_.slidesPerView&&_.breakpoints&&Object.keys(_.breakpoints).filter(h=>void 0!==_.breakpoints[h].slidesPerView).length>0;for(let b=0;b<F;b+=1){let A;if(h=0,M[b]&&(A=M[b]),ea&&v.grid.updateSlide(b,A,F,getDirectionLabel),!M[b]||"none"!==elementStyle(A,"display")){if("auto"===_.slidesPerView){eo&&(M[b].style[getDirectionLabel("width")]="");let S=getComputedStyle(A),C=A.style.transform,w=A.style.webkitTransform;if(C&&(A.style.transform="none"),w&&(A.style.webkitTransform="none"),_.roundLengths)h=v.isHorizontal()?utils_elementOuterSize(A,"width",!0):utils_elementOuterSize(A,"height",!0);else{let v=getDirectionPropertyValue(S,"width"),_=getDirectionPropertyValue(S,"padding-left"),b=getDirectionPropertyValue(S,"padding-right"),C=getDirectionPropertyValue(S,"margin-left"),w=getDirectionPropertyValue(S,"margin-right"),O=S.getPropertyValue("box-sizing");if(O&&"border-box"===O)h=v+C+w;else{let{clientWidth:S,offsetWidth:O}=A;h=v+_+b+C+w+(O-S)}}C&&(A.style.transform=C),w&&(A.style.webkitTransform=w),_.roundLengths&&(h=Math.floor(h))}else h=(S-(_.slidesPerView-1)*Z)/_.slidesPerView,_.roundLengths&&(h=Math.floor(h)),M[b]&&(M[b].style[getDirectionLabel("width")]=`${h}px`);M[b]&&(M[b].swiperSlideSize=h),G.push(h),_.centeredSlides?(J=J+h/2+en/2+Z,0===en&&0!==b&&(J=J-S/2-Z),0===b&&(J=J-S/2-Z),.001>Math.abs(J)&&(J=0),_.roundLengths&&(J=Math.floor(J)),ei%_.slidesPerGroup==0&&U.push(J),$.push(J)):(_.roundLengths&&(J=Math.floor(J)),(ei-Math.min(v.params.slidesPerGroupSkip,ei))%v.params.slidesPerGroup==0&&U.push(J),$.push(J),J=J+h+Z),v.virtualSize+=h+Z,en=h,ei+=1}}if(v.virtualSize=Math.max(v.virtualSize,S)+Q,C&&w&&("slide"===_.effect||"coverflow"===_.effect)&&(b.style.width=`${v.virtualSize+Z}px`),_.setWrapperSize&&(b.style[getDirectionLabel("width")]=`${v.virtualSize+Z}px`),ea&&v.grid.updateWrapperSize(h,U,getDirectionLabel),!_.centeredSlides){let h=[];for(let b=0;b<U.length;b+=1){let A=U[b];_.roundLengths&&(A=Math.floor(A)),U[b]<=v.virtualSize-S&&h.push(A)}U=h,Math.floor(v.virtualSize-S)-Math.floor(U[U.length-1])>1&&U.push(v.virtualSize-S)}if(O&&_.loop){let h=G[0]+Z;if(_.slidesPerGroup>1){let b=Math.ceil((v.virtual.slidesBefore+v.virtual.slidesAfter)/_.slidesPerGroup),A=h*_.slidesPerGroup;for(let h=0;h<b;h+=1)U.push(U[U.length-1]+A)}for(let b=0;b<v.virtual.slidesBefore+v.virtual.slidesAfter;b+=1)1===_.slidesPerGroup&&U.push(U[U.length-1]+h),$.push($[$.length-1]+h),v.virtualSize+=h}if(0===U.length&&(U=[0]),0!==Z){let h=v.isHorizontal()&&C?"marginLeft":getDirectionLabel("marginRight");M.filter((h,v)=>!_.cssMode||!!_.loop||v!==M.length-1).forEach(v=>{v.style[h]=`${Z}px`})}if(_.centeredSlides&&_.centeredSlidesBounds){let h=0;G.forEach(v=>{h+=v+(Z||0)}),h-=Z;let v=h-S;U=U.map(h=>h<=0?-j:h>v?v+Q:h)}if(_.centerInsufficientSlides){let h=0;if(G.forEach(v=>{h+=v+(Z||0)}),(h-=Z)<S){let v=(S-h)/2;U.forEach((h,_)=>{U[_]=h-v}),$.forEach((h,_)=>{$[_]=h+v})}}if(Object.assign(v,{slides:M,snapGrid:U,slidesGrid:$,slidesSizesGrid:G}),_.centeredSlides&&_.cssMode&&!_.centeredSlidesBounds){utils_setCSSProperty(b,"--swiper-centered-offset-before",`${-U[0]}px`),utils_setCSSProperty(b,"--swiper-centered-offset-after",`${v.size/2-G[G.length-1]/2}px`);let h=-v.snapGrid[0],_=-v.slidesGrid[0];v.snapGrid=v.snapGrid.map(v=>v+h),v.slidesGrid=v.slidesGrid.map(h=>h+_)}if(F!==L&&v.emit("slidesLengthChange"),U.length!==X&&(v.params.watchOverflow&&v.checkOverflow(),v.emit("snapGridLengthChange")),$.length!==K&&v.emit("slidesGridLengthChange"),_.watchSlidesProgress&&v.updateSlidesOffset(),!O&&!_.cssMode&&("slide"===_.effect||"fade"===_.effect)){let h=`${_.containerModifierClass}backface-hidden`,b=v.el.classList.contains(h);F<=_.maxBackfaceHiddenSlides?b||v.el.classList.add(h):b&&v.el.classList.remove(h)}},updateAutoHeight:function(h){let v;let _=this,b=[],A=_.virtual&&_.params.virtual.enabled,S=0;"number"==typeof h?_.setTransition(h):!0===h&&_.setTransition(_.params.speed);let getSlideByIndex=h=>A?_.slides[_.getSlideIndexByData(h)]:_.slides[h];if("auto"!==_.params.slidesPerView&&_.params.slidesPerView>1){if(_.params.centeredSlides)(_.visibleSlides||[]).forEach(h=>{b.push(h)});else for(v=0;v<Math.ceil(_.params.slidesPerView);v+=1){let h=_.activeIndex+v;if(h>_.slides.length&&!A)break;b.push(getSlideByIndex(h))}}else b.push(getSlideByIndex(_.activeIndex));for(v=0;v<b.length;v+=1)if(void 0!==b[v]){let h=b[v].offsetHeight;S=h>S?h:S}(S||0===S)&&(_.wrapperEl.style.height=`${S}px`)},updateSlidesOffset:function(){let h=this.slides,v=this.isElement?this.isHorizontal()?this.wrapperEl.offsetLeft:this.wrapperEl.offsetTop:0;for(let _=0;_<h.length;_+=1)h[_].swiperSlideOffset=(this.isHorizontal()?h[_].offsetLeft:h[_].offsetTop)-v-this.cssOverflowAdjustment()},updateSlidesProgress:function(h=this&&this.translate||0){let v=this.params,{slides:_,rtlTranslate:b,snapGrid:A}=this;if(0===_.length)return;void 0===_[0].swiperSlideOffset&&this.updateSlidesOffset();let S=-h;b&&(S=h),_.forEach(h=>{h.classList.remove(v.slideVisibleClass)}),this.visibleSlidesIndexes=[],this.visibleSlides=[];let C=v.spaceBetween;"string"==typeof C&&C.indexOf("%")>=0?C=parseFloat(C.replace("%",""))/100*this.size:"string"==typeof C&&(C=parseFloat(C));for(let h=0;h<_.length;h+=1){let w=_[h],O=w.swiperSlideOffset;v.cssMode&&v.centeredSlides&&(O-=_[0].swiperSlideOffset);let L=(S+(v.centeredSlides?this.minTranslate():0)-O)/(w.swiperSlideSize+C),M=(S-A[0]+(v.centeredSlides?this.minTranslate():0)-O)/(w.swiperSlideSize+C),F=-(S-O),U=F+this.slidesSizesGrid[h],$=F>=0&&F<this.size-1||U>1&&U<=this.size||F<=0&&U>=this.size;$&&(this.visibleSlides.push(w),this.visibleSlidesIndexes.push(h),_[h].classList.add(v.slideVisibleClass)),w.progress=b?-L:L,w.originalProgress=b?-M:M}},updateProgress:function(h){if(void 0===h){let v=this.rtlTranslate?-1:1;h=this&&this.translate&&this.translate*v||0}let v=this.params,_=this.maxTranslate()-this.minTranslate(),{progress:b,isBeginning:A,isEnd:S,progressLoop:C}=this,w=A,O=S;if(0===_)b=0,A=!0,S=!0;else{b=(h-this.minTranslate())/_;let v=1>Math.abs(h-this.minTranslate()),C=1>Math.abs(h-this.maxTranslate());A=v||b<=0,S=C||b>=1,v&&(b=0),C&&(b=1)}if(v.loop){let v=this.getSlideIndexByData(0),_=this.getSlideIndexByData(this.slides.length-1),b=this.slidesGrid[v],A=this.slidesGrid[_],S=this.slidesGrid[this.slidesGrid.length-1],w=Math.abs(h);(C=w>=b?(w-b)/S:(w+S-A)/S)>1&&(C-=1)}Object.assign(this,{progress:b,progressLoop:C,isBeginning:A,isEnd:S}),(v.watchSlidesProgress||v.centeredSlides&&v.autoHeight)&&this.updateSlidesProgress(h),A&&!w&&this.emit("reachBeginning toEdge"),S&&!O&&this.emit("reachEnd toEdge"),(w&&!A||O&&!S)&&this.emit("fromEdge"),this.emit("progress",b)},updateSlidesClasses:function(){let h;let{slides:v,params:_,slidesEl:b,activeIndex:A}=this,S=this.virtual&&_.virtual.enabled,getFilteredSlide=h=>utils_elementChildren(b,`.${_.slideClass}${h}, swiper-slide${h}`)[0];if(v.forEach(h=>{h.classList.remove(_.slideActiveClass,_.slideNextClass,_.slidePrevClass)}),S){if(_.loop){let v=A-this.virtual.slidesBefore;v<0&&(v=this.virtual.slides.length+v),v>=this.virtual.slides.length&&(v-=this.virtual.slides.length),h=getFilteredSlide(`[data-swiper-slide-index="${v}"]`)}else h=getFilteredSlide(`[data-swiper-slide-index="${A}"]`)}else h=v[A];if(h){h.classList.add(_.slideActiveClass);let b=function(h,v){let _=[];for(;h.nextElementSibling;){let b=h.nextElementSibling;v?b.matches(v)&&_.push(b):_.push(b),h=b}return _}(h,`.${_.slideClass}, swiper-slide`)[0];_.loop&&!b&&(b=v[0]),b&&b.classList.add(_.slideNextClass);let A=function(h,v){let _=[];for(;h.previousElementSibling;){let b=h.previousElementSibling;v?b.matches(v)&&_.push(b):_.push(b),h=b}return _}(h,`.${_.slideClass}, swiper-slide`)[0];_.loop,A&&A.classList.add(_.slidePrevClass)}this.emitSlidesClasses()},updateActiveIndex:function(h){let v,_;let b=this,A=b.rtlTranslate?b.translate:-b.translate,{snapGrid:S,params:C,activeIndex:w,realIndex:O,snapIndex:L}=b,M=h,getVirtualRealIndex=h=>{let v=h-b.virtual.slidesBefore;return v<0&&(v=b.virtual.slides.length+v),v>=b.virtual.slides.length&&(v-=b.virtual.slides.length),v};if(void 0===M&&(M=function(h){let v;let{slidesGrid:_,params:b}=h,A=h.rtlTranslate?h.translate:-h.translate;for(let h=0;h<_.length;h+=1)void 0!==_[h+1]?A>=_[h]&&A<_[h+1]-(_[h+1]-_[h])/2?v=h:A>=_[h]&&A<_[h+1]&&(v=h+1):A>=_[h]&&(v=h);return b.normalizeSlideIndex&&(v<0||void 0===v)&&(v=0),v}(b)),S.indexOf(A)>=0)v=S.indexOf(A);else{let h=Math.min(C.slidesPerGroupSkip,M);v=h+Math.floor((M-h)/C.slidesPerGroup)}if(v>=S.length&&(v=S.length-1),M===w){v!==L&&(b.snapIndex=v,b.emit("snapIndexChange")),b.params.loop&&b.virtual&&b.params.virtual.enabled&&(b.realIndex=getVirtualRealIndex(M));return}_=b.virtual&&C.virtual.enabled&&C.loop?getVirtualRealIndex(M):b.slides[M]?parseInt(b.slides[M].getAttribute("data-swiper-slide-index")||M,10):M,Object.assign(b,{previousSnapIndex:L,snapIndex:v,previousRealIndex:O,realIndex:_,previousIndex:w,activeIndex:M}),b.initialized&&preload(b),b.emit("activeIndexChange"),b.emit("snapIndexChange"),O!==_&&b.emit("realIndexChange"),(b.initialized||b.params.runCallbacksOnInit)&&b.emit("slideChange")},updateClickedSlide:function(h){let v;let _=this.params,b=h.closest(`.${_.slideClass}, swiper-slide`),A=!1;if(b){for(let h=0;h<this.slides.length;h+=1)if(this.slides[h]===b){A=!0,v=h;break}}if(b&&A)this.clickedSlide=b,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(b.getAttribute("data-swiper-slide-index"),10):this.clickedIndex=v;else{this.clickedSlide=void 0,this.clickedIndex=void 0;return}_.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},translate:{getTranslate:function(h=this.isHorizontal()?"x":"y"){let{params:v,rtlTranslate:_,translate:b,wrapperEl:A}=this;if(v.virtualTranslate)return _?-b:b;if(v.cssMode)return b;let S=function(h,v="x"){let _,b,A;let S=ssr_window_esm_getWindow(),C=function(h){let v;let _=ssr_window_esm_getWindow();return _.getComputedStyle&&(v=_.getComputedStyle(h,null)),!v&&h.currentStyle&&(v=h.currentStyle),v||(v=h.style),v}(h,null);return S.WebKitCSSMatrix?((b=C.transform||C.webkitTransform).split(",").length>6&&(b=b.split(", ").map(h=>h.replace(",",".")).join(", ")),A=new S.WebKitCSSMatrix("none"===b?"":b)):_=(A=C.MozTransform||C.OTransform||C.MsTransform||C.msTransform||C.transform||C.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===v&&(b=S.WebKitCSSMatrix?A.m41:16===_.length?parseFloat(_[12]):parseFloat(_[4])),"y"===v&&(b=S.WebKitCSSMatrix?A.m42:16===_.length?parseFloat(_[13]):parseFloat(_[5])),b||0}(A,h);return S+=this.cssOverflowAdjustment(),_&&(S=-S),S||0},setTranslate:function(h,v){let{rtlTranslate:_,params:b,wrapperEl:A,progress:S}=this,C=0,w=0;this.isHorizontal()?C=_?-h:h:w=h,b.roundLengths&&(C=Math.floor(C),w=Math.floor(w)),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?C:w,b.cssMode?A[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-C:-w:b.virtualTranslate||(this.isHorizontal()?C-=this.cssOverflowAdjustment():w-=this.cssOverflowAdjustment(),A.style.transform=`translate3d(${C}px, ${w}px, 0px)`);let O=this.maxTranslate()-this.minTranslate();(0===O?0:(h-this.minTranslate())/O)!==S&&this.updateProgress(h),this.emit("setTranslate",this.translate,v)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(h=0,v=this.params.speed,_=!0,b=!0,A){let S;let C=this,{params:w,wrapperEl:O}=C;if(C.animating&&w.preventInteractionOnTransition)return!1;let L=C.minTranslate(),M=C.maxTranslate();if(S=b&&h>L?L:b&&h<M?M:h,C.updateProgress(S),w.cssMode){let h=C.isHorizontal();if(0===v)O[h?"scrollLeft":"scrollTop"]=-S;else{if(!C.support.smoothScroll)return animateCSSModeScroll({swiper:C,targetPosition:-S,side:h?"left":"top"}),!0;O.scrollTo({[h?"left":"top"]:-S,behavior:"smooth"})}return!0}return 0===v?(C.setTransition(0),C.setTranslate(S),_&&(C.emit("beforeTransitionStart",v,A),C.emit("transitionEnd"))):(C.setTransition(v),C.setTranslate(S),_&&(C.emit("beforeTransitionStart",v,A),C.emit("transitionStart")),C.animating||(C.animating=!0,C.onTranslateToWrapperTransitionEnd||(C.onTranslateToWrapperTransitionEnd=function(h){C&&!C.destroyed&&h.target===this&&(C.wrapperEl.removeEventListener("transitionend",C.onTranslateToWrapperTransitionEnd),C.onTranslateToWrapperTransitionEnd=null,delete C.onTranslateToWrapperTransitionEnd,_&&C.emit("transitionEnd"))}),C.wrapperEl.addEventListener("transitionend",C.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(h,v){this.params.cssMode||(this.wrapperEl.style.transitionDuration=`${h}ms`),this.emit("setTransition",h,v)},transitionStart:function(h=!0,v){let{params:_}=this;_.cssMode||(_.autoHeight&&this.updateAutoHeight(),transitionEmit({swiper:this,runCallbacks:h,direction:v,step:"Start"}))},transitionEnd:function(h=!0,v){let{params:_}=this;this.animating=!1,_.cssMode||(this.setTransition(0),transitionEmit({swiper:this,runCallbacks:h,direction:v,step:"End"}))}},slide:{slideTo:function(h=0,v=this.params.speed,_=!0,b,A){let S;"string"==typeof h&&(h=parseInt(h,10));let C=this,w=h;w<0&&(w=0);let{params:O,snapGrid:L,slidesGrid:M,previousIndex:F,activeIndex:U,rtlTranslate:$,wrapperEl:G,enabled:j}=C;if(C.animating&&O.preventInteractionOnTransition||!j&&!b&&!A)return!1;let Q=Math.min(C.params.slidesPerGroupSkip,w),X=Q+Math.floor((w-Q)/C.params.slidesPerGroup);X>=L.length&&(X=L.length-1);let K=-L[X];if(O.normalizeSlideIndex)for(let h=0;h<M.length;h+=1){let v=-Math.floor(100*K),_=Math.floor(100*M[h]),b=Math.floor(100*M[h+1]);void 0!==M[h+1]?v>=_&&v<b-(b-_)/2?w=h:v>=_&&v<b&&(w=h+1):v>=_&&(w=h)}if(C.initialized&&w!==U&&(!C.allowSlideNext&&($?K>C.translate&&K>C.minTranslate():K<C.translate&&K<C.minTranslate())||!C.allowSlidePrev&&K>C.translate&&K>C.maxTranslate()&&(U||0)!==w))return!1;if(w!==(F||0)&&_&&C.emit("beforeSlideChangeStart"),C.updateProgress(K),S=w>U?"next":w<U?"prev":"reset",$&&-K===C.translate||!$&&K===C.translate)return C.updateActiveIndex(w),O.autoHeight&&C.updateAutoHeight(),C.updateSlidesClasses(),"slide"!==O.effect&&C.setTranslate(K),"reset"!==S&&(C.transitionStart(_,S),C.transitionEnd(_,S)),!1;if(O.cssMode){let h=C.isHorizontal(),_=$?K:-K;if(0===v){let v=C.virtual&&C.params.virtual.enabled;v&&(C.wrapperEl.style.scrollSnapType="none",C._immediateVirtual=!0),v&&!C._cssModeVirtualInitialSet&&C.params.initialSlide>0?(C._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{G[h?"scrollLeft":"scrollTop"]=_})):G[h?"scrollLeft":"scrollTop"]=_,v&&requestAnimationFrame(()=>{C.wrapperEl.style.scrollSnapType="",C._immediateVirtual=!1})}else{if(!C.support.smoothScroll)return animateCSSModeScroll({swiper:C,targetPosition:_,side:h?"left":"top"}),!0;G.scrollTo({[h?"left":"top"]:_,behavior:"smooth"})}return!0}return C.setTransition(v),C.setTranslate(K),C.updateActiveIndex(w),C.updateSlidesClasses(),C.emit("beforeTransitionStart",v,b),C.transitionStart(_,S),0===v?C.transitionEnd(_,S):C.animating||(C.animating=!0,C.onSlideToWrapperTransitionEnd||(C.onSlideToWrapperTransitionEnd=function(h){C&&!C.destroyed&&h.target===this&&(C.wrapperEl.removeEventListener("transitionend",C.onSlideToWrapperTransitionEnd),C.onSlideToWrapperTransitionEnd=null,delete C.onSlideToWrapperTransitionEnd,C.transitionEnd(_,S))}),C.wrapperEl.addEventListener("transitionend",C.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(h=0,v=this.params.speed,_=!0,b){if("string"==typeof h){let v=parseInt(h,10);h=v}let A=h;return this.params.loop&&(this.virtual&&this.params.virtual.enabled?A+=this.virtual.slidesBefore:A=this.getSlideIndexByData(A)),this.slideTo(A,v,_,b)},slideNext:function(h=this.params.speed,v=!0,_){let{enabled:b,params:A,animating:S}=this;if(!b)return this;let C=A.slidesPerGroup;"auto"===A.slidesPerView&&1===A.slidesPerGroup&&A.slidesPerGroupAuto&&(C=Math.max(this.slidesPerViewDynamic("current",!0),1));let w=this.activeIndex<A.slidesPerGroupSkip?1:C,O=this.virtual&&A.virtual.enabled;if(A.loop){if(S&&!O&&A.loopPreventsSliding)return!1;this.loopFix({direction:"next"}),this._clientLeft=this.wrapperEl.clientLeft}return A.rewind&&this.isEnd?this.slideTo(0,h,v,_):this.slideTo(this.activeIndex+w,h,v,_)},slidePrev:function(h=this.params.speed,v=!0,_){let{params:b,snapGrid:A,slidesGrid:S,rtlTranslate:C,enabled:w,animating:O}=this;if(!w)return this;let L=this.virtual&&b.virtual.enabled;if(b.loop){if(O&&!L&&b.loopPreventsSliding)return!1;this.loopFix({direction:"prev"}),this._clientLeft=this.wrapperEl.clientLeft}let M=C?this.translate:-this.translate;function normalize(h){return h<0?-Math.floor(Math.abs(h)):Math.floor(h)}let F=normalize(M),U=A.map(h=>normalize(h)),$=A[U.indexOf(F)-1];if(void 0===$&&b.cssMode){let h;A.forEach((v,_)=>{F>=v&&(h=_)}),void 0!==h&&($=A[h>0?h-1:h])}let G=0;if(void 0!==$&&((G=S.indexOf($))<0&&(G=this.activeIndex-1),"auto"===b.slidesPerView&&1===b.slidesPerGroup&&b.slidesPerGroupAuto&&(G=Math.max(G=G-this.slidesPerViewDynamic("previous",!0)+1,0))),b.rewind&&this.isBeginning){let b=this.params.virtual&&this.params.virtual.enabled&&this.virtual?this.virtual.slides.length-1:this.slides.length-1;return this.slideTo(b,h,v,_)}return this.slideTo(G,h,v,_)},slideReset:function(h=this.params.speed,v=!0,_){return this.slideTo(this.activeIndex,h,v,_)},slideToClosest:function(h=this.params.speed,v=!0,_,b=.5){let A=this.activeIndex,S=Math.min(this.params.slidesPerGroupSkip,A),C=S+Math.floor((A-S)/this.params.slidesPerGroup),w=this.rtlTranslate?this.translate:-this.translate;if(w>=this.snapGrid[C]){let h=this.snapGrid[C],v=this.snapGrid[C+1];w-h>(v-h)*b&&(A+=this.params.slidesPerGroup)}else{let h=this.snapGrid[C-1],v=this.snapGrid[C];w-h<=(v-h)*b&&(A-=this.params.slidesPerGroup)}return A=Math.min(A=Math.max(A,0),this.slidesGrid.length-1),this.slideTo(A,h,v,_)},slideToClickedSlide:function(){let h;let v=this,{params:_,slidesEl:b}=v,A="auto"===_.slidesPerView?v.slidesPerViewDynamic():_.slidesPerView,S=v.clickedIndex,C=v.isElement?"swiper-slide":`.${_.slideClass}`;if(_.loop){if(v.animating)return;h=parseInt(v.clickedSlide.getAttribute("data-swiper-slide-index"),10),_.centeredSlides?S<v.loopedSlides-A/2||S>v.slides.length-v.loopedSlides+A/2?(v.loopFix(),S=v.getSlideIndex(utils_elementChildren(b,`${C}[data-swiper-slide-index="${h}"]`)[0]),utils_nextTick(()=>{v.slideTo(S)})):v.slideTo(S):S>v.slides.length-A?(v.loopFix(),S=v.getSlideIndex(utils_elementChildren(b,`${C}[data-swiper-slide-index="${h}"]`)[0]),utils_nextTick(()=>{v.slideTo(S)})):v.slideTo(S)}else v.slideTo(S)}},loop:{loopCreate:function(h){let{params:v,slidesEl:_}=this;if(!v.loop||this.virtual&&this.params.virtual.enabled)return;let b=utils_elementChildren(_,`.${v.slideClass}, swiper-slide`);b.forEach((h,v)=>{h.setAttribute("data-swiper-slide-index",v)}),this.loopFix({slideRealIndex:h,direction:v.centeredSlides?void 0:"next"})},loopFix:function({slideRealIndex:h,slideTo:v=!0,direction:_,setTranslate:b,activeSlideIndex:A,byController:S,byMousewheel:C}={}){let w=this;if(!w.params.loop)return;w.emit("beforeLoopFix");let{slides:O,allowSlidePrev:L,allowSlideNext:M,slidesEl:F,params:U}=w;if(w.allowSlidePrev=!0,w.allowSlideNext=!0,w.virtual&&U.virtual.enabled){v&&(U.centeredSlides||0!==w.snapIndex?U.centeredSlides&&w.snapIndex<U.slidesPerView?w.slideTo(w.virtual.slides.length+w.snapIndex,0,!1,!0):w.snapIndex===w.snapGrid.length-1&&w.slideTo(w.virtual.slidesBefore,0,!1,!0):w.slideTo(w.virtual.slides.length,0,!1,!0)),w.allowSlidePrev=L,w.allowSlideNext=M,w.emit("loopFix");return}let $="auto"===U.slidesPerView?w.slidesPerViewDynamic():Math.ceil(parseFloat(U.slidesPerView,10)),G=U.loopedSlides||$;G%U.slidesPerGroup!=0&&(G+=U.slidesPerGroup-G%U.slidesPerGroup),w.loopedSlides=G;let j=[],Q=[],X=w.activeIndex;void 0===A?A=w.getSlideIndex(w.slides.filter(h=>h.classList.contains(U.slideActiveClass))[0]):X=A;let K="next"===_||!_,Z="prev"===_||!_,J=0,en=0;if(A<G){J=Math.max(G-A,U.slidesPerGroup);for(let h=0;h<G-A;h+=1){let v=h-Math.floor(h/O.length)*O.length;j.push(O.length-v-1)}}else if(A>w.slides.length-2*G){en=Math.max(A-(w.slides.length-2*G),U.slidesPerGroup);for(let h=0;h<en;h+=1){let v=h-Math.floor(h/O.length)*O.length;Q.push(v)}}if(Z&&j.forEach(h=>{w.slides[h].swiperLoopMoveDOM=!0,F.prepend(w.slides[h]),w.slides[h].swiperLoopMoveDOM=!1}),K&&Q.forEach(h=>{w.slides[h].swiperLoopMoveDOM=!0,F.append(w.slides[h]),w.slides[h].swiperLoopMoveDOM=!1}),w.recalcSlides(),"auto"===U.slidesPerView&&w.updateSlides(),U.watchSlidesProgress&&w.updateSlidesOffset(),v){if(j.length>0&&Z){if(void 0===h){let h=w.slidesGrid[X],v=w.slidesGrid[X+J],_=v-h;C?w.setTranslate(w.translate-_):(w.slideTo(X+J,0,!1,!0),b&&(w.touches[w.isHorizontal()?"startX":"startY"]+=_))}else b&&w.slideToLoop(h,0,!1,!0)}else if(Q.length>0&&K){if(void 0===h){let h=w.slidesGrid[X],v=w.slidesGrid[X-en],_=v-h;C?w.setTranslate(w.translate-_):(w.slideTo(X-en,0,!1,!0),b&&(w.touches[w.isHorizontal()?"startX":"startY"]+=_))}else w.slideToLoop(h,0,!1,!0)}}if(w.allowSlidePrev=L,w.allowSlideNext=M,w.controller&&w.controller.control&&!S){let v={slideRealIndex:h,slideTo:!1,direction:_,setTranslate:b,activeSlideIndex:A,byController:!0};Array.isArray(w.controller.control)?w.controller.control.forEach(h=>{!h.destroyed&&h.params.loop&&h.loopFix(v)}):w.controller.control instanceof w.constructor&&w.controller.control.params.loop&&w.controller.control.loopFix(v)}w.emit("loopFix")},loopDestroy:function(){let{params:h,slidesEl:v}=this;if(!h.loop||this.virtual&&this.params.virtual.enabled)return;this.recalcSlides();let _=[];this.slides.forEach(h=>{let v=void 0===h.swiperSlideIndex?1*h.getAttribute("data-swiper-slide-index"):h.swiperSlideIndex;_[v]=h}),this.slides.forEach(h=>{h.removeAttribute("data-swiper-slide-index")}),_.forEach(h=>{v.append(h)}),this.recalcSlides(),this.slideTo(this.realIndex,0)}},grabCursor:{setGrabCursor:function(h){let v=this;if(!v.params.simulateTouch||v.params.watchOverflow&&v.isLocked||v.params.cssMode)return;let _="container"===v.params.touchEventsTarget?v.el:v.wrapperEl;v.isElement&&(v.__preventObserver__=!0),_.style.cursor="move",_.style.cursor=h?"grabbing":"grab",v.isElement&&requestAnimationFrame(()=>{v.__preventObserver__=!1})},unsetGrabCursor:function(){let h=this;h.params.watchOverflow&&h.isLocked||h.params.cssMode||(h.isElement&&(h.__preventObserver__=!0),h["container"===h.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",h.isElement&&requestAnimationFrame(()=>{h.__preventObserver__=!1}))}},events:{attachEvents:function(){let h=ssr_window_esm_getDocument(),{params:v}=this;this.onTouchStart=onTouchStart.bind(this),this.onTouchMove=onTouchMove.bind(this),this.onTouchEnd=onTouchEnd.bind(this),v.cssMode&&(this.onScroll=onScroll.bind(this)),this.onClick=onClick.bind(this),this.onLoad=onLoad.bind(this),oW||(h.addEventListener("touchstart",dummyEventListener),oW=!0),events(this,"on")},detachEvents:function(){events(this,"off")}},breakpoints:{setBreakpoint:function(){let h=this,{realIndex:v,initialized:_,params:b,el:A}=h,S=b.breakpoints;if(!S||S&&0===Object.keys(S).length)return;let C=h.getBreakpoint(S,h.params.breakpointsBase,h.el);if(!C||h.currentBreakpoint===C)return;let w=C in S?S[C]:void 0,O=w||h.originalParams,L=isGridEnabled(h,b),M=isGridEnabled(h,O),F=b.enabled;L&&!M?(A.classList.remove(`${b.containerModifierClass}grid`,`${b.containerModifierClass}grid-column`),h.emitContainerClasses()):!L&&M&&(A.classList.add(`${b.containerModifierClass}grid`),(O.grid.fill&&"column"===O.grid.fill||!O.grid.fill&&"column"===b.grid.fill)&&A.classList.add(`${b.containerModifierClass}grid-column`),h.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(v=>{if(void 0===O[v])return;let _=b[v]&&b[v].enabled,A=O[v]&&O[v].enabled;_&&!A&&h[v].disable(),!_&&A&&h[v].enable()});let U=O.direction&&O.direction!==b.direction,$=b.loop&&(O.slidesPerView!==b.slidesPerView||U);U&&_&&h.changeDirection(),utils_extend(h.params,O);let G=h.params.enabled;Object.assign(h,{allowTouchMove:h.params.allowTouchMove,allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev}),F&&!G?h.disable():!F&&G&&h.enable(),h.currentBreakpoint=C,h.emit("_beforeBreakpoint",O),$&&_&&(h.loopDestroy(),h.loopCreate(v),h.updateSlides()),h.emit("breakpoint",O)},getBreakpoint:function(h,v="window",_){if(!h||"container"===v&&!_)return;let b=!1,A=ssr_window_esm_getWindow(),S="window"===v?A.innerHeight:_.clientHeight,C=Object.keys(h).map(h=>{if("string"==typeof h&&0===h.indexOf("@")){let v=parseFloat(h.substr(1));return{value:S*v,point:h}}return{value:h,point:h}});C.sort((h,v)=>parseInt(h.value,10)-parseInt(v.value,10));for(let h=0;h<C.length;h+=1){let{point:S,value:w}=C[h];"window"===v?A.matchMedia(`(min-width: ${w}px)`).matches&&(b=S):w<=_.clientWidth&&(b=S)}return b||"max"}},checkOverflow:{checkOverflow:function(){let{isLocked:h,params:v}=this,{slidesOffsetBefore:_}=v;if(_){let h=this.slides.length-1,v=this.slidesGrid[h]+this.slidesSizesGrid[h]+2*_;this.isLocked=this.size>v}else this.isLocked=1===this.snapGrid.length;!0===v.allowSlideNext&&(this.allowSlideNext=!this.isLocked),!0===v.allowSlidePrev&&(this.allowSlidePrev=!this.isLocked),h&&h!==this.isLocked&&(this.isEnd=!1),h!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock")}},classes:{addClasses:function(){let{classNames:h,params:v,rtl:_,el:b,device:A}=this,S=function(h,v){let _=[];return h.forEach(h=>{"object"==typeof h?Object.keys(h).forEach(b=>{h[b]&&_.push(v+b)}):"string"==typeof h&&_.push(v+h)}),_}(["initialized",v.direction,{"free-mode":this.params.freeMode&&v.freeMode.enabled},{autoheight:v.autoHeight},{rtl:_},{grid:v.grid&&v.grid.rows>1},{"grid-column":v.grid&&v.grid.rows>1&&"column"===v.grid.fill},{android:A.android},{ios:A.ios},{"css-mode":v.cssMode},{centered:v.cssMode&&v.centeredSlides},{"watch-progress":v.watchSlidesProgress}],v.containerModifierClass);h.push(...S),b.classList.add(...h),this.emitContainerClasses()},removeClasses:function(){let{el:h,classNames:v}=this;h.classList.remove(...v),this.emitContainerClasses()}}},oQ={};let Swiper=class Swiper{constructor(...h){let v,_;1===h.length&&h[0].constructor&&"Object"===Object.prototype.toString.call(h[0]).slice(8,-1)?_=h[0]:[v,_]=h,_||(_={}),_=utils_extend({},_),v&&!_.el&&(_.el=v);let b=ssr_window_esm_getDocument();if(_.el&&"string"==typeof _.el&&b.querySelectorAll(_.el).length>1){let h=[];return b.querySelectorAll(_.el).forEach(v=>{let b=utils_extend({},_,{el:v});h.push(new Swiper(b))}),h}let A=this;A.__swiper__=!0,A.support=getSupport(),A.device=function(h={}){return C||(C=function({userAgent:h}={}){let v=getSupport(),_=ssr_window_esm_getWindow(),b=_.navigator.platform,A=h||_.navigator.userAgent,S={ios:!1,android:!1},C=_.screen.width,w=_.screen.height,O=A.match(/(Android);?[\s\/]+([\d.]+)?/),L=A.match(/(iPad).*OS\s([\d_]+)/),M=A.match(/(iPod)(.*OS\s([\d_]+))?/),F=!L&&A.match(/(iPhone\sOS|iOS)\s([\d_]+)/),U="MacIntel"===b;return!L&&U&&v.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${C}x${w}`)>=0&&((L=A.match(/(Version)\/([\d.]+)/))||(L=[0,1,"13_0_0"]),U=!1),O&&"Win32"!==b&&(S.os="android",S.android=!0),(L||F||M)&&(S.os="ios",S.ios=!0),S}(h)),C}({userAgent:_.userAgent}),A.browser=(w||(w=function(){let h=ssr_window_esm_getWindow(),v=!1;function isSafari(){let v=h.navigator.userAgent.toLowerCase();return v.indexOf("safari")>=0&&0>v.indexOf("chrome")&&0>v.indexOf("android")}if(isSafari()){let _=String(h.navigator.userAgent);if(_.includes("Version/")){let[h,b]=_.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));v=h<16||16===h&&b<2}}return{isSafari:v||isSafari(),needPerspectiveFix:v,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(h.navigator.userAgent)}}()),w),A.eventsListeners={},A.eventsAnyListeners=[],A.modules=[...A.__modules__],_.modules&&Array.isArray(_.modules)&&A.modules.push(..._.modules);let S={};A.modules.forEach(h=>{var v;h({params:_,swiper:A,extendParams:(v=_,function(h={}){let _=Object.keys(h)[0],b=h[_];if("object"!=typeof b||null===b||(["navigation","pagination","scrollbar"].indexOf(_)>=0&&!0===v[_]&&(v[_]={auto:!0}),!(_ in v&&"enabled"in b))){utils_extend(S,h);return}!0===v[_]&&(v[_]={enabled:!0}),"object"!=typeof v[_]||"enabled"in v[_]||(v[_].enabled=!0),v[_]||(v[_]={enabled:!1}),utils_extend(S,h)}),on:A.on.bind(A),once:A.once.bind(A),off:A.off.bind(A),emit:A.emit.bind(A)})});let O=utils_extend({},oq,S);return A.params=utils_extend({},O,oQ,_),A.originalParams=utils_extend({},A.params),A.passedParams=utils_extend({},_),A.params&&A.params.on&&Object.keys(A.params.on).forEach(h=>{A.on(h,A.params.on[h])}),A.params&&A.params.onAny&&A.onAny(A.params.onAny),Object.assign(A,{enabled:A.params.enabled,el:v,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===A.params.direction,isVertical:()=>"vertical"===A.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return 8388608*Math.trunc(this.translate/8388608)},allowSlideNext:A.params.allowSlideNext,allowSlidePrev:A.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:A.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:A.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),A.emit("_swiper"),A.params.init&&A.init(),A}getSlideIndex(h){let{slidesEl:v,params:_}=this,b=utils_elementChildren(v,`.${_.slideClass}, swiper-slide`),A=utils_elementIndex(b[0]);return utils_elementIndex(h)-A}getSlideIndexByData(h){return this.getSlideIndex(this.slides.filter(v=>1*v.getAttribute("data-swiper-slide-index")===h)[0])}recalcSlides(){let{slidesEl:h,params:v}=this;this.slides=utils_elementChildren(h,`.${v.slideClass}, swiper-slide`)}enable(){this.enabled||(this.enabled=!0,this.params.grabCursor&&this.setGrabCursor(),this.emit("enable"))}disable(){this.enabled&&(this.enabled=!1,this.params.grabCursor&&this.unsetGrabCursor(),this.emit("disable"))}setProgress(h,v){h=Math.min(Math.max(h,0),1);let _=this.minTranslate(),b=this.maxTranslate(),A=(b-_)*h+_;this.translateTo(A,void 0===v?0:v),this.updateActiveIndex(),this.updateSlidesClasses()}emitContainerClasses(){let h=this;if(!h.params._emitClasses||!h.el)return;let v=h.el.className.split(" ").filter(v=>0===v.indexOf("swiper")||0===v.indexOf(h.params.containerModifierClass));h.emit("_containerClasses",v.join(" "))}getSlideClasses(h){let v=this;return v.destroyed?"":h.className.split(" ").filter(h=>0===h.indexOf("swiper-slide")||0===h.indexOf(v.params.slideClass)).join(" ")}emitSlidesClasses(){let h=this;if(!h.params._emitClasses||!h.el)return;let v=[];h.slides.forEach(_=>{let b=h.getSlideClasses(_);v.push({slideEl:_,classNames:b}),h.emit("_slideClass",_,b)}),h.emit("_slideClasses",v)}slidesPerViewDynamic(h="current",v=!1){let{params:_,slides:b,slidesGrid:A,slidesSizesGrid:S,size:C,activeIndex:w}=this,O=1;if(_.centeredSlides){let h,v=b[w]?b[w].swiperSlideSize:0;for(let _=w+1;_<b.length;_+=1)b[_]&&!h&&(v+=b[_].swiperSlideSize,O+=1,v>C&&(h=!0));for(let _=w-1;_>=0;_-=1)b[_]&&!h&&(v+=b[_].swiperSlideSize,O+=1,v>C&&(h=!0))}else if("current"===h)for(let h=w+1;h<b.length;h+=1){let _=v?A[h]+S[h]-A[w]<C:A[h]-A[w]<C;_&&(O+=1)}else for(let h=w-1;h>=0;h-=1){let v=A[w]-A[h]<C;v&&(O+=1)}return O}update(){let h;let v=this;if(!v||v.destroyed)return;let{snapGrid:_,params:b}=v;function setTranslate(){let h=v.rtlTranslate?-1*v.translate:v.translate,_=Math.min(Math.max(h,v.maxTranslate()),v.minTranslate());v.setTranslate(_),v.updateActiveIndex(),v.updateSlidesClasses()}if(b.breakpoints&&v.setBreakpoint(),[...v.el.querySelectorAll('[loading="lazy"]')].forEach(h=>{h.complete&&processLazyPreloader(v,h)}),v.updateSize(),v.updateSlides(),v.updateProgress(),v.updateSlidesClasses(),b.freeMode&&b.freeMode.enabled&&!b.cssMode)setTranslate(),b.autoHeight&&v.updateAutoHeight();else{if(("auto"===b.slidesPerView||b.slidesPerView>1)&&v.isEnd&&!b.centeredSlides){let _=v.virtual&&b.virtual.enabled?v.virtual.slides:v.slides;h=v.slideTo(_.length-1,0,!1,!0)}else h=v.slideTo(v.activeIndex,0,!1,!0);h||setTranslate()}b.watchOverflow&&_!==v.snapGrid&&v.checkOverflow(),v.emit("update")}changeDirection(h,v=!0){let _=this.params.direction;return h||(h="horizontal"===_?"vertical":"horizontal"),h===_||"horizontal"!==h&&"vertical"!==h||(this.el.classList.remove(`${this.params.containerModifierClass}${_}`),this.el.classList.add(`${this.params.containerModifierClass}${h}`),this.emitContainerClasses(),this.params.direction=h,this.slides.forEach(v=>{"vertical"===h?v.style.width="":v.style.height=""}),this.emit("changeDirection"),v&&this.update()),this}changeLanguageDirection(h){(!this.rtl||"rtl"!==h)&&(this.rtl||"ltr"!==h)&&(this.rtl="rtl"===h,this.rtlTranslate="horizontal"===this.params.direction&&this.rtl,this.rtl?(this.el.classList.add(`${this.params.containerModifierClass}rtl`),this.el.dir="rtl"):(this.el.classList.remove(`${this.params.containerModifierClass}rtl`),this.el.dir="ltr"),this.update())}mount(h){let v=this;if(v.mounted)return!0;let _=h||v.params.el;if("string"==typeof _&&(_=document.querySelector(_)),!_)return!1;_.swiper=v,_.shadowEl&&(v.isElement=!0);let getWrapperSelector=()=>`.${(v.params.wrapperClass||"").trim().split(" ").join(".")}`,b=(()=>{if(_&&_.shadowRoot&&_.shadowRoot.querySelector){let h=_.shadowRoot.querySelector(getWrapperSelector());return h}return utils_elementChildren(_,getWrapperSelector())[0]})();return!b&&v.params.createElements&&(b=utils_createElement("div",v.params.wrapperClass),_.append(b),utils_elementChildren(_,`.${v.params.slideClass}`).forEach(h=>{b.append(h)})),Object.assign(v,{el:_,wrapperEl:b,slidesEl:v.isElement?_:b,mounted:!0,rtl:"rtl"===_.dir.toLowerCase()||"rtl"===elementStyle(_,"direction"),rtlTranslate:"horizontal"===v.params.direction&&("rtl"===_.dir.toLowerCase()||"rtl"===elementStyle(_,"direction")),wrongRTL:"-webkit-box"===elementStyle(b,"display")}),!0}init(h){let v=this;if(v.initialized)return v;let _=v.mount(h);return!1===_||(v.emit("beforeInit"),v.params.breakpoints&&v.setBreakpoint(),v.addClasses(),v.updateSize(),v.updateSlides(),v.params.watchOverflow&&v.checkOverflow(),v.params.grabCursor&&v.enabled&&v.setGrabCursor(),v.params.loop&&v.virtual&&v.params.virtual.enabled?v.slideTo(v.params.initialSlide+v.virtual.slidesBefore,0,v.params.runCallbacksOnInit,!1,!0):v.slideTo(v.params.initialSlide,0,v.params.runCallbacksOnInit,!1,!0),v.params.loop&&v.loopCreate(),v.attachEvents(),[...v.el.querySelectorAll('[loading="lazy"]')].forEach(h=>{h.complete?processLazyPreloader(v,h):h.addEventListener("load",h=>{processLazyPreloader(v,h.target)})}),preload(v),v.initialized=!0,preload(v),v.emit("init"),v.emit("afterInit")),v}destroy(h=!0,v=!0){let _=this,{params:b,el:A,wrapperEl:S,slides:C}=_;return void 0===_.params||_.destroyed||(_.emit("beforeDestroy"),_.initialized=!1,_.detachEvents(),b.loop&&_.loopDestroy(),v&&(_.removeClasses(),A.removeAttribute("style"),S.removeAttribute("style"),C&&C.length&&C.forEach(h=>{h.classList.remove(b.slideVisibleClass,b.slideActiveClass,b.slideNextClass,b.slidePrevClass),h.removeAttribute("style"),h.removeAttribute("data-swiper-slide-index")})),_.emit("destroy"),Object.keys(_.eventsListeners).forEach(h=>{_.off(h)}),!1!==h&&(_.el.swiper=null,function(h){Object.keys(h).forEach(v=>{try{h[v]=null}catch(h){}try{delete h[v]}catch(h){}})}(_)),_.destroyed=!0),null}static extendDefaults(h){utils_extend(oQ,h)}static get extendedDefaults(){return oQ}static get defaults(){return oq}static installModule(h){Swiper.prototype.__modules__||(Swiper.prototype.__modules__=[]);let v=Swiper.prototype.__modules__;"function"==typeof h&&0>v.indexOf(h)&&v.push(h)}static use(h){return Array.isArray(h)?h.forEach(h=>Swiper.installModule(h)):Swiper.installModule(h),Swiper}};function Navigation({swiper:h,extendParams:v,on:_,emit:b}){v({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),h.navigation={nextEl:null,prevEl:null};let makeElementsArray=h=>(Array.isArray(h)||(h=[h].filter(h=>!!h)),h);function getEl(v){let _;return v&&"string"==typeof v&&h.isElement&&(_=h.el.shadowRoot.querySelector(v))?_:(v&&("string"==typeof v&&(_=[...document.querySelectorAll(v)]),h.params.uniqueNavElements&&"string"==typeof v&&_.length>1&&1===h.el.querySelectorAll(v).length&&(_=h.el.querySelector(v))),v&&!_)?v:_}function toggleEl(v,_){let b=h.params.navigation;(v=makeElementsArray(v)).forEach(v=>{v&&(v.classList[_?"add":"remove"](...b.disabledClass.split(" ")),"BUTTON"===v.tagName&&(v.disabled=_),h.params.watchOverflow&&h.enabled&&v.classList[h.isLocked?"add":"remove"](b.lockClass))})}function update(){let{nextEl:v,prevEl:_}=h.navigation;if(h.params.loop){toggleEl(_,!1),toggleEl(v,!1);return}toggleEl(_,h.isBeginning&&!h.params.rewind),toggleEl(v,h.isEnd&&!h.params.rewind)}function onPrevClick(v){v.preventDefault(),(!h.isBeginning||h.params.loop||h.params.rewind)&&(h.slidePrev(),b("navigationPrev"))}function onNextClick(v){v.preventDefault(),(!h.isEnd||h.params.loop||h.params.rewind)&&(h.slideNext(),b("navigationNext"))}function init(){var v,_,b;let A=h.params.navigation;if(h.params.navigation=(v=h.originalParams.navigation,_=h.params.navigation,b={nextEl:"swiper-button-next",prevEl:"swiper-button-prev"},h.params.createElements&&Object.keys(b).forEach(A=>{if(!_[A]&&!0===_.auto){let S=utils_elementChildren(h.el,`.${b[A]}`)[0];S||((S=utils_createElement("div",b[A])).className=b[A],h.el.append(S)),_[A]=S,v[A]=S}}),_),!(A.nextEl||A.prevEl))return;let S=getEl(A.nextEl),C=getEl(A.prevEl);Object.assign(h.navigation,{nextEl:S,prevEl:C}),S=makeElementsArray(S),C=makeElementsArray(C);let initButton=(v,_)=>{v&&v.addEventListener("click","next"===_?onNextClick:onPrevClick),!h.enabled&&v&&v.classList.add(...A.lockClass.split(" "))};S.forEach(h=>initButton(h,"next")),C.forEach(h=>initButton(h,"prev"))}function destroy(){let{nextEl:v,prevEl:_}=h.navigation;v=makeElementsArray(v),_=makeElementsArray(_);let destroyButton=(v,_)=>{v.removeEventListener("click","next"===_?onNextClick:onPrevClick),v.classList.remove(...h.params.navigation.disabledClass.split(" "))};v.forEach(h=>destroyButton(h,"next")),_.forEach(h=>destroyButton(h,"prev"))}_("init",()=>{!1===h.params.navigation.enabled?disable():(init(),update())}),_("toEdge fromEdge lock unlock",()=>{update()}),_("destroy",()=>{destroy()}),_("enable disable",()=>{let{nextEl:v,prevEl:_}=h.navigation;[...v=makeElementsArray(v),..._=makeElementsArray(_)].filter(h=>!!h).forEach(v=>v.classList[h.enabled?"remove":"add"](h.params.navigation.lockClass))}),_("click",(v,_)=>{let{nextEl:A,prevEl:S}=h.navigation;A=makeElementsArray(A),S=makeElementsArray(S);let C=_.target;if(h.params.navigation.hideOnClick&&!S.includes(C)&&!A.includes(C)){let v;if(h.pagination&&h.params.pagination&&h.params.pagination.clickable&&(h.pagination.el===C||h.pagination.el.contains(C)))return;A.length?v=A[0].classList.contains(h.params.navigation.hiddenClass):S.length&&(v=S[0].classList.contains(h.params.navigation.hiddenClass)),!0===v?b("navigationShow"):b("navigationHide"),[...A,...S].filter(h=>!!h).forEach(v=>v.classList.toggle(h.params.navigation.hiddenClass))}});let disable=()=>{h.el.classList.add(...h.params.navigation.navigationDisabledClass.split(" ")),destroy()};Object.assign(h.navigation,{enable:()=>{h.el.classList.remove(...h.params.navigation.navigationDisabledClass.split(" ")),init(),update()},disable,update,init,destroy})}function classes_to_selector_classesToSelector(h=""){return`.${h.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function A11y({swiper:h,extendParams:v,on:_}){v({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),h.a11y={clicked:!1};let b=null;function notify(h){let v=b;0!==v.length&&(v.innerHTML="",v.innerHTML=h)}let makeElementsArray=h=>(Array.isArray(h)||(h=[h].filter(h=>!!h)),h);function makeElFocusable(h){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("tabIndex","0")})}function makeElNotFocusable(h){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("tabIndex","-1")})}function addElRole(h,v){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("role",v)})}function addElRoleDescription(h,v){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("aria-roledescription",v)})}function addElLabel(h,v){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("aria-label",v)})}function disableEl(h){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("aria-disabled",!0)})}function enableEl(h){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("aria-disabled",!1)})}function onEnterOrSpaceKey(v){if(13!==v.keyCode&&32!==v.keyCode)return;let _=h.params.a11y,b=v.target;(!(h.pagination&&h.pagination.el&&(b===h.pagination.el||h.pagination.el.contains(v.target)))||v.target.matches(classes_to_selector_classesToSelector(h.params.pagination.bulletClass)))&&(h.navigation&&h.navigation.nextEl&&b===h.navigation.nextEl&&(h.isEnd&&!h.params.loop||h.slideNext(),h.isEnd?notify(_.lastSlideMessage):notify(_.nextSlideMessage)),h.navigation&&h.navigation.prevEl&&b===h.navigation.prevEl&&(h.isBeginning&&!h.params.loop||h.slidePrev(),h.isBeginning?notify(_.firstSlideMessage):notify(_.prevSlideMessage)),h.pagination&&b.matches(classes_to_selector_classesToSelector(h.params.pagination.bulletClass))&&b.click())}function hasPagination(){return h.pagination&&h.pagination.bullets&&h.pagination.bullets.length}function hasClickablePagination(){return hasPagination()&&h.params.pagination.clickable}let initNavEl=(h,v,_)=>{makeElFocusable(h),"BUTTON"!==h.tagName&&(addElRole(h,"button"),h.addEventListener("keydown",onEnterOrSpaceKey)),addElLabel(h,_),function(h,v){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("aria-controls",v)})}(h,v)},handlePointerDown=()=>{h.a11y.clicked=!0},handlePointerUp=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{h.destroyed||(h.a11y.clicked=!1)})})},handleFocus=v=>{if(h.a11y.clicked)return;let _=v.target.closest(`.${h.params.slideClass}, swiper-slide`);if(!_||!h.slides.includes(_))return;let b=h.slides.indexOf(_)===h.activeIndex,A=h.params.watchSlidesProgress&&h.visibleSlides&&h.visibleSlides.includes(_);!b&&!A&&(v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents||(h.isHorizontal()?h.el.scrollLeft=0:h.el.scrollTop=0,h.slideTo(h.slides.indexOf(_),0)))},initSlides=()=>{let v=h.params.a11y;v.itemRoleDescriptionMessage&&addElRoleDescription(h.slides,v.itemRoleDescriptionMessage),v.slideRole&&addElRole(h.slides,v.slideRole);let _=h.slides.length;v.slideLabelMessage&&h.slides.forEach((b,A)=>{let S=h.params.loop?parseInt(b.getAttribute("data-swiper-slide-index"),10):A,C=v.slideLabelMessage.replace(/\{\{index\}\}/,S+1).replace(/\{\{slidesLength\}\}/,_);addElLabel(b,C)})},init=()=>{let v=h.params.a11y;h.isElement?h.el.shadowEl.append(b):h.el.append(b);let _=h.el;v.containerRoleDescriptionMessage&&addElRoleDescription(_,v.containerRoleDescriptionMessage),v.containerMessage&&addElLabel(_,v.containerMessage);let A=h.wrapperEl,S=v.id||A.getAttribute("id")||`swiper-wrapper-${function(h=16){return"x".repeat(h).replace(/x/g,()=>Math.round(16*Math.random()).toString(16))}(16)}`,C=h.params.autoplay&&h.params.autoplay.enabled?"off":"polite";!function(h,v){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("id",v)})}(A,S),function(h,v){(h=makeElementsArray(h)).forEach(h=>{h.setAttribute("aria-live",v)})}(A,C),initSlides();let{nextEl:w,prevEl:O}=h.navigation?h.navigation:{};if(w=makeElementsArray(w),O=makeElementsArray(O),w&&w.forEach(h=>initNavEl(h,S,v.nextSlideMessage)),O&&O.forEach(h=>initNavEl(h,S,v.prevSlideMessage)),hasClickablePagination()){let v=Array.isArray(h.pagination.el)?h.pagination.el:[h.pagination.el];v.forEach(h=>{h.addEventListener("keydown",onEnterOrSpaceKey)})}h.el.addEventListener("focus",handleFocus,!0),h.el.addEventListener("pointerdown",handlePointerDown,!0),h.el.addEventListener("pointerup",handlePointerUp,!0)};_("beforeInit",()=>{(b=utils_createElement("span",h.params.a11y.notificationClass)).setAttribute("aria-live","assertive"),b.setAttribute("aria-atomic","true")}),_("afterInit",()=>{h.params.a11y.enabled&&init()}),_("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{h.params.a11y.enabled&&initSlides()}),_("fromEdge toEdge afterInit lock unlock",()=>{h.params.a11y.enabled&&function(){if(h.params.loop||h.params.rewind||!h.navigation)return;let{nextEl:v,prevEl:_}=h.navigation;_&&(h.isBeginning?(disableEl(_),makeElNotFocusable(_)):(enableEl(_),makeElFocusable(_))),v&&(h.isEnd?(disableEl(v),makeElNotFocusable(v)):(enableEl(v),makeElFocusable(v)))}()}),_("paginationUpdate",()=>{h.params.a11y.enabled&&function(){let v=h.params.a11y;hasPagination()&&h.pagination.bullets.forEach(_=>{h.params.pagination.clickable&&(makeElFocusable(_),h.params.pagination.renderBullet||(addElRole(_,"button"),addElLabel(_,v.paginationBulletMessage.replace(/\{\{index\}\}/,utils_elementIndex(_)+1)))),_.matches(classes_to_selector_classesToSelector(h.params.pagination.bulletActiveClass))?_.setAttribute("aria-current","true"):_.removeAttribute("aria-current")})}()}),_("destroy",()=>{h.params.a11y.enabled&&function(){b&&b.remove();let{nextEl:v,prevEl:_}=h.navigation?h.navigation:{};if(v=makeElementsArray(v),_=makeElementsArray(_),v&&v.forEach(h=>h.removeEventListener("keydown",onEnterOrSpaceKey)),_&&_.forEach(h=>h.removeEventListener("keydown",onEnterOrSpaceKey)),hasClickablePagination()){let v=Array.isArray(h.pagination.el)?h.pagination.el:[h.pagination.el];v.forEach(h=>{h.removeEventListener("keydown",onEnterOrSpaceKey)})}h.el.removeEventListener("focus",handleFocus,!0),h.el.removeEventListener("pointerdown",handlePointerDown,!0),h.el.removeEventListener("pointerup",handlePointerUp,!0)}()})}Object.keys(oY).forEach(h=>{Object.keys(oY[h]).forEach(v=>{Swiper.prototype[v]=oY[h][v]})}),Swiper.use([function({swiper:h,on:v,emit:_}){let b=ssr_window_esm_getWindow(),A=null,S=null,resizeHandler=()=>{h&&!h.destroyed&&h.initialized&&(_("beforeResize"),_("resize"))},createObserver=()=>{h&&!h.destroyed&&h.initialized&&(A=new ResizeObserver(v=>{S=b.requestAnimationFrame(()=>{let{width:_,height:b}=h,A=_,S=b;v.forEach(({contentBoxSize:v,contentRect:_,target:b})=>{b&&b!==h.el||(A=_?_.width:(v[0]||v).inlineSize,S=_?_.height:(v[0]||v).blockSize)}),(A!==_||S!==b)&&resizeHandler()})})).observe(h.el)},removeObserver=()=>{S&&b.cancelAnimationFrame(S),A&&A.unobserve&&h.el&&(A.unobserve(h.el),A=null)},orientationChangeHandler=()=>{h&&!h.destroyed&&h.initialized&&_("orientationchange")};v("init",()=>{if(h.params.resizeObserver&&void 0!==b.ResizeObserver){createObserver();return}b.addEventListener("resize",resizeHandler),b.addEventListener("orientationchange",orientationChangeHandler)}),v("destroy",()=>{removeObserver(),b.removeEventListener("resize",resizeHandler),b.removeEventListener("orientationchange",orientationChangeHandler)})},function({swiper:h,extendParams:v,on:_,emit:b}){let A=[],S=ssr_window_esm_getWindow(),attach=(v,_={})=>{let C=S.MutationObserver||S.WebkitMutationObserver,w=new C(v=>{if(h.__preventObserver__)return;if(1===v.length){b("observerUpdate",v[0]);return}let observerUpdate=function(){b("observerUpdate",v[0])};S.requestAnimationFrame?S.requestAnimationFrame(observerUpdate):S.setTimeout(observerUpdate,0)});w.observe(v,{attributes:void 0===_.attributes||_.attributes,childList:void 0===_.childList||_.childList,characterData:void 0===_.characterData||_.characterData}),A.push(w)};v({observer:!1,observeParents:!1,observeSlideChildren:!1}),_("init",()=>{if(h.params.observer){if(h.params.observeParents){let v=function(h,v){let _=[],b=h.parentElement;for(;b;)v?b.matches(v)&&_.push(b):_.push(b),b=b.parentElement;return _}(h.el);for(let h=0;h<v.length;h+=1)attach(v[h])}attach(h.el,{childList:h.params.observeSlideChildren}),attach(h.wrapperEl,{attributes:!1})}}),_("destroy",()=>{A.forEach(h=>{h.disconnect()}),A.splice(0,A.length)})}]);var oX=_(7178);let oK={isLoaded:!1,options:{credentials:"omit"}},oZ=eV.createContext(oK),oJ=eV.createContext(oK);function slider_at(h,v){if("updateIsLoaded"===v.type)return{...h,isLoaded:v.isLoaded};throw Error(`Unhandled action type: ${v.type}`)}let slider_st=({initialState:h=oK,children:v})=>{let[_,b]=eV.useReducer(slider_at,h);return eV.createElement(oZ.Provider,{value:_},eV.createElement(oJ.Provider,{value:b},v))},{styled:o0,css:o1,keyframes:o2,createTheme:o3}=(0,eY.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),o4=o0("div",{display:"flex",flexDirection:"column",alignItems:"center"}),o5=o0("p",{fontWeight:"bold"}),o6=o0("span",{}),slider_ht=({error:h})=>{let{message:v}=h;return eV.createElement(o4,{role:"alert"},eV.createElement(o5,{"data-testid":"headline"},"Something went wrong"),v&&eV.createElement(o6,null,`Error message: ${v}`," "))},o8=o0("div",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",justifyContent:"center",alignItems:"center",svg:{height:"60%",width:"60%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",transition:"$all"}}),o9=o0("button",{zIndex:"1",border:"none",cursor:"pointer",background:"transparent",marginLeft:"$2",padding:"0","&:disabled":{[`> ${o8}`]:{backgroundColor:"#6663",boxShadow:"none",svg:{fill:"$secondary",stroke:"$secondary",filter:"unset"}}},"&:hover:enabled":{[`> ${o8}`]:{backgroundColor:"$accentAlt",boxShadow:"3px 3px 11px #0003","&:disabled":{boxShadow:"unset"}}}}),o7=o0("div",{display:"flex",flexDirection:"column"}),sa=o0("div",{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:"$5",paddingRight:"$4","@xs":{width:"100%",justifyContent:"center",padding:"$4 $1 0 0"}}),so=o0("div",{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingBottom:"$4",margin:"0",lineHeight:"1.4em",alignItems:"flex-end","@xs":{flexDirection:"column"},".clover-slider-header-homepage":{textDecoration:"none"},".clover-slider-header-label":{fontSize:"1.25rem",fontWeight:"400"},".clover-slider-header-summary":{fontSize:"$4",marginTop:"$2"}}),slider_yt=(h,v="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[v]){let v=Object.getOwnPropertyNames(h);if(v.length>0)return h[v[0]]}return h[v]&&Array.isArray(h[v])?h[v]:null},slider_se=(h,v="none",_=", ")=>{let b=slider_yt(h,v);return Array.isArray(b)?b.join(`${_}`):b};function slider_Q(h,v){let _=Object.keys(h).filter(h=>v.includes(h)?null:h),b={};return _.forEach(v=>{b[v]=h[v]}),b}let ss=o0("span",{}),slider_ve=h=>{let{as:v,label:_}=h,b=slider_Q(h,["as","label"]);return eV.createElement(ss,{as:v,...b},slider_se(_,b.lang))},slider_St=(h,v="200,",_="full")=>{let b;Array.isArray(h)&&(h=h[0]);let{id:A,service:S}=h;if(!S)return A;if(Array.isArray(h.service)&&h.service.length>0&&(b=S[0]),b){if(b["@id"])return`${b["@id"]}/${_}/${v}/0/default.jpg`;if(b.id)return`${b.id}/${_}/${v}/0/default.jpg`}},sl=o0("img",{objectFit:"cover"}),slider_Ct=h=>{let v;let _=(0,eV.useRef)(null),{contentResource:b,altAsLabel:A,region:S="full"}=h;A&&(v=slider_se(A));let C=slider_Q(h,["contentResource","altAsLabel"]),{type:w,id:O,width:L=200,height:M=200,duration:F}=b;(0,eV.useEffect)(()=>{if(!O&&!_.current||["Image"].includes(w)||!O.includes("m3u8"))return;let h=new nB.ZP;return _.current&&(h.attachMedia(_.current),h.on(nB.ZP.Events.MEDIA_ATTACHED,function(){h.loadSource(O)})),h.on(nB.ZP.Events.ERROR,function(v,_){if(_.fatal)switch(_.type){case nB.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${v} network error encountered, try to recover`),h.startLoad();break;case nB.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${v} media error encountered, try to recover`),h.recoverMediaError();break;default:h.destroy()}}),()=>{h&&(h.detachMedia(),h.destroy())}},[O,w]);let U=(0,eV.useCallback)(()=>{if(!_.current)return;let h=0,v=30;if(F&&(v=F),!O.split("#t=")&&F&&(h=.1*F),O.split("#t=").pop()){let v=O.split("#t=").pop();v&&(h=parseInt(v.split(",")[0]))}let b=_.current;b.autoplay=!0,b.currentTime=h,setTimeout(()=>U(),1e3*v)},[F,O]);(0,eV.useEffect)(()=>U(),[U]);let $=slider_St(b,`${L},${M}`,S);switch(w){case"Image":return eV.createElement(sl,{as:"img",alt:v,css:{width:L,height:M},key:O,src:$,...C});case"Video":return eV.createElement(sl,{as:"video",css:{width:L,height:M},disablePictureInPicture:!0,key:O,loop:!0,muted:!0,onPause:U,ref:_,src:O});default:return console.warn(`Resource type: ${w} is not valid or not yet supported in Primitives.`),eV.createElement(eV.Fragment,null)}},sc=o0("a",{}),slider_je=h=>{let{children:v,homepage:_}=h,b=slider_Q(h,["children","homepage"]);return eV.createElement(eV.Fragment,null,_&&_.map(h=>{let _=slider_se(h.label,b.lang);return eV.createElement(sc,{"aria-label":v?_:void 0,href:h.id,key:h.id,...b},v||_)}))},su={delimiter:", "},sd=(0,eV.createContext)(void 0),Rt=()=>{let h=(0,eV.useContext)(sd);if(void 0===h)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return h},slider_$t=({children:h,initialState:v=su})=>{let _=slider_It(v,"delimiter");return eV.createElement(sd.Provider,{value:{delimiter:_}},h)},slider_It=(h,v)=>Object.hasOwn(h,v)?h[v].toString():void 0,sp=o0("span",{}),slider_$e=h=>{let{as:v,markup:_}=h,{delimiter:b}=Rt();if(!_)return eV.createElement(eV.Fragment,null);let A=slider_Q(h,["as","markup"]),S={__html:nF(slider_se(_,A.lang,b),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return eV.createElement(sp,{as:v,...A,dangerouslySetInnerHTML:S})},Ot=h=>eV.useContext(sd)?eV.createElement(slider_$e,{...h}):eV.createElement(slider_$t,null,eV.createElement(slider_$e,{...h}));o0("span",{}),o0("dl",{}),o0("li",{}),o0("ul",{}),o0("li",{}),o0("ul",{}),o0("dl",{}),o0("li",{}),o0("ul",{});let slider_Te=h=>{let{as:v,summary:_}=h,b=slider_Q(h,["as","customValueDelimiter","summary"]);return eV.createElement(Ot,{as:v,markup:_,...b})},slider_t=h=>{let{thumbnail:v,region:_}=h,b=slider_Q(h,["thumbnail"]);return eV.createElement(eV.Fragment,null,v&&v.map(h=>eV.createElement(slider_Ct,{contentResource:h,key:h.id,region:_,...b})))},jt=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Next"),eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),Tt=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Previous"),eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),sh=o0(slider_je,{display:"flex",backgroundColor:"$accent",color:"$secondary",height:"2rem !important",padding:"0 $3",margin:"0 0 0 $3",borderRadius:"2rem",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",justifyContent:"center",alignItems:"center",lineBreak:"none",whiteSpace:"nowrap",textDecoration:"none !important",fontSize:"0.8333rem","&:hover":{backgroundColor:"$accentAlt",boxShadow:"3px 3px 11px #0003","&:disabled":{boxShadow:"unset"}}}),Pt=h=>eV.createElement(sh,{...h},"View All"),Dt=({homepage:h,instance:v,label:_,summary:b})=>{let[A,S]=(0,eV.useState)(!1);return(0,eV.useEffect)(()=>{h&&(null==h?void 0:h.length)>0&&S(!0)},[h]),eV.createElement(so,{"data-testid":"slider-header"},eV.createElement(o7,null,A?eV.createElement(slider_je,{homepage:h,className:"clover-slider-header-homepage"},eV.createElement(slider_ve,{label:_,as:"span",className:"clover-slider-header-label"})):eV.createElement(slider_ve,{label:_,as:"span",className:"clover-slider-header-label"}),b&&eV.createElement(slider_Te,{summary:b,as:"span",className:"clover-slider-header-summary"})),eV.createElement(sa,null,eV.createElement(o9,{className:`clover-slider-previous-${v}`,"aria-label":"previous"},eV.createElement(o8,null,eV.createElement(Tt,null))),eV.createElement(o9,{className:`clover-slider-next-${v}`,"aria-label":"next"},eV.createElement(o8,null,eV.createElement(jt,null))),A&&eV.createElement(Pt,{homepage:h,className:"clover-slider-header-view-all"})))};function slider_Z(h){return"object"==typeof h&&null!==h&&h.constructor&&"Object"===Object.prototype.toString.call(h).slice(8,-1)}function slider_G(h,v){let _=["__proto__","constructor","prototype"];Object.keys(v).filter(h=>0>_.indexOf(h)).forEach(_=>{typeof h[_]>"u"?h[_]=v[_]:slider_Z(v[_])&&slider_Z(h[_])&&Object.keys(v[_]).length>0?v[_].__swiper__?h[_]=v[_]:slider_G(h[_],v[_]):h[_]=v[_]})}function slider_Me(h={}){return h.navigation&&typeof h.navigation.nextEl>"u"&&typeof h.navigation.prevEl>"u"}function slider_Pe(h={}){return h.pagination&&typeof h.pagination.el>"u"}function slider_De(h={}){return h.scrollbar&&typeof h.scrollbar.el>"u"}function slider_Ne(h=""){let v=h.split(" ").map(h=>h.trim()).filter(h=>!!h),_=[];return v.forEach(h=>{0>_.indexOf(h)&&_.push(h)}),_.join(" ")}let sm=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function slider_Fe(h){return h.type&&h.type.displayName&&h.type.displayName.includes("SwiperSlide")}let qt=h=>{!h||h.destroyed||!h.params.virtual||h.params.virtual&&!h.params.virtual.enabled||(h.updateSlides(),h.updateProgress(),h.updateSlidesClasses(),h.parallax&&h.params.parallax&&h.params.parallax.enabled&&h.parallax.setTranslate())};function slider_Y(h,v){return typeof window>"u"?(0,eV.useEffect)(h,v):(0,eV.useLayoutEffect)(h,v)}let sf=(0,eV.createContext)(null),sg=(0,eV.createContext)(null);function slider_me(){return(slider_me=Object.assign?Object.assign.bind():function(h){for(var v=1;v<arguments.length;v++){var _=arguments[v];for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])}return h}).apply(this,arguments)}let sE=(0,eV.forwardRef)(function(h,v){let{className:_,tag:b="div",wrapperTag:A="div",children:S,onSwiper:C,...w}=void 0===h?{}:h,O=!1,[L,M]=(0,eV.useState)("swiper"),[F,U]=(0,eV.useState)(null),[$,G]=(0,eV.useState)(!1),j=(0,eV.useRef)(!1),Q=(0,eV.useRef)(null),X=(0,eV.useRef)(null),K=(0,eV.useRef)(null),Z=(0,eV.useRef)(null),J=(0,eV.useRef)(null),en=(0,eV.useRef)(null),ei=(0,eV.useRef)(null),ea=(0,eV.useRef)(null),{params:eo,passedParams:es,rest:el,events:ec}=function(h={},v=!0){let _={on:{}},b={},A={};slider_G(_,Swiper.defaults),slider_G(_,Swiper.extendedDefaults),_._emitClasses=!0,_.init=!1;let S={},C=sm.map(h=>h.replace(/_/,"")),w=Object.assign({},h);return Object.keys(w).forEach(w=>{typeof h[w]>"u"||(C.indexOf(w)>=0?slider_Z(h[w])?(_[w]={},A[w]={},slider_G(_[w],h[w]),slider_G(A[w],h[w])):(_[w]=h[w],A[w]=h[w]):0===w.search(/on[A-Z]/)&&"function"==typeof h[w]?v?b[`${w[2].toLowerCase()}${w.substr(3)}`]=h[w]:_.on[`${w[2].toLowerCase()}${w.substr(3)}`]=h[w]:S[w]=h[w])}),["navigation","pagination","scrollbar"].forEach(h=>{!0===_[h]&&(_[h]={}),!1===_[h]&&delete _[h]}),{params:_,passedParams:A,rest:S,events:b}}(w),{slides:eu,slots:ed}=function(h){let v=[],_={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return eV.Children.toArray(h).forEach(h=>{if(slider_Fe(h))v.push(h);else if(h.props&&h.props.slot&&_[h.props.slot])_[h.props.slot].push(h);else if(h.props&&h.props.children){let b=function slider_ke(h){let v=[];return eV.Children.toArray(h).forEach(h=>{slider_Fe(h)?v.push(h):h.props&&h.props.children&&slider_ke(h.props.children).forEach(h=>v.push(h))}),v}(h.props.children);b.length>0?b.forEach(h=>v.push(h)):_["container-end"].push(h)}else _["container-end"].push(h)}),{slides:v,slots:_}}(S),ee=()=>{G(!$)};Object.assign(eo.on,{_containerClasses(h,v){M(v)}});let te=()=>{Object.assign(eo.on,ec),O=!0;let h={...eo};if(delete h.wrapperClass,X.current=new Swiper(h),X.current.virtual&&X.current.params.virtual.enabled){X.current.virtual.slides=eu;let h={cache:!1,slides:eu,renderExternal:U,renderExternalUpdate:!1};slider_G(X.current.params.virtual,h),slider_G(X.current.originalParams.virtual,h)}};Q.current||te(),X.current&&X.current.on("_beforeBreakpoint",ee);let ce=()=>{!O&&ec&&X.current&&Object.keys(ec).forEach(h=>{X.current.on(h,ec[h])})},k=()=>{ec&&X.current&&Object.keys(ec).forEach(h=>{X.current.off(h,ec[h])})};return(0,eV.useEffect)(()=>()=>{X.current&&X.current.off("_beforeBreakpoint",ee)}),(0,eV.useEffect)(()=>{!j.current&&X.current&&(X.current.emitSlidesClasses(),j.current=!0)}),slider_Y(()=>{if(v&&(v.current=Q.current),Q.current)return X.current.destroyed&&te(),function({el:h,nextEl:v,prevEl:_,paginationEl:b,scrollbarEl:A,swiper:S},C){slider_Me(C)&&v&&_&&(S.params.navigation.nextEl=v,S.originalParams.navigation.nextEl=v,S.params.navigation.prevEl=_,S.originalParams.navigation.prevEl=_),slider_Pe(C)&&b&&(S.params.pagination.el=b,S.originalParams.pagination.el=b),slider_De(C)&&A&&(S.params.scrollbar.el=A,S.originalParams.scrollbar.el=A),S.init(h)}({el:Q.current,nextEl:J.current,prevEl:en.current,paginationEl:ei.current,scrollbarEl:ea.current,swiper:X.current},eo),C&&C(X.current),()=>{X.current&&!X.current.destroyed&&X.current.destroy(!0,!1)}},[]),slider_Y(()=>{ce();let h=function(h,v,_,b,A){let S=[];if(!v)return S;let f=h=>{0>S.indexOf(h)&&S.push(h)};if(_&&b){let h=b.map(A),v=_.map(A);h.join("")!==v.join("")&&f("children"),b.length!==_.length&&f("children")}return sm.filter(h=>"_"===h[0]).map(h=>h.replace(/_/,"")).forEach(_=>{if(_ in h&&_ in v){if(slider_Z(h[_])&&slider_Z(v[_])){let b=Object.keys(h[_]),A=Object.keys(v[_]);b.length!==A.length?f(_):(b.forEach(b=>{h[_][b]!==v[_][b]&&f(_)}),A.forEach(b=>{h[_][b]!==v[_][b]&&f(_)}))}else h[_]!==v[_]&&f(_)}}),S}(es,K.current,eu,Z.current,h=>h.key);return K.current=es,Z.current=eu,h.length&&X.current&&!X.current.destroyed&&function({swiper:h,slides:v,passedParams:_,changedParams:b,nextEl:A,prevEl:S,scrollbarEl:C,paginationEl:w}){let O,L,M,F,U,$,G,j;let Q=b.filter(h=>"children"!==h&&"direction"!==h&&"wrapperClass"!==h),{params:X,pagination:K,navigation:Z,scrollbar:J,virtual:en,thumbs:ei}=h;b.includes("thumbs")&&_.thumbs&&_.thumbs.swiper&&X.thumbs&&!X.thumbs.swiper&&(O=!0),b.includes("controller")&&_.controller&&_.controller.control&&X.controller&&!X.controller.control&&(L=!0),b.includes("pagination")&&_.pagination&&(_.pagination.el||w)&&(X.pagination||!1===X.pagination)&&K&&!K.el&&(M=!0),b.includes("scrollbar")&&_.scrollbar&&(_.scrollbar.el||C)&&(X.scrollbar||!1===X.scrollbar)&&J&&!J.el&&(F=!0),b.includes("navigation")&&_.navigation&&(_.navigation.prevEl||S)&&(_.navigation.nextEl||A)&&(X.navigation||!1===X.navigation)&&Z&&!Z.prevEl&&!Z.nextEl&&(U=!0);let z=v=>{h[v]&&(h[v].destroy(),"navigation"===v?(h.isElement&&(h[v].prevEl.remove(),h[v].nextEl.remove()),X[v].prevEl=void 0,X[v].nextEl=void 0,h[v].prevEl=void 0,h[v].nextEl=void 0):(h.isElement&&h[v].el.remove(),X[v].el=void 0,h[v].el=void 0))};b.includes("loop")&&h.isElement&&(X.loop&&!_.loop?$=!0:!X.loop&&_.loop?G=!0:j=!0),Q.forEach(h=>{if(slider_Z(X[h])&&slider_Z(_[h]))slider_G(X[h],_[h]),("navigation"===h||"pagination"===h||"scrollbar"===h)&&"enabled"in _[h]&&!_[h].enabled&&z(h);else{let v=_[h];(!0===v||!1===v)&&("navigation"===h||"pagination"===h||"scrollbar"===h)?!1===v&&z(h):X[h]=_[h]}}),Q.includes("controller")&&!L&&h.controller&&h.controller.control&&X.controller&&X.controller.control&&(h.controller.control=X.controller.control),b.includes("children")&&v&&en&&X.virtual.enabled&&(en.slides=v,en.update(!0)),b.includes("children")&&v&&X.loop&&(j=!0),O&&ei.init()&&ei.update(!0),L&&(h.controller.control=X.controller.control),M&&(h.isElement&&(!w||"string"==typeof w)&&((w=document.createElement("div")).classList.add("swiper-pagination"),h.el.shadowEl.appendChild(w)),w&&(X.pagination.el=w),K.init(),K.render(),K.update()),F&&(h.isElement&&(!C||"string"==typeof C)&&((C=document.createElement("div")).classList.add("swiper-scrollbar"),h.el.shadowEl.appendChild(C)),C&&(X.scrollbar.el=C),J.init(),J.updateSize(),J.setTranslate()),U&&(h.isElement&&(A&&"string"!=typeof A||((A=document.createElement("div")).classList.add("swiper-button-next"),h.el.shadowEl.appendChild(A)),S&&"string"!=typeof S||((S=document.createElement("div")).classList.add("swiper-button-prev"),h.el.shadowEl.appendChild(S))),A&&(X.navigation.nextEl=A),S&&(X.navigation.prevEl=S),Z.init(),Z.update()),b.includes("allowSlideNext")&&(h.allowSlideNext=_.allowSlideNext),b.includes("allowSlidePrev")&&(h.allowSlidePrev=_.allowSlidePrev),b.includes("direction")&&h.changeDirection(_.direction,!1),($||j)&&h.loopDestroy(),(G||j)&&h.loopCreate(),h.update()}({swiper:X.current,slides:eu,passedParams:es,changedParams:h,nextEl:J.current,prevEl:en.current,scrollbarEl:ea.current,paginationEl:ei.current}),()=>{k()}}),slider_Y(()=>{qt(X.current)},[F]),eV.createElement(b,slider_me({ref:Q,className:slider_Ne(`${L}${_?` ${_}`:""}`)},el),eV.createElement(sg.Provider,{value:X.current},ed["container-start"],eV.createElement(A,{className:function(h=""){return h?h.includes("swiper-wrapper")?h:`swiper-wrapper ${h}`:"swiper-wrapper"}(eo.wrapperClass)},ed["wrapper-start"],eo.virtual?function(h,v,_){if(!_)return null;let a=h=>{let _=h;return h<0?_=v.length+h:_>=v.length&&(_-=v.length),_},b=h.isHorizontal()?{[h.rtlTranslate?"right":"left"]:`${_.offset}px`}:{top:`${_.offset}px`},{from:A,to:S}=_,C=h.params.loop?-v.length:0,w=h.params.loop?2*v.length:v.length,O=[];for(let h=C;h<w;h+=1)h>=A&&h<=S&&O.push(v[a(h)]);return O.map((v,_)=>eV.cloneElement(v,{swiper:h,style:b,key:`slide-${_}`}))}(X.current,eu,F):eu.map((h,v)=>eV.cloneElement(h,{swiper:X.current,swiperSlideIndex:v})),ed["wrapper-end"]),slider_Me(eo)&&eV.createElement(eV.Fragment,null,eV.createElement("div",{ref:en,className:"swiper-button-prev"}),eV.createElement("div",{ref:J,className:"swiper-button-next"})),slider_De(eo)&&eV.createElement("div",{ref:ea,className:"swiper-scrollbar"}),slider_Pe(eo)&&eV.createElement("div",{ref:ei,className:"swiper-pagination"}),ed["container-end"]))});function slider_ge(){return(slider_ge=Object.assign?Object.assign.bind():function(h){for(var v=1;v<arguments.length;v++){var _=arguments[v];for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])}return h}).apply(this,arguments)}sE.displayName="Swiper";let sv=(0,eV.forwardRef)(function(h,v){let{tag:_="div",children:b,className:A="",swiper:S,zoom:C,lazy:w,virtualIndex:O,swiperSlideIndex:L,...M}=void 0===h?{}:h,F=(0,eV.useRef)(null),[U,$]=(0,eV.useState)("swiper-slide"),[G,j]=(0,eV.useState)(!1);function E(h,v,_){v===F.current&&$(_)}slider_Y(()=>{if("u">typeof L&&(F.current.swiperSlideIndex=L),v&&(v.current=F.current),!(!F.current||!S)){if(S.destroyed){"swiper-slide"!==U&&$("swiper-slide");return}return S.on("_slideClass",E),()=>{S&&S.off("_slideClass",E)}}}),slider_Y(()=>{S&&F.current&&!S.destroyed&&$(S.getSlideClasses(F.current))},[S]);let Q={isActive:U.indexOf("swiper-slide-active")>=0,isVisible:U.indexOf("swiper-slide-visible")>=0,isPrev:U.indexOf("swiper-slide-prev")>=0,isNext:U.indexOf("swiper-slide-next")>=0},I=()=>"function"==typeof b?b(Q):b;return eV.createElement(_,slider_ge({ref:F,className:slider_Ne(`${U}${A?` ${A}`:""}`),"data-swiper-slide-index":O,onLoad:()=>{j(!0)}},M),C&&eV.createElement(sf.Provider,{value:Q},eV.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof C?C:void 0},I(),w&&!G&&eV.createElement("div",{className:"swiper-lazy-preloader"}))),!C&&eV.createElement(sf.Provider,{value:Q},I(),w&&!G&&eV.createElement("div",{className:"swiper-lazy-preloader"})))});sv.displayName="SwiperSlide";let sT=o0("a",{textDecoration:"none"}),sy=o0("div",{position:"relative",zIndex:"0",borderRadius:"3px"}),s_=o0("div",{position:"absolute",width:"100%",backgroundColor:"green"}),sb=o0("figure",{display:"flex",flexDirection:"column",margin:"0 0 $2",flexGrow:"0",flexShrink:"0",borderRadius:"3px",transition:"$all",img:{position:"absolute",display:"flex",flexDirection:"column",objectFit:"cover",zIndex:"0",width:"100%",height:"100%",color:"transparent"},video:{position:"absolute",display:"flex",flexDirection:"column",objectFit:"cover",zIndex:"1",width:"100%",height:"100%",color:"transparent",opacity:"0",transition:"$load",borderRadius:"3px"},figcaption:{display:"flex",flexDirection:"column",padding:"$2 0",transition:"$all"},variants:{isFocused:{true:{video:{opacity:"1"},figcaption:{color:"$accent"}}}}}),sA=o0("span",{display:"flex",position:"relative",width:"100%",height:"100%",overflow:"hidden",borderRadius:"3px",boxShadow:"none",transition:"$all"}),sx=o0(slider_ve,{fontSize:"$3",fontWeight:"700"}),sS=o0(slider_Te,{fontSize:"$2",marginTop:"$1"}),Yt=({isFocused:h,label:v,summary:_,thumbnail:b})=>{let A=(0,eV.useRef)(null);return eV.createElement(sb,{isFocused:h},eV.createElement(oX.f,{ratio:1},eV.createElement(s_,{ref:A}),eV.createElement(sA,null,eV.createElement(slider_t,{altAsLabel:v,thumbnail:b,"data-testid":"figure-thumbnail"}))),eV.createElement("figcaption",null,eV.createElement(sx,{label:v}),_&&eV.createElement(sS,{summary:_})))},er=({backgroundImage:h})=>eV.createElement(sk,{"data-testid":"slider-item-placeholder"},eV.createElement(sC,{ratio:1,css:{backgroundImage:`url(${h})`}})),sC=o0(oX.f,{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",filter:"blur(3em)",opacity:"0.7"}),sk=o0("div",{position:"absolute",width:"100%",overflow:"hidden",backgroundColor:"#716C6B"}),nr=({handleItemInteraction:h,index:v,item:_})=>{var b,A;let[S,C]=(0,eV.useState)(!1),w=[],O="#";null!=_&&_.thumbnail&&(null==(b=null==_?void 0:_.thumbnail)?void 0:b.length)>0&&(w=_.thumbnail),null!=_&&_.homepage&&(null==(A=_.homepage)?void 0:A.length)>0&&(O=_.homepage[0].id);let m=()=>C(!0),c=()=>C(!1);return eV.createElement(sy,{"data-testid":"slider-item"},eV.createElement(sT,{"data-testid":"slider-item-anchor",href:O,onClick:v=>{h&&(v.preventDefault(),h(_))},tabIndex:0,onFocus:m,onBlur:c,onMouseEnter:m,onMouseLeave:c},eV.createElement(er,{backgroundImage:""}),eV.createElement(Yt,{"data-testid":"slider-item-figure",index:v,isFocused:S,key:_.id,label:_.label,summary:_.summary,thumbnail:w})))},sw=o0("div",{"& .swiper-slide":{}}),sI={640:{slidesPerView:2,slidesPerGroup:2,spaceBetween:20},768:{slidesPerView:3,slidesPerGroup:3,spaceBetween:30},1024:{slidesPerView:4,slidesPerGroup:4,spaceBetween:40},1366:{slidesPerView:5,slidesPerGroup:5,spaceBetween:50},1920:{slidesPerView:6,slidesPerGroup:6,spaceBetween:60}},ar=({breakpoints:h=sI,handleItemInteraction:v,instance:_,items:b})=>{let A=(0,eV.useRef)(null);return eV.createElement(sw,{ref:A},eV.createElement(sE,{a11y:{prevSlideMessage:"previous item",nextSlideMessage:"next item"},spaceBetween:31,modules:[Navigation,A11y],navigation:{nextEl:`.clover-slider-next-${_}`,prevEl:`.clover-slider-previous-${_}`},slidesPerView:2,slidesPerGroup:2,breakpoints:h},b.map((h,_)=>eV.createElement(sv,{key:`${h.id}-${_}`,"data-index":_,"data-type":null==h?void 0:h.type.toLowerCase()},eV.createElement(nr,{handleItemInteraction:v,index:_,item:h})))))},sr=h=>{let v=0,_=null==h?void 0:h.length,b=0;if(_>0)for(;b<_;)v=(v<<5)-v+h.charCodeAt(b++)|0;return v};"u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self&&self;var sN={exports:{}};ed=sN.exports,ep=Object.defineProperty,eh=(h,v,_)=>v in h?ep(h,v,{enumerable:!0,configurable:!0,writable:!0,value:_}):h[v]=_,em=(h,v,_)=>(eh(h,"symbol"!=typeof v?v+"":v,_),_),function(h){let v="http://library.stanford.edu/iiif/image-api/compliance.html#level1",_="http://library.stanford.edu/iiif/image-api/compliance.html#level2",b="http://library.stanford.edu/iiif/image-api/conformance.html#level1",A="http://library.stanford.edu/iiif/image-api/conformance.html#level2",S="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",C="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",w="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",O="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",L="http://iiif.io/api/image/1/level1.json",M="http://iiif.io/api/image/1/profiles/level1.json",F="http://iiif.io/api/image/1/level2.json",U="http://iiif.io/api/image/1/profiles/level2.json",$="http://iiif.io/api/image/2/level1.json",G="http://iiif.io/api/image/2/profiles/level1.json",j="http://iiif.io/api/image/2/level2.json",Q="http://iiif.io/api/image/2/profiles/level2.json",X="level1",K="level2",Z="http://iiif.io/api/image/2/level1",J="http://iiif.io/api/image/2/level2",en=[Z,J,v,_,b,A,S,C,w,O,L,M,F,U,$,G,j,Q,X,K],ei=["http://iiif.io/api/image/2/level0",Z,J,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",v,_,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",b,A,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",S,C,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",w,O,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",L,M,F,U,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",$,G,j,Q,"level0",X,K],ea=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];let q=class q{constructor(h,v={}){em(this,"traversals"),em(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...h},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...v}}static all(h){return new q({collection:[h],manifest:[h],canvas:[h],annotationList:[h],sequence:[h],annotation:[h],contentResource:[h],choice:[h],range:[h],service:[h],layer:[h]})}traverseCollection(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(h))),this.traversals.collection)}traverseCollectionItems(h){if(this.options.mergeMemberProperties){let v=[...(h.manifests||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h),...(h.collections||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h),...h.members||[]];delete h.collections,delete h.manifests,h.members=v}return h.manifests&&(h.manifests=h.manifests.map(h=>this.traverseManifest("string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h))),h.collections&&(h.collections=h.collections.map(h=>this.traverseCollection("string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h))),h.members&&(h.members=h.members.map(h=>"string"==typeof h?h:this.traverseUnknown(h))),h}traverseManifest(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(h))),this.traversals.manifest)}traverseManifestItems(h){return h.sequences&&(h.sequences=h.sequences.map(h=>this.traverseSequence(h))),h.structures&&(h.structures=h.structures.map(h=>this.traverseRange(h))),h}traverseSequence(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(h))),this.traversals.sequence)}traverseSequenceItems(h){return h.canvases&&(h.canvases=h.canvases.map(h=>this.traverseCanvas(h))),h}traverseCanvas(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(h))),this.traversals.canvas)}traverseCanvasItems(h){return h.images&&(h.images=h.images.map(h=>this.traverseAnnotation(h))),h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseRange(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(h))),this.traversals.range)}traverseRangeItems(h){if(this.options.mergeMemberProperties){let v=[...(h.ranges||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Range"}:h),...(h.canvases||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Canvas"}:h),...h.members||[]];delete h.ranges,delete h.canvases,h.members=v.length?v.map(h=>this.traverseUnknown(h)):void 0}return h}traverseAnnotationList(h){let v="string"==typeof h?{"@id":h,"@type":"sc:AnnotationList"}:h;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(v)),this.traversals.annotationList)}traverseAnnotationListItems(h){return h.resources&&(h.resources=h.resources.map(h=>this.traverseAnnotation(h))),h}traverseAnnotation(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(h))),this.traversals.annotation)}traverseAnnotationItems(h){return h.resource&&(Array.isArray(h.resource)?h.resource=h.resource.map(h=>this.traverseContentResource(h)):h.resource=this.traverseContentResource(h.resource)),h.on,h}traverseLayer(h){return this.traverseType(this.traverseLinking(this.traverseLayerItems(h)),this.traversals.layer)}traverseLayerItems(h){return h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseChoice(h){return this.traverseType(this.traverseChoiceItems(h),this.traversals.choice)}traverseChoiceItems(h){return h.default&&"rdf:nil"!==h.default&&(h.default=this.traverseContentResource(h.default)),h.item&&"rdf:nil"!==h.item&&(h.item=h.item.map(h=>this.traverseContentResource(h))),h}traverseService(h){return this.traverseType(this.traverseLinking(h),this.traversals.service)}traverseContentResource(h){return"oa:Choice"===h["@type"]?this.traverseChoice(h):this.traverseType(this.traverseDescriptive(this.traverseLinking(h)),this.traversals.contentResource)}traverseUnknown(h){if(!h["@type"]||"string"==typeof h)return h;switch(function(h){if(null==h)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(h))throw Error("Array is not a valid entity");if("object"!=typeof h)throw Error(typeof h+" is not a valid entity");if("string"==typeof h["@type"]){let v=ea.indexOf(h["@type"]);if(-1!==v)return ea[v]}if(h.profile)return"Service";if(h.format||h["@type"])return"ContentResource";throw Error("Resource type is not known")}(h)){case"sc:Collection":return this.traverseCollection(h);case"sc:Manifest":return this.traverseManifest(h);case"sc:Canvas":return this.traverseCanvas(h);case"sc:Sequence":return this.traverseSequence(h);case"sc:Range":return this.traverseRange(h);case"oa:Annotation":return this.traverseAnnotation(h);case"sc:AnnotationList":return this.traverseAnnotationList(h);case"sc:Layer":return this.traverseLayer(h);case"Service":return this.traverseService(h);case"oa:Choice":return this.traverseChoice(h);case"ContentResource":return this.traverseContentResource(h)}return h.profile?this.traverseService(h):h}traverseImageResource(h){let v=Array.isArray(h),_=Array.isArray(h)?h:[h],b=[];for(let h of _)"string"==typeof h?b.push(this.traverseContentResource({"@id":h,"@type":"dctypes:Image"})):b.push(this.traverseContentResource(h));return v||this.options.convertPropsToArray?b:b[0]}traverseDescriptive(h){return h.thumbnail&&(h.thumbnail=this.traverseImageResource(h.thumbnail)),h.logo&&(h.logo=this.traverseImageResource(h.logo)),h}traverseOneOrMoreServices(h){let v=Array.isArray(h),_=Array.isArray(h)?h:[h],b=[];for(let h of _)b.push(this.traverseService(h));return v||this.options.convertPropsToArray?b:b[0]}traverseLinking(h){return h.related&&(h.related=this.traverseOneOrManyType(h.related,this.traversals.contentResource)),h.rendering&&(h.rendering=this.traverseOneOrManyType(h.rendering,this.traversals.contentResource)),h.service&&(h.service=this.traverseOneOrMoreServices(h.service)),h.seeAlso&&(h.seeAlso=this.traverseOneOrManyType(h.seeAlso,this.traversals.contentResource)),h.within&&("string"==typeof h.within||(h.within=this.traverseOneOrManyType(h.within,this.traversals.contentResource))),h.startCanvas&&("string"==typeof h.startCanvas?h.startCanvas=this.traverseType({"@id":h.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):h.startCanvas&&this.traverseType(h.startCanvas,this.traversals.canvas)),h.contentLayer&&("string"==typeof h.contentLayer?h.contentLayer=this.traverseLayer({"@id":h.contentLayer,"@type":"sc:Layer"}):h.contentLayer=this.traverseLayer(h.contentLayer)),h}traverseOneOrManyType(h,v){if(!Array.isArray(h)){if(!this.options.convertPropsToArray)return this.traverseType(h,v);h=[h]}return h.map(h=>this.traverseType(h,v))}traverseType(h,v){return v.reduce((h,v)=>{let _=v(h);return void 0!==_||this.options.allowUndefinedReturn?_:h},h)}};function k(h,v="none"){if(!h)return{};let _=Array.isArray(h)?h:[h],b={};for(let h of _){if("string"==typeof h){b[v]=b[v]?b[v]:[],b[v].push(h||"");continue}if(!h["@language"]){b[v]=b[v]?b[v]:[],b[v].push(h["@value"]||"");continue}let _=h["@language"];b[_]=b[_]?b[_]:[],b[_].push(h["@value"]||"")}return b}function R(h){for(let v of["sc","oa","dcterms","dctypes","iiif"])if(h.startsWith(`${v}:`))return h.slice(v.length+1);return h}let eo=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function ue(h){let v=h["@id"]||h.id,_=h["@type"]||h.type,b=h.profile||void 0,A=h["@context"]||void 0;if(b){let h=function(h){switch(h){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(b);if(h)return h}if(A){let h=function(h){let v=Array.isArray(h)?h:[h];for(let h of v)switch(h){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(A);if(h)return h}if(_){if(Array.isArray(_)){if(-1!==_.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==_.indexOf("cnt:ContentAsText"))return"TextualBody";_=_[0]}for(let h of["sc","oa","dcterms","dctypes","iiif"])if(_.startsWith(`${h}:`)){_=_.slice(h.length+1);break}switch(_){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(_&&-1!==eo.indexOf(_))return _;if(h.format){if(h.format.startsWith("image/"))return"Image";if(h.format.startsWith("text/")||"application/pdf"===h.format)return"Text";if(h.format.startsWith("application/"))return"Dataset"}return v&&(v.endsWith(".jpg")||v.endsWith(".png")||v.endsWith(".jpeg"))?"Image":_||"unknown"}let es=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,el=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function B(h){for(let v in h)void 0!==h[v]&&null!==h[v]||delete h[v];return h}let ec=0;function Se(h,v){let _=encodeURI(h.id||h["@id"]||"").trim();return _&&v?`${_}/${v}`:_||(ec++,`http://example.org/${h["@type"]}${v?`/${v}`:""}/${ec}`)}function H(h){let v;let _=[...h.behavior||[]];return h.viewingHint&&_.push(h.viewingHint),Array.isArray(h.motivation)?v=h.motivation.map(R):h.motivation&&(v=R(h.motivation)),{"@context":h["@context"]?function(h){if(h){let v=Array.isArray(h)?h:[h],_=[];for(let h of v)"http://iiif.io/api/presentation/2/context.json"===h&&_.push("http://iiif.io/api/presentation/3/context.json"),-1===el.indexOf(h)&&_.push(h);if(v.length)return 1===_.length?_[0]:_}}(h["@context"]):void 0,id:(h["@id"]||Se(h)).trim(),type:ue(h),behavior:_.length?_:void 0,height:h.height?h.height:void 0,width:h.width?h.width:void 0,motivation:v,viewingDirection:h.viewingDirection,profile:h.profile,format:h.format?h.format:void 0,duration:void 0,timeMode:void 0}}function W(h){var v;let[_,b]=function(h,v="Rights/License",_="none"){let b=null,A=[],S=Array.isArray(h)?h:[h];for(let h of S){let S=h?function(h){let v=h.match(es);return v?v[0]:h}(h):void 0;S&&(-1!==S.indexOf("creativecommons.org")||-1!==S.indexOf("rightsstatements.org"))?b=S.startsWith("https://")?`http://${S.slice(8)}`:S:S&&A.push({label:{[_]:[v]},value:{[_]:[S]}})}return[b,A]}(h.license),A=[...h.metadata&&(v=h.metadata)?v.map(h=>({label:k(h.label),value:k(h.value)})):[],...b];return{rights:_,metadata:A.length?A:void 0,label:h.label?k(h.label):void 0,requiredStatement:h.attribution?{label:k("Attribution"),value:k(h.attribution)}:void 0,navDate:h.navDate,summary:h.description?k(h.description):void 0,thumbnail:h.thumbnail}}function V(h){var v;let _=h.related?Array.isArray(h.related)?h.related:[h.related]:[],b=h.contentLayer;return{provider:h.logo||_.length?[{id:"http://example.org/provider",type:"Agent",homepage:_.length?[_[0]]:void 0,logo:h.logo?Array.isArray(h.logo)?h.logo:[h.logo]:void 0,label:k("Unknown")}]:void 0,partOf:function(h){if(!h.within)return;let v=Array.isArray(h.within)?h.within:[h.within],_=[];for(let b of v)"string"==typeof b?b&&"sc:Manifest"===h["@type"]&&_.push({id:b,type:"Collection"}):b["@id"]&&_.push({id:b["@id"],type:ue(b)});return _.length?_:void 0}(h),rendering:h.rendering,seeAlso:h.seeAlso,start:h.startCanvas,service:h.service?Array.isArray(v=h.service)?v:[v]:void 0,supplementary:b?[b]:void 0}}function pe(h){return B({...H(h),...W(h),...V(h),chars:h.chars,format:h.format?h.format:void 0,language:h.language})}let eu=new q({collection:[function(h){return B({...H(h),...W(h),...V(h),items:h.members})}],manifest:[function(h){let v=[],_=[];for(let b of h.sequences||[])b.canvases.length&&v.push(...b.canvases),b.behavior&&_.push(...b.behavior);let b=H(h);return _.length&&(b.behavior?b.behavior.push(..._):b.behavior=_),B({...b,...W(h),...V(h),items:v,structures:h.structures})}],canvas:[function(h){return B({...H(h),...W(h),...V(h),annotations:h.otherContent&&h.otherContent.length?h.otherContent:void 0,items:h.images&&h.images.length?[{id:Se(h,"annotation-page"),type:"AnnotationPage",items:h.images}]:void 0})}],annotationList:[function(h){return B({...H(h),...W(h),...V(h),items:h.resources&&h.resources.length?h.resources:void 0})}],sequence:[function(h){return h.canvases&&0!==h.canvases.length?{canvases:h.canvases,behavior:h.viewingHint?[h.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(h){return B({...H(h),...W(h),...V(h),target:function e(h){if(Array.isArray(h)){if(h.length>1)return{type:"List",items:h.map(e)};h=h[0]}if("string"==typeof h)return encodeURI(h).trim();if("@type"in h){let v;if("string"==typeof h.full)v=h.full;else if("dctypes:Image"===h.full["@type"])v={id:h.full["@id"],type:"Image"};else{if("sc:Canvas"!==h.full["@type"])throw Error(`Unsupported source type on annotation: ${h.full["@type"]}`);v={id:h.full["@id"],type:"Canvas"}}return{type:"SpecificResource",source:v,selector:function de(h){if((Array.isArray(h["@type"])&&h["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==h["@type"])&&("chars"in h||"value"in h))return{type:"SvgSelector",value:"chars"in h?h.chars:h.value};if("oa:FragmentSelector"===h["@type"])return{type:"FragmentSelector",value:h.value};if("oa:Choice"===h["@type"])return[de(h.default),...(Array.isArray(h.item)?h.item:[h.item]).map(de)];if("iiif:ImageApiSelector"==h["@type"])return{type:"ImageApiSelector",region:"region"in h?h.region:void 0,rotation:"rotation"in h?h.rotation:void 0};throw Error(`Unsupported selector type: ${h["@type"]}`)}(h.selector)}}return encodeURI(h["@id"]).trim()}(h.on),body:Array.isArray(h.resource)?h.resource.map(pe):pe(h.resource)})}],contentResource:[pe],choice:[function(h){let v=[];return h.default&&"rdf:nil"!==h.default&&v.push(h.default),h.item&&"rdf:nil"!==h.item&&v.push(...h.item),{...H(h),...W(h),items:v}}],range:[function(h){return B({...H(h),...W(h),...V(h),items:h.members})}],service:[function(h){let{"@id":v,"@type":_,"@context":b,profile:A,...S}=h,C={};return v&&(C["@id"]=v),C["@type"]=ue(h),"unknown"===C["@type"]&&(b&&b.length&&(C["@context"]=b),C["@type"]="Service"),A&&(C.profile=function re(h){return Array.isArray(h)?re(h.find(h=>"string"==typeof h)):-1!==ei.indexOf(h)?"level2":-1!==en.indexOf(h)?"level1":"string"==typeof h?h:void 0}(A)),B({...C,...S})}],layer:[function(h){return B({...H(h),...W(h),...V(h)})}]});h.upgrade=function(h){return h&&h["@context"]&&("http://iiif.io/api/presentation/2/context.json"===h["@context"]||-1!==h["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===h["@context"])||"http://iiif.io/api/image/2/context.json"===h["@context"]?eu.traverseUnknown(h):h},Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}(ed);var sO=sN.exports;let br=h=>eV.createElement(slider_st,{initialState:{...oK,options:{...h.options}}},eV.createElement(ur,{...h})),ur=({collectionId:h,iiifContent:v,onItemInteraction:_})=>{let b=function(){let h=eV.useContext(oZ);if(void 0===h)throw Error("useCollectionState must be used within a CollectionProvider");return h}(),{options:A}=b,[S,C]=(0,eV.useState)(),w=v;if(h&&(w=h),(0,eV.useEffect)(()=>{w&&fetch(w).then(h=>h.json()).then(sO.upgrade).then(h=>C(h)).catch(h=>{console.error(`The IIIF Collection ${w} failed to load: ${h}`)})},[w]),(null==S?void 0:S.items.length)===0)return console.log(`The IIIF Collection ${w} does not contain items.`),eV.createElement(eV.Fragment,null);let O=sr(w);return S?eV.createElement("div",null,eV.createElement(ErrorBoundary,{FallbackComponent:slider_ht},eV.createElement(Dt,{label:S.label,summary:S&&S.summary?S.summary:{none:[""]},homepage:S.homepage,instance:O}),eV.createElement(ar,{items:S.items,handleItemInteraction:_,instance:O,breakpoints:A.breakpoints}))):eV.createElement(eV.Fragment,null)};var sR=_(7462),sL=_(6206),sD=_(5360),sP=_(7342),sM=_(9981),sF=_(8771),sB=_(5320),sH=_(9115),sU=_(1276);let sz="Collapsible",[s$,sG]=(0,sD.b)(sz),[sj,sV]=s$(sz),sW=(0,eV.forwardRef)((h,v)=>{let{__scopeCollapsible:_,open:b,defaultOpen:A,disabled:S,onOpenChange:C,...w}=h,[O=!1,L]=(0,sP.T)({prop:b,defaultProp:A,onChange:C});return(0,eV.createElement)(sj,{scope:_,disabled:S,contentId:(0,sU.M)(),open:O,onOpenToggle:(0,eV.useCallback)(()=>L(h=>!h),[L])},(0,eV.createElement)(sB.WV.div,(0,sR.Z)({"data-state":$409067139f391064$var$getState(O),"data-disabled":S?"":void 0},w,{ref:v})))}),sq=(0,eV.forwardRef)((h,v)=>{let{__scopeCollapsible:_,...b}=h,A=sV("CollapsibleTrigger",_);return(0,eV.createElement)(sB.WV.button,(0,sR.Z)({type:"button","aria-controls":A.contentId,"aria-expanded":A.open||!1,"data-state":$409067139f391064$var$getState(A.open),"data-disabled":A.disabled?"":void 0,disabled:A.disabled},b,{ref:v,onClick:(0,sL.M)(h.onClick,A.onOpenToggle)}))}),sY="CollapsibleContent",sQ=(0,eV.forwardRef)((h,v)=>{let{forceMount:_,...b}=h,A=sV(sY,h.__scopeCollapsible);return(0,eV.createElement)(sH.z,{present:_||A.open},({present:h})=>(0,eV.createElement)(sX,(0,sR.Z)({},b,{ref:v,present:h})))}),sX=(0,eV.forwardRef)((h,v)=>{let{__scopeCollapsible:_,present:b,children:A,...S}=h,C=sV(sY,_),[w,O]=(0,eV.useState)(b),L=(0,eV.useRef)(null),M=(0,sF.e)(v,L),F=(0,eV.useRef)(0),U=F.current,$=(0,eV.useRef)(0),G=$.current,j=C.open||w,Q=(0,eV.useRef)(j),X=(0,eV.useRef)();return(0,eV.useEffect)(()=>{let h=requestAnimationFrame(()=>Q.current=!1);return()=>cancelAnimationFrame(h)},[]),(0,sM.b)(()=>{let h=L.current;if(h){X.current=X.current||{transitionDuration:h.style.transitionDuration,animationName:h.style.animationName},h.style.transitionDuration="0s",h.style.animationName="none";let v=h.getBoundingClientRect();F.current=v.height,$.current=v.width,Q.current||(h.style.transitionDuration=X.current.transitionDuration,h.style.animationName=X.current.animationName),O(b)}},[C.open,b]),(0,eV.createElement)(sB.WV.div,(0,sR.Z)({"data-state":$409067139f391064$var$getState(C.open),"data-disabled":C.disabled?"":void 0,id:C.contentId,hidden:!j},S,{ref:M,style:{"--radix-collapsible-content-height":U?`${U}px`:void 0,"--radix-collapsible-content-width":G?`${G}px`:void 0,...h.style}}),j&&A)});function $409067139f391064$var$getState(h){return h?"open":"closed"}var sK=_(8764).lW;function esm_p(h){return h.endsWith("info.json")?h:h.endsWith("/")?`${h}info.json`:`${h}/info.json`}let sZ="http://library.stanford.edu/iiif/image-api/compliance.html#level1",sJ="http://library.stanford.edu/iiif/image-api/compliance.html#level2",s0="http://library.stanford.edu/iiif/image-api/conformance.html#level1",s1="http://library.stanford.edu/iiif/image-api/conformance.html#level2",s2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",s3="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",s4="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",s5="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",s6="http://iiif.io/api/image/1/level1.json",s8="http://iiif.io/api/image/1/profiles/level1.json",s9="http://iiif.io/api/image/1/level2.json",s7="http://iiif.io/api/image/1/profiles/level2.json",lr="http://iiif.io/api/image/2/level1.json",li="http://iiif.io/api/image/2/profiles/level1.json",lo="http://iiif.io/api/image/2/level2.json",ls="http://iiif.io/api/image/2/profiles/level2.json",ll="level1",lc="level2",lu="http://iiif.io/api/image/2/level1",ld="http://iiif.io/api/image/2/level2",lp=[ld,sJ,s1,s3,s5,s9,s7,lo,ls,lc],lh=[...lp,lu,sZ,s0,s2,s4,s6,s8,lr,li,ll],lm=["http://iiif.io/api/image/2/level0",lu,ld,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",sZ,sJ,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",s0,s1,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",s2,s3,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",s4,s5,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",s6,s8,s9,s7,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",lr,li,lo,ls,"level0",ll,lc],lf={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},lg={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},lE={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function esm_h(h){return h["@id"]?h["@id"]:h.id?h.id:void 0}function esm_w(h){if(!h||!h.profile||!esm_h(h))return!1;let v=Array.isArray(h.profile)?h.profile:[h.profile];for(let h of v)if("string"==typeof h&&-1!==lm.indexOf(h))return!0;return!1}function esm_v(h,v){if(v&&v.profile){let _=v.profile;if(_){let v=Array.isArray(_)?_:[_];return v.includes(`level${h}`)||v.includes(`http://iiif.io/api/image/2/level${h}.json`)||v.includes(`http://iiif.io/api/image/1/level${h}.json`)||v.includes(`http://iiif.io/api/image/1/profiles/level${h}.json`)}}return!1}function esm_F(h){return esm_w(h)?esm_v(0,h)?0:esm_v(1,h)?1:esm_v(2,h)?2:null:null}function esm_X(h){return -1!==(h["@context"]?Array.isArray(h["@context"])?h["@context"]:[h["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")}function esm_Y(h){let v=h.match(/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/);if(v){let _=v[1],b=parseInt(v[4],10),A=parseInt(v[5],10),S=v[7];if(("max"===_||"full"===_)&&b&&A&&S)return{type:"fixed",id:h,height:A,width:b}}return{type:"unknown",id:h}}function esm_q(h){let v=[],_=h.length;for(let b=0;b<_;b++){let _=function(h){return esm_w(h)?(h&&h.sizes?h.sizes:[]).map(v=>({id:esm_h(h),type:"fixed-service",height:v.height,width:v.width,level:esm_F(h),version:esm_X(h)?3:2})):[]}(h[b]);_.length&&v.push(..._);let A=function(h){if(!function(h){if(!esm_w(h))return!1;let v=Array.isArray(h.profile)?h.profile:[h.profile];for(let h of v)if("string"==typeof h){if(-1!==lh.indexOf(h))return!0}else{let v=[...h.supports||[],...h.extraFeatures||[]];if(-1!==v.indexOf("regionByPx")&&(-1!==v.indexOf("sizeByW")||-1!==v.indexOf("sizeByWh")))return!0}return!1}(h))return[];let v=[],_=Array.isArray(h.profile)?h.profile:[h.profile],b=_.length;for(let v=0;v<b;v++){let b=_[v];if("string"!=typeof b&&(b.maxHeight||b.maxWidth))return[{id:esm_h(h),type:"variable",minWidth:0,minHeight:0,maxHeight:b.maxHeight||b.maxWidth,maxWidth:b.maxWidth||b.maxHeight,level:esm_F(h),version:"http://iiif.io/api/image/3/context.json"===h["@context"]?3:2}]}if(h.tiles){let _=h.tiles.length;for(let b=0;b<_;b++){let _=h.tiles[b];(_.height||_.width)&&v.push({id:esm_h(h),type:"variable",minHeight:0,minWidth:0,maxHeight:_.height||_.width,maxWidth:_.width,level:esm_F(h),version:esm_X(h)?3:2})}}return v}(h[b]);A.length&&v.push(...A)}return v}function esm_ee(h){let v=h.service?Array.isArray(h.service)?h.service:[h.service]:[],_=v.length,b=[];for(let h=0;h<_;h++)esm_w(v[h])&&b.push(v[h]);return b}var lv=Object.defineProperty,lT=Object.defineProperties,ly=Object.getOwnPropertyDescriptors,l_=Object.getOwnPropertySymbols,lb=Object.prototype.hasOwnProperty,lA=Object.prototype.propertyIsEnumerable,esm_$e=(h,v,_)=>v in h?lv(h,v,{enumerable:!0,configurable:!0,writable:!0,value:_}):h[v]=_,esm_x=(h,v)=>{for(var _ in v||(v={}))lb.call(v,_)&&esm_$e(h,_,v[_]);if(l_)for(var _ of l_(v))lA.call(v,_)&&esm_$e(h,_,v[_]);return h},esm_I=(h,v)=>lT(h,ly(v));function esm_O(h,v,_){let b=function(h){let v=function(h,v=""){let{path:_,scheme:b,server:A,prefix:S}=function(h,v=""){let _=h.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!_)throw Error(`Invalid or unknown input ${h}`);let b=_[2],A=_[3],S=_[4];if("/"===S[0]&&(S=S.substr(1)),v.length>0){if("/"===v[0]&&(v=v.substr(1)),v!==S.substr(0,v.length))throw Error(`Path does not start with prefix (path: ${S}, prefix: ${v})`);S=S.substr(v.length)}return{scheme:b,server:A,path:S,prefix:v}}(h,v),C=_.split("/").reverse(),[w,O,L,M,...F]=C,U=F.reverse().filter(Boolean).join("/");if(1===C.length||""===w)return{type:"base",scheme:b,server:A,prefix:S,identifier:U};if("info.json"===w){let[,...h]=C;return{type:"info",scheme:b,server:A,prefix:S,identifier:h.reverse().filter(Boolean).join("/")}}let $=w.split(".");return{type:"image",scheme:b,server:A,prefix:S,identifier:U,originalPath:_,region:function(h){try{if("full"===h)return{full:!0};if("square"===h)return{square:!0};let v=h.startsWith("pct:"),_=h.substr(v?4:0).split(",").map(h=>parseFloat(h));return{x:_[0],y:_[1],w:_[2],h:_[3],percent:v}}catch{throw Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+h)}}(M),size:function(h){let v={upscaled:!1,max:!1,confined:!1};if("^"===h[0]&&(v.upscaled=!0,h=h.slice(1)),"max"===h||"full"===h)return v.max=!0,v.serialiseAsFull="full"===h,v;if("!"===h[0]&&(v.confined=!0,h=h.slice(1)),"p"===h[0])return v.percentScale=parseFloat(h.slice(4)),v;let _=h.split(",").map(h=>h.trim());return _.length&&(""!==_[0]&&(v.width=parseInt(_[0],10)),""!==_[1]?(v.height=parseInt(_[1],10),v.version=2):v.version=3),v}(L),rotation:function(h){let v={angle:0};if("!"===h[0]&&(v.mirror=!0,h=h.substr(1)),v.angle=parseFloat(h)%360,Number.isNaN(v.angle))throw Error(`Invalid rotation ${h}`);return v}(O),quality:$[0],format:$[1]}}(esm_p(h.id));if("info"!==v.type)throw Error("Invalid service URL");let _=function(h){let v=h?Array.isArray(h.profile)?h.profile:[h.profile]:[],_={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let h of v){var b;if("string"==typeof h&&(b=h,h=-1!==lp.indexOf(b)?lE:-1!==lh.indexOf(b)?lg:lf),h){if(h.formats)for(let v of h.formats)-1===_.extraFormats.indexOf(v)&&_.extraFormats.push(v);if(h.qualities)for(let v of h.qualities)-1===_.extraQualities.indexOf(v)&&_.extraQualities.push(v);if(h.supports)for(let v of h.supports)-1===_.extraFeatures.indexOf(v)&&_.extraFeatures.push(v);if(h.maxHeight&&(_.maxHeight=h.maxHeight),h.maxWidth&&(_.maxWidth=h.maxWidth),h.maxArea&&(_.maxArea=h.maxArea),h.extraFormats)for(let v of h.extraFormats)-1===_.extraFormats.indexOf(v)&&_.extraFormats.push(v);if(h.extraQualities)for(let v of h.extraQualities)-1===_.extraQualities.indexOf(v)&&_.extraQualities.push(v);if(h.extraFeatures)for(let v of h.extraFeatures)-1===_.extraFeatures.indexOf(v)&&_.extraFeatures.push(v);h.maxHeight&&(_.maxHeight=h.maxHeight),h.maxWidth&&(_.maxWidth=h.maxWidth),h.maxArea&&(_.maxArea=h.maxArea)}}if(h.extraFormats)for(let v of h.extraFormats)-1===_.extraFormats.indexOf(v)&&_.extraFormats.push(v);if(h.extraFeatures)for(let v of h.extraFeatures)-1===_.extraFeatures.indexOf(v)&&_.extraFeatures.push(v);if(h.extraQualities)for(let v of h.extraQualities)-1===_.extraQualities.indexOf(v)&&_.extraQualities.push(v);return _}(h);return{identifier:v.identifier,originalPath:"",server:v.server,prefix:v.prefix,scheme:v.scheme,type:"image",quality:-1===_.extraQualities.indexOf("default")?_.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}({"@context":3===h.version?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:esm_p(esm_h(h)),profile:null===h.level||typeof h.level>"u"?"level0":`level${h.level}}`,type:3===h.version?"ImageService3":"ImageService2"});if("image"!==b.type)throw Error("Invalid service");return b.size.max=!1,b.size.width=v,b.size.height=_,{id:function(h,v){let _=h.prefix.startsWith("/")?h.prefix.substr(1):h.prefix,b=`${h.scheme}://${h.server}/${_?`${_}/`:""}${h.identifier}`;if("base"===h.type)return b;if("info"===h.type)return`${b}/info.json`;let{size:A}=h,{region:S,rotation:C,format:w,quality:O}=h;if(v){let h=v["@context"]?Array.isArray(v["@context"])?v["@context"]:[v["@context"]]:[],_=-1!==h.indexOf("http://iiif.io/api/image/2/context.json"),b=-1!==h.indexOf("http://iiif.io/api/image/3/context.json");if((A.width!==v.width||A.height)&&(A.height!==v.height||A.width)&&(A.width!==v.width||A.height!==v.height)||(A=esm_I(esm_x({},A),{max:!0})),_&&(A.max&&!A.serialiseAsFull&&(A=esm_I(esm_x({},A),{serialiseAsFull:!0})),!A.max&&A.width&&A.height&&(A=esm_I(esm_x({},A),{height:void 0})),A=esm_I(esm_x({},A),{version:2})),b){if(A.max&&A.serialiseAsFull&&(A=esm_I(esm_x({},A),{serialiseAsFull:!1})),A.width&&!A.height&&v.width&&v.height){let h=v.height/v.width;A=esm_I(esm_x({},A),{height:Math.ceil(A.width*h)})}A=esm_I(esm_x({},A),{version:3})}}return[b,function({x:h=0,y:v=0,w:_,h:b,full:A,square:S,percent:C}){if(A)return"full";if(S)return"square";if(typeof _>"u"||typeof b>"u")throw Error("RegionParameter: invalid region");let w=`${h},${v},${_},${b}`;return C?`pct:${w}`:w}(S),function({max:h,percentScale:v,upscaled:_,confined:b,width:A,height:S,serialiseAsFull:C,version:w}){let O=[];return _&&O.push("^"),h?O.push(C?"full":"max"):(b&&O.push("!"),v&&O.push(`pct:${v}`),A&&O.push(`${A}`),O.push(","),S&&3===w&&O.push(`${S}`)),O.join("")}(A),`${C.mirror?"!":""}${(C.angle||0)%360}`,`${O}.${w}`].filter(Boolean).join("/")}(b),type:"fixed",width:v,height:_||h.height/(h.width||1)*v,unsafe:h.width>v}}function esm_y(h){let v=h.replace(/(https?:\/\/)?(www.)?/i,"");return -1!==v.indexOf("/")?v.split("/")[0]:v}var lx=Object.defineProperty,lS=Object.defineProperties,lC=Object.getOwnPropertyDescriptors,lk=Object.getOwnPropertySymbols,lw=Object.prototype.hasOwnProperty,lI=Object.prototype.propertyIsEnumerable,esm_Re=(h,v,_)=>v in h?lx(h,v,{enumerable:!0,configurable:!0,writable:!0,value:_}):h[v]=_,ri=(h,v)=>{for(var _ in v||(v={}))lw.call(v,_)&&esm_Re(h,_,v[_]);if(lk)for(var _ of lk(v))lI.call(v,_)&&esm_Re(h,_,v[_]);return h},si=(h,v)=>lS(h,lC(v)),esm_=(h,v,_)=>new Promise((b,A)=>{var s=h=>{try{o(_.next(h))}catch(h){A(h)}},a=h=>{try{o(_.throw(h))}catch(h){A(h)}},o=h=>h.done?b(h.value):Promise.resolve(h.value).then(s,a);o((_=_.apply(h,v)).next())});new class{constructor(){this.config={verificationsRequired:1,approximateServices:!0,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={}}setConfig(h){Object.assign(this.config,h)}sample(h,v,_=!0){let b=esm_y(esm_h(h)),A=esm_p(esm_h(h)),S=this.knownImageServers[b];return this.imageServices[A]=Object.assign(h,{real:!0}),S||!h.tiles||esm_v(0,h)?this.verify(h):(this.knownImageServers[b]={verifications:0,malformed:!1,root:b,preLoaded:_,sampledId:esm_h(h),verified:!1,server:null,result:{context:h["@context"]||[],sampledProfile:h.profile,resourceServiceRatio:v&&h.height?v.height/h.height:1,sampledSizes:h.sizes||[],sizeRatios:function(h,v,_){let b=_.length,A=[];for(let v=0;v<b;v++){let b=_[v].width;A.push(h/b)}return A}(h.width,h.height,h.sizes||[]),sampledTiles:h.tiles||[]}},!0)}preLoad(h,v=!0){this.knownImageServers[h.root]=h,v&&(this.knownImageServers[h.root].malformed=!1,this.knownImageServers[h.root].verifications=this.config.verificationsRequired)}predict(h,v=!1,_=!1){let b=null==h?void 0:h.source,A=esm_y(esm_h(h)),S=this.knownImageServers[A];if(!S||!S.result||!((null==b?void 0:b.height)||h.height)||!((null==b?void 0:b.width)||h.width)||!_&&(S.malformed||S.verifications<this.config.verificationsRequired)||esm_v(0,h.source))return null;let C=esm_p(esm_h(h));return this.imageServices[C]||(this.imageServices[C]={"@context":S.result.context,"@id":esm_h(h),id:esm_h(h),protocol:"http://iiif.io/api/image",tiles:(null==b?void 0:b.tiles)||function(h,v,_){let b=h>v?h:v,A=_.length,S=[];for(let h=0;h<A;h++){let v=_[h],A=v.scaleFactors[0],C=b/A,w=[A];for(;C>=v.width;)w.push(A*=2),C/=2;S.push(si(ri({},v),{scaleFactors:w}))}return S}(h.width,h.height,S.result.sampledTiles),sizes:(null==b?void 0:b.sizes)||function(h,v,_){let b=_.length,A=[];for(let S=0;S<b;S++){let b=_[S];A.push({width:Math.floor(h/b),height:Math.floor(v/b)})}return A}(Math.round(h.width/S.result.resourceServiceRatio),Math.round(h.height/S.result.resourceServiceRatio),S.result.sizeRatios),profile:(null==b?void 0:b.profile)||S.result.sampledProfile,height:(null==b?void 0:b.height)||h.height,width:(null==b?void 0:b.width)||h.width,real:!1}),this.imageServices[C]}getThumbnailFromResource(h,v){return esm_(this,arguments,function*(h,v,_=!0,b=[]){let A=h?yield this.getImageCandidates(h,_):[];return function(h,v){let _=[],b=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},h),r=(h,v=0)=>b.explain?_.push(Array(v).fill(0).map(h=>"    ").join("")+h().trim()):void 0,A=[],S=[],C=null;r(()=>`Using configuration: ${JSON.stringify(b,null,2)}`);let f=(h,v)=>{if(r(()=>"Swapping choice",3),function(h,v,_){let b=h.width?h.width:h.maxWidth;return _.height<=h.maxHeight&&_.width<=h.maxWidth&&_.height>=h.minHeight&&_.width>=h.minWidth&&(!v||Math.abs(_.width-b)<Math.abs(v.width-b))}(b,v,h)){if(b.preferFixedSize&&h.unsafe){r(()=>`We found an image that was marked as unsafe, but it was the best size. (${h.id})`,4),S.push(h);return}b.returnAllOptions&&v&&S.push(v),r(()=>`We found a new image that was the best size. (${h.id})`,4),C=h}else b.returnAllOptions&&S.push(h)};r(()=>`The input shows we have ${v.length} list(s) of candidates to choose from.`);let w=v.length;for(let h=0;h<w;h++){let _=v[h]();r(()=>`Candidate group ${h}: ${JSON.stringify(_,null,2)}`,1);let S=_.length;r(()=>`Checking candidate list number ${h} and found ${S} potential ways of creating image(s)`,1);for(let h=0;h<S;h++){let v=_[h];if(r(()=>`-> Checking candidate ${h}`,1),"unknown"===v.type&&b.atAnyCost&&(r(()=>'We\'ve found an unknown image type, adding this to the "last resort" list',2),A.push(v)),"fixed"===v.type&&(v.unsafe?(r(()=>'We\'ve found an unsafe fixed image type, adding this to the "last resort" list',2),A.push(v)):(r(()=>"We've found a fixed size image, checking if it matches the request",2),f(v,C))),"fixed-service"===v.type){if(b.unsafeImageService){r(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let h=esm_O(v,b.width,b.height);f(h,C)}else{r(()=>"Checking for an image from the tile source 3",2);let h=esm_O(v,v.width,v.height);f(h,C)}}if("variable"===v.type&&v.maxWidth){let h=esm_O({id:v.id,type:"fixed-service",width:v.maxWidth,height:v.maxWidth,level:v.level,version:v.version},v.maxWidth);f(h,C)}}if(C&&!b.returnAllOptions){if(C.unsafe||b.allowUnsafe)continue;r(()=>`We found a match in choice list number ${h}, no searching any more`);break}}return b.atAnyCost&&0===S.length?(r(()=>C?`We found an image! ${C.id} of type ${C.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:C||A[0],fallback:A.slice(1),log:_}):b.returnAllOptions?(r(()=>"Returning all options that we have found"),{best:b.atAnyCost?C||S[0]||A[0]:C||S[0],fallback:[...S,...A],log:_}):(r(()=>"Returning the best image that we found, and a fallback"),{best:C||S[0]||null,fallback:C?S:S.slice(1),log:_})}(v,[()=>b,()=>A])})}getImageCandidates(h,v=!0){return esm_(this,null,function*(){if(v&&h.height&&h.width){let v=esm_ee(h);for(let _ of v){let v={id:esm_h(_),width:_.width?_.width:h.width,height:_.height?_.height:h.height,source:_};yield this.loadService(v)}}return function(h,v=!0,_){let b=[],A=function(h){if("string"==typeof h)return esm_Y(h);let v=h["@type"]?h["@type"]:h.type?h.type:void 0;if("Image"!==v&&"sc:Image"!==v)return null;let _=esm_h(h);return _?_&&h.width&&h.height?{id:_,type:"fixed",width:h.width,height:h.height,unsafe:!0}:esm_Y(_):null}(h);if(null===A)return b;if(b.push(A),v&&h.width&&h.height){let v=[],A=esm_ee(h);for(let b of A){let A={id:esm_h(b),width:h.width,height:h.height};if(_.canLoadSync(A)){let b=_.loadServiceSync(A);b&&(b.height||(b.height=h.height),b.width||(b.width=h.width),v.push(...esm_q([b])))}}if(v.length)return b.push(...v),b}return h.service&&b.push(...esm_q(h.service)),b}(h,v,this)})}verify(h){return esm_(this,null,function*(){let v=this.predict(h,!1,!0),_=yield this.fetchService(esm_h(h));if(!v)return!1;let b=v.height===_.height&&v.width===_.width&&v["@context"]===_["@context"]&&function(h,v){if(h.length!==v.length)return!1;if(0===h.length&&0===v.length)return!0;let _=h.length,b=!0;for(let A=0;A<_;A++){let _=h[A],S=v[A];if(_.width!==S.width||_.height!==S.height){b=!1;break}}if(b)return!0;let A=0;for(let b=0;b<_;b++)for(let S=0;S<_;S++)if(h[b].width===v[S].width&&h[b].height===v[S].height){A++;break}return A===_}(v.sizes||[],_.sizes||[]);if(b){let v=esm_y(esm_h(h));this.knownImageServers[v].verifications+=1,this.knownImageServers[v].verifications>=this.config.verificationsRequired&&(this.knownImageServers[v].verified=!0)}return b})}canLoadSync(h){let v="string"==typeof h?h:esm_h(h),_=esm_p(v);if(this.imageServices[_])return!0;let b=this.knownImageServers[esm_y(v)];return b&&!b.malformed&&b.verifications>=this.config.verificationsRequired}markAsMalformed(h){return esm_(this,null,function*(){return this.knownImageServers[esm_y(esm_h(h))].malformed=!0,this.loadService(h,!0)})}fetchService(h,v=!1){return esm_(this,null,function*(){let _=esm_p(h);if(this.imageServices[_]&&(!v||this.imageServices[_].real))return this.imageServices[_];if(!this.config.enableFetching)throw Error("Fetching is not enabled");let b=yield this.fetch(_).then(h=>h.json());return!b.id&&b["@id"]&&(b.id=b["@id"]),b.id!==h&&(b.id=h,b["@id"]&&(b["@id"]=h)),this.imageServices[_]=Object.assign(b,{real:!0}),this.imageServices[_]})}fetch(h,v){return esm_(this,null,function*(){return fetch(h,v)})}loadService(h,v=!1){return esm_(this,null,function*(){if(!this.config.disableThrottling){let h=!0;for(;h;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(h=>setTimeout(h,500));else{h=!1;break}}let _=this.knownImageServers[esm_y(esm_h(h))];if(_&&!_.malformed&&!v){yield _.result;let v=this.loadServiceSync(h);if(v)return v}this.fetchingCount++;let b=yield this.fetchService(esm_h(h),v);return this.fetchingCount--,b.real&&this.sample(b,h),b})}loadServiceSync(h){let v=esm_p(esm_h(h));return this.imageServices[v]?this.imageServices[v]:this.predict(h)}},Symbol.for("_refs_"),Symbol.for("_reactive_"),Symbol.for("_defined_");var lN=_(434),lO=_(150),lR=_(9821);(h,v)=>(0,eV.createElement)(sB.WV.label,(0,sR.Z)({},h,{ref:v,onMouseDown:v=>{var _;null===(_=h.onMouseDown)||void 0===_||_.call(h,v),!v.defaultPrevented&&v.detail>1&&v.preventDefault()}}));let[lL,lD]=(0,sD.b)("Form"),lP="Form",[lM,lF]=lL(lP),[lB,lH]=lL(lP),lU=(0,eV.forwardRef)((h,v)=>{let{__scopeForm:_,onClearServerErrors:b=()=>{},...A}=h,S=(0,eV.useRef)(null),C=(0,sF.e)(v,S),[w,O]=(0,eV.useState)({}),L=(0,eV.useCallback)(h=>w[h],[w]),M=(0,eV.useCallback)((h,v)=>O(_=>{var b;return{..._,[h]:{...null!==(b=_[h])&&void 0!==b?b:{},...v}}}),[]),F=(0,eV.useCallback)(h=>{O(v=>({...v,[h]:void 0})),K(v=>({...v,[h]:{}}))},[]),[U,$]=(0,eV.useState)({}),G=(0,eV.useCallback)(h=>{var v;return null!==(v=U[h])&&void 0!==v?v:[]},[U]),j=(0,eV.useCallback)((h,v)=>{$(_=>{var b;return{..._,[h]:[...null!==(b=_[h])&&void 0!==b?b:[],v]}})},[]),Q=(0,eV.useCallback)((h,v)=>{$(_=>{var b;return{..._,[h]:(null!==(b=_[h])&&void 0!==b?b:[]).filter(h=>h.id!==v)}})},[]),[X,K]=(0,eV.useState)({}),Z=(0,eV.useCallback)(h=>{var v;return null!==(v=X[h])&&void 0!==v?v:{}},[X]),J=(0,eV.useCallback)((h,v)=>{K(_=>{var b;return{..._,[h]:{...null!==(b=_[h])&&void 0!==b?b:{},...v}}})},[]),[en,ei]=(0,eV.useState)({}),ea=(0,eV.useCallback)((h,v)=>{ei(_=>{let b=new Set(_[h]).add(v);return{..._,[h]:b}})},[]),eo=(0,eV.useCallback)((h,v)=>{ei(_=>{let b=new Set(_[h]);return b.delete(v),{..._,[h]:b}})},[]),es=(0,eV.useCallback)(h=>{var v;return Array.from(null!==(v=en[h])&&void 0!==v?v:[]).join(" ")||void 0},[en]);return(0,eV.createElement)(lM,{scope:_,getFieldValidity:L,onFieldValidityChange:M,getFieldCustomMatcherEntries:G,onFieldCustomMatcherEntryAdd:j,onFieldCustomMatcherEntryRemove:Q,getFieldCustomErrors:Z,onFieldCustomErrorsChange:J,onFieldValiditionClear:F},(0,eV.createElement)(lB,{scope:_,onFieldMessageIdAdd:ea,onFieldMessageIdRemove:eo,getFieldDescription:es},(0,eV.createElement)(sB.WV.form,(0,sR.Z)({},A,{ref:C,onInvalid:(0,sL.M)(h.onInvalid,h=>{let v=$d94698215c4408a7$var$getFirstInvalidControl(h.currentTarget);v===h.target&&v.focus(),h.preventDefault()}),onSubmit:(0,sL.M)(h.onSubmit,b,{checkForDefaultPrevented:!1}),onReset:(0,sL.M)(h.onReset,b)}))))}),lz="FormField",[l$,lG]=lL(lz),lj=(0,eV.forwardRef)((h,v)=>{let{__scopeForm:_,name:b,serverInvalid:A=!1,...S}=h,C=lF(lz,_),w=C.getFieldValidity(b),O=(0,sU.M)();return(0,eV.createElement)(l$,{scope:_,id:O,name:b,serverInvalid:A},(0,eV.createElement)(sB.WV.div,(0,sR.Z)({"data-valid":$d94698215c4408a7$var$getValidAttribute(w,A),"data-invalid":$d94698215c4408a7$var$getInvalidAttribute(w,A)},S,{ref:v})))}),lV="FormControl",lW=(0,eV.forwardRef)((h,v)=>{let{__scopeForm:_,...b}=h,A=lF(lV,_),S=lG(lV,_),C=lH(lV,_),w=(0,eV.useRef)(null),O=(0,sF.e)(v,w),L=b.name||S.name,M=b.id||S.id,F=A.getFieldCustomMatcherEntries(L),{onFieldValidityChange:U,onFieldCustomErrorsChange:$,onFieldValiditionClear:G}=A,j=(0,eV.useCallback)(async h=>{if($d94698215c4408a7$var$hasBuiltInError(h.validity)){let v=$d94698215c4408a7$var$validityStateToObject(h.validity);U(L,v);return}let v=h.form?new FormData(h.form):new FormData,_=[h.value,v],b=[],A=[];F.forEach(h=>{"AsyncFunction"===h.match.constructor.name||(0,h.match)(..._) instanceof Promise?A.push(h):"Function"===h.match.constructor.name&&b.push(h)});let S=b.map(({id:h,match:v})=>[h,v(..._)]),C=Object.fromEntries(S),w=Object.values(C).some(Boolean);h.setCustomValidity(w?lq:"");let O=$d94698215c4408a7$var$validityStateToObject(h.validity);if(U(L,O),$(L,C),!w&&A.length>0){let v=A.map(({id:h,match:v})=>v(..._).then(v=>[h,v])),b=await Promise.all(v),S=Object.fromEntries(b),C=Object.values(S).some(Boolean);h.setCustomValidity(C?lq:"");let w=$d94698215c4408a7$var$validityStateToObject(h.validity);U(L,w),$(L,S)}},[F,L,$,U]);(0,eV.useEffect)(()=>{let h=w.current;if(h){let handleChange=()=>j(h);return h.addEventListener("change",handleChange),()=>h.removeEventListener("change",handleChange)}},[j]);let Q=(0,eV.useCallback)(()=>{let h=w.current;h&&(h.setCustomValidity(""),G(L))},[L,G]);(0,eV.useEffect)(()=>{var h;let v=null===(h=w.current)||void 0===h?void 0:h.form;if(v)return v.addEventListener("reset",Q),()=>v.removeEventListener("reset",Q)},[Q]),(0,eV.useEffect)(()=>{let h=w.current,v=null==h?void 0:h.closest("form");if(v&&S.serverInvalid){let _=$d94698215c4408a7$var$getFirstInvalidControl(v);_===h&&_.focus()}},[S.serverInvalid]);let X=A.getFieldValidity(L);return(0,eV.createElement)(sB.WV.input,(0,sR.Z)({"data-valid":$d94698215c4408a7$var$getValidAttribute(X,S.serverInvalid),"data-invalid":$d94698215c4408a7$var$getInvalidAttribute(X,S.serverInvalid),"aria-invalid":!!S.serverInvalid||void 0,"aria-describedby":C.getFieldDescription(L),title:""},b,{ref:O,id:M,name:L,onInvalid:(0,sL.M)(h.onInvalid,h=>{let v=h.currentTarget;j(v)}),onChange:(0,sL.M)(h.onChange,h=>{Q()})}))}),lq="This value is not valid",lY={badInput:lq,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},lQ="FormMessage",lX=((h,v)=>{let{match:_,forceMatch:b=!1,name:A,children:S,...C}=h,w=lF(lQ,C.__scopeForm),O=w.getFieldValidity(A),L=b||(null==O?void 0:O[_]);return L?(0,eV.createElement)(lX,(0,sR.Z)({ref:v},C,{name:A}),null!=S?S:lY[_]):null},(0,eV.forwardRef)((h,v)=>{let{__scopeForm:_,id:b,name:A,...S}=h,C=lH(lQ,_),w=(0,sU.M)(),O=null!=b?b:w,{onFieldMessageIdAdd:L,onFieldMessageIdRemove:M}=C;return(0,eV.useEffect)(()=>(L(A,O),()=>M(A,O)),[A,O,L,M]),(0,eV.createElement)(sB.WV.span,(0,sR.Z)({id:O},S,{ref:v}))})),lK=(0,eV.forwardRef)((h,v)=>{let{__scopeForm:_,...b}=h;return(0,eV.createElement)(sB.WV.button,(0,sR.Z)({type:"submit"},b,{ref:v}))});function $d94698215c4408a7$var$validityStateToObject(h){let v={};for(let _ in h)v[_]=h[_];return v}function $d94698215c4408a7$var$isHTMLElement(h){return h instanceof HTMLElement}function $d94698215c4408a7$var$isInvalid(h){return"validity"in h&&(!1===h.validity.valid||"true"===h.getAttribute("aria-invalid"))}function $d94698215c4408a7$var$getFirstInvalidControl(h){let v=h.elements,[_]=Array.from(v).filter($d94698215c4408a7$var$isHTMLElement).filter($d94698215c4408a7$var$isInvalid);return _}function $d94698215c4408a7$var$hasBuiltInError(h){let v=!1;for(let _ in h)if("valid"!==_&&"customError"!==_&&h[_]){v=!0;break}return v}function $d94698215c4408a7$var$getValidAttribute(h,v){if((null==h?void 0:h.valid)===!0&&!v)return!0}function $d94698215c4408a7$var$getInvalidAttribute(h,v){if((null==h?void 0:h.valid)===!1||v)return!0}var lZ=_(6419),lJ=_(5059),l0=_(761);let viewer_Xt=h=>{let v=h.toString().split(":"),_=Math.ceil(parseInt(v[0])),b=Math.ceil(parseInt(v[1])),A=viewer_Jt(Math.ceil(parseInt(v[2])),2),S=`${0!==_&&b<10?(b+"").padStart(2,"0"):b}:${A}`;return 0!==_&&(S=`${_}:${S}`),S},viewer_Ue=h=>{let v=new Date(1e3*h).toISOString().substr(11,8);return viewer_Xt(v)},viewer_qe=(h,v)=>{if("object"!=typeof h||null===h)return v;for(let _ in v)"object"!=typeof v[_]||null===v[_]||Array.isArray(v[_])?h[_]=v[_]:(h[_]||(h[_]={}),h[_]=viewer_qe(h[_],v[_]));return h},viewer_Yt=h=>h.split("").reduce(function(h,v){return(h=(h<<5)-h+v.charCodeAt(0))&h},0),viewer_Ze=(h,v)=>Object.hasOwn(h,v)?h[v].toString():void 0,viewer_Jt=(h,v)=>String(h).padStart(v,"0"),l1={annotationOverlays:{backgroundColor:"#6666ff",borderColor:"#000099",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",contentSearch:{searchResultsLimit:20,overlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:4}},ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:{behavior:"smooth",block:"center"}}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0,renderContentSearch:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1,localeText:{contentSearch:{tabLabel:"Search Results",formPlaceholder:"Enter search words",noSearchResults:"No search results",loading:"Loading...",moreResults:"more results"}}};function viewer_Xe(h){let v={...l1.informationPanel.vtt.autoScroll};return"object"==typeof h&&(v="enabled"in h?h:{enabled:!0,settings:h}),!1===h&&(v.enabled=!1),function({behavior:h,block:v}){let _=["auto","instant","smooth"],b=["center","end","nearest","start"];if(!_.includes(h))throw TypeError(`'${h}' not in ${_.join(" | ")}`);if(!b.includes(v))throw TypeError(`'${v}' not in ${b.join(" | ")}`)}(v.settings),v}let l2=viewer_Xe(null==(eU=null==(eH=null==l1?void 0:l1.informationPanel)?void 0:eH.vtt)?void 0:eU.autoScroll),l3={activeCanvas:"",activeManifest:"",OSDImageLoaded:!1,collection:{},configOptions:l1,customDisplays:[],plugins:[],isAutoScrollEnabled:l2.enabled,isAutoScrolling:!1,isInformationOpen:null==(ez=null==l1?void 0:l1.informationPanel)?void 0:ez.open,isLoaded:!1,isUserScrolling:void 0,vault:new Vault,contentSearchVault:new Vault,openSeadragonViewer:null,viewerId:esm_browser_v4()},l4=eV.createContext(l3),l5=eV.createContext(l3);function tn(h,v){switch(v.type){case"updateActiveCanvas":return v.canvasId||(v.canvasId=""),{...h,activeCanvas:v.canvasId};case"updateActiveManifest":return{...h,activeManifest:v.manifestId};case"updateOSDImageLoaded":return{...h,OSDImageLoaded:v.OSDImageLoaded};case"updateAutoScrollAnnotationEnabled":return{...h,isAutoScrollEnabled:v.isAutoScrollEnabled};case"updateAutoScrolling":return{...h,isAutoScrolling:v.isAutoScrolling};case"updateCollection":return{...h,collection:v.collection};case"updateConfigOptions":return{...h,configOptions:viewer_qe(h.configOptions,v.configOptions)};case"updateInformationOpen":return{...h,isInformationOpen:v.isInformationOpen};case"updateIsLoaded":return{...h,isLoaded:v.isLoaded};case"updateUserScrolling":return{...h,isUserScrolling:v.isUserScrolling};case"updateOpenSeadragonViewer":return{...h,openSeadragonViewer:v.openSeadragonViewer};case"updateViewerId":return{...h,viewerId:v.viewerId};default:throw Error(`Unhandled action type: ${v.type}`)}}let nn=({initialState:h=l3,children:v})=>{let[_,b]=(0,eV.useReducer)(tn,h);return eV.createElement(l4.Provider,{value:_},eV.createElement(l5.Provider,{value:b},v))};function viewer_I(){let h=eV.useContext(l4);if(void 0===h)throw Error("useViewerState must be used within a ViewerProvider");return h}function viewer_z(){let h=eV.useContext(l5);if(void 0===h)throw Error("useViewerDispatch must be used within a ViewerProvider");return h}let rn=async(h,v)=>{let _=h.get({id:v,type:"Canvas"});if(!(null!=_&&_.annotations)||!_.annotations[0])return[];let b=h.get(_.annotations).filter(h=>!!h.items&&h),A=[];for(let v of b)if(v.items.length>0){let h=v.label||{none:["Annotations"]};A.push({...v,label:h})}else{let _={};try{_=await h.load(v.id)}catch(h){console.log(h)}if(_.items&&_.items.length>0){let h=_.label||{none:["Annotations"]};A.push({..._,label:h})}}return A},viewer_Ke=async(h,v,_,b)=>{let A;if(null==b||null==b.q)return{label:{none:[_]}};let S=`${v}?q=${b.q.trim()}`;try{A=await h.load(S)}catch{return console.log("Could not load content search."),{}}return null==A.label&&(A.label={none:[_]}),A},viewer_Qe=(h,v,_,b)=>{var A,S;let C={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(C.canvas=h.get(v),C.canvas&&(C.annotationPage=h.get(C.canvas.items[0]),C.accompanyingCanvas=null!=(A=C.canvas)&&A.accompanyingCanvas?h.get(null==(S=C.canvas)?void 0:S.accompanyingCanvas):void 0),C.annotationPage){let A=h.get(C.annotationPage.items).map(v=>({body:h.get(v.body[0].id),motivation:v.motivation,type:"Annotation"})),S=[];A.forEach(v=>{"Choice"===v.body.type?v.body.items.forEach(_=>S.push({...v,id:_.id,body:h.get(_.id)})):S.push(v)}),C.annotations=S.filter(A=>{if(A){if(!A.body||!A.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",A);return}let S=A.body;Array.isArray(S)&&(S=S[0]);let C=h.get(S.id);if(C)switch(_){case"painting":return A.target===v.id&&A.motivation&&"painting"===A.motivation[0]&&b.includes(C.type)&&(A.body=C),!!A;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return C},viewer_q=(h,v="en")=>{if(!h)return"";if(!h[v]){let v=Object.getOwnPropertyNames(h);if(v.length>0)return h[v[0]]}return h[v]},viewer_re=(h,v)=>{let _=viewer_Qe(h,{id:v,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==_.annotations.length&&_.annotations&&_.annotations)return _.annotations.map(h=>null==h?void 0:h.body)},on=(h,v,_,b)=>{let A=[];if(v.canvas&&v.canvas.thumbnail.length>0){let _=h.get(v.canvas.thumbnail[0]);A.push(_)}if(v.annotations[0]){if(v.annotations[0].thumbnail&&v.annotations[0].thumbnail.length>0){let _=h.get(v.annotations[0].thumbnail[0]);A.push(_)}if(!v.annotations[0].body)return;let _=v.annotations[0].body;"Image"===_.type&&A.push(_)}return 0===A.length?void 0:{id:A[0].id,format:A[0].format,type:A[0].type,width:_,height:b}},l6=window.OpenSeadragon;if(!l6&&!(l6=ej))throw Error("OpenSeadragon is missing.");let l8="http://www.w3.org/2000/svg";l6.Viewer&&(l6.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new viewer_xe(this)),this._svgOverlayInfo});let viewer_xe=function(h){let v=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(l8,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(l8,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){v.resize()}),this._viewer.addHandler("open",function(){v.resize()}),this._viewer.addHandler("rotate",function(){v.resize()}),this._viewer.addHandler("flip",function(){v.resize()}),this._viewer.addHandler("resize",function(){v.resize()}),this.resize()};viewer_xe.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new l6.Point(0,0),!0),v=this._viewer.viewport.getZoom(!0),_=this._viewer.viewport.getRotation(),b=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,S=A*v,C=S;b&&(S=-S,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+S+","+C+") rotate("+_+")")},onClick:function(h,v){new l6.MouseTracker({element:h,clickHandler:v}).setTracking(!0)}};let an=h=>new viewer_xe(h),viewer_et=h=>{var v,_,b,A,S;let C={id:"string"==typeof h?h:h.source};if("string"==typeof h){if(h.includes("#xywh=")){let v=h.split("#xywh=");if(v&&v[1]){let[h,_,b,A]=v[1].split(",").map(h=>Number(h));C={id:v[0],rect:{x:h,y:_,w:b,h:A}}}}else if(h.includes("#t=")){let v=h.split("#t=");v&&v[1]&&(C={id:v[0],t:v[1]})}}else if("object"==typeof h){if((null==(v=h.selector)?void 0:v.type)==="PointSelector")C={id:h.source,point:{x:h.selector.x,y:h.selector.y}};else if((null==(_=h.selector)?void 0:_.type)==="SvgSelector")C={id:h.source,svg:h.selector.value};else if((null==(b=h.selector)?void 0:b.type)==="FragmentSelector"&&null!=(A=h.selector)&&A.value.includes("xywh=")&&"Canvas"==h.source.type&&h.source.id){let v=null==(S=h.selector)?void 0:S.value.split("xywh=");if(v&&v[1]){let[_,b,A,S]=v[1].split(",").map(h=>Number(h));C={id:h.source.id,rect:{x:_,y:b,w:A,h:S}}}}}return C},ln=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(v=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${v}`)}),sn=h=>{let v,_;return Array.isArray(h)&&(v=h[0])&&(_="@id"in v?v["@id"]:v.id),_},viewer_Ee=h=>{var v;let _,b;if(un(h))_=h,b={};else{let A=JSON.parse(function(h){let v=function(h){let v=h.length%4;if(1===v)throw Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");return h+(v?"====".slice(0,4-v):"")}(h),_=v.replace(/-/g,"+").replace(/_/g,"/"),b="undefined"==typeof atob?sK.from(_,"base64").toString("utf-8"):atob(_);return decodeURIComponent(b).trim()}(h));switch(null==A?void 0:A.type){case"SpecificResource":case"Range":case"Annotation":b={manifest:_=null==A?void 0:A.target.partOf[0].id,canvas:null==A?void 0:A.target.id};break;case"Canvas":b={manifest:_=null==A?void 0:A.partOf[0].id,canvas:null==A?void 0:A.id};break;case"Manifest":_=null==A?void 0:A.id,b={collection:null==(v=null==A?void 0:A.partOf[0])?void 0:v.id,manifest:null==A?void 0:A.id};break;case"Collection":b={collection:_=null==A?void 0:A.id}}}return{resourceId:_,active:b}},cn=h=>{let{resourceId:v,active:_}=viewer_Ee(h);return _.collection||_.manifest||v},dn=(h,v)=>{let _=v.items.map(h=>h.id),{active:b}=viewer_Ee(h),A=b.canvas;return _.includes(A)?A:_[0]},mn=(h,v)=>{let{active:_}=viewer_Ee(h),b=_.manifest,A=v.items.filter(h=>"Manifest"===h.type).map(h=>h.id);return 0==A.length?null:A.includes(b)?b:A[0]},un=h=>{try{new URL(h)}catch{return!1}return!0};var l9=((ef=l9||{}).TiledImage="tiledImage",ef.SimpleImage="simpleImage",ef);function viewer_tt(h,v,_,b,A){if(!h)return;let S=1/v.width;b.forEach(v=>{if(!v.target)return;let b=viewer_et(v.target),{point:C,rect:w,svg:O}=b;if(w){let{x:v,y:b,w:C,h:O}=w;!function(h,v,_,b,A,S,C){let w=new ej.Rect(v,_,b,A),O=document.createElement("div");if(S){let{backgroundColor:h,opacity:v,borderType:_,borderColor:b,borderWidth:A}=S;O.style.backgroundColor=h,O.style.opacity=v,O.style.border=`${_} ${A} ${b}`,O.className=C}h.addOverlay(O,w)}(h,v*S,b*S,C*S,O*S,_,A)}if(C){let{x:v,y:b}=C,w=`
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
          <circle cx="${v}" cy="${b}" r="20" />
        </svg>
      `;viewer_Le(h,w,_,S,A)}O&&viewer_Le(h,O,_,S,A)})}function viewer_Le(h,v,_,b,A){let S=function(h){if(!h)return null;let v=document.createElement("template");return v.innerHTML=h.trim(),v.content.children[0]}(v);if(S)for(let v of S.children)!function viewer_nt(h,v,_,b,A){var S;if("#text"===v.nodeName)v.textContent&&(v.textContent.includes(`
`)||console.log("nodeName:",v.nodeName,", textContent:",v.textContent,", childNodes.length",v.childNodes.length));else{let C=function(h,v,_){let b=!1,A=!1,S=!1,C=!1,w=document.createElementNS("http://www.w3.org/2000/svg",h.nodeName);if(h.attributes.length>0)for(let v=0;v<h.attributes.length;v++){let _=h.attributes[v];switch(_.name){case"fill":S=!0;break;case"stroke":b=!0;break;case"stroke-width":A=!0;break;case"fill-opacity":C=!0}w.setAttribute(_.name,_.textContent)}return b||(w.style.stroke=null==v?void 0:v.borderColor),A||(w.style.strokeWidth=null==v?void 0:v.borderWidth),S||(w.style.fill=null==v?void 0:v.backgroundColor),C||(w.style.fillOpacity=null==v?void 0:v.opacity),w.setAttribute("transform",`scale(${_})`),w}(v,_,b),w=an(h);w.node().append(C),null==(S=w._svg)||S.setAttribute("class",A),v.childNodes.forEach(v=>{viewer_nt(h,v,_,b,A)})}}(h,v,_,b,A)}let yn=h=>{let v=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,_=v?sn(null==h?void 0:h.service):null==h?void 0:h.id,b=v?l9.TiledImage:l9.SimpleImage;return{uri:_,imageType:b}},bn=(h,v)=>{let _=v?l9.TiledImage:l9.SimpleImage;return{uri:h,imageType:_}};function viewer_rt(h,v){if(!h)return;v.startsWith(".")||(v="."+v);let _=document.querySelectorAll(v);_&&_.forEach(v=>h.removeOverlay(v))}function viewer_fe(h,v,_,b){let A=viewer_et(_),{point:S,rect:C,svg:w}=A;if(S||C||w){let _=function(h,v,_){let b,A,S=40,C=40;v.rect&&(b=v.rect.x,A=v.rect.y,S=v.rect.w,C=v.rect.h),v.point&&(b=v.point.x,A=v.point.y);let w=1/h.width;return new ej.Rect(b*w-S*w/2*(_-1),A*w-C*w/2*(_-1),S*w*_,C*w*_)}(b,A,v);null==h||h.viewport.fitBounds(_)}}let l7={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:cr,css:ci,keyframes:ca,createTheme:co}=(0,eY.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:l7}),cs=cr("div",{display:"flex",flexDirection:"column",alignItems:"center"}),cl=cr("p",{fontWeight:"bold",fontSize:"x-large"}),cc=cr("span",{fontSize:"medium"}),viewer_ke=({error:h})=>{let{message:v}=h;return eV.createElement(cs,{role:"alert"},eV.createElement(cl,{"data-testid":"headline"},"Something went wrong"),v&&eV.createElement(cc,null,`Error message: ${v}`," "))},cu=cr("div",{position:"relative",zIndex:"0"}),cd=cr("div",{display:"flex",flexDirection:"row",flexGrow:"1",overflow:"hidden","@sm":{flexDirection:"column"}}),cp=cr("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),ch=cr(sq,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),cm=cr(sQ,{width:"100%",display:"flex"}),cf=cr("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),cg=cr("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased",'&[data-absolute-position="true"]':{position:"absolute",width:"100%",height:"100%",zIndex:"0"},"> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start",height:"100%",maxHeight:"100%","@sm":{[`& ${cd}`]:{flexGrow:"1"},[`& ${cp}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${cu}`]:{display:"none"},[`& ${ch}`]:{margin:"1rem"},[`& ${cm}`]:{height:"100%"}}}}),cE=cr(lN.fC,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),cv=cr(lN.aV,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),cT=cr(lN.xz,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),cy=cr(lN.VY,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),c_=cr(({handleScroll:h,children:v,className:_})=>eV.createElement("div",{className:_,onScroll:h},v),{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),cb={position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none"},cA=cr("button",{textAlign:"left","&:hover":{color:"$accent"}}),cx=cr("div",{display:"flex",flexDirection:"column",width:"100%"}),cS=cr("div",{...cb}),cC=cr("div",{"&:hover":{color:"$accent"}}),viewer_Me=({value:h,handleClick:v})=>eV.createElement(cA,{onClick:v},h),Fn=({value:h,handleClick:v})=>eV.createElement(cC,{dangerouslySetInnerHTML:{__html:h},onClick:v}),Pn=()=>{function e(h){return h.map(h=>{let v=h.identifier||esm_browser_v4();return{...h,identifier:v}})}return{addIdentifiersToParsedCues:e,createNestedCues:function(h){var v;let _=[],b=[],A=e(h);for(let h of A){for(;b.length>0&&b[b.length-1].end<=h.start;)b.pop();b.length>0?(b[b.length-1].children||(b[b.length-1].children=[]),null==(v=b[b.length-1].children)||v.push(h)):_.push(h),b.push(h)}return _},isChild:function(h,v=[]){return v.some(v=>h.start>=v.start&&h.end<=v.end)},orderCuesByTime:function(h=[]){return h.sort((h,v)=>h.start-v.start)}}},ck=ca({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),cw=cr(lO.fC,{display:"flex",flexDirection:"column",width:"100%"}),cI=cr(lO.ck,{...cb,"@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:ck,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:ck,boxSizing:"content-box","@sm":{content:"unset"}}}}),Bn=h=>{for(;h&&h!==document.body;){let v=window.getComputedStyle(h).overflowY;if("visible"!==v&&"hidden"!==v&&h.scrollHeight>h.clientHeight)return h;h=h.parentNode}return null},On=({label:h,start:v,end:_})=>{var b,A;let S=viewer_z(),{configOptions:C,isAutoScrollEnabled:w,isUserScrolling:O}=viewer_I(),L=null==(A=null==(b=null==C?void 0:C.informationPanel)?void 0:b.vtt)?void 0:A.autoScroll,[M,F]=(0,eV.useState)(!1),U=(0,eV.useRef)(null),$=document.getElementById("clover-iiif-video");return(0,eV.useEffect)(()=>(null==$||$.addEventListener("timeupdate",()=>{let{currentTime:h}=$;F(v<=h&&h<_)}),()=>document.removeEventListener("timeupdate",()=>{})),[_,v,$]),(0,eV.useEffect)(()=>{var h,v;if(w&&M&&U.current&&!O){let _=U.current;if(_&&_ instanceof HTMLElement){let b=Bn(_);if(b&&b instanceof HTMLElement){let A;switch(null==(h=null==L?void 0:L.settings)?void 0:h.block){case"center":let C=b.getBoundingClientRect();A=_.offsetTop+_.offsetHeight-Math.floor((C.bottom-C.top)/2);break;case"end":A=_.offsetTop+_.offsetHeight-(b.clientHeight-_.clientHeight)+2;break;default:A=_.offsetTop-2}S({type:"updateAutoScrolling",isAutoScrolling:!0}),b.scrollTo({top:A,left:0,behavior:null==(v=null==L?void 0:L.settings)?void 0:v.behavior}),setTimeout(()=>S({type:"updateAutoScrolling",isAutoScrolling:!1}),750)}}}},[L,M,O,w,S]),eV.createElement(cI,{ref:U,"aria-checked":M,"data-testid":"information-panel-cue",onClick:()=>{$&&($.pause(),$.currentTime=v,$.play())},value:h},h,eV.createElement("strong",null,viewer_Ue(v)))},cN=cr("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${cI}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),viewer_ut=({items:h})=>eV.createElement(cN,null,h.map(h=>{let{text:v,start:_,end:b,children:A,identifier:S}=h;return eV.createElement("li",{key:S},eV.createElement(On,{label:v,start:_,end:b}),A&&eV.createElement(viewer_ut,{items:A}))})),Nn=({label:h,vttUri:v})=>{let[_,b]=eV.useState([]),{createNestedCues:A,orderCuesByTime:S}=Pn(),[C,w]=eV.useState();return(0,eV.useEffect)(()=>{v&&fetch(v,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(h=>h.text()).then(h=>{let v=(0,lR.parse)(h).cues,_=S(v),C=A(_);b(C)}).catch(h=>{console.error(v,h.toString()),w(h)})},[v]),eV.createElement(cw,{"data-testid":"annotation-item-vtt","aria-label":`navigate ${viewer_q(h,"en")}`},C&&eV.createElement("div",{"data-testid":"error-message"},"Network Error: ",C.toString()),eV.createElement(viewer_ut,{items:_}))},Wn=({caption:h,handleClick:v,imageUri:_})=>eV.createElement(cA,{onClick:v},eV.createElement("img",{src:_,alt:`A visual annotation for ${h}`}),eV.createElement("span",null,h)),_n=({annotation:h})=>{var v,_;let{target:b}=h,A=viewer_I(),{openSeadragonViewer:S,vault:C,activeCanvas:w,configOptions:O}=A,L=h.body.map(h=>C.get(h.id)),M=(null==(v=L.find(h=>h.format))?void 0:v.format)||"",F=(null==(_=L.find(h=>h.value))?void 0:_.value)||"",U=C.get({id:w,type:"Canvas"});function m(){var h;if(!b)return;let v=(null==(h=O.annotationOverlays)?void 0:h.zoomLevel)||1;viewer_fe(S,v,b,U)}return eV.createElement(cS,null,function(){var h,v;switch(M){case"text/plain":return eV.createElement(viewer_Me,{value:F,handleClick:m});case"text/html":return eV.createElement(Fn,{value:F,handleClick:m});case"text/vtt":return eV.createElement(Nn,{label:L[0].label,vttUri:L[0].id||""});case null==(h=M.match(/^image\//))?void 0:h.input:let _=(null==(v=L.find(h=>{var v;return!(null!=(v=h.id)&&v.includes("vault://"))}))?void 0:v.id)||"";return eV.createElement(Wn,{caption:F,handleClick:m,imageUri:_});default:return eV.createElement(viewer_Me,{value:F,handleClick:m})}}())},jn=({annotationPage:h})=>{var v;let _=viewer_I(),{vault:b}=_;if(!h||!h.items||(null==(v=h.items)?void 0:v.length)===0)return eV.createElement(eV.Fragment,null);let A=h.items.map(h=>b.get(h.id));return A?eV.createElement(cx,{"data-testid":"annotation-page"},null==A?void 0:A.map(h=>eV.createElement(_n,{key:h.id,annotation:h}))):eV.createElement(eV.Fragment,null)},cO=cr("button",{textAlign:"left","&:hover":{color:"$accent"}}),cR=cr("li",{margin:"0.25rem 0"}),cL=cr("ol",{listStyleType:"auto",marginBottom:"1rem",listStylePosition:"inside"}),cD=cr("div",{margin:"0.5rem 1.618rem"}),cP=cr("div",{fontWeight:"bold"}),cM=cr("div",{marginBottom:"1rem"}),Jn=({value:h,handleClick:v,target:_,canvas:b})=>eV.createElement(cO,{onClick:v,"data-target":_,"data-canvas":b},h),Kn=({annotation:h,activeContentSearchTarget:v,setActiveContentSearchTarget:_})=>{var b,A,S;let C,w;let O=viewer_z(),L=viewer_I(),{openSeadragonViewer:M,vault:F,contentSearchVault:U,activeCanvas:$,configOptions:G,OSDImageLoaded:j}=L,Q=F.get({id:$,type:"Canvas"}),X=(null==(b=h.body.map(h=>U.get(h.id)).find(h=>h.value))?void 0:b.value)||"";if(h.target&&"string"==typeof h.target&&(C=h.target),C){let h=C.split("#xywh");h.length>1&&(w=h[0])}let K=(null==(S=null==(A=G.contentSearch)?void 0:A.overlays)?void 0:S.zoomLevel)||1;(0,eV.useEffect)(()=>{j&&M&&h.target&&h.target==v&&viewer_fe(M,K,C,Q)},[M,j]);let Z=JSON.stringify(C);return eV.createElement(cR,null,eV.createElement(Jn,{target:Z,canvas:w,value:X,handleClick:function(h){if(!M)return;let v=JSON.parse(h.target.dataset.target),b=h.target.dataset.canvas;$===b?viewer_fe(M,K,C,Q):(O({type:"updateOSDImageLoaded",OSDImageLoaded:!1}),O({type:"updateActiveCanvas",canvasId:b}),_(v))}}))},Qn=({annotationPage:h})=>{var v,_,b;let A=viewer_I(),{contentSearchVault:S,configOptions:C}=A,[w,O]=(0,eV.useState)(),L=null==(v=C.contentSearch)?void 0:v.searchResultsLimit,M=null==(_=C.localeText)?void 0:_.contentSearch;return h&&h.items&&(null==(b=h.items)?void 0:b.length)!==0?eV.createElement(eV.Fragment,null,Object.entries(function(h){let v={};return h.items.forEach(h=>{let _=S.get(h.id),b="";if(_.label){let h=viewer_q(_.label);h&&(b=h[0])}null==v[b]&&(v[b]=[]),v[b].push(_)}),v}(h)).map(([h,v],_)=>eV.createElement("div",{key:_},eV.createElement(cP,{className:"content-search-results-title"},h),eV.createElement(cL,{className:"content-search-results"},(L?v.slice(0,L):v).map((h,v)=>eV.createElement(Kn,{key:v,annotation:h,activeContentSearchTarget:w,setActiveContentSearchTarget:O}))),function(h){if(L){let v=h.length-L;if(v>0)return eV.createElement(cM,null,v," ",null==M?void 0:M.moreResults)}}(v)))):eV.createElement("p",null,null==M?void 0:M.noSearchResults)},cF=cr("div",{".content-search-form":{display:"flex",marginBottom:"1rem"},input:{padding:".25rem",marginRight:"1rem"}}),cB=cr("button",{display:"flex",background:"none",border:"none",width:"2rem",height:"2rem",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),viewer_nr=({searchServiceUrl:h,setContentSearchResource:v,setLoading:_})=>{var b;let[A,S]=(0,eV.useState)(),C=viewer_I(),{contentSearchVault:w,openSeadragonViewer:O,configOptions:L}=C,M=null==(b=L.localeText)?void 0:b.contentSearch;async function u(b){b.preventDefault();let S=null==M?void 0:M.tabLabel;if(O&&h){if(!A||""===A.trim()){v({label:{none:[S]}});return}_(!0),viewer_Ke(w,h,S,{q:A}).then(h=>{v(h),_(!1)})}}return eV.createElement(cF,null,eV.createElement(lU,{onSubmit:u,className:"content-search-form"},eV.createElement(lj,{className:"FormField",name:"searchTerms",onChange:h=>{h.preventDefault(),S(h.target.value)}},eV.createElement(lW,{placeholder:null==M?void 0:M.formPlaceholder})),eV.createElement(lK,{asChild:!0},eV.createElement(cB,{type:"submit"},eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Search"),eV.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"}))))))},viewer_rr=({searchServiceUrl:h,setContentSearchResource:v,activeCanvas:_,annotationPage:b})=>{let[A,S]=(0,eV.useState)(!1);return eV.createElement(cD,null,eV.createElement(viewer_nr,{searchServiceUrl:h,setContentSearchResource:v,activeCanvas:_,setLoading:S}),!A&&eV.createElement(Qn,{annotationPage:b}),A&&eV.createElement("span",null,"Loading..."))},cH=cr("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),cU=cr("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),viewer_pt=(h,v="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[v]){let v=Object.getOwnPropertyNames(h);if(v.length>0)return h[v[0]]}return h[v]&&Array.isArray(h[v])?h[v]:null},viewer_P=(h,v="none",_=", ")=>{let b=viewer_pt(h,v);return Array.isArray(b)?b.join(`${_}`):b};function viewer_B(h,v){let _=Object.keys(h).filter(h=>v.includes(h)?null:h),b={};return _.forEach(v=>{b[v]=h[v]}),b}let cz=cr("span",{}),viewer_N=h=>{let{as:v,label:_}=h,b=viewer_B(h,["as","label"]);return eV.createElement(cz,{as:v,...b},viewer_P(_,b.lang))},viewer_cr=(h,v="200,",_="full")=>{let b;Array.isArray(h)&&(h=h[0]);let{id:A,service:S}=h;if(!S)return A;if(Array.isArray(h.service)&&h.service.length>0&&(b=S[0]),b){if(b["@id"])return`${b["@id"]}/${_}/${v}/0/default.jpg`;if(b.id)return`${b.id}/${_}/${v}/0/default.jpg`}},c$=cr("img",{objectFit:"cover"}),viewer_dr=h=>{let v;let _=(0,eV.useRef)(null),{contentResource:b,altAsLabel:A,region:S="full"}=h;A&&(v=viewer_P(A));let C=viewer_B(h,["contentResource","altAsLabel"]),{type:w,id:O,width:L=200,height:M=200,duration:F}=b;(0,eV.useEffect)(()=>{if(!O&&!_.current||["Image"].includes(w)||!O.includes("m3u8"))return;let h=new nB.ZP;return _.current&&(h.attachMedia(_.current),h.on(nB.ZP.Events.MEDIA_ATTACHED,function(){h.loadSource(O)})),h.on(nB.ZP.Events.ERROR,function(v,_){if(_.fatal)switch(_.type){case nB.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${v} network error encountered, try to recover`),h.startLoad();break;case nB.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${v} media error encountered, try to recover`),h.recoverMediaError();break;default:h.destroy()}}),()=>{h&&(h.detachMedia(),h.destroy())}},[O,w]);let U=(0,eV.useCallback)(()=>{if(!_.current)return;let h=0,v=30;if(F&&(v=F),!O.split("#t=")&&F&&(h=.1*F),O.split("#t=").pop()){let v=O.split("#t=").pop();v&&(h=parseInt(v.split(",")[0]))}let b=_.current;b.autoplay=!0,b.currentTime=h,setTimeout(()=>U(),1e3*v)},[F,O]);(0,eV.useEffect)(()=>U(),[U]);let $=viewer_cr(b,`${L},${M}`,S);switch(w){case"Image":return eV.createElement(c$,{as:"img",alt:v,css:{width:L,height:M},key:O,src:$,...C});case"Video":return eV.createElement(c$,{as:"video",css:{width:L,height:M},disablePictureInPicture:!0,key:O,loop:!0,muted:!0,onPause:U,ref:_,src:O});default:return console.warn(`Resource type: ${w} is not valid or not yet supported in Primitives.`),eV.createElement(eV.Fragment,null)}},cG=cr("a",{}),viewer_ur=h=>{let{children:v,homepage:_}=h,b=viewer_B(h,["children","homepage"]);return eV.createElement(eV.Fragment,null,_&&_.map(h=>{let _=viewer_P(h.label,b.lang);return eV.createElement(cG,{"aria-label":v?_:void 0,href:h.id,key:h.id,...b},v||_)}))},cj={delimiter:", "},cV=(0,eV.createContext)(void 0),viewer_ft=()=>{let h=(0,eV.useContext)(cV);if(void 0===h)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return h},viewer_$e=({children:h,initialState:v=cj})=>{let _=fr(v,"delimiter");return eV.createElement(cV.Provider,{value:{delimiter:_}},h)},fr=(h,v)=>Object.hasOwn(h,v)?h[v].toString():void 0,cW=cr("span",{}),viewer_Pe=h=>{let{as:v,markup:_}=h,{delimiter:b}=viewer_ft();if(!_)return eV.createElement(eV.Fragment,null);let A=viewer_B(h,["as","markup"]),S={__html:nF(viewer_P(_,A.lang,b),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return eV.createElement(cW,{as:v,...A,dangerouslySetInnerHTML:S})},viewer_ht=h=>eV.useContext(cV)?eV.createElement(viewer_Pe,{...h}):eV.createElement(viewer_$e,null,eV.createElement(viewer_Pe,{...h})),viewer_gr=({as:h="dd",lang:v,value:_})=>eV.createElement(viewer_ht,{markup:_,as:h,lang:v}),cq=cr("span",{}),viewer_yr=({as:h="dd",customValueContent:v,lang:_,value:b})=>{var A;let{delimiter:S}=viewer_ft(),C=null==(A=viewer_pt(b,_))?void 0:A.map(h=>(0,eV.cloneElement)(v,{value:h}));return eV.createElement(cq,{as:h,lang:_},null==C?void 0:C.map((h,v)=>[v>0&&`${S}`,eV.createElement(eV.Fragment,{key:v},h)]))},viewer_gt=h=>{var v;let{item:_,lang:b,customValueContent:A}=h,{label:S,value:C}=_,w=null==(v=viewer_P(S))?void 0:v.replace(" ","-").toLowerCase();return eV.createElement("div",{role:"group","data-label":w},eV.createElement(viewer_N,{as:"dt",label:S,lang:b}),A?eV.createElement(viewer_yr,{as:"dd",customValueContent:A,value:C,lang:b}):eV.createElement(viewer_gr,{as:"dd",value:C,lang:b}))},cY=cr("dl",{}),viewer_xr=h=>{let{as:v,customValueContent:_,metadata:b}=h;if(!Array.isArray(b))return eV.createElement(eV.Fragment,null);let A=viewer_Ze(h,"customValueDelimiter"),S=viewer_B(h,["as","customValueContent","customValueDelimiter","metadata"]);return eV.createElement(viewer_$e,{..."string"==typeof A?{initialState:{delimiter:A}}:void 0},b.length>0&&eV.createElement(cY,{as:v,...S},b.map((h,v)=>{let b=_?function(h,v){let _=v.filter(v=>{let{matchingLabel:_}=v,b=Object.keys(v.matchingLabel)[0],A=viewer_P(_,b);if(viewer_P(h,b)===A)return!0}).map(h=>h.Content);if(Array.isArray(_))return _[0]}(h.label,_):void 0;return eV.createElement(viewer_gt,{customValueContent:b,item:h,key:v,lang:null==S?void 0:S.lang})})))};cr("li",{}),cr("ul",{});let cQ=cr("li",{}),cX=cr("ul",{}),Cr=h=>{let{as:v,rendering:_}=h,b=viewer_B(h,["as","rendering"]);return eV.createElement(cX,{as:v},_&&_.map(h=>{let v=viewer_P(h.label,b.lang);return eV.createElement(cQ,{key:h.id},eV.createElement("a",{href:h.id,...b,target:"_blank"},v||h.id))}))},cK=cr("dl",{}),Ir=h=>{let{as:v,requiredStatement:_}=h;if(!_)return eV.createElement(eV.Fragment,null);let b=viewer_Ze(h,"customValueDelimiter"),A=viewer_B(h,["as","customValueDelimiter","requiredStatement"]);return eV.createElement(viewer_$e,{..."string"==typeof b?{initialState:{delimiter:b}}:void 0},eV.createElement(cK,{as:v,...A},eV.createElement(viewer_gt,{item:_,lang:A.lang})))},cZ=cr("li",{}),cJ=cr("ul",{}),viewer_Tr=h=>{let{as:v,seeAlso:_}=h,b=viewer_B(h,["as","seeAlso"]);return eV.createElement(cJ,{as:v},_&&_.map(h=>{let v=viewer_P(h.label,b.lang);return eV.createElement(cZ,{key:h.id},eV.createElement("a",{href:h.id,...b},v||h.id))}))},Rr=h=>{let{as:v,summary:_}=h,b=viewer_B(h,["as","customValueDelimiter","summary"]);return eV.createElement(viewer_ht,{as:v,markup:_,...b})},viewer_vt=h=>{let{thumbnail:v,region:_}=h,b=viewer_B(h,["thumbnail"]);return eV.createElement(eV.Fragment,null,v&&v.map(h=>eV.createElement(viewer_dr,{contentResource:h,key:h.id,region:_,...b})))},Lr=({homepage:h})=>(null==h?void 0:h.length)===0?eV.createElement(eV.Fragment,null):eV.createElement(eV.Fragment,null,eV.createElement("span",{className:"manifest-property-title"},"Homepage"),eV.createElement(viewer_ur,{homepage:h})),Mr=({id:h,htmlLabel:v,parent:_="manifest"})=>eV.createElement(eV.Fragment,null,eV.createElement("span",{className:"manifest-property-title"},v),eV.createElement("a",{href:h,target:"_blank",id:`iiif-${_}-id`},h)),zr=({metadata:h,parent:v="manifest"})=>h?eV.createElement(eV.Fragment,null,eV.createElement(viewer_xr,{metadata:h,id:`iiif-${v}-metadata`})):eV.createElement(eV.Fragment,null),Fr=({rendering:h})=>(null==h?void 0:h.length)===0?eV.createElement(eV.Fragment,null):eV.createElement(eV.Fragment,null,eV.createElement("span",{className:"manifest-property-title"},"Alternate formats"),eV.createElement(Cr,{rendering:h})),Pr=({requiredStatement:h,parent:v="manifest"})=>h?eV.createElement(eV.Fragment,null,eV.createElement(Ir,{requiredStatement:h,id:`iiif-${v}-required-statement`})):eV.createElement(eV.Fragment,null),Vr=({rights:h})=>h?eV.createElement(eV.Fragment,null,eV.createElement("span",{className:"manifest-property-title"},"Rights"),eV.createElement("a",{href:h,target:"_blank"},h)):eV.createElement(eV.Fragment,null),Hr=({seeAlso:h})=>(null==h?void 0:h.length)===0?eV.createElement(eV.Fragment,null):eV.createElement(eV.Fragment,null,eV.createElement("span",{className:"manifest-property-title"},"See Also"),eV.createElement(viewer_Tr,{seeAlso:h})),Br=({summary:h,parent:v="manifest"})=>h?eV.createElement(eV.Fragment,null,eV.createElement(Rr,{summary:h,as:"p",id:`iiif-${v}-summary`})):eV.createElement(eV.Fragment,null),Or=({label:h,thumbnail:v})=>(null==v?void 0:v.length)===0?eV.createElement(eV.Fragment,null):eV.createElement(eV.Fragment,null,eV.createElement(viewer_vt,{altAsLabel:h||{none:["resource"]},thumbnail:v,style:{backgroundColor:"#6663",objectFit:"cover"}})),Dr=()=>{let h=viewer_I(),{activeManifest:v,vault:_}=h,[b,A]=(0,eV.useState)(),[S,C]=(0,eV.useState)([]),[w,O]=(0,eV.useState)([]),[L,M]=(0,eV.useState)([]),[F,U]=(0,eV.useState)([]);return(0,eV.useEffect)(()=>{var h,b,S,w;let L=_.get(v);A(L),(null==(h=L.homepage)?void 0:h.length)>0&&C(_.get(L.homepage)),(null==(b=L.seeAlso)?void 0:b.length)>0&&O(_.get(L.seeAlso)),(null==(S=L.rendering)?void 0:S.length)>0&&M(_.get(L.rendering)),(null==(w=L.thumbnail)?void 0:w.length)>0&&U(_.get(L.thumbnail))},[v,_]),b?eV.createElement(cU,null,eV.createElement(cH,null,eV.createElement(Or,{thumbnail:F,label:b.label}),eV.createElement(Br,{summary:b.summary}),eV.createElement(zr,{metadata:b.metadata}),eV.createElement(Pr,{requiredStatement:b.requiredStatement}),eV.createElement(Vr,{rights:b.rights}),eV.createElement(Lr,{homepage:S}),eV.createElement(Hr,{seeAlso:w}),eV.createElement(Fr,{rendering:L}),eV.createElement(Mr,{id:b.id,htmlLabel:"IIIF Manifest"}))):eV.createElement(eV.Fragment,null)},_r=({activeCanvas:h,annotationResources:v,searchServiceUrl:_,setContentSearchResource:b,contentSearchResource:A})=>{let S=viewer_z(),C=viewer_I(),{isAutoScrolling:w,isUserScrolling:O,vault:L,configOptions:M,plugins:F}=C,{informationPanel:U}=M,[$,G]=(0,eV.useState)(),j=null==U?void 0:U.renderAbout,Q=null==U?void 0:U.renderAnnotation,X=L.get({id:h,type:"Canvas"}),K=null==U?void 0:U.renderContentSearch,{pluginsWithInfoPanel:Z}=function(h){let v=[];return h.forEach(h=>{var _;null!=(_=h.informationPanel)&&_.component&&v.push(h)}),{pluginsWithInfoPanel:v}}(F);return(0,eV.useEffect)(()=>{if(!$){if(null!=U&&U.defaultTab){let h=["manifest-about","manifest-content-search"];X.annotations.length>0&&X.annotations.forEach(v=>h.push(v.id)),h.includes(null==U?void 0:U.defaultTab)?G(U.defaultTab):G("manifest-about")}else j?G("manifest-about"):K?G("manifest-content-search"):v&&(null==v?void 0:v.length)>0?G(v[0].id):F.length>0&&G(F[0].id)}},[null==U?void 0:U.defaultTab,h,$,j,K,v,A,null==X?void 0:X.annotations,F]),eV.createElement(cE,{"data-testid":"information-panel",defaultValue:$,onValueChange:h=>{G(h)},orientation:"horizontal",value:$,className:"clover-viewer-information-panel"},eV.createElement(cv,{"aria-label":"select chapter","data-testid":"information-panel-list"},j&&eV.createElement(cT,{value:"manifest-about"},"About"),K&&A&&eV.createElement(cT,{value:"manifest-content-search"},eV.createElement(viewer_N,{label:A.label})),Q&&v&&v.map((h,v)=>eV.createElement(cT,{key:v,value:h.id},eV.createElement(viewer_N,{label:h.label}))),Z&&Z.map((h,v)=>{var _;return eV.createElement(cT,{key:v,value:h.id},eV.createElement(viewer_N,{label:null==(_=h.informationPanel)?void 0:_.label}))})),eV.createElement(c_,{handleScroll:function(){if(!w){clearTimeout(O);let h=setTimeout(()=>{S({type:"updateUserScrolling",isUserScrolling:void 0})},1500);S({type:"updateUserScrolling",isUserScrolling:h})}}},j&&eV.createElement(cy,{value:"manifest-about"},eV.createElement(Dr,null)),K&&A&&eV.createElement(cy,{value:"manifest-content-search"},eV.createElement(viewer_rr,{searchServiceUrl:_,setContentSearchResource:b,activeCanvas:h,annotationPage:A})),Q&&v&&v.map(h=>eV.createElement(cy,{key:h.id,value:h.id},eV.createElement(jn,{annotationPage:h}))),Z&&Z.map((h,v)=>(function(h,v){var _,b;let A=null==(_=null==h?void 0:h.informationPanel)?void 0:_.component;return void 0===A?eV.createElement(eV.Fragment,null):eV.createElement(cy,{key:v,value:h.id},eV.createElement(ErrorBoundary,{FallbackComponent:viewer_ke},eV.createElement(A,{...null==(b=null==h?void 0:h.informationPanel)?void 0:b.componentProps,canvas:X,useViewerDispatch:viewer_z,useViewerState:viewer_I})))})(h,v))))},c0=cr("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),c1=cr("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),c2=cr("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),c3=cr("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),c4=cr("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${c0}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),qr=(h,v)=>{(0,eV.useEffect)(()=>{function r(_){_.key===h&&v()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},Zr=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Arrow Back"),eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),Xr=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Arrow Forward"),eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),Yr=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Close"),eV.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Jr=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eV.createElement("title",null,"Search"),eV.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),Kr=({handleCanvasToggle:h,handleFilter:v,activeIndex:_,canvasLength:b})=>{let[A,S]=(0,eV.useState)(!1),[C,w]=(0,eV.useState)(!1),[O,L]=(0,eV.useState)(!1);return(0,eV.useEffect)(()=>{L(0===_),_===b-1?w(!0):w(!1)},[_,b]),qr("Escape",()=>{S(!1),v("")}),eV.createElement(c4,{isToggle:A},eV.createElement(c0,null,A&&eV.createElement(c1,{autoFocus:!0,onChange:h=>v(h.target.value),placeholder:"Search"}),!A&&eV.createElement(c3,null,eV.createElement(c2,{onClick:()=>h(-1),disabled:O,type:"button"},eV.createElement(Zr,null)),eV.createElement("span",null,_+1," of ",b),eV.createElement(c2,{onClick:()=>h(1),disabled:C,type:"button"},eV.createElement(Xr,null))),eV.createElement(c2,{onClick:()=>{S(h=>!h),v("")},type:"button"},A?eV.createElement(Yr,null):eV.createElement(Jr,null))))},c5=cr(lO.fC,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),c6=cr("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),viewer_L=h=>eV.createElement(c6,{...h,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},h.children);viewer_L.Title=({children:h})=>eV.createElement("title",null,h),viewer_L.Add=()=>eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),viewer_L.Audio=()=>eV.createElement(eV.Fragment,null,eV.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),eV.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),eV.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),viewer_L.Close=()=>eV.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),viewer_L.Download=()=>eV.createElement(eV.Fragment,null,eV.createElement("path",{d:"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 272l80 80 80-80M256 48v288"})),viewer_L.Image=()=>eV.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),viewer_L.Video=()=>eV.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});let c8=ca({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),c9=ca({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),c7=cr(lZ.Eh,{fill:"$secondaryAlt"}),ui=cr(lZ.x8,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),uo=cr(lZ.VY,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:c9},'&[data-side="bottom"]':{animationName:c8},'&[data-align="end"]':{[`& ${c7}`]:{margin:"0 0.7rem"}}}),us=cr(lZ.xz,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),ul=cr(lZ.fC,{boxSizing:"content-box"}),viewer_j=({children:h})=>eV.createElement(ul,null,h);viewer_j.Trigger=h=>eV.createElement(us,{...h},h.children),viewer_j.Content=h=>eV.createElement(uo,{...h},eV.createElement(c7,null),eV.createElement(ui,null,eV.createElement(viewer_L,{isSmall:!0},eV.createElement(viewer_L.Close,null))),h.children);let uc=cr("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${c6}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),uu=cr("span",{display:"flex"}),ud=cr("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),up=cr("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),uh=cr(lO.ck,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${uu}`]:{position:"absolute",right:"0",bottom:"0",[`& ${uc}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${uu}`]:{[`& ${uc}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),bo=({type:h})=>{switch(h){case"Sound":return eV.createElement(viewer_L.Audio,null);case"Image":default:return eV.createElement(viewer_L.Image,null);case"Video":return eV.createElement(viewer_L.Video,null)}},wo=({canvas:h,canvasIndex:v,isActive:_,thumbnail:b,type:A,handleChange:S})=>eV.createElement(uh,{"aria-checked":_,"data-testid":"media-thumbnail","data-canvas":v,onClick:()=>S(h.id),value:h.id},eV.createElement("figure",null,eV.createElement("div",null,(null==b?void 0:b.id)&&eV.createElement("img",{src:b.id,alt:null!=h&&h.label?viewer_q(h.label):""}),eV.createElement(uu,null,eV.createElement(uc,{isIcon:!0,"data-testid":"thumbnail-tag"},eV.createElement(ud,null),eV.createElement(viewer_L,{"aria-label":A},eV.createElement(bo,{type:A})),["Video","Sound"].includes(A)&&eV.createElement(up,null,viewer_Ue(h.duration))))),(null==h?void 0:h.label)&&eV.createElement("figcaption",{"data-testid":"fig-caption"},eV.createElement(viewer_N,{label:h.label})))),xo=h=>h.body?h.body.type:"Image",Eo=({items:h})=>{let v=viewer_z(),_=viewer_I(),{activeCanvas:b,vault:A}=_,[S,C]=(0,eV.useState)(""),[w,O]=(0,eV.useState)([]),[L,M]=(0,eV.useState)(0),F=eV.useRef(null),g=h=>{b!==h&&v({type:"updateActiveCanvas",canvasId:h})};return(0,eV.useEffect)(()=>{if(!w.length){let v=["Image","Sound","Video"],_=h.map(h=>viewer_Qe(A,h,"painting",v)).filter(h=>h.annotations.length>0);O(_)}},[h,w.length,A]),(0,eV.useEffect)(()=>{w.forEach((h,v)=>{null!=h&&h.canvas&&h.canvas.id===b&&M(v)})},[b,w]),(0,eV.useEffect)(()=>{let h=document.querySelector(`[data-canvas="${L}"]`);if(h instanceof HTMLElement&&F.current){let v=h.offsetLeft-F.current.offsetWidth/2+h.offsetWidth/2;F.current.scrollTo({left:v,behavior:"smooth"})}},[L]),eV.createElement(eV.Fragment,null,eV.createElement(Kr,{handleFilter:h=>C(h),handleCanvasToggle:h=>{let v=w[L+h];null!=v&&v.canvas&&g(v.canvas.id)},activeIndex:L,canvasLength:w.length}),eV.createElement(c5,{"aria-label":"select item","data-testid":"media",ref:F},w.filter(h=>{var v;if(null!=(v=h.canvas)&&v.label){let v=viewer_q(h.canvas.label);if(Array.isArray(v))return v[0].toLowerCase().includes(S.toLowerCase())}}).map((h,v)=>{var _,S;return eV.createElement(wo,{canvas:h.canvas,canvasIndex:v,handleChange:g,isActive:b===(null==(_=null==h?void 0:h.canvas)?void 0:_.id),key:null==(S=null==h?void 0:h.canvas)?void 0:S.id,thumbnail:on(A,h,200,200),type:xo(h.annotations[0])})})))},um=cr("button",{position:"absolute",background:"none",border:"none",cursor:"zoom-in",margin:"0",padding:"0",width:"100%",height:"100%",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),uf=cr("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),ug=cr(uf,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),uE=cr("div",{position:"relative",display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",gap:"1rem",zIndex:"0",overflow:"hidden","&:hover":{[`${ug}`]:{backgroundColor:"$accent"},[`${um}`]:{backgroundColor:"#6662"}}}),uv=cr("div",{width:"100%",height:"100%"}),uT=cr("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),uy=cr(lJ.xz,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),u_=cr(lJ.VY,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),ub=cr(lJ.ck,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),uA=cr(lJ.__,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),ux=cr(lJ.fC,{position:"relative",zIndex:"5",width:"100%"}),viewer_ue=({direction:h,title:v})=>eV.createElement(uT,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eV.createElement("title",null,v),"up"===h&&eV.createElement(()=>eV.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),null),"down"===h&&eV.createElement(()=>eV.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),null)),viewer_kt=({children:h,label:v,maxHeight:_,onValueChange:b,value:A})=>eV.createElement(ux,{onValueChange:b,value:A},eV.createElement(uy,{"data-testid":"select-button"},eV.createElement(lJ.ki,{"data-testid":"select-button-value"}),eV.createElement(lJ.GV,null,eV.createElement(viewer_ue,{direction:"down",title:"select"}))),eV.createElement(lJ.ue,null,eV.createElement(u_,{css:{maxHeight:`${_} !important`},"data-testid":"select-content"},eV.createElement(lJ.Pn,null,eV.createElement(viewer_ue,{direction:"up",title:"scroll up for more"})),eV.createElement(lJ.Q_,null,eV.createElement(lJ.DI,null,v&&eV.createElement(uA,null,eV.createElement(viewer_N,{"data-testid":"select-label",label:v})),h)),eV.createElement(lJ.Jk,null,eV.createElement(viewer_ue,{direction:"down",title:"scroll down for more"}))))),viewer_It=h=>eV.createElement(ub,{...h},h.thumbnail&&eV.createElement(viewer_vt,{thumbnail:h.thumbnail}),eV.createElement(lJ.S_,null,eV.createElement(viewer_N,{label:h.label})),eV.createElement(lJ.o6,null)),uS=cr("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),uC=cr("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),uk=cr("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${uS}`]:{display:"block"}},false:{[`${uS}`]:{display:"none"}}}}}),viewer_U=({className:h,id:v,label:_,children:b})=>{let A=_.toLowerCase().replace(/\s/g,"-");return eV.createElement(uf,{id:v,className:h,"data-testid":"openseadragon-button","data-button":A},eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${v}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eV.createElement("title",{id:`${v}-svg-title`},_),b))},uw=cr("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),zo=()=>eV.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),Fo=()=>eV.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),Po=()=>eV.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Vo=()=>eV.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),viewer_Ve=()=>eV.createElement(eV.Fragment,null,eV.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eV.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),Ho=({_cloverViewerHasPlaceholder:h,config:v})=>{let _=viewer_I(),{activeCanvas:b,plugins:A,vault:S}=_,C=S.get({id:b,type:"Canvas"});return eV.createElement(uw,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},v.showZoomControl&&eV.createElement(eV.Fragment,null,eV.createElement(viewer_U,{id:v.zoomInButton,label:"zoom in"},eV.createElement(zo,null)),eV.createElement(viewer_U,{id:v.zoomOutButton,label:"zoom out"},eV.createElement(Fo,null))),v.showFullPageControl&&eV.createElement(viewer_U,{id:v.fullPageButton,label:"full page"},eV.createElement(Po,null)),v.showRotationControl&&eV.createElement(eV.Fragment,null,eV.createElement(viewer_U,{id:v.rotateRightButton,label:"rotate right"},eV.createElement(viewer_Ve,null)),eV.createElement(viewer_U,{id:v.rotateLeftButton,label:"rotate left"},eV.createElement(viewer_Ve,null))),v.showHomeControl&&eV.createElement(viewer_U,{id:v.homeButton,label:"reset"},eV.createElement(Vo,null)),A.filter(h=>{var v;return null==(v=h.imageViewer)?void 0:v.controls}).map((h,v)=>{var _,b,A,S;let w=null==(b=null==(_=h.imageViewer)?void 0:_.controls)?void 0:b.component;return eV.createElement(w,{key:v,...null==(S=null==(A=null==h?void 0:h.imageViewer)?void 0:A.controls)?void 0:S.componentProps,canvas:C,useViewerDispatch:viewer_z,useViewerState:viewer_I})}))},Bo=({ariaLabel:h,config:v,uri:_,_cloverViewerHasPlaceholder:b,imageType:A,openSeadragonCallback:S})=>{let[C,w]=(0,eV.useState)(),[O,L]=(0,eV.useState)(),M=viewer_z(),F=(0,eV.useRef)(!1);return(0,eV.useEffect)(()=>(F.current||(F.current=!0,O||L(ej(v))),()=>null==O?void 0:O.destroy()),[]),(0,eV.useEffect)(()=>{O&&S&&S(O)},[O,S]),(0,eV.useEffect)(()=>{O&&_!==C&&(null==O||O.forceRedraw(),w(_))},[O,C,_]),(0,eV.useEffect)(()=>{if(C&&O)switch(A){case"simpleImage":null==O||O.addSimpleImage({url:C});break;case"tiledImage":ln(C).then(h=>{try{if(!h)throw Error(`No tile source found for ${C}`);null==O||O.addTiledImage({tileSource:h,success:()=>{"function"==typeof M&&M({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}})}catch(h){console.error(h)}});break;default:null==O||O.close(),console.warn(`Unable to render ${C} in OpenSeadragon as type: "${A}"`)}},[A,C]),eV.createElement(uk,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":v.id,hasNavigator:v.showNavigator},eV.createElement(Ho,{_cloverViewerHasPlaceholder:b,config:v}),v.showNavigator&&eV.createElement(uS,{id:v.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eV.createElement(uC,{id:v.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},Do=({_cloverViewerHasPlaceholder:h=!1,body:v,instanceId:_,isTiledImage:b=!1,label:A,src:S="",openSeadragonCallback:C,openSeadragonConfig:w={}})=>{let O=_||esm_browser_v4(),L="string"==typeof A?A:viewer_P(A),M={id:`openseadragon-${O}`,navigatorId:`openseadragon-navigator-${O}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${O}`,homeButton:`reset-${O}`,rotateLeftButton:`rotateLeft-${O}`,rotateRightButton:`rotateRight-${O}`,zoomInButton:`zoomIn-${O}`,zoomOutButton:`zoomOut-${O}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...w},{imageType:F,uri:U}=v?yn(v):bn(S,b);return U?eV.createElement(ErrorBoundary,{FallbackComponent:viewer_ke},eV.createElement(Bo,{_cloverViewerHasPlaceholder:h,ariaLabel:L,config:M,imageType:F,key:O,uri:U,openSeadragonCallback:C})):null},No=({isMedia:h,label:v,placeholderCanvas:_,setIsInteractive:b})=>{let{vault:A}=viewer_I(),S=viewer_re(A,_),C=S?S[0]:void 0,w=v?viewer_q(v):["placeholder image"];return eV.createElement(um,{onClick:()=>b(!0),isMedia:h,className:"clover-viewer-placeholder"},eV.createElement("img",{src:(null==C?void 0:C.id)||"",alt:w.join(),height:null==C?void 0:C.height,width:null==C?void 0:C.width}))},uI=cr("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),uN=eV.forwardRef((h,v)=>{let _=eV.useRef(null),b=(0,eV.useCallback)(()=>{var h,b;if(null!=(h=v.current)&&h.currentTime&&(null==(b=v.current)?void 0:b.currentTime)>0)return;let A=v.current;if(!A)return;let S=new AudioContext,C=S.createMediaElementSource(A),w=S.createAnalyser(),O=_.current;if(!O)return;O.width=A.offsetWidth,O.height=A.offsetHeight;let L=O.getContext("2d");C.connect(w),w.connect(S.destination),w.fftSize=256;let M=w.frequencyBinCount,F=new Uint8Array(M);setInterval(function(){!function(h,v,_,b,A,S){let C=A/_*2.6,w,O=0;h.getByteFrequencyData(b),v.fillStyle="#000000",v.fillRect(0,0,A,S);for(let h=0;h<_;h++)w=2*b[h],v.fillStyle="rgba(78, 42, 132, 1)",v.fillRect(O,S-w,C,w),O+=C+6}(w,L,M,F,O.width,O.height)},20)},[v]);return eV.useEffect(()=>{v&&v.current&&(v.current.onplay=b)},[b,v]),eV.createElement(uI,{ref:_,role:"presentation"})}),uO=cr("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",height:"100%",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),Go=({resource:h,ignoreCaptionLabels:v})=>{let _=viewer_q(h.label,"en");return Array.isArray(_)&&_.some(h=>v.includes(h))?null:eV.createElement("track",{key:h.id,src:h.id,label:Array.isArray(_)?_[0]:_,srcLang:"en","data-testid":"player-track"})},uR=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],qo=({allSources:h,annotationResources:v,painting:_})=>{let[b,A]=eV.useState(0),[S,C]=eV.useState(),w=eV.useRef(null),O=(null==_?void 0:_.type)==="Sound",L=viewer_I(),{activeCanvas:M,configOptions:F,vault:U}=L;return(0,eV.useEffect)(()=>{if(!_.id||!w.current)return;if(null!=w&&w.current){let h=w.current;h.src=_.id,h.load()}if("m3u8"!==_.id.split(".").pop()&&_.format&&!uR.includes(_.format))return;let h=new nB.ZP({xhrSetup:function(h,v){h.withCredentials=!!F.withCredentials}});return h.attachMedia(w.current),h.on(nB.ZP.Events.MEDIA_ATTACHED,function(){h.loadSource(_.id)}),h.on(nB.ZP.Events.ERROR,function(v,_){if(_.fatal)switch(_.type){case nB.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${v} network error encountered, try to recover`),h.startLoad();break;case nB.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${v} media error encountered, try to recover`),h.recoverMediaError();break;default:h.destroy()}}),()=>{if(h&&w.current){let v=w.current;h.detachMedia(),h.destroy(),v.currentTime=0}}},[F.withCredentials,_.id]),(0,eV.useEffect)(()=>{var h,v,_,A;let S=U.get(M),w=null!=(h=S.accompanyingCanvas)&&h.id?viewer_re(U,null==(v=S.accompanyingCanvas)?void 0:v.id):null,O=null!=(_=S.placeholderCanvas)&&_.id?viewer_re(U,null==(A=S.placeholderCanvas)?void 0:A.id):null;w&&O?C(0===b?O[0].id:w[0].id):(w&&C(w[0].id),O&&C(O[0].id))},[M,b,U]),(0,eV.useEffect)(()=>{if(null!=w&&w.current){let h=w.current;return null==h||h.addEventListener("timeupdate",()=>A(h.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),eV.createElement(uO,{css:{backgroundColor:F.canvasBackgroundColor,maxHeight:F.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper"},eV.createElement("video",{id:"clover-iiif-video",key:_.id,ref:w,controls:!0,height:_.height,width:_.width,crossOrigin:"anonymous",poster:S,style:{maxHeight:F.canvasHeight,position:"relative",zIndex:"1"}},h.map(h=>eV.createElement("source",{src:h.id,type:h.format,key:h.id})),(null==v?void 0:v.length)>0&&v.map(h=>{let v=[];return h.items.forEach(h=>{U.get(h.id).body.forEach(h=>{let _=U.get(h.id);v.push(_)})}),v.map(h=>eV.createElement(Go,{resource:h,ignoreCaptionLabels:F.ignoreCaptionLabels||[],key:h.id}))}),"Sorry, your browser doesn't support embedded videos."),O&&eV.createElement(uN,{ref:w}))},Zo=()=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},eV.createElement("title",{id:"close-svg-title"},"close"),eV.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Xo=({isMedia:h})=>eV.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},eV.createElement("title",{id:"open-svg-title"},"open"),h?eV.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):eV.createElement(eV.Fragment,null,eV.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),eV.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),Yo=({handleToggle:h,isInteractive:v,isMedia:_})=>eV.createElement(ug,{onClick:h,isInteractive:v,isMedia:_,"data-testid":"placeholder-toggle"},v?eV.createElement(Zo,null):eV.createElement(Xo,{isMedia:_})),Jo=({activeCanvas:h,annotationResources:v,isMedia:_,painting:b})=>{var A,S,C,w,O;let[L,M]=eV.useState(0),[F,U]=eV.useState(!1),{configOptions:$,customDisplays:G,openSeadragonViewer:j,vault:Q,viewerId:X}=viewer_I(),K=viewer_z(),Z=Q.get(h),J=null==(A=null==Z?void 0:Z.placeholderCanvas)?void 0:A.id,en=!!J,ei=(null==b?void 0:b.length)>1,ea=J&&!F&&!_,eo=`${X}-${viewer_Yt(h+L)}`,es=G.find(v=>{var _;let A=!1,{canvasId:S,paintingFormat:C}=v.target;if(Array.isArray(S)&&S.length>0&&(A=S.includes(h)),Array.isArray(C)&&C.length>0){let h=(null==(_=b[L])?void 0:_.format)||"";A=!!(h&&C.includes(h))}return A}),el=[];null==(C=null==(S=v[0])?void 0:S.items)||C.forEach(h=>{let v=Q.get(h.id);el.push(v)}),(0,eV.useEffect)(()=>{var h;el&&j&&null!=(h=$.annotationOverlays)&&h.renderOverlays&&(viewer_rt(j,"annotation-overlay"),viewer_tt(j,Z,$.annotationOverlays,el,"annotation-overlay"))},[Z,el,j,$]);let ec=null==(w=null==es?void 0:es.display)?void 0:w.component;return eV.createElement(uE,{className:"clover-viewer-painting"},eV.createElement(uv,{style:{backgroundColor:$.canvasBackgroundColor,height:"auto"===$.canvasHeight?"100%":$.canvasHeight}},J&&!_&&eV.createElement(Yo,{handleToggle:()=>U(!F),isInteractive:F,isMedia:_}),ea&&!_&&eV.createElement(No,{isMedia:_,label:null==Z?void 0:Z.label,placeholderCanvas:J,setIsInteractive:U}),!ea&&!es&&(_?eV.createElement(qo,{allSources:b,painting:b[L],annotationResources:v}):b&&eV.createElement(Do,{_cloverViewerHasPlaceholder:en,body:b[L],instanceId:eo,key:eo,openSeadragonCallback:h=>{h&&(null==j?void 0:j.id)!==`openseadragon-${eo}`&&K({type:"updateOpenSeadragonViewer",openSeadragonViewer:h})},openSeadragonConfig:$.openSeadragon})),!ea&&ec&&eV.createElement(ec,{id:h,annotationBody:b[L],...null==es?void 0:es.display.componentProps})),ei&&eV.createElement(viewer_kt,{value:null==(O=b[L])?void 0:O.id,onValueChange:h=>{let v=b.findIndex(v=>v.id===h);M(v)},maxHeight:"200px"},null==b?void 0:b.map(h=>eV.createElement(viewer_It,{value:null==h?void 0:h.id,key:null==h?void 0:h.id,label:null==h?void 0:h.label}))))},Ko=({activeCanvas:h,annotationResources:v,searchServiceUrl:_,setContentSearchResource:b,contentSearchResource:A,isAudioVideo:S,items:C,painting:w})=>{let{isInformationOpen:O,configOptions:L}=viewer_I(),{informationPanel:M}=L,F=(null==M?void 0:M.renderAbout)&&O,U=(null==M?void 0:M.renderAnnotation)&&v.length>0&&!M.open;return eV.createElement(cd,{className:"clover-viewer-content","data-testid":"clover-viewer-content"},eV.createElement(cp,null,eV.createElement(Jo,{activeCanvas:h,annotationResources:v,isMedia:S,painting:w}),F&&eV.createElement(ch,null,eV.createElement("span",null,O?"View Items":"More Information")),C.length>1&&eV.createElement(cu,{className:"clover-viewer-media-wrapper"},eV.createElement(Eo,{items:C,activeItem:0}))),(F||U)&&eV.createElement(cf,null,eV.createElement(cm,null,eV.createElement(_r,{activeCanvas:h,annotationResources:v,searchServiceUrl:_,setContentSearchResource:b,contentSearchResource:A}))))},uL=cr(viewer_j.Trigger,{width:"30px",padding:"5px"}),uD=cr(viewer_j.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),uP=cr("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),uM=cr("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${ux}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),uF=cr("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),ra=()=>{var h;let v=viewer_z(),_=viewer_I(),{activeManifest:b,collection:A,configOptions:S,vault:C}=_,w=null==S?void 0:S.canvasHeight;return eV.createElement("div",{style:{margin:"0.75rem"}},eV.createElement(viewer_kt,{label:A.label,maxHeight:w,value:b,onValueChange:h=>{v({type:"updateActiveManifest",manifestId:h}),v({type:"updateViewerId",viewerId:esm_browser_v4()})}},null==(h=null==A?void 0:A.items)?void 0:h.map(h=>eV.createElement(viewer_It,{value:h.id,key:h.id,thumbnail:null!=h&&h.thumbnail?C.get(null==h?void 0:h.thumbnail):void 0,label:h.label}))))},oa=(h,v=2500)=>{let[_,b]=(0,eV.useState)(),A=(0,eV.useCallback)(()=>{navigator.clipboard.writeText(h).then(()=>b("copied"),()=>b("failed"))},[h]);return(0,eV.useEffect)(()=>{if(!_)return;let h=setTimeout(()=>b(void 0),v);return()=>clearTimeout(h)},[_]),[_,A]},uB=cr("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),ia=({status:h})=>h?eV.createElement(uB,{"data-copy-status":h},h):null,viewer_He=({textPrompt:h,textToCopy:v})=>{let[_,b]=oa(v);return eV.createElement("button",{onClick:b},h," ",eV.createElement(ia,{status:_}))},la=()=>{let h="#ed1d33",v="#2873ab";return eV.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},eV.createElement("title",null,"IIIF Manifest Options"),eV.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},eV.createElement("g",{transform:"scale(0.1)"},eV.createElement("path",{style:{fill:v},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),eV.createElement("path",{style:{fill:v},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),eV.createElement("path",{style:{fill:h},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),eV.createElement("path",{style:{fill:h},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),eV.createElement("path",{style:{fill:v},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),eV.createElement("path",{style:{fill:v},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),eV.createElement("path",{style:{fill:h},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},uH=cr(l0.fC,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),uU=cr(l0.bU,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),uz=cr("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),u$=cr("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),ua=()=>{var h;let{configOptions:v}=viewer_I(),_=viewer_z(),[b,A]=(0,eV.useState)(null==(h=null==v?void 0:v.informationPanel)?void 0:h.open);return(0,eV.useEffect)(()=>{_({type:"updateInformationOpen",isInformationOpen:b})},[b,_]),eV.createElement(u$,null,eV.createElement(uz,{htmlFor:"information-toggle",css:b?{opacity:"1"}:{}},"More Information"),eV.createElement(uH,{checked:b,onCheckedChange:()=>A(!b),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},eV.createElement(uU,null)))},uG=cr(viewer_j.Trigger,{width:"30px",padding:"5px",marginBottom:"auto"}),uj=cr(uD,{h3:{color:"$primaryAlt",fontSize:"$2",fontWeight:"700",margin:"$2 0"},button:{},"& ul li":{marginBottom:"$1"}});function viewer_Be(h,v){let _=[];if(!h)return _;for(let b of h)if(b.id){let h=v.get(b.id);h&&_.push(h)}return _}function viewer_Oe(h,v){return h.map(({format:h,id:_,label:b})=>{let A=function(h){let{vault:v}=viewer_I();try{let _=h&&v.get(h);if(!_)throw Error(`Vault entity ${h} not found.`);return(null==_?void 0:_["@id"])||(null==_?void 0:_.id)}catch(v){return console.error(v),h}}(_);return{format:h,id:A,label:viewer_P(b)||v}})}let ya=()=>{let{allPages:h,individualPages:v}=function(){let h=function(){let{activeCanvas:h,activeManifest:v,vault:_}=viewer_I(),[b,A]=(0,eV.useState)({root:[],canvas:[]});return(0,eV.useEffect)(()=>{let b=_.get(v),S=_.get(h),C=null==b?void 0:b.rendering,w=null==S?void 0:S.rendering,O=viewer_Be(C,_),L=viewer_Be(w,_);A({root:O,canvas:L})},[h,v,_]),{...b}}(),v=viewer_Oe((null==h?void 0:h.root)||[],"Root Rendering Label"),_=viewer_Oe((null==h?void 0:h.canvas)||[],"Canvas Rendering Label");return{allPages:v,individualPages:_}}(),_=h.length>0||v.length>0,a=h=>{window.open(h,"_blank")};return _?eV.createElement(viewer_j,null,eV.createElement(uG,{"data-testid":"download-button"},eV.createElement(viewer_L,null,eV.createElement(viewer_L.Download,null))),eV.createElement(uj,{"data-testid":"download-content"},v.length>0&&eV.createElement(eV.Fragment,null,eV.createElement("h3",null,"Individual Pages"),eV.createElement("ul",null,v.map(({format:h,id:v,label:_})=>eV.createElement("li",{key:_},eV.createElement("button",{onClick:()=>a(v)},_," (",h,")"))))),h.length>0&&eV.createElement(eV.Fragment,null,eV.createElement("h3",null,"All Pages"),eV.createElement("ul",null,h.map(({format:h,id:v,label:_})=>eV.createElement("li",{key:_},eV.createElement("button",{onClick:()=>a(v)},_," (",h,")"))))))):null},viewer_At=h=>{let n=()=>!!window.matchMedia&&window.matchMedia(h).matches,[v,_]=(0,eV.useState)(n);return(0,eV.useEffect)(()=>{let o=()=>_(n);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)}),v},ba=({manifestId:h,manifestLabel:v})=>{let _=viewer_I(),{collection:b,configOptions:A}=_,{informationPanel:S,showDownload:C,showIIIFBadge:w,showTitle:O}=A,L=C||w||(null==S?void 0:S.renderToggle),M=viewer_At(l7.sm);return eV.createElement(uM,{className:"clover-viewer-header"},null!=b&&b.items?eV.createElement(ra,null):eV.createElement(uP,{className:O?"":"visually-hidden"},O&&eV.createElement(viewer_N,{label:v,className:"label"})),L&&eV.createElement(uF,null,C&&eV.createElement(ya,null),w&&eV.createElement(viewer_j,null,eV.createElement(uL,null,eV.createElement(la,null)),eV.createElement(uD,null,(null==b?void 0:b.items)&&eV.createElement("button",{onClick:h=>{h.preventDefault(),window.open(b.id,"_blank")}},"View Collection"),eV.createElement("button",{onClick:v=>{v.preventDefault(),window.open(h,"_blank")}},"View Manifest")," ",(null==b?void 0:b.items)&&eV.createElement(viewer_He,{textPrompt:"Copy Collection URL",textToCopy:b.id}),eV.createElement(viewer_He,{textPrompt:"Copy Manifest URL",textToCopy:h}))),(null==S?void 0:S.renderToggle)&&!M&&eV.createElement(ua,null)))},wa=(h=!1)=>{let[v,_]=(0,eV.useState)(h);return(0,eV.useLayoutEffect)(()=>{if(!v)return;let h=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=h}},[v]),(0,eV.useEffect)(()=>{v!==h&&_(h)},[h]),[v,_]},xa=({manifest:h,theme:v,iiifContentSearchQuery:_})=>{var b;let A=viewer_I(),S=viewer_z(),{activeCanvas:C,isInformationOpen:w,vault:O,contentSearchVault:L,configOptions:M,openSeadragonViewer:F}=A,U=(null==M?void 0:M.canvasHeight)&&["100%","auto"].includes(null==M?void 0:M.canvasHeight),[$,G]=(0,eV.useState)(!1),[j,Q]=(0,eV.useState)(!1),[X,K]=(0,eV.useState)([]),[Z,J]=(0,eV.useState)([]),[en,ei]=(0,eV.useState)(),[ea,eo]=wa(!1),es=viewer_At(l7.sm),[el,ec]=(0,eV.useState)(),eu=(0,eV.useCallback)(h=>{S({type:"updateInformationOpen",isInformationOpen:h})},[S]);(0,eV.useEffect)(()=>{var h;null!=(h=null==M?void 0:M.informationPanel)&&h.open&&eu(!es)},[es,null==(b=null==M?void 0:M.informationPanel)?void 0:b.open,eu]),(0,eV.useEffect)(()=>{if(!es){eo(!1);return}eo(w)},[w,es,eo]),(0,eV.useEffect)(()=>{let h=viewer_re(O,C);h&&(Q(["Sound","Video"].indexOf(h[0].type)>-1),K(h)),rn(O,C).then(h=>{h.length>0&&S({type:"updateInformationOpen",isInformationOpen:!0}),J(h),G(0!==h.length)})},[C,Z.length,O,S]);let ed=h.service.some(h=>"SearchService2"===h.type);return(0,eV.useEffect)(()=>{if(ed){let v=h.service.find(h=>"SearchService2"===h.type);v&&ec(v.id)}},[h,ed]),(0,eV.useEffect)(()=>{var h,v,b;el&&(null==(h=M.informationPanel)?void 0:h.renderContentSearch)!==!1&&viewer_Ke(L,el,null==(b=null==(v=M.localeText)?void 0:v.contentSearch)?void 0:b.tabLabel,_).then(h=>{ei(h)})},[el]),(0,eV.useEffect)(()=>{if(!F||!en)return;let h=O.get({id:C,type:"Canvas"});viewer_rt(F,"content-search-overlay"),function(h,v,_,b,A){var S;if(!(null!=v&&v.items)||(null==v?void 0:v.items.length)===0)return;let C=[];v.items.forEach(v=>{let _=h.get(v.id);"string"==typeof _.target&&_.target.startsWith(b.id)&&C.push(_)}),_&&null!=(S=A.contentSearch)&&S.overlays&&viewer_tt(_,b,A.contentSearch.overlays,C,"content-search-overlay")}(L,en,F,h,M)},[F,en]),eV.createElement(ErrorBoundary,{FallbackComponent:viewer_ke},eV.createElement(cg,{className:`${v} clover-viewer`,css:{background:null==M?void 0:M.background},"data-body-locked":ea,"data-absolute-position":U,"data-information-panel":$,"data-information-panel-open":w},eV.createElement(sW,{open:w,onOpenChange:eu},eV.createElement(ba,{manifestLabel:h.label,manifestId:h.id}),eV.createElement(Ko,{activeCanvas:C,painting:X,annotationResources:Z,searchServiceUrl:el,setContentSearchResource:ei,contentSearchResource:en,items:h.items,isAudioVideo:j}))))},uV={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function viewer_Ne(h,v=null){return{ok:!1,status:h.status,statusText:h.statusText,headers:h.getAllResponseHeaders(),data:v||h.statusText,json:()=>JSON.parse(v||h.statusText)}}let Ba=({canvasIdCallback:h=()=>{},customDisplays:v=[],plugins:_=[],customTheme:b,iiifContent:A,id:S,manifestId:C,options:w,iiifContentSearchQuery:O})=>{var L,M,F;let U=A;S&&(U=S),C&&(U=C);let $=viewer_Xe(null==(M=null==(L=null==w?void 0:w.informationPanel)?void 0:L.vtt)?void 0:M.autoScroll);return eV.createElement(nn,{initialState:{...l3,customDisplays:v,plugins:_,isAutoScrollEnabled:$.enabled,isInformationOpen:!!(null!=(F=null==w?void 0:w.informationPanel)&&F.open),vault:new Vault({customFetcher:h=>(function(h,v=uV){let _=v.headers||uV.headers;return new Promise((b,A)=>{let S=new XMLHttpRequest;S.open("get",h),S.withCredentials=v.withCredentials,_&&Object.keys(_).forEach(h=>S.setRequestHeader(h,_[h])),S.onload=()=>{b({ok:S.status>=200&&S.status<300,status:S.status,statusText:S.statusText,headers:S.getAllResponseHeaders(),data:S.responseText,json:()=>JSON.parse(S.responseText)})},S.onerror=()=>{A(viewer_Ne(S,"Failed to make request."))},S.ontimeout=()=>{A(viewer_Ne(S,"Request took longer than expected."))},S.send()})})(h,{withCredentials:null==w?void 0:w.withCredentials,headers:null==w?void 0:w.requestHeaders}).then(h=>JSON.parse(h.data))})}},eV.createElement(Ca,{iiifContent:U,canvasIdCallback:h,customTheme:b,options:w,iiifContentSearchQuery:O}))},Ca=({canvasIdCallback:h,customTheme:v,iiifContent:_,options:b,iiifContentSearchQuery:A})=>{let S=viewer_z(),C=viewer_I(),{activeCanvas:w,activeManifest:O,isLoaded:L,vault:M}=C,[F,U]=(0,eV.useState)(),[$,G]=(0,eV.useState)(),j={};return v&&(j=(0,eY.jG)("custom",v)),(0,eV.useEffect)(()=>{h&&h(w)},[w,h]),(0,eV.useEffect)(()=>{O&&M.loadManifest(O).then(h=>{G(h),S({type:"updateActiveCanvas",canvasId:dn(_,h)})}).catch(h=>{console.error(`Manifest failed to load: ${h}`)}).finally(()=>{S({type:"updateIsLoaded",isLoaded:!0})})},[_,O,S,M]),(0,eV.useEffect)(()=>{S({type:"updateConfigOptions",configOptions:b});let h=cn(_);M.load(h).then(h=>{U(h)}).catch(h=>{console.error(`The IIIF resource ${_} failed to load: ${h}`)})},[S,_,b,M]),(0,eV.useEffect)(()=>{if((null==F?void 0:F.type)==="Collection"){S({type:"updateCollection",collection:F});let h=mn(_,F);h&&S({type:"updateActiveManifest",manifestId:h})}else(null==F?void 0:F.type)==="Manifest"&&S({type:"updateActiveManifest",manifestId:F.id})},[S,_,F]),L?$&&$.items?0===$.items.length?(console.log(`The IIIF manifest ${_} does not contain canvases.`),eV.createElement(eV.Fragment,null)):eV.createElement(xa,{manifest:$,theme:j,key:$.id,iiifContentSearchQuery:A}):(console.log(`The IIIF manifest ${_} failed to load.`),eV.createElement(eV.Fragment,null)):eV.createElement(eV.Fragment,null,"Loading")},helpers_u=h=>{var v,_,b,A,S;let C={id:"string"==typeof h?h:h.source};if("string"==typeof h){if(h.includes("#xywh=")){let v=h.split("#xywh=");if(v&&v[1]){let[h,_,b,A]=v[1].split(",").map(h=>Number(h));C={id:v[0],rect:{x:h,y:_,w:b,h:A}}}}else if(h.includes("#t=")){let v=h.split("#t=");v&&v[1]&&(C={id:v[0],t:v[1]})}}else if("object"==typeof h){if((null==(v=h.selector)?void 0:v.type)==="PointSelector")C={id:h.source,point:{x:h.selector.x,y:h.selector.y}};else if((null==(_=h.selector)?void 0:_.type)==="SvgSelector")C={id:h.source,svg:h.selector.value};else if((null==(b=h.selector)?void 0:b.type)==="FragmentSelector"&&null!=(A=h.selector)&&A.value.includes("xywh=")&&"Canvas"==h.source.type&&h.source.id){let v=null==(S=h.selector)?void 0:S.value.split("xywh=");if(v&&v[1]){let[_,b,A,S]=v[1].split(",").map(h=>Number(h));C={id:h.source.id,rect:{x:_,y:b,w:A,h:S}}}}}return C},uW=window.OpenSeadragon;if(!uW&&!(uW=ej))throw Error("OpenSeadragon is missing.");let uq="http://www.w3.org/2000/svg";uW.Viewer&&(uW.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new a(this)),this._svgOverlayInfo});let a=function(h){let v=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(uq,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(uq,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){v.resize()}),this._viewer.addHandler("open",function(){v.resize()}),this._viewer.addHandler("rotate",function(){v.resize()}),this._viewer.addHandler("flip",function(){v.resize()}),this._viewer.addHandler("resize",function(){v.resize()}),this.resize()};a.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new uW.Point(0,0),!0),v=this._viewer.viewport.getZoom(!0),_=this._viewer.viewport.getRotation(),b=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,S=A*v,C=S;b&&(S=-S,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+S+","+C+") rotate("+_+")")},onClick:function(h,v){new uW.MouseTracker({element:h,clickHandler:v}).setTracking(!0)}};let uY={parseAnnotationTarget:helpers_u,createOpenSeadragonRect:function(h,v,_){let b,A,S=40,C=40;v.rect&&(b=v.rect.x,A=v.rect.y,S=v.rect.w,C=v.rect.h),v.point&&(b=v.point.x,A=v.point.y),helpers_u.svg;let w=1/h.width;return new ej.Rect(b*w-S*w/2*(_-1),A*w-C*w/2*(_-1),S*w*_,C*w*_)}};var uQ=Ba}}]);