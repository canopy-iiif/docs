"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{4388:function(e,t,i){i.d(t,{ki:function(){return convertPresentation2}});var r=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,i),i);let n=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];let Traverse=class Traverse{constructor(e,t={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...e},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...t}}static all(e){return new Traverse({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let t=[...(e.manifests||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Manifest"}:e),...(e.collections||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Collection"}:e),...e.members||[]];delete e.collections,delete e.manifests,e.members=t}return e.manifests&&(e.manifests=e.manifests.map(e=>this.traverseManifest("string"==typeof e?{"@id":e,"@type":"sc:Manifest"}:e))),e.collections&&(e.collections=e.collections.map(e=>this.traverseCollection("string"==typeof e?{"@id":e,"@type":"sc:Collection"}:e))),e.members&&(e.members=e.members.map(e=>"string"==typeof e?e:this.traverseUnknown(e))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(e=>this.traverseSequence(e))),e.structures&&(e.structures=e.structures.map(e=>this.traverseRange(e))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(e=>this.traverseCanvas(e))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(e=>this.traverseAnnotation(e))),e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let t=[...(e.ranges||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Range"}:e),...(e.canvases||[]).map(e=>"string"==typeof e?{"@id":e,"@type":"sc:Canvas"}:e),...e.members||[]];delete e.ranges,delete e.canvases,e.members=t.length?t.map(e=>this.traverseUnknown(e)):void 0}return e}traverseAnnotationList(e){let t="string"==typeof e?{"@id":e,"@type":"sc:AnnotationList"}:e;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(t)),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(e=>this.traverseAnnotation(e))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(Array.isArray(e.resource)?e.resource=e.resource.map(e=>this.traverseContentResource(e)):e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(e=>this.traverseAnnotationList(e))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&"rdf:nil"!==e.default&&(e.default=this.traverseContentResource(e.default)),e.item&&"rdf:nil"!==e.item&&(e.item=e.item.map(e=>this.traverseContentResource(e))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return"oa:Choice"===e["@type"]?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||"string"==typeof e)return e;switch(function(e){if(null==e)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw Error("Array is not a valid entity");if("object"!=typeof e)throw Error(`${typeof e} is not a valid entity`);if("string"==typeof e["@type"]){let t=n.indexOf(e["@type"]);if(-1!==t)return n[t]}if(e.profile)return"Service";if(e.format||e["@type"])return"ContentResource";throw Error("Resource type is not known")}(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"sc:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let t=Array.isArray(e),i=Array.isArray(e)?e:[e],r=[];for(let e of i)"string"==typeof e?r.push(this.traverseContentResource({"@id":e,"@type":"dctypes:Image"})):r.push(this.traverseContentResource(e));return t||this.options.convertPropsToArray?r:r[0]}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let t=Array.isArray(e),i=Array.isArray(e)?e:[e],r=[];for(let e of i)r.push(this.traverseService(e));return t||this.options.convertPropsToArray?r:r[0]}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&("string"==typeof e.within||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&("string"==typeof e.startCanvas?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&("string"==typeof e.contentLayer?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,t){if(!Array.isArray(e)){if(!this.options.convertPropsToArray)return this.traverseType(e,t);e=[e]}return e.map(e=>this.traverseType(e,t))}traverseType(e,t){return t.reduce((e,t)=>{let i=t(e);return void 0!==i||this.options.allowUndefinedReturn?i:e},e)}};let a="http://library.stanford.edu/iiif/image-api/compliance.html#level1",s="http://library.stanford.edu/iiif/image-api/compliance.html#level2",o="http://library.stanford.edu/iiif/image-api/conformance.html#level1",l="http://library.stanford.edu/iiif/image-api/conformance.html#level2",p="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",u="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",h="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",v="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",f="http://iiif.io/api/image/1/level1.json",d="http://iiif.io/api/image/1/profiles/level1.json",g="http://iiif.io/api/image/1/level2.json",m="http://iiif.io/api/image/1/profiles/level2.json",y="http://iiif.io/api/image/2/level1.json",A="http://iiif.io/api/image/2/profiles/level1.json",b="http://iiif.io/api/image/2/level2.json",C="http://iiif.io/api/image/2/profiles/level2.json",x="level1",w="level2",P="http://iiif.io/api/image/2/level1",R="http://iiif.io/api/image/2/level2",k=[P,R,a,s,o,l,p,u,h,v,f,d,g,m,y,A,b,C,x,w],I=["http://iiif.io/api/image/2/level0",P,R,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",a,s,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",o,l,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",p,u,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",h,v,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",f,d,g,m,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",y,A,b,C,"level0",x,w],j={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(e,t="none"){if(!e)return{};let i=Array.isArray(e)?e:[e],r={};for(let e of i){if("string"==typeof e){r[t]=r[t]?r[t]:[],r[t].push(e||"");continue}if(!e["@language"]){r[t]=r[t]?r[t]:[],r[t].push(e["@value"]||"");continue}let i=e["@language"];r[i]=r[i]?r[i]:[],r[i].push(e["@value"]||"")}return r}function removePrefix(e){for(let t of["sc","oa","dcterms","dctypes","iiif"])if(e.startsWith(`${t}:`))return e.slice(t.length+1);return e}let M=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(e){let t=e["@id"]||e.id,i=e["@type"]||e.type,r=e.profile||void 0,n=e["@context"]||void 0;if(r){let e=function(e){switch(e){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(r);if(e)return e}if(n){let e=function(e){let t=Array.isArray(e)?e:[e];for(let e of t)switch(e){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(n);if(e)return e}if(i){if(Array.isArray(i)){if(-1!==i.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==i.indexOf("cnt:ContentAsText"))return"TextualBody";i=i[0]}for(let e of["sc","oa","dcterms","dctypes","iiif"])if(i.startsWith(`${e}:`)){i=i.slice(e.length+1);break}switch(i){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(i&&-1!==M.indexOf(i))return i;if(e.format){if(e.format.startsWith("image/"))return"Image";if(e.format.startsWith("text/")||"application/pdf"===e.format)return"Text";if(e.format.startsWith("application/"))return"Dataset"}return t&&(t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".jpeg"))?"Image":i||"unknown"}let _=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,O=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function removeUndefinedProperties(e){for(let t in e)(void 0===e[t]||null===e[t])&&delete e[t];return e}let U=0;function mintNewIdFromResource(e,t){let i=encodeURI(e.id||e["@id"]||"").trim();return i&&t?`${i}/${t}`:i||(U++,`http://example.org/${e["@type"]}${t?`/${t}`:""}/${U}`)}function technicalProperties(e){let t;let i=[...e.behavior||[]];return e.viewingHint&&i.push(e.viewingHint),Array.isArray(e.motivation)?t=e.motivation.map(removePrefix):e.motivation&&(t=removePrefix(e.motivation)),{"@context":e["@context"]?function(e){if(e){let t=Array.isArray(e)?e:[e],i=[];for(let e of t)"http://iiif.io/api/presentation/2/context.json"===e&&i.push("http://iiif.io/api/presentation/3/context.json"),-1===O.indexOf(e)&&i.push(e);if(t.length)return 1===i.length?i[0]:i}}(e["@context"]):void 0,id:(e["@id"]||mintNewIdFromResource(e)).trim(),type:getNewType(e),behavior:i.length?i:void 0,height:e.height?e.height:void 0,width:e.width?e.width:void 0,motivation:t,viewingDirection:e.viewingDirection,profile:e.profile,format:e.format?e.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties(e){var t;let[i,r]=function(e,t="Rights/License",i="none"){let r=null,n=[],a=Array.isArray(e)?e:[e];for(let e of a){let a=e?function(e){let t=e.match(_);return t?t[0]:e}(e):void 0;if(a&&(-1!==a.indexOf("creativecommons.org")||-1!==a.indexOf("rightsstatements.org"))){r=a.startsWith("https://")?`http://${a.slice(8)}`:a;continue}a&&n.push({label:{[i]:[t]},value:{[i]:[a]}})}return[r,n]}(e.license),n=[...e.metadata&&(t=e.metadata)?t.map(e=>({label:convertLanguageMapping(e.label),value:convertLanguageMapping(e.value)})):[],...r];return{rights:i,metadata:n.length?n:void 0,label:e.label?convertLanguageMapping(e.label):void 0,requiredStatement:e.attribution?{label:convertLanguageMapping(j.attributionLabel),value:convertLanguageMapping(e.attribution)}:void 0,navDate:e.navDate,summary:e.description?convertLanguageMapping(e.description):void 0,thumbnail:e.thumbnail}}function linkingProperties(e){var t;let i=e.related?Array.isArray(e.related)?e.related:[e.related]:[],r=e.contentLayer;return{provider:e.logo||i.length?[{id:j.providerId,type:"Agent",homepage:i.length?[i[0]]:void 0,logo:e.logo?Array.isArray(e.logo)?e.logo:[e.logo]:void 0,label:convertLanguageMapping(j.providerName)}]:void 0,partOf:function(e){if(!e.within)return;let t=Array.isArray(e.within)?e.within:[e.within],i=[];for(let r of t)"string"==typeof r?r&&"sc:Manifest"===e["@type"]&&i.push({id:r,type:"Collection"}):r["@id"]&&i.push({id:r["@id"],type:getNewType(r)});return i.length?i:void 0}(e),rendering:e.rendering,seeAlso:e.seeAlso,start:e.startCanvas,service:e.service?Array.isArray(t=e.service)?t:[t]:void 0,supplementary:r?[r]:void 0}}function upgradeContentResource(e){return removeUndefinedProperties({...technicalProperties(e),...descriptiveProperties(e),...linkingProperties(e),chars:e.chars,format:e.format?e.format:void 0,language:e.language})}let $=new Traverse({collection:[function(e){return removeUndefinedProperties({...technicalProperties(e),...descriptiveProperties(e),...linkingProperties(e),items:e.members})}],manifest:[function(e){let t=[],i=[];for(let r of e.sequences||[])r.canvases.length&&t.push(...r.canvases),r.behavior&&i.push(...r.behavior);let r=technicalProperties(e);return i.length&&(r.behavior?r.behavior.push(...i):r.behavior=i),removeUndefinedProperties({...r,...descriptiveProperties(e),...linkingProperties(e),items:t,structures:e.structures})}],canvas:[function(e){return removeUndefinedProperties({...technicalProperties(e),...descriptiveProperties(e),...linkingProperties(e),annotations:e.otherContent&&e.otherContent.length?e.otherContent:void 0,items:e.images&&e.images.length?[{id:mintNewIdFromResource(e,"annotation-page"),type:"AnnotationPage",items:e.images}]:void 0})}],annotationList:[function(e){return removeUndefinedProperties({...technicalProperties(e),...descriptiveProperties(e),...linkingProperties(e),items:e.resources&&e.resources.length?e.resources:void 0})}],sequence:[function(e){return e.canvases&&0!==e.canvases.length?{canvases:e.canvases,behavior:e.viewingHint?[e.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(e){return removeUndefinedProperties({...technicalProperties(e),...descriptiveProperties(e),...linkingProperties(e),target:function upgradeTarget(e){if(Array.isArray(e)){if(e.length>1)return{type:"List",items:e.map(upgradeTarget)};e=e[0]}if("string"==typeof e)return encodeURI(e).trim();if(!("@type"in e))return encodeURI(e["@id"]).trim();{let t;if("string"==typeof e.full)t=e.full;else if("dctypes:Image"===e.full["@type"])t={id:e.full["@id"],type:"Image"};else if("sc:Canvas"===e.full["@type"])t={id:e.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${e.full["@type"]}`);return{type:"SpecificResource",source:t,selector:function upgradeSelector(e){let t=(Array.isArray(e["@type"])&&e["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==e["@type"])&&("chars"in e||"value"in e);if(t)return{type:"SvgSelector",value:"chars"in e?e.chars:e.value};if("oa:FragmentSelector"===e["@type"])return{type:"FragmentSelector",value:e.value};if("oa:Choice"===e["@type"])return[upgradeSelector(e.default),...(Array.isArray(e.item)?e.item:[e.item]).map(upgradeSelector)];if("iiif:ImageApiSelector"==e["@type"])return{type:"ImageApiSelector",region:"region"in e?e.region:void 0,rotation:"rotation"in e?e.rotation:void 0};throw Error(`Unsupported selector type: ${e["@type"]}`)}(e.selector)}}}(e.on),body:Array.isArray(e.resource)?e.resource.map(upgradeContentResource):upgradeContentResource(e.resource)})}],contentResource:[upgradeContentResource],choice:[function(e){let t=[];return e.default&&"rdf:nil"!==e.default&&t.push(e.default),e.item&&"rdf:nil"!==e.item&&t.push(...e.item),{...technicalProperties(e),...descriptiveProperties(e),items:t}}],range:[function(e){return removeUndefinedProperties({...technicalProperties(e),...descriptiveProperties(e),...linkingProperties(e),items:e.members})}],service:[function(e){let{"@id":t,"@type":i,"@context":r,profile:n,...a}=e,s={};return t&&(s["@id"]=t),s["@type"]=getNewType(e),"unknown"===s["@type"]&&(r&&r.length&&(s["@context"]=r),s["@type"]="Service"),n&&(s.profile=function getProfile(e){return Array.isArray(e)?getProfile(e.find(e=>"string"==typeof e)):-1!==I.indexOf(e)?"level2":-1!==k.indexOf(e)?"level1":"string"==typeof e?e:void 0}(n)),removeUndefinedProperties({...s,...a})}],layer:[function(e){return removeUndefinedProperties({...technicalProperties(e),...descriptiveProperties(e),...linkingProperties(e)})}]});function convertPresentation2(e){return e&&e["@context"]&&("http://iiif.io/api/presentation/2/context.json"===e["@context"]||-1!==e["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===e["@context"])||"http://iiif.io/api/image/2/context.json"===e["@context"]?$.traverseUnknown(e):e}},2765:function(e,t,i){i.d(t,{QNj:function(){return n},VS:function(){return r}});let r={slateA1:"#00005503",slateA2:"#00005506",slateA3:"#0000330f",slateA4:"#00002d17",slateA5:"#0009321f",slateA6:"#00002f26",slateA7:"#00062e32",slateA8:"#00083046",slateA9:"#00051d74",slateA10:"#00071b7f",slateA11:"#0007149f",slateA12:"#000509e3"},n={indigo1:"#fdfdfe",indigo2:"#f7f9ff",indigo3:"#edf2fe",indigo4:"#e1e9ff",indigo5:"#d2deff",indigo6:"#c1d0ff",indigo7:"#abbdf9",indigo8:"#8da4ef",indigo9:"#3e63dd",indigo10:"#3358d4",indigo11:"#3a5bc7",indigo12:"#1f2d5c"}},1782:function(e,t,i){i.d(t,{ZP:function(){return L}});var r=i(7294),n="undefined"==typeof window?r.useEffect:r.useLayoutEffect,a="__wrap_b",s="__wrap_n",o="__wrap_o",S=(e,t,i)=>{let r=(i=i||document.querySelector(`[data-br="${e}"]`)).parentElement,c=e=>i.style.maxWidth=e+"px";i.style.maxWidth="";let n=r.clientWidth,a=r.clientHeight,s=n/2-.25,o=n+.5,l;if(n){for(c(s),s=Math.max(i.scrollWidth,s);s+1<o;)c(l=Math.round((s+o)/2)),r.clientHeight===a?o=l:s=l;c(o*t+n*(1-t))}i.__wrap_o||"undefined"!=typeof ResizeObserver&&(i.__wrap_o=new ResizeObserver(()=>{self.__wrap_b(0,+i.dataset.brr,i)})).observe(r)},l=S.toString(),T=(e,t,i="")=>(i&&(i=`self.${s}!=1&&${i}`),r.createElement("script",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:(e?"":`self.${s}=self.${s}||(self.CSS&&CSS.supports("text-wrap","balance")?1:2);self.${a}=${l};`)+i},nonce:t})),p=r.createContext({preferNative:!0,hasProvider:!1}),L=({ratio:e=1,preferNative:t,nonce:i,children:l,...u})=>{let h=r.useMemo(()=>r.useId,[])(),v=r.useRef(),f=r.useContext(p),d=null!=t?t:f.preferNative,g=u.as||"span";return n(()=>{d&&1===self[s]||v.current&&(self[a]=S)(0,e,v.current)},[l,d,e]),n(()=>{if(!(d&&1===self[s]))return()=>{if(!v.current)return;let e=v.current[o];e&&(e.disconnect(),delete v.current[o])}},[d]),r.createElement(r.Fragment,null,r.createElement(g,{...u,"data-br":h,"data-brr":e,ref:v,style:{display:"inline-block",verticalAlign:"top",textDecoration:"inherit",textWrap:d?"balance":"initial"},suppressHydrationWarning:!0},l),T(f.hasProvider,i,`self.${a}("${h}",${e})`))}}}]);